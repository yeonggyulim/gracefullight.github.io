<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#682984"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/icons/icon-180x180.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/icons/icon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/icons/icon-16x16.png"><link rel="mask-icon" href="/images/icons/icon-pinned-tab.svg" color="#682984"><link rel="manifest" href="/manifest.json"><meta name="msapplication-config" content="/images/icons/browserconfig.xml"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="EFs9XZuMFGzvOpvRVHI_2bKZs1BmAMxPGmoFxuMu4-o"><meta name="msvalidate.01" content="65AD1E28C0D057CEB3C68FBC0293E55B"><meta name="yandex-verification" content="6672f93d837354fb"><meta name="baidu-site-verification" content="yZEdU1ABcR"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"gracefullight.dev",root:"/",scheme:"Gemini",version:"7.7.2",exturl:!1,sidebar:{position:"left",display:"post",offset:12,onmobile:!1,padding:18},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="풀스택 개발자를 꿈꾸며"><meta property="og:type" content="website"><meta property="og:title" content="Gracefullight"><meta property="og:url" content="https://gracefullight.dev/page/8/index.html"><meta property="og:site_name" content="Gracefullight"><meta property="og:description" content="풀스택 개발자를 꿈꾸며"><meta property="og:locale" content="ko_KR"><meta property="article:author" content="Gracefullight"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://gracefullight.dev/page/8/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!0,isPost:!1}</script><link rel="preconnect" href="https://busuanzi.ibruce.info"><link rel="preconnect" href="https://pagead2.googlesyndication.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><meta name="naver-site-verification" content="a73bfdbae0aa662dfbb30d15a87c1aec78aa9342"><script async src="https://cdn.jsdelivr.net/npm/pwacompat@latest/pwacompat.min.js"></script><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "Person",
    "name": "Gracefullight",
    "gender": "male",
    "url": "https://gracefullight.dev",
    "logo": "https://gracefullight.dev/images/icons/icon-144x144.png",
    "image": "https://gracefullight.dev/images/profile_dog.png",
    "email": "mailto:eks012@gmail.com",
    "jobTitle": "FullStack Developer",
    "memberOf": "Cafe24 Corp",
    "nationality": "Korean",
    "sameAs": [
      "https://github.com/gracefullight",
      "https://www.facebook.com/eunkwang.daniel.shin",
      "https://blog.naver.com/eks020"
    ]
  }</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle=window.adsbygoogle||[]).push({google_ad_client:"ca-pub-3004788392777865",enable_page_level_ads:!0})</script><script async src="https://cdn.onesignal.com/sdks/OneSignalSDK.js"></script><script>var OneSignal=window.OneSignal||[];OneSignal.push(function(){OneSignal.init({appId:"6876bd0f-994b-4d58-9d53-d053e0b2f9f5",autoResubscribe:!0,notifyButton:{enable:!0}}),OneSignal.setDefaultNotificationUrl("https://gracefullight.dev"),OneSignal.registerForPushNotifications()})</script><title>Gracefullight - Computer Scientist</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-89261637-4"></script><script>if(CONFIG.hostname===location.hostname){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-89261637-4")}</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/feed.xml" title="Gracefullight" type="application/rss+xml">
</head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Gracefullight</span> <span class="logo-line-after"><i></i></span></a></div><h1 class="site-subtitle" itemprop="description">Computer Scientist</h1></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>홈</a></li><li class="menu-item menu-item-about"><a href="/profile/" rel="section"><i class="fa fa-fw fa-user"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>태그</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>카테고리</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>아카이브</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>검색</a></li></ul></nav><div class="site-search"><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Searching..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></div></header><div class="reading-progress-bar"></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2018/01/09/%EB%82%98%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%A9%B4%EC%A0%91-(ALL)/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/01/09/%EB%82%98%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%A9%B4%EC%A0%91-(ALL)/" class="post-title-link" itemprop="url">나를 위한 면접 (ALL)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2018-01-09 22:13:40" itemprop="dateCreated datePublished" datetime="2018-01-09T22:13:40+09:00">2018-01-09</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/interview/" itemprop="url" rel="index"><span itemprop="name">interview</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2018/01/09/%EB%82%98%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%A9%B4%EC%A0%91-(ALL)/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/01/09/나를-위한-면접-(ALL)/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>실무에 치이느라 기본적인 걸 까먹을까봐 정리해보자<br><a href="/tags/%EC%A0%95%EB%B3%B4%EC%B2%98%EB%A6%AC/">정보처리</a> 에서 컴퓨터 기초를 보면 되고.<br>지극히 주관적이라 정답이 아닐 수 있습니다</p><h1 id="수학"><a class="markdownIt-Anchor" href="#수학"></a> 수학</h1><h2 id="미적분"><a class="markdownIt-Anchor" href="#미적분"></a> 미적분</h2><p>편미분까진 안물어보더라</p><h2 id="베이지안-확률"><a class="markdownIt-Anchor" href="#베이지안-확률"></a> 베이지안 확률</h2><blockquote><p>사후확률 = 가능도 * 사전확률 / 증거</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 붉은 점이 얼굴에 보일 때 수두 환자일 확률은 어떻게 구할까?</span></span><br><span class="line">P(수두 | 붉은점) = P(붉은 점 | 수두) * P(수두) / P(붉은점)</span><br></pre></td></tr></table></figure><h1 id="자료구조"><a class="markdownIt-Anchor" href="#자료구조"></a> 자료구조</h1><h2 id="b-tree"><a class="markdownIt-Anchor" href="#b-tree"></a> B Tree</h2><blockquote><p>m-원 트리의 단점임 한쪽으로 편중된 트리를 생성되는 경우를 보완하고자 루트노드로부터 리프노드의 레벨을 같도록 유지한 트리</p></blockquote><table><thead><tr><th>BASIS FOR COMPARISON</th><th>B-TREE</th><th>BINARY TREE</th></tr></thead><tbody><tr><td>Essential constraint</td><td>A node can have at max M number of child nodes(where M is the order of the tree).</td><td>A node can have at max 2 number of subtrees.</td></tr><tr><td>Used</td><td>It is used when data is stored on disk.</td><td>It is used when records and data are stored in RAM.</td></tr><tr><td>Height of the tree</td><td>logM N (where m is the order of the M-way tree)</td><td>log2 N</td></tr><tr><td>Application</td><td>Code indexing data structure in many DBMS.</td><td>Code optimization, Huffman coding, etc.</td></tr></tbody></table><p>space complexity B-tree is O(n).<br>Insertion and deletion time complexity is O(logn).</p><p><a href="https://techdifferences.com/difference-between-b-tree-and-binary-tree.html" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h3 id="b-tree-2"><a class="markdownIt-Anchor" href="#b-tree-2"></a> B+ Tree</h3><blockquote><p>B+은 index node와 data node로 구성</p></blockquote><p><a href="http://potatoggg.tistory.com/174" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h3 id="b-tree-3"><a class="markdownIt-Anchor" href="#b-tree-3"></a> B* Tree</h3><blockquote><p>B-tree의 경우에 <em>각 노드가 최소한 반 이상 차 있어야 하는 조건</em>을 <em>각 노드가 최소한 2/3이상 차있어야 한다</em>로 변경하면 이것이 B*tree이다</p></blockquote><p>공간 활용도를 높일 수 있다.<br><a href="http://egloos.zum.com/LaClefaVerite/v/5639321" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h2 id="binary-tree"><a class="markdownIt-Anchor" href="#binary-tree"></a> Binary Tree</h2><blockquote><p>모든 노드의 차수가 2 이상을 넘지 않는 트리를 말한다, 왼쪽자식노드는 부모노드의 값보다 작이야하며 오른쪽 자식노드는 부모노드의 값보다 커야한다.</p></blockquote><h2 id="binary-search-tree"><a class="markdownIt-Anchor" href="#binary-search-tree"></a> Binary Search Tree</h2><blockquote><p>이진탐색(binary search)과 연결리스트(linked list)를 결합한 자료구조의 일종입니다. 이진탐색의 효율적인 탐색 능력을 유지하면서도, 빈번한 자료 입력과 삭제를 가능하게끔 고안됐습니다.</p></blockquote><ul><li>모든 원소는 서로 다른 유일한 키를 가짐</li><li>왼쪽 서브트리에 있는 원소들의 값은 그 루트의 값보다 작음</li><li>오른쪽 서브트리에 있는 원소의 값들은 그 루트의 값보다 큼</li><li>왼쪽 서브트리와 오른쪽 서브트리도 이진 탐색 트리임</li></ul><p>O(n), 완전 이진 트리에 가까울 수록 O(log2(n))</p><p><a href="https://ratsgo.github.io/data%20structure&amp;algorithm/2017/10/22/bst/" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h2 id="insertion-sort"><a class="markdownIt-Anchor" href="#insertion-sort"></a> Insertion Sort</h2><blockquote><p>앞에서부터 하나씩 비교하여 위치를 삽입</p></blockquote><p>O(n^2)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertionSort</span>(<span class="params">unsortedList</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> len = unsortedList.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">1</span>; i &lt; len; i++) &#123;</span><br><span class="line">    <span class="comment">// Copy of the current element.</span></span><br><span class="line">    <span class="keyword">var</span> tmp = unsortedList[i];</span><br><span class="line">    <span class="comment">// Check through the sorted part and compare with the number in tmp. If large, shift the number</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = i - <span class="number">1</span>; j &gt;= <span class="number">0</span> &amp;&amp; (unsortedList[j] &gt; tmp); j--) &#123;</span><br><span class="line">      <span class="comment">// Shift the number</span></span><br><span class="line">      unsortedList[j + <span class="number">1</span>] = unsortedList[j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Insert the copied number at the correct position</span></span><br><span class="line">    <span class="comment">// in sorted part.</span></span><br><span class="line">    unsortedList[j + <span class="number">1</span>] = tmp;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://codingmiles.com/sorting-algorithms-insertion-sort-using-javascript/" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h2 id="selection-sort"><a class="markdownIt-Anchor" href="#selection-sort"></a> Selection Sort</h2><blockquote><p>하나씩 뒤로 비교하여 최소값을 맨 앞으로 삽입</p></blockquote><p>O(n^2)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selectionSort</span>(<span class="params">items</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> length = items.length;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; length - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// Number of passes</span></span><br><span class="line">    <span class="comment">// min holds the current minimum number position for each pass; i holds the Initial min number</span></span><br><span class="line">    <span class="keyword">var</span> min = i;</span><br><span class="line">    <span class="comment">// Note that j = i + 1 as we only need to go through unsorted array</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = i + <span class="number">1</span>; j &lt; length; j++) &#123;</span><br><span class="line">      <span class="comment">// Compare the numbers</span></span><br><span class="line">      <span class="keyword">if</span> (items[j] &lt; items[min]) &#123;</span><br><span class="line">        <span class="comment">// Change the current min number position if a smaller num is found</span></span><br><span class="line">        min = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (min != i) &#123;</span><br><span class="line">      <span class="comment">// After each pass, if the current min num != initial min num, exchange the position.</span></span><br><span class="line">      <span class="comment">// Swap the numbers</span></span><br><span class="line">      <span class="keyword">var</span> tmp = items[i];</span><br><span class="line">      items[i] = items[min];</span><br><span class="line">      items[min] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="http://codingmiles.com/sorting-algorithms-selection-sort-using-javascript/" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h2 id="quick-sort"><a class="markdownIt-Anchor" href="#quick-sort"></a> Quick Sort</h2><blockquote><p>pivot을 하나 뽑는다 보통 list.length / 2 -1 을 선택한다.<br>pivot 앞에는 pivot보다 작게, pivot 뒤에는 pivot보다 크게 값을 바꿔치고 재귀를 돌린다</p></blockquote><p>최악 O(n^2), 평균 O(nlogn)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort</span><span class="params">(x)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> len(x) &lt;= <span class="number">1</span>:</span><br><span class="line">      <span class="keyword">return</span> x</span><br><span class="line"></span><br><span class="line">  <span class="comment"># // 연산자는 나누고 소숫점을 버림</span></span><br><span class="line">  pivot = x[len(x) // <span class="number">2</span>]</span><br><span class="line">  less = []</span><br><span class="line">  more = []</span><br><span class="line">  equal = []</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> a <span class="keyword">in</span> x:</span><br><span class="line">      <span class="keyword">if</span> a &lt; pivot:</span><br><span class="line">          less.append(a)</span><br><span class="line">      <span class="keyword">elif</span> a &gt; pivot:</span><br><span class="line">          more.append(a)</span><br><span class="line">      <span class="keyword">else</span>:</span><br><span class="line">          equal.append(a)</span><br><span class="line">  <span class="keyword">return</span> quicksort(less) + equal + quicksort(more)</span><br></pre></td></tr></table></figure><h3 id="참고"><a class="markdownIt-Anchor" href="#참고"></a> 참고</h3><ul><li><a href="https://ko.wikipedia.org/wiki/%ED%80%B5_%EC%A0%95%EB%A0%AC" target="_blank" rel="external nofollow noopener noreferrer">퀵 정렬</a></li></ul><h2 id="list"><a class="markdownIt-Anchor" href="#list"></a> List</h2><h2 id="linked-list"><a class="markdownIt-Anchor" href="#linked-list"></a> Linked List</h2><h2 id="list-vs-linked-list"><a class="markdownIt-Anchor" href="#list-vs-linked-list"></a> List vs Linked List</h2><blockquote><p>리스트가 대부분 좋다<br>연결 리스트는 중간에 삽입 삭제시 좋다<br>리스트는 끝에 넣을 떄 좋다</p><p>연결 리스트는 검색시 링크를 따라가므로 비효율적이다.<br>리스트가 순차라 검색시에 좋다.<br>공간의 효율성은 연결 리스트</p></blockquote><p><a href="https://stackoverflow.com/questions/169973/when-should-i-use-a-list-vs-a-linkedlist" target="_blank" rel="external nofollow noopener noreferrer">효율성 비교</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LinkedList</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.head = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LinkedList.prototype.push = <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> node = &#123;</span><br><span class="line">      value: val,</span><br><span class="line">      next: <span class="literal">null</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.head) &#123;</span><br><span class="line">    <span class="keyword">this</span>.head = node;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    current = <span class="keyword">this</span>.head;</span><br><span class="line">    <span class="keyword">while</span> (current.next) &#123;</span><br><span class="line">      current = current.next;</span><br><span class="line">    &#125;</span><br><span class="line">    current.next = node;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> sll = <span class="keyword">new</span> LinkedList();</span><br><span class="line">sll.push(<span class="number">2</span>);</span><br><span class="line">sll.push(<span class="number">3</span>);</span><br><span class="line">sll.push(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// check values by traversing LinkedList</span></span><br><span class="line">sll.head; <span class="comment">// Object &#123;data: 2, next: Object&#125;</span></span><br><span class="line">sll.head.next; <span class="comment">// Object &#123;data: 3, next: Object&#125;</span></span><br><span class="line">sll.head.next.next; <span class="comment">// Object &#123;data: 4, next: null&#125;</span></span><br></pre></td></tr></table></figure><p><a href="http://khan4019.github.io/front-end-Interview-Questions/linkedList.html" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h2 id="graph"><a class="markdownIt-Anchor" href="#graph"></a> Graph</h2><blockquote><p>그래프(Graph)는 연결되어 있는 원소간의 관계를 표현하는 자료구조이다. 나와 연관된 인간 관계를 나타내는 인맥 지도, 수도 배관에 대한 배수 시스템, 물질의 분자 구조 등은 연결 구조가 다양하기 때문에 선형 자료 구조나 트리로는 표현 할 수가 없다.<br>그래프는 연결할 객체를 나타내는 정점(vertex)와 객체를 연결하는 간선(edge)의 집합으로 구성된다. 그래프 G를 _G=(V,E)_로 정의하는데, V는 그래프에 있는 정점들의 집합을 의미하고, E는 정점을 연결하는 간선들의 집합을 의미한다.</p></blockquote><p><a href="https://gist.github.com/singun/1d628d0e3d66c60f9856" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Implement a Graph</span></span><br><span class="line"><span class="comment">// basic operations:</span></span><br><span class="line"><span class="comment">//  - add vertex (node)</span></span><br><span class="line"><span class="comment">//  - add edge (node -&gt; node)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">GraphNode</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.val = val;</span><br><span class="line">  <span class="keyword">this</span>.edges = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Graph</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.vertices = &#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// O(1) operation</span></span><br><span class="line">Graph.prototype.addVertex = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// add vertex only if it does not exist.</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="keyword">this</span>.vertices[val]) &#123;</span><br><span class="line">    <span class="keyword">this</span>.vertices[val] = <span class="keyword">new</span> GraphNode(val);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// O(E) operation - edges</span></span><br><span class="line">Graph.prototype.removeVertex = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.vertices[val]) &#123;</span><br><span class="line">    <span class="comment">// once you remove a vertex, you need to remove all edges pointing</span></span><br><span class="line">    <span class="comment">// to the vertex.</span></span><br><span class="line">    <span class="keyword">delete</span> <span class="keyword">this</span>.vertices[val];</span><br><span class="line"></span><br><span class="line">    <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.vertices).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key, index</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.vertices[key].edges[val]) &#123;</span><br><span class="line">        <span class="keyword">delete</span> <span class="keyword">this</span>.vertices[key].edges[val];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;.bind(<span class="keyword">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// O(1) operation</span></span><br><span class="line">Graph.prototype.getVertex = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.vertices[val];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// O(1) operation</span></span><br><span class="line">Graph.prototype.addEdge = <span class="function"><span class="keyword">function</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// check to see if vertices exists.</span></span><br><span class="line">  <span class="comment">// if it exists, set the edges and be done.</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.vertices[start] &amp;&amp; <span class="keyword">this</span>.vertices[end]) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check to see if edge exists, if it does, increment it's weight</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.vertices[start].edges[end]) &#123;</span><br><span class="line">      <span class="keyword">this</span>.vertices[start].edges[end].weight += <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// edge does not exist, set weight to 1.</span></span><br><span class="line">      <span class="keyword">this</span>.vertices[start].edges[end] = &#123; <span class="attr">weight</span>: <span class="number">1</span> &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// O(1) operation</span></span><br><span class="line">Graph.prototype.removeEdge = <span class="function"><span class="keyword">function</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">this</span>.vertices[start] &amp;&amp; <span class="keyword">this</span>.vertices[end]) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.vertices[start].edges[end]) &#123;</span><br><span class="line">      <span class="keyword">delete</span> <span class="keyword">this</span>.vertices[start].edges[end];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// O(1) operation</span></span><br><span class="line">Graph.prototype.getEdge = <span class="function"><span class="keyword">function</span>(<span class="params">start, end</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.vertices[start].edges[end] || <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Graph.prototype.neighbors = <span class="function"><span class="keyword">function</span>(<span class="params">val</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">this</span>.vertices[val] ? <span class="keyword">this</span>.vertices[val].edges : <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> graph = <span class="keyword">new</span> Graph();</span><br><span class="line"></span><br><span class="line">graph.addVertex(<span class="number">5</span>);</span><br><span class="line">graph.addVertex(<span class="number">2</span>);</span><br><span class="line">graph.addVertex(<span class="number">6</span>);</span><br><span class="line">graph.addVertex(<span class="number">7</span>);</span><br><span class="line">graph.addEdge(<span class="number">2</span>, <span class="number">5</span>);</span><br><span class="line">graph.addEdge(<span class="number">6</span>, <span class="number">7</span>);</span><br><span class="line">graph.addEdge(<span class="number">7</span>, <span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(graph.getEdge(<span class="number">2</span>, <span class="number">5</span>));</span><br><span class="line"><span class="built_in">console</span>.log(graph.getEdge(<span class="number">6</span>, <span class="number">7</span>));</span><br><span class="line">graph.removeVertex(<span class="number">5</span>);</span><br><span class="line"><span class="built_in">console</span>.log(graph.getEdge(<span class="number">2</span>, <span class="number">5</span>));</span><br><span class="line"><span class="built_in">console</span>.log(graph.neighbors(<span class="number">6</span>));</span><br><span class="line"><span class="built_in">console</span>.log(graph.neighbors(<span class="number">5</span>));</span><br></pre></td></tr></table></figure><p><a href="https://gist.github.com/tpae/a6d320f1b5c7e7a8c0c7a3ed752f6de3" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h1 id="알고리즘"><a class="markdownIt-Anchor" href="#알고리즘"></a> 알고리즘</h1><h2 id="시간복잡도"><a class="markdownIt-Anchor" href="#시간복잡도"></a> 시간복잡도</h2><blockquote><p>알고리즘이 문제를 해결하는 데에 얼마나 걸리는 지를 분석하는 것<br>프로그램을 실행시켜 완료하는데 걸리는 시간을 의미</p></blockquote><h3 id="빅오표기법"><a class="markdownIt-Anchor" href="#빅오표기법"></a> 빅오표기법</h3><blockquote><p>실행 시간은 최대한 이만큼 커지지만 더 천천히 커질 수도 있다는 의미인 점근적 표기법 형태를 사용하는 것 (점근 표기법)<br>최악의 경우를 표기하는 방법</p></blockquote><h3 id="빅오에서-n이-의미하는것"><a class="markdownIt-Anchor" href="#빅오에서-n이-의미하는것"></a> 빅오에서 n이 의미하는것</h3><blockquote><p>입력 데이터 개수</p></blockquote><h2 id="최단거리-알고리즘"><a class="markdownIt-Anchor" href="#최단거리-알고리즘"></a> 최단거리 알고리즘</h2><ul><li>다익스트라 알고리즘</li><li>A* 알고리즘</li></ul><h2 id="슬라이딩-윈도우"><a class="markdownIt-Anchor" href="#슬라이딩-윈도우"></a> 슬라이딩 윈도우</h2><p><a href="http://codingdojang.com/scode/439" target="_blank" rel="external nofollow noopener noreferrer">이 문제</a>가 도움 될 듯</p><h1 id="데이터베이스"><a class="markdownIt-Anchor" href="#데이터베이스"></a> 데이터베이스</h1><h2 id="정규화"><a class="markdownIt-Anchor" href="#정규화"></a> 정규화</h2><blockquote><p>관계형 데이터베이스의 설계에서 중복을 최소화하게 데이터를 구조화하는 프로세스</p></blockquote><h3 id="목적"><a class="markdownIt-Anchor" href="#목적"></a> 목적</h3><blockquote><p>이상이 있는 관계를 재구성하여 작고 잘 조직된 관계를 생성하는 것에 있다. 일반적으로 정규화란 크고, 제대로 조직되지 않은 테이블들과 관계들을 작고 잘 조직된 테이블과 관계들로 나누는 것을 포함한다.</p></blockquote><h2 id="비정규화"><a class="markdownIt-Anchor" href="#비정규화"></a> 비정규화</h2><blockquote><p>과도한 정규화로 인해서 테이블의 수가 증가하게 되면, 다수의 JOIN이 발생함에 따라서 성능 저하가 발생할 수 있다. 보통의 경우 정규화 과정을 모두 거친 다음 마지막 단계에서 비정규화를 실시한다. 단, 테이블을 합치는 것만이 비정규화는 아니다.</p></blockquote><h2 id="인덱싱-자료구조"><a class="markdownIt-Anchor" href="#인덱싱-자료구조"></a> 인덱싱 자료구조</h2><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">B-<span class="built_in">Tree</span> 알고리즘은 가장 일반적으로 사용되는 인덱스 알고리즘으로서, 상당히 오래전에 도입된 알고리즘이며 그만큼 성숙해진 상태입니다. B-<span class="built_in">Tree</span> 인덱스는 칼럼의 값을 변형하지 않고, 원래의 값을 이용해 인덱싱하는 알고리즘 입니다.</span><br><span class="line"></span><br><span class="line">Hash 인덱스 알고리즘은 컬럼의 값으로 해시 값을 계산해서 인덱싱하는 알고리즘으로, 매우 빠른 검색을 지원합니다. 하지만 값을 변형해서 인덱싱하므로, 전방(Prefix) 일치와 같이 값의 일부만 검색하고자 할 때는 해시 인덱스를 사용할 수 없습니다. Hash 인덱스는 주로 메모리 기반의 데이터베이스에서 많이 사용합니다.</span><br><span class="line"></span><br><span class="line">Fractal-<span class="built_in">Tree</span> 알고리즘은 B-<span class="built_in">Tree</span>의 단점을 보완하기 위해 고안된 알고리즘입니다. 값을 변형하지 않고 인덱싱하며 범용적인 목적으로 사용할 수 있다는 측면에서 B-<span class="built_in">Tree</span>와 거의 비슷하지만 데이터가 저장되거나 삭제될 때 처리 비용을 상당히 줄일 수 있게 설계된 것이 특징입니다. 아직 B-<span class="built_in">Tree</span> 알고리즘만큼 안정적이고 성숙되진 않았지만 아마도 조만간 B-<span class="built_in">Tree</span> 인덱스의 상당 부분을 대체할 수 있지 않을까 생각합니다.</span><br></pre></td></tr></table></figure><p><a href="http://12bme.tistory.com/138" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h2 id="캐싱시-자료구조"><a class="markdownIt-Anchor" href="#캐싱시-자료구조"></a> 캐싱시 자료구조</h2><blockquote><p>Hash Table and a Linked List</p></blockquote><h2 id="디비-클러스터링"><a class="markdownIt-Anchor" href="#디비-클러스터링"></a> 디비 클러스터링</h2><p><a href="http://bcho.tistory.com/1062" target="_blank" rel="external nofollow noopener noreferrer">개념 참조</a><br><a href="https://okky.kr/article/261535" target="_blank" rel="external nofollow noopener noreferrer">운영 참조</a></p><h2 id="isolation-level"><a class="markdownIt-Anchor" href="#isolation-level"></a> Isolation level</h2><ul><li>Read Uncommitted</li><li>Read Committed</li><li>Repeatable Read</li><li>Serializable</li></ul><p><a href="http://egloos.zum.com/ljlave/v/1530887" target="_blank" rel="external nofollow noopener noreferrer">개념 참조</a><br><a href="https://support.microsoft.com/ko-kr/help/601430" target="_blank" rel="external nofollow noopener noreferrer">이하 참조</a></p><h3 id="read-uncommitted-isolation-level"><a class="markdownIt-Anchor" href="#read-uncommitted-isolation-level"></a> Read Uncommitted Isolation Level</h3><p>SELECT 문장을 수행하는 경우 해당 데이터에 Shared Lock이 걸리지 않는 Level입니다. 따라서, 어떤 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 B라는 아직 완료되지 않은(Uncommitted 혹은 Dirty) 데이터 B를 읽을 수 있습니다.</p><h3 id="read-committed-isolation-level"><a class="markdownIt-Anchor" href="#read-committed-isolation-level"></a> Read Committed Isolation Level</h3><p>SQL Server가 Default로 사용하는 Isolation Level입니다. 이 Level에선 SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸립니다. 그러므로, 어떠한 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 해당 데이터에 접근할 수 없습니다.</p><h3 id="repeatable-read-isolation-level"><a class="markdownIt-Anchor" href="#repeatable-read-isolation-level"></a> Repeatable Read Isolation Level</h3><p>트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정이 불가능합니다. 가령, <code>Select col1 from A where col1 between 1 and 10</code>을 수행하였고 이 범위에 해당하는 데이터가 2건이 있는 경우(col1=1과 5) 다른 사용자가 col1이 1이나 5인 Row에 대한 UPDATE이 불가능합니다. 하지만, col1이 1과 5를 제외한 나머지 이 범위에 해당하는 Row를 INSERT하는 것이 가능합니다.</p><h3 id="serializable-isolation-level"><a class="markdownIt-Anchor" href="#serializable-isolation-level"></a> Serializable Isolation Level</h3><p>트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정 및 입력이 불가능합니다. 예를 들어, Repeatable Read의 경우 1에서 10 사이에 해당되는 데이터에 대한 UPADTE이 가능하였습니다. 하지만 이 Level에서는 UPDATE 작업도 허용하지 않습니다.</p><h2 id="acid"><a class="markdownIt-Anchor" href="#acid"></a> ACID</h2><p>원자성, 일관성, 독립성, 영속성</p><h3 id="atomicity"><a class="markdownIt-Anchor" href="#atomicity"></a> Atomicity</h3><p>트랜잭션 내의 명령은 반드시 완벽히 수행<br>모두가 수행되거나 오류시 전부가 취소되어야함</p><h3 id="consistency"><a class="markdownIt-Anchor" href="#consistency"></a> Consistency</h3><p>DB의 전체 요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야함 (질량 보존 법칙처럼)</p><h3 id="isolation"><a class="markdownIt-Anchor" href="#isolation"></a> Isolation</h3><p>둘 이상의 트랜잭션이 병행 실행되는 경우 다른 트랜잭션 연산이 끼어들 수 없음<br>수행 중인 트랜잭션은 완료될 때 까지 다른 트랜잭션에서 참조 불가.</p><h3 id="durability"><a class="markdownIt-Anchor" href="#durability"></a> Durability</h3><p>시스템이 고장나도 영구적으로 반영</p><h2 id="crud"><a class="markdownIt-Anchor" href="#crud"></a> CRUD</h2><blockquote><p>Create(생성), Read(읽기), Update(갱신), Delete(삭제)</p></blockquote><h2 id="innodb와-myisam의-차이"><a class="markdownIt-Anchor" href="#innodb와-myisam의-차이"></a> InnoDB와 MyISAM의 차이</h2><img data-src="http://idchowto.com/wp-content/uploads/2015/12/db-storage-engine1.png"><h3 id="참고-2"><a class="markdownIt-Anchor" href="#참고-2"></a> 참고</h3><ul><li><a href="http://idchowto.com/?p=20166" target="_blank" rel="external nofollow noopener noreferrer">MyISAM vs InnoDB Storage Engine</a></li><li><a href="http://ojava.tistory.com/25" target="_blank" rel="external nofollow noopener noreferrer">MySQL Storage Engine의 양대산맥! MyISAM vs InnoDB</a></li></ul><h2 id="mariadb가-mysql보다-나은점"><a class="markdownIt-Anchor" href="#mariadb가-mysql보다-나은점"></a> MariaDB가 MySQL보다 나은점</h2><ul><li>많은 스토리지 엔진</li><li>속도 개선</li><li>확장성과 새로운 기능들 (<code>regexp_replace</code> 등)</li><li>오픈 소스 및 활발한 contribute</li></ul><h3 id="참고-3"><a class="markdownIt-Anchor" href="#참고-3"></a> 참고</h3><ul><li><a href="https://mariadb.com/kb/ko/mariadb-vs-mysql-features/" target="_blank" rel="external nofollow noopener noreferrer">공식 홈페이지</a></li><li><a href="https://xdhyix.wordpress.com/2016/03/24/mysql-%EC%97%90%EC%84%9C-mariadb-%EB%A1%9C-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98-%ED%95%B4%EC%95%BC%ED%95%A0-10%EA%B0%80%EC%A7%80-%EC%9D%B4%EC%9C%A0/" target="_blank" rel="external nofollow noopener noreferrer">mysql-에서-mariadb-로-마이그레이션-해야할-10가지-이유</a></li></ul><h2 id="증분-백업"><a class="markdownIt-Anchor" href="#증분-백업"></a> 증분 백업</h2><blockquote><p>정해진 시간을 기준으로 그 이후에 변경된 파일만을 백업하는 방식</p></blockquote><h1 id="서버"><a class="markdownIt-Anchor" href="#서버"></a> 서버</h1><h2 id="서버-로드밸런싱"><a class="markdownIt-Anchor" href="#서버-로드밸런싱"></a> 서버 로드밸런싱</h2><p>설명할 수 있음</p><h2 id="이미지-클러스터링"><a class="markdownIt-Anchor" href="#이미지-클러스터링"></a> 이미지 클러스터링</h2><p><a href="https://ko.wikipedia.org/wiki/K-%ED%8F%89%EA%B7%A0_%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98" target="_blank" rel="external nofollow noopener noreferrer">k-means</a><br>(피벗 추출 후 2진수 비교인데 아직 이해하기가 힘들다, 18년 말에는 딥러닝을 파보자!)</p><h2 id="build-process-설명"><a class="markdownIt-Anchor" href="#build-process-설명"></a> Build Process 설명</h2><h2 id="deploy-server"><a class="markdownIt-Anchor" href="#deploy-server"></a> Deploy Server</h2><h2 id="git-flow"><a class="markdownIt-Anchor" href="#git-flow"></a> Git Flow</h2><blockquote><p>브랜치 관리 전략</p></blockquote><ul><li>feature: develop에서 분기 후 기능 개발 후 develop으로</li><li>develop: 개발 브랜치</li><li>release: master로의 merge를 위한 준비</li><li>hotfix: master의 버그 픽스 후 develop과 master로 빠른 수정</li><li>master: 프로덕션 브랜치</li></ul><img data-src="https://camo.githubusercontent.com/e1dae4f1f5868a9d043d39824761cff9dabe764f/687474703a2f2f646f67666565742e6769746875622e696f2f61727469636c65732f323031312f612d7375636365737366756c2d6769742d6272616e6368696e672d6d6f64656c2f6769742d6272616e6368696e672d6d6f64656c2e706e67"><h3 id="참고-4"><a class="markdownIt-Anchor" href="#참고-4"></a> 참고</h3><ul><li><a href="https://ujuc.github.io/2015/12/16/git-flow-github-flow-gitlab-flow/" target="_blank" rel="external nofollow noopener noreferrer">Git flow, GitHub flow, GitLab flow</a></li></ul><h2 id="was-세팅-및-튜닝"><a class="markdownIt-Anchor" href="#was-세팅-및-튜닝"></a> WAS 세팅 및 튜닝</h2><h1 id="프론트앤드"><a class="markdownIt-Anchor" href="#프론트앤드"></a> 프론트앤드</h1><h2 id="virtual-dom"><a class="markdownIt-Anchor" href="#virtual-dom"></a> Virtual DOM</h2><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">DOM 조작의 실제 문제는 각 조작이 레이아웃 변화, 트리 변화와 렌더링을 일으킨다는겁니다.</span><br><span class="line"></span><br><span class="line"><span class="keyword">Virtual</span> DOM 은 변화가 일어나면 그걸 오프라인 DOM 트리에 적용시키죠. 이 DOM 트리는 렌더링도 되지 않기때문에 연산 비용이 적어요. 연산이 끝나고나면 그 최종적인 변화를 실제 DOM 에 던져주는거에요. 딱 한번만 한는거에요.</span><br><span class="line"></span><br><span class="line">사실, 이 과정은 <span class="keyword">Virtual</span> DOM 이 없이도 이뤄질수 있어요. 그냥, 변화가 있을 때, 그 변화를 묶어서 DOM fragment 에 적용한 다음에 기존 DOM 에 던져주면 돼요.</span><br><span class="line"></span><br><span class="line">그러면, <span class="keyword">Virtual</span> DOM 이 해결 하려고 하는건 무엇이냐? 그 DOM fragment를 관리하는 과정을 수동으로 하나하나 작업 할 필요 없이, 자동화하고 추상화하는거에요. 그 뿐만 아니라, 만약에 이 작업을 여러분들이 직접 한다면, 기존 값 중 어떤게 바뀌었고 어떤게 바뀌지 않았는지 계속 파악하고 있어야하는데 (그렇지 않으면 수정 할 필요가 없는 DOM 트리도 업데이트를 하게 될 수도 있으니까요), 이것도 <span class="keyword">Virtual</span> DOM 이 이걸 자동으로 해주는거에요. 어떤게 바뀌었는지 , 어떤게 바뀌지 않았는지 알아내주죠.</span><br><span class="line"></span><br><span class="line">마지막으로, DOM 관리를 <span class="keyword">Virtual</span> DOM 이 하도록 함으로써, 컴포넌트가 DOM 조작 요청을 할 때 다른 컴포넌트들과 상호작용을 하지 않아도 되고, 특정 DOM 을 조작할 것 이라던지, 이미 조작했다던지에 대한 정보를 공유 할 필요가 없습니다. 즉, 각 변화들의 동기화 작업을 거치지 않으면서도 모든 작업을 하나로 묶어줄 수 있다는거죠.</span><br></pre></td></tr></table></figure><p><a href="https://velopert.com/3236" target="_blank" rel="external nofollow noopener noreferrer">출처</a></p><h2 id="es6"><a class="markdownIt-Anchor" href="#es6"></a> ES6</h2><h2 id="seo"><a class="markdownIt-Anchor" href="#seo"></a> SEO</h2><h2 id="angular"><a class="markdownIt-Anchor" href="#angular"></a> Angular</h2><h2 id="react"><a class="markdownIt-Anchor" href="#react"></a> React</h2><h2 id="vue"><a class="markdownIt-Anchor" href="#vue"></a> Vue</h2></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2018/01/09/Window%EC%97%90%EC%84%9C-aws-cli-%EC%82%AC%EC%9A%A9%EC%8B%9C-bad-interperter-%EC%98%A4%EB%A5%98/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/01/09/Window%EC%97%90%EC%84%9C-aws-cli-%EC%82%AC%EC%9A%A9%EC%8B%9C-bad-interperter-%EC%98%A4%EB%A5%98/" class="post-title-link" itemprop="url">Window에서 aws cli 사용시 bad interperter 오류</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2018-01-09 12:10:59" itemprop="dateCreated datePublished" datetime="2018-01-09T12:10:59+09:00">2018-01-09</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/" itemprop="url" rel="index"><span itemprop="name">server</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/aws/" itemprop="url" rel="index"><span itemprop="name">aws</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2018/01/09/Window%EC%97%90%EC%84%9C-aws-cli-%EC%82%AC%EC%9A%A9%EC%8B%9C-bad-interperter-%EC%98%A4%EB%A5%98/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/01/09/Window에서-aws-cli-사용시-bad-interperter-오류/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>git bash에서 aws cli 명령어를 실행시에 c:\Program Files… bad interpreter 오류가 나오면서 실행이 안 될 때는 다음과 같이 하면 된다.</p><h1 id="해결"><a class="markdownIt-Anchor" href="#해결"></a> 해결</h1><p><strong>~/.bash_profile</strong> 에 aws alias를 추가한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ vi ~/.bash_profile</span><br><span class="line"><span class="comment"># aws script 경로를 강제로 지정한다</span></span><br><span class="line"><span class="built_in">alias</span> aws=<span class="string">'python "C:\Program Files\Python\Scripts\aws"'</span></span><br><span class="line"><span class="comment"># 추가 후 저장</span></span><br><span class="line">$ <span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2018/01/05/Cloudfront-%EC%BA%90%EC%8B%9C-%EC%A7%80%EC%9A%B0%EA%B8%B0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/01/05/Cloudfront-%EC%BA%90%EC%8B%9C-%EC%A7%80%EC%9A%B0%EA%B8%B0/" class="post-title-link" itemprop="url">Cloudfront 캐시 지우기</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2018-01-05 13:41:12" itemprop="dateCreated datePublished" datetime="2018-01-05T13:41:12+09:00">2018-01-05</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/" itemprop="url" rel="index"><span itemprop="name">server</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/aws/" itemprop="url" rel="index"><span itemprop="name">aws</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/aws/cloudfront/" itemprop="url" rel="index"><span itemprop="name">cloudfront</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2018/01/05/Cloudfront-%EC%BA%90%EC%8B%9C-%EC%A7%80%EC%9A%B0%EA%B8%B0/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/01/05/Cloudfront-캐시-지우기/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>클라우드프론트로 static website hosting 을 할 경우에 삭제된 s3 의 파일이 노출되는 경우가 있다.<br>캐싱처리되어서 보이는 현상인데 다음과 같이 해결하면 된다.</p><h1 id="해결"><a class="markdownIt-Anchor" href="#해결"></a> 해결</h1><p><strong>Invalidate</strong> 기능을 사용해서 캐시를 지워버리자.<br><strong>Cloudfront Distributions &gt; ID 클릭 &gt; Invalidations</strong> 에서 <strong>Create Invalidation</strong> 버튼을 누른다.</p><img data-src="https://i.imgur.com/qFe6hKj.png"><p><strong>Object Paths</strong>에 캐시를 지울 경로를 입력한다.<br>예를 들어 assets/js 하위의 소스 맵 파일만 지운다면 다음과 같다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/assets/js/*.map</span><br></pre></td></tr></table></figure><p>입력 후에 <strong>Invalidate</strong> 버튼을 누르면 5~10 분 안에 리스트의 Status 가 Completed 로 변하고 기존 캐시가 사라진다.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2018/01/04/pm2-%EC%95%B1%EC%97%90%EC%84%9C-git-hook%EC%8B%9C%EC%97%90-nginx-502-gateway-timeout-%EC%98%A4%EB%A5%98/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/01/04/pm2-%EC%95%B1%EC%97%90%EC%84%9C-git-hook%EC%8B%9C%EC%97%90-nginx-502-gateway-timeout-%EC%98%A4%EB%A5%98/" class="post-title-link" itemprop="url">pm2 앱에서 git hook시에 nginx 502 gateway timeout 오류</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2018-01-04 10:19:13" itemprop="dateCreated datePublished" datetime="2018-01-04T10:19:13+09:00">2018-01-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/nodejs/" itemprop="url" rel="index"><span itemprop="name">nodejs</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/nodejs/pm2/" itemprop="url" rel="index"><span itemprop="name">pm2</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2018/01/04/pm2-%EC%95%B1%EC%97%90%EC%84%9C-git-hook%EC%8B%9C%EC%97%90-nginx-502-gateway-timeout-%EC%98%A4%EB%A5%98/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/01/04/pm2-앱에서-git-hook시에-nginx-502-gateway-timeout-오류/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="원인"><a class="markdownIt-Anchor" href="#원인"></a> 원인</h1><p>git pull을 hook으로 실행하는데 계속 nginx 502 gateway timeout 오류가 발생해 <code>pm2 logs 앱</code> 또는 <code>nginx log</code>를 계속 추적해도 별다른 에러 로그가 없었다. (<code>exec: Interal Server error</code> 라고만 적혀있었다.)</p><p>삽질 끝에 watch 속성을 사용하고 있는게 문제였다.</p><h1 id="해결"><a class="markdownIt-Anchor" href="#해결"></a> 해결</h1><figure class="highlight js"><figcaption><span>ecosystem.config.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  apps: [</span><br><span class="line">    &#123;</span><br><span class="line">      name: <span class="string">"server"</span>,</span><br><span class="line">      script: <span class="string">"server.js"</span>,</span><br><span class="line">      env_production: &#123;</span><br><span class="line">        NODE_ENV: <span class="string">"production"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      watch: <span class="literal">true</span>,</span><br><span class="line">      ignore_watch: [<span class="string">"node_modules"</span>, <span class="string">".git"</span>, <span class="string">"yarn.lock"</span>, <span class="string">"package-lock.json"</span>],</span><br><span class="line">      exec_mode: <span class="string">"cluster"</span>,</span><br><span class="line">      instances: <span class="string">"max"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>ignore_watch</strong> 속성에 <strong>.git</strong> 폴더와 다른 폴더들이 제대로 예외처리 되었는지 확인해보자.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2018/01/03/nginx-letsencrypt-fastest-way/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/01/03/nginx-letsencrypt-fastest-way/" class="post-title-link" itemprop="url">nginx에 letsencrypt 인증서로 https 가장 빨리 적용하기</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2018-01-03 13:29:33" itemprop="dateCreated datePublished" datetime="2018-01-03T13:29:33+09:00">2018-01-03</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/" itemprop="url" rel="index"><span itemprop="name">server</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/server/nginx/" itemprop="url" rel="index"><span itemprop="name">nginx</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2018/01/03/nginx-letsencrypt-fastest-way/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/01/03/nginx-letsencrypt-fastest-way/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>centos7 기준</p></blockquote><h1 id="nginx-설치"><a class="markdownIt-Anchor" href="#nginx-설치"></a> nginx 설치</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/yum.repos.d/nginx.repo</span><br><span class="line"></span><br><span class="line">[nginx]</span><br><span class="line">name=nginx repo</span><br><span class="line">baseurl=http://nginx.org/packages/centos/7/<span class="variable">$basearch</span>/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br><span class="line"></span><br><span class="line">$ yum makecache</span><br><span class="line">$ yum install -y nginx</span><br><span class="line"></span><br><span class="line">$ vi /etc/nginx/conf.d/default.conf</span><br><span class="line"><span class="comment"># server_name에 도메인 연결</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 문법 체크</span></span><br><span class="line">$ nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># nginx 시작</span></span><br><span class="line">$ systemctl <span class="built_in">enable</span> nginx</span><br><span class="line">$ systemctl start nginx</span><br></pre></td></tr></table></figure><h1 id="certbot-설치"><a class="markdownIt-Anchor" href="#certbot-설치"></a> certbot 설치</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ yum install -y epel-release</span><br><span class="line">$ yum install -y certbot-nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># 인증</span></span><br><span class="line">$ certbot --nginx -d my.domain.com</span><br></pre></td></tr></table></figure><h1 id="ssl-nginx-설정"><a class="markdownIt-Anchor" href="#ssl-nginx-설정"></a> ssl nginx 설정</h1><p><a href="/2017/06/10/CentOS7-LEMP-Stack-%EC%A0%81%EC%9A%A9/#nginx-%EC%97%B0%EB%8F%99">기존 포스트</a> nginx 연동 탭 참조</p><h1 id="renew-설정"><a class="markdownIt-Anchor" href="#renew-설정"></a> renew 설정</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ crontab -e</span><br><span class="line"></span><br><span class="line">1 0 1 * * certbot renew --nginx</span><br><span class="line"></span><br><span class="line">$ systemctl restart crond</span><br></pre></td></tr></table></figure><p><code>systemctl restart nginx</code> 하면 완료</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2018/01/01/react-native-windows-network-setting/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2018/01/01/react-native-windows-network-setting/" class="post-title-link" itemprop="url">리액트 네이티브 윈도우 네트워크 설정 (react-native)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2018-01-01 23:50:31" itemprop="dateCreated datePublished" datetime="2018-01-01T23:50:31+09:00">2018-01-01</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/react/" itemprop="url" rel="index"><span itemprop="name">react</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/react/react-native/" itemprop="url" rel="index"><span itemprop="name">react-native</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2018/01/01/react-native-windows-network-setting/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2018/01/01/react-native-windows-network-setting/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>리액트 네이티브로 개발한 앱을 <code>Expo</code>로 구동 중 <code>network response timed out</code> 에러 메세지가 보인다면 다음과 같이 해결하면 된다.</p><h1 id="방화벽"><a class="markdownIt-Anchor" href="#방화벽"></a> 방화벽</h1><p>인바운드로 19000, 19001 포트를 열어줘야한다.<br><strong>방화벽 &gt; 고급 설정 &gt; 인바운드 규칙 &gt; 새 규칙 &gt; 포트</strong> 에서 아래와 같이 설정해주고 이름은 <code>react-native-expo</code> 등 원하는 이름으로 규칙을 생성하자.</p><img data-src="https://i.imgur.com/fQkG1tn.png"><h1 id="hostname-설정"><a class="markdownIt-Anchor" href="#hostname-설정"></a> Hostname 설정</h1><h2 id="아이피-확인"><a class="markdownIt-Anchor" href="#아이피-확인"></a> 아이피 확인</h2><p>ipconfig로 현재 Wifi가 설정된 내부 아이피 주소를 확인한다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">무선 LAN 어댑터 Wi-Fi:</span><br><span class="line">  연결별 DNS 접미사. . . . :</span><br><span class="line">  링크-로컬 IPv6 주소 . . . . : </span><br><span class="line">  IPv4 주소 . . . . . . . . . : 192.168.0.7</span><br><span class="line">  서브넷 마스크 . . . . . . . : 255.255.255.0</span><br><span class="line">  기본 게이트웨이 . . . . . . : 192.168.0.1</span><br></pre></td></tr></table></figure><p><strong>192.168.0.7</strong> 을 기억해 놓자.</p><h2 id="설정-추가"><a class="markdownIt-Anchor" href="#설정-추가"></a> 설정 추가</h2><p><code>REACT_NATIVE_PACKAGER_HOSTNAME</code> 환경 변수를 설정해줘야한다.</p><p>Git Bash 환경에서는 다음과 같다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> REACT_NATIVE_PACKAGER_HOSTNAME=192.168.0.7</span><br></pre></td></tr></table></figure><h1 id="실행"><a class="markdownIt-Anchor" href="#실행"></a> 실행</h1><p><code>yarn start</code> 후에 Expo 앱으로 QRCode를 찍으면 정상적으로 실행이 가능하다.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2017/12/27/utf8-charset%EC%97%90%EC%84%9C-emoji-%ED%95%84%ED%84%B0%EB%A7%81/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/12/27/utf8-charset%EC%97%90%EC%84%9C-emoji-%ED%95%84%ED%84%B0%EB%A7%81/" class="post-title-link" itemprop="url">utf8 charset에서 emoji 필터링하기</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2017-12-27 13:05:20" itemprop="dateCreated datePublished" datetime="2017-12-27T13:05:20+09:00">2017-12-27</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/database/" itemprop="url" rel="index"><span itemprop="name">database</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2017/12/27/utf8-charset%EC%97%90%EC%84%9C-emoji-%ED%95%84%ED%84%B0%EB%A7%81/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/12/27/utf8-charset에서-emoji-필터링/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="개요"><a class="markdownIt-Anchor" href="#개요"></a> 개요</h1><p>utf8 charset 에서는 이모지를 처리할 수 없다.<br><a href="https://blog.lael.be/post/917" target="_blank" rel="external nofollow noopener noreferrer">utf8mb4 언어셋 소개 및 표현범위</a> 포스팅에 따르면 이모지가 mysql 또는 maria 의 utf8 셋의 가변공간을 사용하려 들려 하는 문제인데, utf8mb4 셋으로 변경하면 해결 된다.</p><p>mysql 이거나 maria 의 charset 을 변경하기 힘들 때 text 를 모두 replace 치면 된다. 시작해보자</p><h1 id="php"><a class="markdownIt-Anchor" href="#php"></a> php</h1><p><a href="https://stackoverflow.com/questions/12807176/php-writing-a-simple-removeemoji-function" target="_blank" rel="external nofollow noopener noreferrer">writing a simple removeEmoji function</a> stackoverflow 글에 좋은 함수가 있다.</p><h2 id="소스"><a class="markdownIt-Anchor" href="#소스"></a> 소스</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// https://stackoverflow.com/questions/12807176/php-writing-a-simple-removeemoji-function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeEmoji</span><span class="params">($text)</span> </span>&#123;</span><br><span class="line">    $clean_text = <span class="string">""</span>;</span><br><span class="line">    <span class="comment">// Match Emoticons</span></span><br><span class="line">    $regexEmoticons = <span class="string">'/[\x&#123;1F600&#125;-\x&#123;1F64F&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexEmoticons, <span class="string">''</span>, $text);</span><br><span class="line">    <span class="comment">// Match Miscellaneous Symbols and Pictographs</span></span><br><span class="line">    $regexSymbols = <span class="string">'/[\x&#123;1F300&#125;-\x&#123;1F5FF&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexSymbols, <span class="string">''</span>, $clean_text);</span><br><span class="line">    <span class="comment">// Match Transport And Map Symbols</span></span><br><span class="line">    $regexTransport = <span class="string">'/[\x&#123;1F680&#125;-\x&#123;1F6FF&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexTransport, <span class="string">''</span>, $clean_text);</span><br><span class="line">    <span class="comment">// Match Miscellaneous Symbols</span></span><br><span class="line">    $regexMisc = <span class="string">'/[\x&#123;2600&#125;-\x&#123;26FF&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexMisc, <span class="string">''</span>, $clean_text);</span><br><span class="line">    <span class="comment">// Match Dingbats</span></span><br><span class="line">    $regexDingbats = <span class="string">'/[\x&#123;2700&#125;-\x&#123;27BF&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexDingbats, <span class="string">''</span>, $clean_text);</span><br><span class="line">    <span class="comment">// Match Flags</span></span><br><span class="line">    $regexDingbats = <span class="string">'/[\x&#123;1F1E6&#125;-\x&#123;1F1FF&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexDingbats, <span class="string">''</span>, $clean_text);</span><br><span class="line">    <span class="comment">// Others</span></span><br><span class="line">    $regexDingbats = <span class="string">'/[\x&#123;1F910&#125;-\x&#123;1F95E&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexDingbats, <span class="string">''</span>, $clean_text);</span><br><span class="line">    $regexDingbats = <span class="string">'/[\x&#123;1F980&#125;-\x&#123;1F991&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexDingbats, <span class="string">''</span>, $clean_text);</span><br><span class="line">    $regexDingbats = <span class="string">'/[\x&#123;1F9C0&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexDingbats, <span class="string">''</span>, $clean_text);</span><br><span class="line">    $regexDingbats = <span class="string">'/[\x&#123;1F9F9&#125;]/u'</span>;</span><br><span class="line">    $clean_text = preg_replace($regexDingbats, <span class="string">''</span>, $clean_text);</span><br><span class="line">    <span class="keyword">return</span> $clean_text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$textWithEmoji = <span class="string">'thumbs up👍👍'</span>;</span><br><span class="line">$text = removeEmoji($textWithEmoji);</span><br><span class="line"></span><br><span class="line"><span class="comment">// text =&gt; thumbs up</span></span><br></pre></td></tr></table></figure><h1 id="node"><a class="markdownIt-Anchor" href="#node"></a> node</h1><p><a href="https://github.com/mathiasbynens/emoji-regex" target="_blank" rel="external nofollow noopener noreferrer">emoji-regex</a> 라이브러리를 쓰면 된다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add emoji-regex</span><br></pre></td></tr></table></figure><h2 id="소스-2"><a class="markdownIt-Anchor" href="#소스-2"></a> 소스</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> emojiRegex = <span class="built_in">require</span>(<span class="string">"emoji-regex"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// const regex = emojiRegex()</span></span><br><span class="line"><span class="keyword">const</span> textWithEmoji = <span class="string">"thumbs up👍👍"</span></span><br><span class="line"><span class="keyword">const</span> text = textWithEmoji.replace(emojiRegex(), <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// text =&gt; thumbs up</span></span><br></pre></td></tr></table></figure><h1 id="여담"><a class="markdownIt-Anchor" href="#여담"></a> 여담</h1><p>이모지처리 (붙히고 제거하고), linkify 를 합친 통합 모듈이 있다면 다운로드 수가 좀 될 것 같은데.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2017/12/26/Docker%EB%A1%9C-Swagger-%EC%84%A4%EC%B9%98-%ED%9B%84-%ED%85%8C%EB%A7%88-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/12/26/Docker%EB%A1%9C-Swagger-%EC%84%A4%EC%B9%98-%ED%9B%84-%ED%85%8C%EB%A7%88-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0/" class="post-title-link" itemprop="url">Docker로 스웨거 설치 후 테마 설정하기 (swagger)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2017-12-26 22:03:44" itemprop="dateCreated datePublished" datetime="2017-12-26T22:03:44+09:00">2017-12-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/swagger/" itemprop="url" rel="index"><span itemprop="name">swagger</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2017/12/26/Docker%EB%A1%9C-Swagger-%EC%84%A4%EC%B9%98-%ED%9B%84-%ED%85%8C%EB%A7%88-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/12/26/Docker로-Swagger-설치-후-테마-설정하기/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p><a href="https://hub.docker.com/r/swaggerapi/swagger-ui/" target="_blank" rel="external nofollow noopener noreferrer">Swagger UI</a>와 <a href="https://hub.docker.com/r/swaggerapi/swagger-editor/" target="_blank" rel="external nofollow noopener noreferrer">Swagger Editor</a>를 Docker 로 띄워서 빠르게 사용해보자.<br><a href="https://swaggerhub.com/" target="_blank" rel="external nofollow noopener noreferrer">Swagger Hub</a>에서 작업하는건 한글 입력이 잘 되지 않는 경우가 있었고 <a href="https://github.com/OAI/OpenAPI-Specification" target="_blank" rel="external nofollow noopener noreferrer">OAS3</a>를 사용할 겸 설치하는 게 편하다.</p><h1 id="설치"><a class="markdownIt-Anchor" href="#설치"></a> 설치</h1><p>설치는 서버 하나만 있으면 충분하다.</p><h2 id="editor"><a class="markdownIt-Anchor" href="#editor"></a> Editor</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d \</span><br><span class="line">    -p 7000:8080 \</span><br><span class="line">    --restart always \</span><br><span class="line">    --name swagger-editor \</span><br><span class="line">    swaggerapi/swagger-editor</span><br></pre></td></tr></table></figure><h2 id="ui"><a class="markdownIt-Anchor" href="#ui"></a> UI</h2><p>UI 에서는 API 문서를 상대경로로 사용하기 위해 볼륨 마운트를 했다.<br><em>Docker for Windows</em>에서 c 드라이브를 마운트하기 위해서는 아래처럼 <code>//c/path</code> 로 접근하면 된다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker run -d \</span><br><span class="line">    -p 9010:8080 \</span><br><span class="line">    -v //c/swagger-spec:/usr/share/nginx/html/spec \</span><br><span class="line">    --restart always \</span><br><span class="line">    --name swagger-ui \</span><br><span class="line">    swaggerapi/swagger-ui</span><br></pre></td></tr></table></figure><h1 id="테마-추가"><a class="markdownIt-Anchor" href="#테마-추가"></a> 테마 추가</h1><p>테마는 <a href="https://github.com/ostranme/swagger-ui-themes" target="_blank" rel="external nofollow noopener noreferrer">나이스한 라이브러리</a>를 사용하자.<br>두 컨테이너 모두 <code>/usr/share/nginx/html/</code> 경로의 <code>index.html</code>을 열어 head 안에 넣어주면 된다.</p><p><code>docker exec</code>로 쉘에 접근하는 건 다 하시리라 믿고 다만, 컨테이너에 bash 쉘이 없기에 기본 sh 쉘로 접근하면 된다.</p><figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://unpkg.com/swagger-ui-themes@3.0.0/themes/3.x/theme-material.css"</span> /&gt;</span></span><br></pre></td></tr></table></figure><h1 id="여담"><a class="markdownIt-Anchor" href="#여담"></a> 여담</h1><p>스웨거에 side menu 가 있는 버전이나 라이브러리가 있으면 좋을텐데, 누가 만들었을 것 같은데 아직 못 찾았다.</p></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2017/12/22/PWA-ServiceWorker-Web-Caching/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/12/22/PWA-ServiceWorker-Web-Caching/" class="post-title-link" itemprop="url">PWA - 서비스 워커 웹 캐싱 (Web Caching)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2017-12-22 20:53:41" itemprop="dateCreated datePublished" datetime="2017-12-22T20:53:41+09:00">2017-12-22</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/pwa/" itemprop="url" rel="index"><span itemprop="name">pwa</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2017/12/22/PWA-ServiceWorker-Web-Caching/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/12/22/PWA-ServiceWorker-Web-Caching/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="개요"><a class="markdownIt-Anchor" href="#개요"></a> 개요</h1><p>Progressive Web App의 시대가 왔다.<br>Client단에서 모든 static 파일을 브라우저에 캐시를 할 수 있고 <strong>웹을 앱처럼 오프라인</strong>에서 작업하게 할 수 있다.<br>그 첫번째로 캐싱에 대해 알아보자.</p><h1 id="준비"><a class="markdownIt-Anchor" href="#준비"></a> 준비</h1><p>Promise, Fetch, Worker 및 Javascript 의 실행 구조, DOM 에 대한 사전지식이 필히 있어야 한다.<br>HTTP Cache 를 걸어봤다면 이해가 쉬울 듯 싶다.</p><h2 id="serviceworker"><a class="markdownIt-Anchor" href="#serviceworker"></a> ServiceWorker</h2><p>서비스 워커는 <strong>브라우저가 백그라운드에서 실행하는 스크립트</strong>이며, <strong>클라이언트에 설치되는 프록시</strong>다.<br>이 개념은 중요해서 외워야한다. <strong>브라우저 백그라운드에서 네트워크를 가로채는 Thread</strong> 라고 보면 된다.</p><p>웹 캐싱 뿐만 아니라 백그라운드 동기화, 웹 푸쉬 등의 기능을 처리할 수 있다. 궁금하다면 <a href="https://serviceworke.rs/" target="_blank" rel="external nofollow noopener noreferrer">여기</a>를 들어가보자. (포스팅을 다 읽고 들어가보는 걸 추천한다.)</p><p>웹 캐싱은 <a href="https://developer.mozilla.org/ko/docs/Web/API/CacheStorage" target="_blank" rel="external nofollow noopener noreferrer">CacheStorage</a>를 사용한다. Sqlite 같은 클라이언트 데이터베이스인데, Key:value 로 구성된 데이터베이스라고 보면 된다.</p><h3 id="주의"><a class="markdownIt-Anchor" href="#주의"></a> 주의</h3><blockquote><p>https 환경 또는 localhost 도메인에서만 이 기능을 사용할 수 있다.</p></blockquote><p>브라우저별 지원상황은 <a href="https://jakearchibald.github.io/isserviceworkerready/#service-worker-enthusiasm" target="_blank" rel="external nofollow noopener noreferrer">다음</a>과 같다 1803기준 Safari에도 Shipped가 되었다!<br><s>1712 기준 Safari가 아직도 Developement 상태인게 조금 아쉽다</s></p><h3 id="세팅"><a class="markdownIt-Anchor" href="#세팅"></a> 세팅</h3><p><code>sw.js</code>란 파일을 <code>public</code>폴더(index.html이 있는)에 생성하자.<br>그리고 메인 script파일에 다음과 같이 service-worker를 불러오는 구문을 추가한다.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// navigator (브라우저)에 serviceWorker 기능이 있는지 확인</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">"serviceWorker"</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">  <span class="comment">// 서비스워커 설치시 DOM 블로킹을 막아준다.</span></span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 서비스워커를 register 하면 promise를 반환한다.</span></span><br><span class="line">    navigator.serviceWorker</span><br><span class="line">      .register(<span class="string">"/sw.js"</span>)</span><br><span class="line">      .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"서비스 워커가 등록되었다."</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>개발자도구를 열고 <strong>Application &gt; ServiceWorkers</strong> 탭으로 가면 설치가 된 것을 확인할 수 있다.</p><img data-src="https://i.imgur.com/zE1BefE.png"><p>이렇게 뜨면 설치된 것이다.</p><h1 id="basic"><a class="markdownIt-Anchor" href="#basic"></a> Basic</h1><p>서비스워커에서는 <code>self</code> 키워드로 자기 자신을 접근할 수 있다. 몇 가지 static 파일들을 캐싱처리 해보자.<br>모던 브라우저에서만 지원이 되므로 <code>arrow function</code>을 사용해도 된다.</p><figure class="highlight js"><figcaption><span>sw.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> PRE_CACHE_NAME = <span class="string">"캐시-스토리지1"</span>;</span><br><span class="line"><span class="comment">// 캐시하고 싶은 리소스</span></span><br><span class="line"><span class="keyword">var</span> urlsToCache = [</span><br><span class="line">  <span class="string">"/public/image/image1.png"</span>,</span><br><span class="line">  <span class="string">"/public/css/font-awesome.min.css"</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 서비스워커가 설치될 때</span></span><br><span class="line">self.addEventListener(<span class="string">"install"</span>, event =&gt; &#123;</span><br><span class="line">  <span class="comment">// 캐시 등록 이벤트가 끝날 때까지 기다려</span></span><br><span class="line">  event.waitUntil(</span><br><span class="line">    <span class="comment">// '캐시-스토리지1'을 연다.</span></span><br><span class="line">    <span class="comment">// @return &#123;Promise&#125; 연결된 Cache Database를 반환한다.</span></span><br><span class="line">    caches</span><br><span class="line">      .open(PRE_CACHE_NAME)</span><br><span class="line">      .then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"캐시 디비와 연결됨"</span>);</span><br><span class="line">        <span class="comment">// addAll 메소드로 내가 캐싱할 리소스를 다 넣어주자.</span></span><br><span class="line">        <span class="keyword">return</span> cache.addAll(urlsToCache);</span><br><span class="line">      &#125;)</span><br><span class="line">      .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 설치 후에 바로 활성화 단계로 들어갈 수 있게 해준다.</span></span><br><span class="line">        <span class="keyword">return</span> self.skipWaiting();</span><br><span class="line">      &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>이렇게 추가해주고 개발자도구의 Application 탭으로 가서 좌측 메뉴의 <strong>Cache Storage</strong> 를 새로고침 하면 방금 추가한 <strong>캐시-스토리지1</strong>에 내 이미지와 css가 등록된 걸 확인할 수 있다.</p><p>그리고 개발자도구의 Network 탭에서 호출하는 이미지의 size에 **(from ServiceWorker)**가 보인다.</p><h1 id="intermediate"><a class="markdownIt-Anchor" href="#intermediate"></a> Intermediate</h1><p>내용이 업데이트 되야하는 페이지나 리소스에 대해서는 동적으로 캐싱 처리를 해야한다.</p><h2 id="dynamic-caching"><a class="markdownIt-Anchor" href="#dynamic-caching"></a> Dynamic caching</h2><figure class="highlight js"><figcaption><span>sw.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> DYNAMIC_CACHE_NAME = <span class="string">"다이나믹-캐시-스토리지1"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// fetch event는 어딘가에서 리소스를 가져올 때 모두 실행된다.</span></span><br><span class="line"><span class="comment">// js를 가져오거나 이미지를 가져오거나 페이지를 가져오거나 등등</span></span><br><span class="line">self.addEventListener(<span class="string">"fetch"</span>, event =&gt; &#123;</span><br><span class="line">  event.respondWith(</span><br><span class="line">    caches.match(event.request).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 캐시에 있으면 repsonse를 그대로 돌려준다.</span></span><br><span class="line">      <span class="keyword">if</span> (response) &#123;</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 여기서 request를 복사해준다.</span></span><br><span class="line">      <span class="comment">// request는 스트림으로 fetch 당 한 번만 사용해야하기 때문이다.</span></span><br><span class="line">      <span class="comment">// 근데 event.request로 받아도 실행은 된다</span></span><br><span class="line">      <span class="keyword">var</span> fetchRequest = event.request.clone();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// if (response) return response 구문을 하나로 합칠 수도 있다.</span></span><br><span class="line">      <span class="comment">// return response || fetch(fetchRequest)</span></span><br><span class="line">      <span class="keyword">return</span> fetch(fetchRequest).then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 응답이 제대로 왔는지 체크한다.</span></span><br><span class="line">        <span class="comment">// 구글 문서에는 다음과 같이 처리하라고 되어있는데</span></span><br><span class="line">        <span class="comment">// 이 경우 Cross Site Request에 대해 캐싱 처리를 할 수가 없다.</span></span><br><span class="line">        <span class="comment">// if(!response || response.status !== 200 || response.type !== 'basic') &#123;</span></span><br><span class="line">        <span class="keyword">if</span> (!response) &#123;</span><br><span class="line">          <span class="keyword">return</span> response;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 응답은 꼭 복사 해줘야한다.</span></span><br><span class="line">        <span class="keyword">var</span> responseToCache = response.clone();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 캐시 스토리지를 열고 정말 캐싱을 해준다.</span></span><br><span class="line">        caches.open(DYNAMIC_CACHE_NAME).then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">          cache.put(event.request, responseToCache);</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 여기서 response를 내보내줘야 캐싱 처리 후에 리소스를 반환한다.</span></span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="오래된-캐시-삭제"><a class="markdownIt-Anchor" href="#오래된-캐시-삭제"></a> 오래된 캐시 삭제</h2><p>캐시 스토리지명을 바꿔 캐시의 버전을 올리면 기존 캐시 스토리지는 삭제해줘야한다.</p><figure class="highlight js"><figcaption><span>sw.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 서비스 워커가 활성화 될 때</span></span><br><span class="line">self.addEventListener(<span class="string">"activate"</span>, event =&gt; &#123;</span><br><span class="line">  <span class="comment">// 영구적으로 가져갈 캐시 스트리지 화이트리스트</span></span><br><span class="line">  <span class="keyword">var</span> cacheWhiteList = [PRE_CACHE_NAME, DYNAMIC_CACHE_NAME];</span><br><span class="line"></span><br><span class="line">  event.waitUntil(</span><br><span class="line">    <span class="comment">// 캐시 스토리지의 모든 스토리지명을 가져온다.</span></span><br><span class="line">    caches.keys().then(<span class="function"><span class="params">cacheNames</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 캐시를 삭제하는 건 Promise를 반환하므로 Promise.all을 사용해 끝날 시점을 잡아야한다.</span></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.all(</span><br><span class="line">        <span class="comment">// 이 결과는 [Promise, Promise...] 형태가 되시겠다.</span></span><br><span class="line">        cacheNames.map(<span class="function"><span class="params">cacheName</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 각각의 캐시 스토리지명이 화이트 리스트와 같지 않을 경우</span></span><br><span class="line">          <span class="keyword">if</span> (cacheWhitelist.indexOf(cacheName) === <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="comment">// 캐시를 삭제하는 Promise를 배열에 추가한다.</span></span><br><span class="line">            <span class="keyword">return</span> caches.delete(cacheName);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// activate 시에는 clients claim 메소드를 호출해서</span></span><br><span class="line">  <span class="comment">// 브라우저에 대한 제어권을 가져와야한다.</span></span><br><span class="line">  <span class="keyword">return</span> self.clients.claim();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>결과적으로 <code>DYNAMIC_CACHE_NAME</code>이 아닌 캐시 스토리지는 삭제된다.</p><h2 id="offline-fallback"><a class="markdownIt-Anchor" href="#offline-fallback"></a> offline fallback</h2><p>캐시된 페이지와 리소스는 오프라인에서도 접근이 가능하다.<br>여기서 오류가 발생하면 offline.html 같은 페이지로 떨어지게 할 수 있다. (마치 404 오류 페이지처럼)</p><figure class="highlight js"><figcaption><span>sw.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">self.addEventListener(<span class="string">'fetch'</span>, event =&gt; &#123;</span><br><span class="line">  event.respondWith(</span><br><span class="line">    caches.match(event.request)</span><br><span class="line">      .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 에러 발생시 캐시되어있는 offline.html로 이동시킨다.</span></span><br><span class="line">        <span class="keyword">return</span> caches.open(CACHE_NAME)</span><br><span class="line">          .then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 들어온 요청의 Accept 헤더가 text/html 을 포함하고 있다면 (페이지 요청이라면)</span></span><br><span class="line">            <span class="keyword">if</span> (event.request.headers.get(<span class="string">'accept'</span>).includes(<span class="string">'text/html'</span>)) &#123;</span><br><span class="line">              <span class="comment">// 캐시된 offline fallback 페이지를 보여준다.</span></span><br><span class="line">              <span class="keyword">return</span> cache.match(<span class="string">'/offline.html'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="advanced"><a class="markdownIt-Anchor" href="#advanced"></a> Advanced</h1><p>서비스워커에 static, dynamic cache를 첨가했는데 소스가 너무 지저분하다.<br>직관적으로 만들어보자.</p><h2 id="리팩토링"><a class="markdownIt-Anchor" href="#리팩토링"></a> 리팩토링</h2><figure class="highlight js"><figcaption><span>sw.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> STATIC_CACHE_NAME = <span class="string">'STATIC_CACHE_VERSION_1'</span>;</span><br><span class="line">  <span class="keyword">const</span> DYNAMIC_CACHE_NAME = <span class="string">'DYNAMIC_CACHE_VERSION_1'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> WEB_CACHE = &#123;</span><br><span class="line">    init() &#123;</span><br><span class="line">      self.addEventListener(<span class="string">'install'</span>, <span class="keyword">this</span>.staticCacheStrategy.bind(<span class="keyword">this</span>));</span><br><span class="line">      self.addEventListener(<span class="string">'activate'</span>, <span class="keyword">this</span>.deleteOldCache.bind(<span class="keyword">this</span>));</span><br><span class="line">      self.addEventListener(<span class="string">'fetch'</span>, <span class="keyword">this</span>.dynamicCacheStrategy.bind(<span class="keyword">this</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    staticCacheStrategy(event) &#123;</span><br><span class="line">      <span class="comment">// 스태틱 캐싱</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    deleteOldCache(event) &#123;</span><br><span class="line">      <span class="comment">// 캐시 삭제</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    dynamicCacheStrategy(event) &#123;</span><br><span class="line">      <span class="comment">// 다이나믹 캐싱</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  WEB_CACHE.init();</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure><p>IIFE를 사용해 좀 더 예쁘게 변했다.</p><h2 id="cross-domain-request"><a class="markdownIt-Anchor" href="#cross-domain-request"></a> cross domain request</h2><p>서비스워커에서 fetch로 외부 리소스를 가지고오면 <code>opaque</code> response가 반환된다.<br>cors 정책이 설정되어 있지 않아 아무 정보도 가지고 올 수 없는 건데, 이런 리소스만 골라서 캐싱처리를 하고 싶다면 request url이나 response content-type을 가지고 처리할 수 있다.</p><figure class="highlight js"><figcaption><span>sw.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">dynamicCacheStrategy(event) &#123;</span><br><span class="line">  <span class="comment">// 캐싱 처리하고 싶은 content-type</span></span><br><span class="line">  <span class="keyword">var</span> cacheContentsTypes = [</span><br><span class="line">    <span class="string">'image/png'</span>,</span><br><span class="line">    <span class="string">'image/gif'</span>,</span><br><span class="line">    <span class="string">'image/jpeg'</span>,</span><br><span class="line">    <span class="string">'application/font-woff'</span></span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  event.respondWith(</span><br><span class="line">    caches.match(event.request)</span><br><span class="line">    .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> fetchRequest = event.request.clone();</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span> response || fetch(fetchRequest)</span><br><span class="line">      .then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!response) &#123;</span><br><span class="line">          <span class="keyword">return</span> response;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// response header에서 content-type을 가져와 비교한다.</span></span><br><span class="line">        <span class="comment">// 아니면 request.url이 캐싱처리를 할 외부 url인지 확인한다.</span></span><br><span class="line">        <span class="keyword">if</span> (cacheContentsTypes.indexOf(response.headers.get(<span class="string">'content-type'</span>)) !== <span class="number">-1</span></span><br><span class="line">          || event.request.url.indexOf(<span class="string">'external.url'</span>) !== <span class="number">-1</span></span><br><span class="line">        ) &#123;</span><br><span class="line">          caches.open(DYNAMIC_CACHE_NAME)</span><br><span class="line">            .then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">              cache.put(event.request, response.clone());</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">      &#125;)</span><br><span class="line">      .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(error))</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="workbox"><a class="markdownIt-Anchor" href="#workbox"></a> WorkBox</h1><p>이제 클라이언트 캐시가 어떻게 돌아가는지 확인했으니 구글에서 만든 <a href="https://developers.google.com/web/tools/workbox/" target="_blank" rel="external nofollow noopener noreferrer">멋진 라이브러리</a>를 사용해보자.</p><p>간결하고 직관적인 문법으로 위의 구문들을 예쁘게 만들 수 있다.</p><h2 id="stratergy"><a class="markdownIt-Anchor" href="#stratergy"></a> Stratergy</h2><p>그 전에 캐싱 전략을 알아야한다.</p><h3 id="cachefirst"><a class="markdownIt-Anchor" href="#cachefirst"></a> cacheFirst</h3><img data-src="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-falling-back-to-network.png"><p>캐시부터 요청하고 네트워크를 접근해 리소스를 보여준다.</p><blockquote><p>오프라인을 우선적으로 보여주는 페이지에 적합하다.</p></blockquote><h3 id="cacheonly"><a class="markdownIt-Anchor" href="#cacheonly"></a> cacheOnly</h3><img data-src="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-cache-only.png"><p>캐시에서만 가져온다.</p><blockquote><p>static file들이 여기에 해당된다.</p></blockquote><h3 id="networkfirst"><a class="markdownIt-Anchor" href="#networkfirst"></a> networkFirst</h3><img data-src="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-network-falling-back-to-cache.png"><p>네트워크를 먼저 접근하고 오프라인일 경우 캐시를 가져온다.<br>이 방법은 연결이 원활하지 않거나 느린 경우 네트워크가 실패할 때까지 기다린 뒤 리소스가 보여지므로 UX에 좋지 않을 수 있다.</p><h3 id="networkonly"><a class="markdownIt-Anchor" href="#networkonly"></a> networkOnly</h3><img data-src="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-network-only.png"><p>캐시가 필요없는 GET 메소드가 아닌 다른 메소드가 주로 여기에 해당된다.</p><h3 id="stalewhilerevalidate"><a class="markdownIt-Anchor" href="#stalewhilerevalidate"></a> staleWhileRevalidate</h3><img data-src="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/cm-stale-while-revalidate.png"><p>이 방식은 그림을 보고 이해하는게 빠르다.<br>캐시를 먼저 가져오고 다음 요청은 네트워크에서 요청된 리소스의 캐시를 반환한다.</p><blockquote><p>주로 이 방식이 사용된다.</p></blockquote><h3 id="cache-then-network"><a class="markdownIt-Anchor" href="#cache-then-network"></a> Cache then network</h3><img data-src="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/images/ss-cache-then-network.png"><p>페이지가 두 개의 요청(캐시에 요청, 네트워크에 요청)을 동시에 하고 캐시된 데이터를 먼저 표시한 다음 네트워크 데이터가 도착하면 페이지를 업데이트를 한다.<br>WorkBox에는 없는 strategy인데 networkFirst보다 UX상 좋다고 한다.</p><h2 id="설치"><a class="markdownIt-Anchor" href="#설치"></a> 설치</h2><p>ServiceWorker에서는 라우팅 기능을 사용하기 위해 구글 CDN에서 제공하는 스크립트를 사용하고<br>Pre-Cache를 정의하기 위해 로컬에서 <code>workbox-cli</code>를 추가해야한다.</p><h3 id="importscript"><a class="markdownIt-Anchor" href="#importscript"></a> importScript</h3><p><a href="https://developer.mozilla.org/en-US/docs/Web/API/WorkerGlobalScope/importScripts" target="_blank" rel="external nofollow noopener noreferrer">importScript</a>는 ServiceWorker 파일에서만 사용가능한 구문으로 <code>import</code>나 <code>require</code>와 같다고 보면 된다.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">importScripts(</span><br><span class="line">  <span class="string">"https://storage.googleapis.com/workbox-cdn/releases/3.2.0/workbox-sw.js"</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="workbox-cli"><a class="markdownIt-Anchor" href="#workbox-cli"></a> workbox-cli</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn global add workbox-cli</span><br></pre></td></tr></table></figure><h2 id="메소드"><a class="markdownIt-Anchor" href="#메소드"></a> 메소드</h2><h3 id="precache"><a class="markdownIt-Anchor" href="#precache"></a> precache</h3><p>프리캐시는 정적 자원들을 미리 캐싱처리해서 <strong>Cache Only Stratergy</strong>를 사용하는 것이다.<br>주로 이미지나 css, vendor-js 등을 여기에 담아준다.</p><p>workbox-cli를 설치하고 wizard 명령어를 실행하면 <a href="https://developers.google.com/web/tools/workbox/modules/workbox-cli#configuration" target="_blank" rel="external nofollow noopener noreferrer">config 파일</a>이 생성된다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ workbox wizard</span><br></pre></td></tr></table></figure><p>설정을 입맛에 맞게 변경해주고 pre-cache할 파일 목록을 생성해주는 명령어를 실행하자</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ workbox injectManifest config.js</span><br></pre></td></tr></table></figure><p>ServiceWorker에 <code>workbox.precaching.precacheAndRoute([])</code> 구문이 있다면 목록이 들어가 있는 걸 확인할 수 있다.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">workbox.precaching.precacheAndRoute([</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">"url"</span>: <span class="string">"css/fonts/fontawesome/fontawesome-webfont.eot"</span>,</span><br><span class="line">    <span class="string">"revision"</span>: <span class="string">"674f50d287a8c48dc19ba404d20fe713"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">])</span><br></pre></td></tr></table></figure><h3 id="routing"><a class="markdownIt-Anchor" href="#routing"></a> Routing</h3><p>WorkBox를 사용하는 이유는 바로 이 라우팅에 있다.<br>위에서 많은 양의 라우팅 분기 코드로 캐싱을 처리했는데 WorkBox는 다음과 같이 간결해진다.<br>아래는 이 블로그에 사용하고 있는 코드이다.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">importScripts(</span><br><span class="line">  <span class="string">"https://storage.googleapis.com/workbox-cdn/releases/3.4.1/workbox-sw.js"</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// importScripts 후 타이밍 차이로 인해 모듈을 못 불러오는 경우를 방지하기 위해</span></span><br><span class="line"><span class="comment">// 캐싱 정책 모듈 로드를 기다린다.</span></span><br><span class="line">workbox.loadModule(<span class="string">"workbox-strategies"</span>);</span><br><span class="line"></span><br><span class="line">workbox.skipWaiting();</span><br><span class="line">workbox.clientsClaim();</span><br><span class="line"></span><br><span class="line"><span class="comment">// accept 헤더에 text/html 값이 있으면 (html 페이지 요청일 경우)</span></span><br><span class="line"><span class="comment">// networkFirst 캐싱</span></span><br><span class="line">workbox.routing.registerRoute(<span class="function"><span class="params">routeData</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> routeData.event.request.headers.get(<span class="string">"accept"</span>).includes(<span class="string">"text/html"</span>);</span><br><span class="line">&#125;, workbox.strategies.networkFirst());</span><br><span class="line"></span><br><span class="line"><span class="comment">// imgur 요청일 경우 cacheFirst 캐싱</span></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">  /.*(?:imgur)\.com.*$/,</span><br><span class="line">  workbox.strategies.cacheFirst()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// jsdelivr 요청일 경우 stateWhileRevalidate 캐싱</span></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">  /.*(?:jsdelivr)\.net.*$/,</span><br><span class="line">  workbox.strategies.staleWhileRevalidate()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// bootcss 요청일 경우 stateWhileRevalidate 캐싱</span></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">  /.*(?:bootcss)\.com.*$/,</span><br><span class="line">  workbox.strategies.staleWhileRevalidate()</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>코드가 너무 예뻐졌다. callback으로 Request의 모든 걸 캐치해 낼 수 있다.<br>더 구체적으로 쓰고 싶으면 <a href="https://developers.google.com/web/tools/workbox/guides/route-requests" target="_blank" rel="external nofollow noopener noreferrer">문서</a>를 참조하자</p><h2 id="부가-기능"><a class="markdownIt-Anchor" href="#부가-기능"></a> 부가 기능</h2><p>이 기능 말고도 다음과 같은 멋진 기능을 사용할 수 있다, 하지만 언제 쯤 써볼 수 있을지…</p><ul><li><a href="https://developers.google.com/web/tools/workbox/modules/workbox-background-sync" target="_blank" rel="external nofollow noopener noreferrer">backgroundSync</a> (오프라인이 되면 큐에 데이터를 넣고 연결될 시 서버에 전송)</li><li><a href="https://developers.google.com/web/tools/workbox/modules/workbox-broadcast-cache-update" target="_blank" rel="external nofollow noopener noreferrer">broadcastUpdate</a> (postMessage를 사용하는 그 것 맞다)</li><li><a href="https://developers.google.com/web/tools/workbox/modules/workbox-cacheable-response" target="_blank" rel="external nofollow noopener noreferrer">cacheableResponse</a></li></ul><h3 id="offline-ga"><a class="markdownIt-Anchor" href="#offline-ga"></a> offline GA</h3><p>오프라인에서도 <a href="https://developers.google.com/web/tools/workbox/modules/workbox-google-analytics" target="_blank" rel="external nofollow noopener noreferrer">Google Analytics</a> 를 사용할 수 있다.</p><p>한 줄의 코드만 삽입해주면 된다.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">workbox.googleAnalytics.initialize();</span><br></pre></td></tr></table></figure><h2 id="webpack"><a class="markdownIt-Anchor" href="#webpack"></a> Webpack</h2><p>웹팩에 <a href="https://developers.google.com/web/tools/workbox/modules/workbox-webpack-plugin" target="_blank" rel="external nofollow noopener noreferrer">WorkBox-Webpack-Plugin</a>을 붙힐 수 있는데 아직 도전을 안 해봤다. 후술할 sw-precache를 굳이 뺄 이유가 없고, 레퍼런스도 워낙 많기에…</p><h1 id="sw-precache"><a class="markdownIt-Anchor" href="#sw-precache"></a> sw-precache</h1><p><code>create-react-app</code>이나 <code>Vue-Cli</code>나 <code>@angular/cli</code> 모두 클라이언트 캐싱에 WorkBox 대신 이 라이브러리를 사용하고 있다. (WorkBox에서 캐싱기능만 떼어낸 라이브러리라고 보면 된다)</p><p>기본 설정을 굳이 안 건들여도 되고, <code>exact</code>해서 사용 중이라면 옵션을 <a href="https://github.com/GoogleChromeLabs/sw-precache" target="_blank" rel="external nofollow noopener noreferrer">라이브러리</a>를 한 번 쯤 봐주는 것도 나쁘지 않다.</p><h1 id="참고"><a class="markdownIt-Anchor" href="#참고"></a> 참고</h1><ul><li><a href="https://developers.google.com/web/fundamentals/primers/service-workers/" target="_blank" rel="external nofollow noopener noreferrer">Google Web Fundementals Guides Base Technology</a></li><li><a href="https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/" target="_blank" rel="external nofollow noopener noreferrer">Google Web Fundamentals Offline cookbook</a></li><li><a href="https://developers.google.com/web/tools/workbox/reference-docs/latest/" target="_blank" rel="external nofollow noopener noreferrer">WorkBox Docs</a></li><li><a href="https://github.com/GoogleChrome/workbox" target="_blank" rel="external nofollow noopener noreferrer">WorkBox</a></li><li><a href="https://github.com/GoogleChromeLabs/sw-precache" target="_blank" rel="external nofollow noopener noreferrer">sw-precache</a></li></ul><h1 id="여담"><a class="markdownIt-Anchor" href="#여담"></a> 여담</h1><ul><li>기술 정리하는 건 시간이 너무 오래 걸린다.</li><li>Redis, eTag, Vanish, SW 까지 사용하면 성능상에 이점은 있겠지만 키를 어떻게 관리해야될지가 중요할 듯</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article><article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="ko"><link itemprop="mainEntityOfPage" href="https://gracefullight.dev/2017/12/21/adonisjs-custom-log-format/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/profile_dog.png"><meta itemprop="name" content="Gracefullight"><meta itemprop="description" content="풀스택 개발자를 꿈꾸며"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Gracefullight"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/2017/12/21/adonisjs-custom-log-format/" class="post-title-link" itemprop="url">adonisjs 로그 포맷 변경하기 (custom log format)</a></h2><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">작성일</span> <time title="Post created: 2017-12-21 15:25:45" itemprop="dateCreated datePublished" datetime="2017-12-21T15:25:45+09:00">2017-12-21</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Updated at: 2020-03-15 23:22:42" itemprop="dateModified" datetime="2020-03-15T23:22:42+09:00">2020-03-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/" itemprop="url" rel="index"><span itemprop="name">javascript</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/nodejs/" itemprop="url" rel="index"><span itemprop="name">nodejs</span></a> </span>, <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/javascript/nodejs/adonis/" itemprop="url" rel="index"><span itemprop="name">adonis</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Disqus: </span><a title="disqus" href="/2017/12/21/adonisjs-custom-log-format/#disqus_thread" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2017/12/21/adonisjs-custom-log-format/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><p>아도니스는 로깅 모듈로 winston 을 사용하는데 winston 은 로그를 json 포맷으로 출력하고 심지어 timezone 변수가 따로 나온다.</p><blockquote><p>로그는 기본적으로 프로젝트 폴더 하위의 <strong>tmp</strong> 폴더에 생성된다<br>이 폴더가 없으면 로깅이 되지 않으므로 먼저 만들어주자</p></blockquote><p>예를 들면 다음과 같다.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"level"</span>:<span class="string">"info"</span>,<span class="string">"message"</span>:<span class="string">"serving app on http://127.0.0.1:3333"</span>,<span class="string">"timestamp"</span>:<span class="string">"2017-12-21T05:34:50.235Z"</span>&#125;</span><br><span class="line">&#123;<span class="string">"level"</span>:<span class="string">"info"</span>,<span class="string">"message"</span>:<span class="string">"serving app on http://127.0.0.1:3333"</span>,<span class="string">"timestamp"</span>:<span class="string">"2017-12-21T05:45:32.220Z"</span>&#125;</span><br></pre></td></tr></table></figure><p>이걸 다음과 같이 바꿔보자</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[2017-12-21 15:01:03.506] INFO serving app on http://127.0.0.1:3333</span><br></pre></td></tr></table></figure><h1 id="수정"><a class="markdownIt-Anchor" href="#수정"></a> 수정</h1><blockquote><p>오늘 날짜를 구하기 위해 <code>moment</code>를 먼저 설치하자.<br><code>winston</code> 패키지는 <code>@adonisjs/framework</code> 패키지에 종속된다.</p></blockquote><figure class="highlight js"><figcaption><span>config/app.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moment = use(<span class="string">'moment'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123; config &#125; = use(<span class="string">'winston'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  logger: &#123;</span><br><span class="line">    transport: <span class="string">'file'</span>,</span><br><span class="line">    ...</span><br><span class="line">    file: &#123;</span><br><span class="line">      driver: <span class="string">'file'</span>,</span><br><span class="line">      name: <span class="string">'adonis-app'</span>,</span><br><span class="line">      <span class="comment">// 파일명을 바꿔준다</span></span><br><span class="line">      filename: <span class="string">`adonis_<span class="subst">$&#123;moment().format(<span class="string">'YYYYMMDD'</span>)&#125;</span>.log`</span>,</span><br><span class="line">      level: <span class="string">'debug'</span>,</span><br><span class="line">      <span class="comment">// json 로그 포맷을 해제하고</span></span><br><span class="line">      json: <span class="literal">false</span>,</span><br><span class="line">      <span class="comment">// 원하는 형태로 바꿔준다</span></span><br><span class="line">      formatter: <span class="function">(<span class="params">&#123; level, message, meta &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> now = moment().format(<span class="string">'YYYY-MM-DD HH:mm:ss.SSS'</span>)</span><br><span class="line">        <span class="comment">// 로그 레벨에 색상을 추가하는 작업인데, 굳이 필요하진 않다</span></span><br><span class="line">        <span class="keyword">const</span> logLevel = config.colorize(level, level.toUpperCase())</span><br><span class="line">        <span class="keyword">const</span> formattedMeta = meta &amp;&amp; <span class="built_in">Object</span>.keys(meta).length</span><br><span class="line">                                ? <span class="string">'\n\t'</span>+ <span class="built_in">JSON</span>.stringify(meta)</span><br><span class="line">                                : <span class="string">''</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="string">`[<span class="subst">$&#123;now&#125;</span>] <span class="subst">$&#123;logLevel&#125;</span> <span class="subst">$&#123;message || <span class="string">''</span>&#125;</span> <span class="subst">$&#123;formattedMeta&#125;</span>`</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="버전"><a class="markdownIt-Anchor" href="#버전"></a> 버전</h1><ul><li>@adonis/framework: 4.0.28</li><li>winston: 2.4.0</li></ul></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"><a class="extend prev" rel="prev" href="/page/7/"><i class="fa fa-angle-left" aria-label="이전 페이지"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><span class="page-number current">8</span><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/29/">29</a><a class="extend next" rel="next" href="/page/9/"><i class="fa fa-angle-right" aria-label="다음 페이지"></i></a></nav></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">목차</li><li class="sidebar-nav-overview">흝어보기</li></ul><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="Gracefullight" src="/images/profile_dog.png"><p class="site-author-name" itemprop="name">Gracefullight</p><div class="site-description" itemprop="description">풀스택 개발자를 꿈꾸며</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">288</span> <span class="site-state-item-name">포스트</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">71</span> <span class="site-state-item-name">카테고리</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">148</span> <span class="site-state-item-name">태그</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/gracefullight" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;gracefullight" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-github"></i></a> </span><span class="links-of-author-item"><a href="mailto:eks012@gmail.com" title="E-Mail → mailto:eks012@gmail.com" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-envelope"></i></a> </span><span class="links-of-author-item"><a href="https://www.facebook.com/eunkwang.daniel.shin" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;eunkwang.daniel.shin" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-fw fa-facebook"></i></a></span></div><script src="https://ads-partners.coupang.com/g.js"></script><script>new PartnersCoupang.G({id:115781})</script></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span>0%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2016 – <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Gracefullight</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span title="Symbols count total">568k</span></div><div class="busuanzi-count"><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="Total Visitors"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-divider">|</span> <span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="Total Views"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'forest',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}</script><script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script><script>window.addEventListener('load', () => {
      quicklink({
        timeout : 3000,
        priority: true,
        ignores : [uri => uri.includes('#'),uri => uri === 'https://gracefullight.dev/page/8/',(uri, el) => el.hasAttribute('noopener')]
      });
      });</script><script>function loadCount(){var d=document,t=d.createElement("script");t.src="https://gracefullight.disqus.com/count.js",t.id="dsq-count-scr",(d.head||d.body).appendChild(t)}window.addEventListener("load",loadCount,!1)</script><script src="/a2hs.js"></script><script>AddToHomeScreen({
  color: "#682984",
  htmlContent: `Install <strong>Blog</strong> on your iOS device: tap share and <strong>Add to Home Screen <i class="fa fa-plus-square-o" aria-hidden="true"></i>`,
  logoImage: `<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px" viewBox="0 0 32 32" enable-background="new 0 0 32 32" xml:space="preserve">
    <image id="image0" width="32" height="32" x="0" y="0"
      xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABwlBMVEUAAABoKYRoKYRoKYRo
KYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRo
KYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRoKYRmJ4NlJYJmJoNnKINmJoJnJ4NrLYaCTpmh
erK3mcTApsy/pMuzk8Gdc69/SpdqLIaHVp7IstPy7PT+/v7////9/f7w6fLFrdB4QJFpKoSgeLHv
6PLw6vOAS5eacK318Pf9/P7l2+rDqs6yksC0lcLGrtHj1+j8+/3Uw9xtMIh7RJTl2ur39Pm0lMJ3
PpB0Oo6YbKuvjr79/P2wkL9nKIRoKIRwNIrbzOLf0uVzOY3x6vNsL4d5QZKMW6H59vqherOGVJ3m
2+rs5O/r4+/p3+2OXqOPYaT6+Pv//v+edrCLWqD49fr8+vyTZqeKWZ+ujL2FU5zh1ed7RZTt5fDU
wdxrLYeMXKHz7/bRvdn59/qhebKAS5jy7fWccq76+fvx7PSog7hkJIFuMYnHr9Hh1ObBp8yxkL+w
j77ErM/LtdVwNIvi1ud0O46SZKa5nMangrd1PI9pKoVmJYIBdN/qXMTWAAAAIXRSTlMAAAQoa6zZ
8v0DNpbf+xqJ6YgZNcL+QdjBAineq/w36OoVlKlsAAAAAWJLR0SVCGB6gwAAAAd0SU1FB+QBDAkd
FjLeh/4AAAH+SURBVDjLhZPpW1JBFMZnFLkIygU3vALqADO3MosWT6ktltrilhVFRZYaZZRr+25p
m5Va1h/cwJ0FeHwe3k9zz/ndmTPvnIOQEK6qdtW4DY/HcNe4qqswKhWu9frq6olQfZ3PW1uMYOw3
A6REgWADxjrf2NRMytTc1CgJjFvcZBe5WxyC/x8iuyrk7IH9rToWiycoZXHb+Wr1cwBbpk7v2buv
a3/3gYPJQ7QQMC2MsFfVTw8fOdoDXMeO9/YViIAXI8sn8/0nToLUqdPOKT4LtYVF3h44A3B2cGj4
3PkLF0dGnWC4DbmEf/bYOMDEpUnCGLk8cIUKT10oIje4CpC61l/YmbLr8twIEh6kb9wEuJXJ/0ht
LuUFMsQGydsAXTG+muq7wyVqIAbyOAt2dxpgJk5IYvZe9n72wRxz4h4FPMzBo8ccYPML/JqLSwKI
yiPY8gTACo8mnjzNpjRgyCLtZ88BXozy6l9mXr3WQEhdc+oNwNt3MX4N9v6DBiLKKLb6EeDTWoay
9aQGuFHS6vTnL/nivn77vvEjpwButXose/JnSj2WBPhj4fYOSfxa28w5+enN2bxnpKOd94MVVP1g
b22vdPcO/f4zt/O3EAlauLTlKGOUpGP/GNUtV7lpK7Z95cHJEw1mZ2m+0ywaPTG8YT284bLhLRr/
aLRs/P8DbZGRYkxcNtEAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDEtMTJUMDk6Mjk6MjIrMDM6
MDA/mynTAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTAxLTEyVDA5OjI5OjIyKzAzOjAwTsaRbwAA
AABJRU5ErkJggg=="/>
</svg>
`
});</script></body></html>