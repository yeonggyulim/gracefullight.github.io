{"meta":{"title":"Gracefullight","subtitle":"Computer Scientist","description":"풀스택 개발자를 꿈꾸며","author":"Gracefullight","url":"https://gracefullight.dev","root":"/"},"pages":[{"title":"404 Page Not Found","date":"2020-03-15T14:22:42.380Z","updated":"2020-03-15T14:22:42.380Z","comments":false,"path":"404.html","permalink":"https://gracefullight.dev/404.html","excerpt":"","text":"페이지를 찾을 수 없습니다"},{"title":"","date":"2020-03-15T14:22:42.380Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"OneSignalSDKUpdaterWorker.js","permalink":"https://gracefullight.dev/OneSignalSDKUpdaterWorker.js","excerpt":"","text":"const swRevision=\"190617\";importScripts(\"https://gracefullight.dev/sw.js?190617\"),importScripts(\"https://cdn.onesignal.com/sdks/OneSignalSDKWorker.js\");"},{"title":"","date":"2020-03-15T14:22:42.380Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"OneSignalSDKWorker.js","permalink":"https://gracefullight.dev/OneSignalSDKWorker.js","excerpt":"","text":"const swRevision=\"190617\";importScripts(\"https://gracefullight.dev/sw.js?190617\"),importScripts(\"https://cdn.onesignal.com/sdks/OneSignalSDKWorker.js\");"},{"title":"","date":"2020-03-15T14:22:42.392Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"a2hs.js","permalink":"https://gracefullight.dev/a2hs.js","excerpt":"","text":"var AddToHomeScreen=function(n){var e=(n=n||{}).backgroundColor||\"#f9f9f9\",o=n.padding||\"10px\",t=n.shadowColor||\"#e9e9e9\",a=n.shadowSize||\"10px\",d=n.fontFamily||\"-apple-system, sans-serif\",i=n.color||\"#5d5d5d\",s=n.fontSize||\"0.9rem\",r=n.brandName||\"\",l=n.logoImage||'\\n \\n \\n \\n \\n \\n ',h=n.htmlContent||`Install ${r} web app on your iOS device: tap share and Add to Home Screen ↓`,c=/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase()),g=\"standalone\"in window.navigator&&window.navigator.standalone;if(c&&!g&&!window.localStorage.a2hs_message){var m=document.createElement(\"div\"),p=document.createElement(\"style\");p.innerHTML=`\\n .a2hs__container {\\n display: flex;\\n align-items: center;\\n justify-content: center;\\n position: fixed;\\n box-sizing: border-box;\\n box-shadow: ${t} 0 0 ${a};\\n background-color: ${e};\\n padding: ${o};\\n width: 100%;\\n bottom: 0;\\n right: 0;\\n left: 0;\\n }\\n .a2hs__container .a2hs__logo {\\n padding: ${o};\\n }\\n .a2hs__container .a2hs__text {\\n font-family: ${d};\\n font-size: ${s};\\n color: ${i};\\n }`,m.innerHTML=`${l}\\n ${h}`,m.setAttribute(\"class\",\"a2hs__container\"),m.onclick=function(n){n.preventDefault(),window.localStorage.setItem(\"a2hs_message\",\"hide\"),document.querySelector(\".a2hs__container\").remove()},document.head.appendChild(p),document.body.appendChild(m)}};"},{"title":"","date":"2020-03-15T14:22:42.392Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"manifest.json","permalink":"https://gracefullight.dev/manifest.json","excerpt":"","text":"{\"name\":\"GracefulLight's Blog\",\"short_name\":\"Blog\",\"start_url\":\"/?utm_source=pwa\",\"display\":\"standalone\",\"gcm_sender_id\":\"482941778795\",\"theme_color\":\"#682984\",\"background_color\":\"#ffffff\",\"orientation\":\"portrait-primary\",\"icons\":[{\"src\":\"/images/icons/icon-192x192.png\",\"sizes\":\"192x192\",\"type\":\"image/png\"},{\"src\":\"/images/icons/icon-512x512.png\",\"sizes\":\"512x512\",\"type\":\"image/png\"}],\"author\":\"GracefulLight\"}"},{"title":"","date":"2020-03-15T14:22:42.392Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"sw-base.js","permalink":"https://gracefullight.dev/sw-base.js","excerpt":"","text":"importScripts(\"https://storage.googleapis.com/workbox-cdn/releases/5.0.0/workbox-sw.js\"),workbox.core.skipWaiting(),workbox.core.clientsClaim(),workbox.googleAnalytics.initialize(),workbox.navigationPreload.enable();const successStatusPlugin=new workbox.cacheableResponse.CacheableResponsePlugin({statuses:[0,200]}),weekExpirePlugin=new workbox.expiration.ExpirationPlugin({maxAgeSeconds:604800});workbox.routing.registerRoute(new workbox.routing.NavigationRoute(workbox.strategies.NetworkFirst({cacheName:\"cached-navigations\",plugins:[weekExpirePlugin],matchOptions:{ignoreSearch:!0}}),{denylist:[new RegExp(\"/profile/\")]})),workbox.routing.registerRoute(/.*(?:imgur)\\.com.*$/,workbox.strategies.CacheFirst({plugins:[successStatusPlugin]})),workbox.routing.registerRoute(/.*(?:disqus)\\.com.*$/,workbox.strategies.CacheFirst({plugins:[successStatusPlugin]})),workbox.routing.registerRoute(/.*(?:jsdelivr)\\.net.*$/,workbox.strategies.CacheFirst({plugins:[successStatusPlugin]})),workbox.routing.registerRoute(/.*(?:buymeacoffee)\\.com.*$/,workbox.strategies.CacheFirst({plugins:[successStatusPlugin]})),workbox.routing.registerRoute(/.*(?:bootcss)\\.com.*$/,workbox.strategies.StaleWhileRevalidate()),workbox.routing.registerRoute(/.*(?:kakao)\\.com.*$/,workbox.strategies.StaleWhileRevalidate()),workbox.routing.registerRoute(/.*(?:qbox)\\.me.*$/,workbox.strategies.StaleWhileRevalidate()),workbox.routing.registerRoute(/.*(?:onesignal)\\.com.*$/,workbox.strategies.StaleWhileRevalidate()),workbox.precaching.precacheAndRoute(self.__WB_MANIFEST);"},{"title":"","date":"2020-03-15T14:22:42.392Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"sw.js","permalink":"https://gracefullight.dev/sw.js","excerpt":"","text":"importScripts(\"https://storage.googleapis.com/workbox-cdn/releases/5.0.0/workbox-sw.js\"),workbox.core.skipWaiting(),workbox.core.clientsClaim(),workbox.googleAnalytics.initialize(),workbox.navigationPreload.enable();const successStatusPlugin=new workbox.cacheableResponse.CacheableResponsePlugin({statuses:[0,200]}),weekExpirePlugin=new workbox.expiration.ExpirationPlugin({maxAgeSeconds:604800});workbox.routing.registerRoute(new workbox.routing.NavigationRoute(workbox.strategies.NetworkFirst({cacheName:\"cached-navigations\",plugins:[weekExpirePlugin],matchOptions:{ignoreSearch:!0}}),{denylist:[new RegExp(\"/profile/\")]})),workbox.routing.registerRoute(/.*(?:imgur)\\.com.*$/,workbox.strategies.CacheFirst({plugins:[successStatusPlugin]})),workbox.routing.registerRoute(/.*(?:disqus)\\.com.*$/,workbox.strategies.CacheFirst({plugins:[successStatusPlugin]})),workbox.routing.registerRoute(/.*(?:jsdelivr)\\.net.*$/,workbox.strategies.CacheFirst({plugins:[successStatusPlugin]})),workbox.routing.registerRoute(/.*(?:buymeacoffee)\\.com.*$/,workbox.strategies.CacheFirst({plugins:[successStatusPlugin]})),workbox.routing.registerRoute(/.*(?:bootcss)\\.com.*$/,workbox.strategies.StaleWhileRevalidate()),workbox.routing.registerRoute(/.*(?:kakao)\\.com.*$/,workbox.strategies.StaleWhileRevalidate()),workbox.routing.registerRoute(/.*(?:qbox)\\.me.*$/,workbox.strategies.StaleWhileRevalidate()),workbox.routing.registerRoute(/.*(?:onesignal)\\.com.*$/,workbox.strategies.StaleWhileRevalidate()),workbox.precaching.precacheAndRoute([{revision:\"3464661ee5498a08db5b56d1cc4fe964\",url:\"a2hs.js\"},{revision:\"3e6bd75abdd7f7ae1bcc78918515c449\",url:\"ads.txt\"},{revision:\"26274b3cbb0b51e5f015af23b950524c\",url:\"css/main.css\"},{revision:\"fd40b88ac5370a5353a50b8175c1f367\",url:\"images/algolia_logo.svg\"},{revision:\"fce961f0bd3cd769bf9c605ae6749bc0\",url:\"images/apple-touch-icon-next.png\"},{revision:\"1c681acc4a150e7236254c464bb5a797\",url:\"images/cc-by-nc-nd.svg\"},{revision:\"12b4b29e8453be5b7828b524d3feabce\",url:\"images/cc-by-nc-sa.svg\"},{revision:\"dd9cfe99ed839a4a548114f988d653f4\",url:\"images/cc-by-nc.svg\"},{revision:\"2d80546af20128215dc1e23ef42d06c2\",url:\"images/cc-by-nd.svg\"},{revision:\"c696b3db81cbbfba32f66c1dc88b909a\",url:\"images/cc-by-sa.svg\"},{revision:\"6c4f8422b3725cb9f26b6c00e95fc88b\",url:\"images/cc-by.svg\"},{revision:\"79deee77a07fcb79ff680ac0125eacb9\",url:\"images/cc-zero.svg\"},{revision:\"b8975923a585dbaa8519a6068e364947\",url:\"images/favicon-16x16-next.png\"},{revision:\"5a029563fe3214c96f68b46556670ea1\",url:\"images/favicon-32x32-next.png\"},{revision:\"3ba22a9a93f0a031da0bf874e20db3a5\",url:\"images/favicon.ico\"},{revision:\"3ba22a9a93f0a031da0bf874e20db3a5\",url:\"images/icons/favicon.ico\"},{revision:\"7643ad33e5e41a36cd5f75dba549bec9\",url:\"images/icons/icon-128x128.png\"},{revision:\"b905cb2aee57a55edf8a99f50afe24ea\",url:\"images/icons/icon-144x144.png\"},{revision:\"374e47146f16346990918acabab2c3a3\",url:\"images/icons/icon-152x152.png\"},{revision:\"2ea9730c6c6de3b8d1b548f15f9a23f2\",url:\"images/icons/icon-16x16.png\"},{revision:\"6f3e9b84eb6404f8f532b9e2d63bf4e0\",url:\"images/icons/icon-180x180.png\"},{revision:\"ace8b9662221c66d8ba4696d45d8bdb7\",url:\"images/icons/icon-192x192.png\"},{revision:\"2ea9730c6c6de3b8d1b548f15f9a23f2\",url:\"images/icons/icon-32x32.png\"},{revision:\"40d2398b0a7d14a5302e1675c8ba91dd\",url:\"images/icons/icon-48x48.png\"},{revision:\"a448588afc263cfeace4d76a5144a8d9\",url:\"images/icons/icon-512x512.png\"},{revision:\"0d95c8845fbd289d32020d955712f1f1\",url:\"images/icons/icon-72x72.png\"},{revision:\"9d27e582fdd0e72077d9211ef17b310c\",url:\"images/icons/icon-96x96.png\"},{revision:\"5bea188ef94e4c0dc7f088b5bd2d1f8f\",url:\"images/icons/icon-pinned-tab.svg\"},{revision:\"3ec1749c7c22aa322e41d8590f1cc0a8\",url:\"images/icons/mstile-150x150.png\"},{revision:\"ddad9027e42111ccd5b466bc18188970\",url:\"images/logo.svg\"},{revision:\"75073bc6415fe1931e2b5d00d37e60f5\",url:\"images/my_brand.jpg\"},{revision:\"8578a67d75506ddf7db0b6832b45415e\",url:\"images/profile_dog.png\"},{revision:\"1238a4baccd02c6025ec85b58f4282d4\",url:\"images/quote-l.svg\"},{revision:\"85787c6fa27965c81f7be70252b43bed\",url:\"images/quote-r.svg\"},{revision:\"7c334d580ed0c7f2639cc93a4b7d6f9e\",url:\"js/local-search.js\"},{revision:\"c8906b70f7e48a63c06e7334fc6f2b47\",url:\"js/motion.js\"},{revision:\"945140fa822d8917dfcb14f7473833f6\",url:\"js/next-boot.js\"},{revision:\"450b3ff4d24e64773919f26547dfe28f\",url:\"js/schemes/pisces.js\"},{revision:\"3e52ce68063d1a1dcb7ebda20717ba49\",url:\"js/utils.js\"},{revision:\"864a144dbbc956381a47679ec57ab06c\",url:\"lib/anime.min.js\"},{revision:\"c1b8d079c7049879838d78e0b389965e\",url:\"lib/velocity/velocity.min.js\"},{revision:\"444faf512fb24d50a5dec747cbbe39bd\",url:\"lib/velocity/velocity.ui.min.js\"},{revision:\"c79faa9878c854743b460a368f884c5b\",url:\"OneSignalSDKUpdaterWorker.js\"},{revision:\"c79faa9878c854743b460a368f884c5b\",url:\"OneSignalSDKWorker.js\"},{revision:\"21e7b1bb78e0bef85b2b3347142e2fc9\",url:\"robots.txt\"},{revision:\"a5bb5df1cb83a8fb8888139f8fdf40bd\",url:\"sitemap.xsl\"},{revision:\"9a809be113e7ad15ec723093cc6d819c\",url:\"sw-base.js\"},{revision:\"92be01f96d625e52d0b791f9633cee76\",url:\"sw.js\"},{revision:\"4ee030478fed2cd52a81fb272eb43c46\",url:\"index.html\"},{revision:\"60b008f139e0055ecee3b85eefd69e81\",url:\"manifest.json\"}]);"},{"title":"categories","date":"2016-12-20T16:31:00.000Z","updated":"2020-03-15T14:22:42.392Z","comments":false,"path":"categories/index.html","permalink":"https://gracefullight.dev/categories/index.html","excerpt":"","text":""},{"title":"Profile","date":"2017-02-21T05:11:57.000Z","updated":"2020-03-15T14:22:42.392Z","comments":false,"path":"profile/index.html","permalink":"https://gracefullight.dev/profile/index.html","excerpt":"","text":"오류 해결에 도움이 되는 블로그였으면 합니다. 소개신은광@WannaQuitProgramming코딩, 책읽기, 피아노 모토知之者 不如好之者 好之者 不如樂之者모두가 99% 노력을 한다, 1%를 찾자.읽기 좋은 코드가 좋은 코드다.Any application that can be written in JavaScript, will eventually be written in JavaScript - Atwood’s LawGod is The Great Programmer - The Big Switch, Nicholas CarrSuffering =&gt; Perseverance =&gt; Character =&gt; Hope - Romans 5:3-5 멘토모든 프로그래머는 대단하다고 생각합니다, 다만 환경이 압력을 줄 뿐. 기술SKILLSexport const SKILLS = &#123; ProgrammingLanguages: &#123; Resolved: [\"JS\", \"TS\", \"JAVA\", \"PHP\", \"HTML5\"], InProgress: [\"Python\", \"Bash\", \"CSS3\", \"SASS\"], Verify: [\"Go\", \"C#\", \"R\"] &#125;, Backend: &#123; PHP: \"Anything I Want\", NodeJS: \"Anything I Want\", Java: [\"Spring\", \"Spring-boot\", \"JPA\", \"Mybatis\"], Python: [\"Flask\"], WS: [\"Nginx\", \"Apache\", \"Varnish\"] &#125;, Frontend: &#123; Android: true, ReactNative: true, PWA: true, SASS: true, MVVM: &#123; React: \"Anything I Want\", Vue: \"Anything I Want\", Angular: [\"Angular6\", \"RxJS\", \"AngularJS\"], &#125;, DataVisualization: [\"D3\", \"C3\", \"ChartJS\", \"HighChart\"], Design: [\"Bootstrap\", \"Materialize\", \"Bulma\"] &#125;, DevOps: &#123; Container: [\"Kubernetes\", \"Docker\", \"Compose\", \"Swarm\"], Native: [\"CentOS\", \"Ubuntu\", \"Alpine\", \"Debian\"], Cloud: &#123; AWS: [\"EC2\", \"Lambda\", \"ECS\", \"S3\", \"CF\", \"ELB\"], GCP: [\"AE\", \"CE\", \"Function\"], ETC: [\"Heroku\", \"Firebase\", \"OpenShift\", \"Vultr\"] &#125; &#125;, Database: &#123; RDBMS: [\"PostgreSQL\", \"MariaDB\", \"MySQL\", \"Oracle\"], NoSQL: [\"Redis\", \"Firebase\", \"MongoDB\", \"Memcache\"] &#125;, Tools: &#123; SCM: [\"Git\", \"CodeCommit\", \"BitBucket\", \"GitLab\", \"SVN\"], ModuleBundler: [\"Webpack\", \"Systemjs\", \"Babel\"], TaskMGR: [\"Gulp\", \"mix\"], Channel: [\"Jira\", \"Slack\", \"Redmine\", \"Basecamp\"], Analytics: [\"Google Analytics\", \"Naver Analytics\", \"Logger\"] &#125;&#125; 개발연혁EC 솔루션스마트웹앱 (PWA)EC JAPANEC VIETNAMCafe24 Global Tools (Chrome extension, private)서비스WhereIsZEDD9XDPng2-daum-address 모듈나눔로또 위키리얼패킹 포장영상 촬영 시스템쇼핑몰언더아머 쇼핑몰언더아머 효성 임직원몰Beautipop Intl, ビューティースペー셀바이오 전문가몰토키오스포츠온 55아트쉐어링티처빌 교육 쇼핑몰대한민국국방지휘통제체계청와대 인물 채증 시스템지휘통신사령부 체계 접속로그 분석 시스템지휘통신사령부 통신소 상황 관리 시스템지휘통신사령부 시간 외 근무 시스템지휘통신사령부 현금출납부 시스템지휘통신사령부 통합 로그인 시스템기업NAS 관리 시스템셀바이오 물류 관리 시스템지엔텔 영업 자동화 시스템대우 루컴즈우심 시스템어플리케이션진동벨 앱 Contributelogaretm/vee-validateScoopInstaller/MainGoogle/Chrome: ServiceWorkerSamgsungInternet/supportnuxt-community/pwa-modulek1LoW/gmo-pg-phpSocialiteProviders/Providershelpers/handlebars-helpersyscoder/hexo-theme-indigoricharvey/nginx-php-fpmtsuyoshiwada/react-stack-gridValue/fingerprintjs2MrSwitch/hello.jsadonisjs/adonis-allypwa.compat, unpkg, adonisjs-framework, tadpolefordbtools… 등 사용하는 패키지들의 버그 트레킹 상훈국방부장관상 위치function doLoadFile(e,t){var a=new XMLHttpRequest;a.onreadystatechange=function(){4==a.readyState&&200==a.status&&t(a.responseText)},a.open(\"GET\",e,!0),a.send()}function makeMaps(){for(var e in window.hexoLmaps.maps)console.log(\"map #\",e),window.hexoLmaps.maps[e]()}function doLoadScript(e,t){var a=document.createElement(\"script\");a.type=\"text/javascript\",a.src=e,a.onreadystatechange=a.onload=function(){t.done||a.readyState&&!/loaded|complete/.test(a.readyState)||(t.done=!0,t())},document.querySelector(\"head\").appendChild(a)}function loadScript(){window.hexoLmaps.mapScripLoaded=!0;var e=document.createElement(\"link\");e.rel=\"stylesheet\",e.href=\"https://unpkg.com/leaflet@0.7.7/dist/leaflet.css\",document.querySelector(\"head\").appendChild(e),doLoadScript(\"https://unpkg.com/leaflet@0.7.7/dist/leaflet.js\",makeMaps)}window.hexoLmaps=window.hexoLmaps||{maps:{}},window.hexoLmaps.maps.initleaflet6119=function(){var e=L.map(\"leaflet6119\");e.setView([37.484207,126.929706],15);L.tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",{attribution:\"Map data © OpenStreetMap contributors.\",maxZoom:18}).addTo(e)},window.hexoLmaps.mapScripLoaded||loadScript()toGeoJSON=function(){\"use strict\";var s,t=/\\s*/g,o=/^\\s*|\\s*$/g,i=/\\s+/;function f(e){if(!e||!e.length)return 0;for(var t=0,r=0;t"},{"title":"Project","date":"2020-03-15T14:22:42.392Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"project/index.html","permalink":"https://gracefullight.dev/project/index.html","excerpt":"","text":""},{"title":"tags","date":"2016-12-20T14:10:58.000Z","updated":"2020-03-15T14:22:42.392Z","comments":false,"path":"tags/index.html","permalink":"https://gracefullight.dev/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"One true layout 만들기","slug":"One-true-layout","date":"2020-03-15T13:54:18.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2020/03/15/One-true-layout/","link":"","permalink":"https://gracefullight.dev/2020/03/15/One-true-layout/","excerpt":"","text":"One true layoutHeader, Navigation, Aside, Section, Footer 로 이루어진 레이아웃을 만들 시에float 을 사용해서 구성할 경우 틀어짐을 잡는 방법에 대한 내용이다.원문으로 보이는 링크에서는 진정한 하나의 레이아웃을 찾는 과정 중 하나이며 Eqaul Height Columns - revisited로 소개되고 있다. 이슈아래와 같은 레이아웃에는 footer 영역이 섹션에 붙어 올라온다.12345678910111213141516171819202122232425262728293031&lt;style&gt; body &#123; width: 1000px; margin: 0 auto; &#125; #aside &#123; float: left; width: 200px; &#125; #section &#123; float: left; width: 800px; &#125;&lt;/style&gt;&lt;body&gt; &lt;div id=\"header\"&gt;header&lt;/div&gt; &lt;div id=\"nav\"&gt;nav&lt;/div&gt; &lt;div id=\"wrap\"&gt; &lt;div id=\"aside\"&gt; &lt;p&gt;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sed sollicitudin mauris. Aliquam faucibus facilisis vulputate. Curabitur condimentum placerat mattis. Duis at metus at tellus volutpat ultrices. Cras lorem eros, cursus et risus sit amet, gravida feugiat libero. Nullam id faucibus ipsum. Nulla a leo sed eros mattis bibendum. Nullam et sapien in orci tempus elementum eu sed augue. Pellentesque eu vestibulum arcu. Pellentesque vel finibus libero. Nulla facilisi. Quisque dolor enim, ornare eget elit ac, pharetra porta ex. Vivamus eleifend eu arcu nec consequat. &lt;/p&gt; &lt;/div&gt; &lt;div id=\"section\"&gt; &lt;p&gt;Nam pulvinar dictum nibh id ullamcorper. Suspendisse justo eros, tempor vel faucibus in, pellentesque congue enim. Proin non eleifend turpis, vel commodo purus. Fusce vitae nisl dapibus, tincidunt elit at, cursus lacus. Maecenas varius imperdiet sollicitudin. Nunc pharetra fringilla enim ut facilisis. Curabitur maximus nibh non rhoncus semper. Duis porta, purus ut tincidunt convallis, sem purus pharetra erat, eu vestibulum tellus mi id eros. Fusce congue, erat at blandit mollis, tellus ex semper velit, dapibus commodo ante turpis a neque. Fusce vel ex id sem auctor accumsan. Maecenas finibus nunc sem, ut gravida felis efficitur at. Pellentesque lobortis dui non ligula condimentum, at auctor dui blandit. &lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;div id=\"footer\"&gt;footer&lt;/div&gt;&lt;/body&gt; 해결방안 overflow: hidden래퍼에 이 속성을 넣는 것으로 해결 된다.1234body &#123; width: 1000px; margin: 0 auto; &#125;#aside &#123; float: left; width: 200px; &#125;#section &#123; float: left; width: 800px; &#125;#wrap &#123; overflow: hidden; &#125; clear: both또는 래퍼를 삭제하고 구획을 나누는 부분에 sibling 노드로 clear: both 속성을 주면 된다.12345678910111213141516171819202122232425262728293031323334353637&lt;style&gt; body &#123; width: 1000px; margin: 0 auto; &#125; .clear &#123; clear: both; &#125; #aside &#123; float: left; width: 200px; &#125; #section &#123; float: left; width: 800px; &#125;&lt;/style&gt;&lt;body&gt; &lt;div id=\"header\"&gt;header&lt;/div&gt; &lt;div id=\"nav\"&gt;nav&lt;/div&gt; &lt;div id=\"aside\"&gt; &lt;p&gt; Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi sed sollicitudin mauris. Aliquam faucibus facilisis vulputate. Curabitur condimentum placerat mattis. Duis at metus at tellus volutpat ultrices. Cras lorem eros, cursus et risus sit amet, gravida feugiat libero. Nullam id faucibus ipsum. Nulla a leo sed eros mattis bibendum. Nullam et sapien in orci tempus elementum eu sed augue. Pellentesque eu vestibulum arcu. Pellentesque vel finibus libero. Nulla facilisi. Quisque dolor enim, ornare eget elit ac, pharetra porta ex. Vivamus eleifend eu arcu nec consequat. &lt;/p&gt; &lt;/div&gt; &lt;div id=\"section\"&gt; &lt;p&gt; Nam pulvinar dictum nibh id ullamcorper. Suspendisse justo eros, tempor vel faucibus in, pellentesque congue enim. Proin non eleifend turpis, vel commodo purus. Fusce vitae nisl dapibus, tincidunt elit at, cursus lacus. Maecenas varius imperdiet sollicitudin. Nunc pharetra fringilla enim ut facilisis. Curabitur maximus nibh non rhoncus semper. Duis porta, purus ut tincidunt convallis, sem purus pharetra erat, eu vestibulum tellus mi id eros. Fusce congue, erat at blandit mollis, tellus ex semper velit, dapibus commodo ante turpis a neque. Fusce vel ex id sem auctor accumsan. Maecenas finibus nunc sem, ut gravida felis efficitur at. Pellentesque lobortis dui non ligula condimentum, at auctor dui blandit. &lt;/p&gt; &lt;/div&gt; &lt;!-- clear:both 노드 추가 --&gt; &lt;div class=\"clear\"&gt;&lt;/div&gt; &lt;div id=\"footer\"&gt;footer&lt;/div&gt;&lt;/body&gt;","categories":[{"name":"css","slug":"css","permalink":"https://gracefullight.dev/categories/css/"}],"tags":[{"name":"css","slug":"css","permalink":"https://gracefullight.dev/tags/css/"},{"name":"layout","slug":"layout","permalink":"https://gracefullight.dev/tags/layout/"}]},{"title":"CSS3 레이아웃","slug":"css3-layout","date":"2020-03-01T05:52:04.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2020/03/01/css3-layout/","link":"","permalink":"https://gracefullight.dev/2020/03/01/css3-layout/","excerpt":"","text":"CSS3사용할 수 없는 브라우저에서 신규 문법은 무시된다. BFCBlock Formatting Context이며 아래 조건에서 생성된다.루트 요소float: right, leftposition: absolutedisplay: inline-blockoverflow 값이 visable 외에 다른 값일 때flex itemgrid itemtable cell layout float123456789101112&lt;style&gt; .box &#123; float: left; &#125; /* 다음 세 가지 방법으로 container 안에 box 를 넣어줄 수 있다. */ .container &#123; overflow: hidden; &#125; .container &#123; float: left; &#125; .container &#123; display: flow-root; &#125;&lt;/style&gt;&lt;div class=\"container\"&gt; &lt;div class=\"box\"&gt; &lt;p&gt;플로팅&lt;/p&gt; &lt;/div&gt;&lt;/div&gt;overflow: hidden 으로 플로팅 요소를 잡는 것은 box-shadow가 잘리는 등의 문제가 있다.display: flow-root는 모던 브라우저에서만 지원한다. positionstatic: 기본 값이다. 코드상 노출된 순서대로 표시된다.relative: 오프셋(top, left…)와 함께 사용된다.새로운 컨테이너 블록이 되며 하위 absolute 를 가둘 수 있다 .absolute: 흐름에서 벗어나며 자신이 포함된 컨테이너 블록의 가장자리를 기준으로 오프셋만큼 이동한다.별도의 컨테이너 블록이 선언되지 않았을 경우, viewport가 된다.fixed: viewport를 기준으로 고정된다. 스크롤해도 변하지 않는다.sticky: static + fixed 로 문서와 함께 스크롤 되다가 설정한 위치가 되면 고정된다.모던 브라우저에서만 지원한다.12345678910111213&lt;style&gt; .container &#123; width: 400px; height: 400px; &#125; /* 이 박스는 맨 위(viewport)에서 10 10 씩 떨어져있다. */ .box &#123; position: absolute; top: 10px; right: 100px; width: 200px; &#125; /* 컨테이너 블록으로 만들면 박스가 들어온다. */ /* .container &#123; position: relative; width: 400px; height: 400px; &#125; */&lt;/style&gt;&lt;div class=\"container\"&gt; &lt;div class=\"box\"&gt; &lt;p&gt;absolute&lt;/p&gt; &lt;/div&gt;&lt;/div&gt; multi-columncolumn-count, column-width로 단 효과를 낼 수 있다.12345678910&lt;style&gt; .columes &#123; column-width: 200px; column-count: 2; &#125;&lt;/style&gt;&lt;div class=\"columns\"&gt; &lt;p&gt;첫 번째 단&lt;/p&gt; &lt;p&gt;두 번째 단&lt;/p&gt;&lt;/div&gt; axis주축과 교차축이 있다.기본은 flex-direction: row이며 교차축은 수직이다.flex-direction: column이면 교차축은 수평이다.아이템의 배치는 항상 교차축(cross axis)에서 이뤄진다.교차축 === 블럭축(block axis) 이다.그리드에서는 컬럼 축(column axis)이라고도 한다. flexbox1차원 레이아웃display: flex 설정시 자식은 flex item이 된다.flex item은 min-content로 설정한 너비보다 작아질 수 없으므로 컨테이너를 벗어난다.min-content는 아이템 내부 단어 중 가장 긴 것을 기준으로 설정된다.flex-wrap: wrap; 속성 설정 시 여러 줄에 걸쳐 표현된다.줄이 넘어가면 넘어간 줄이 flex container 가 된다. 플렉스 아이템 배치align-itemsstretch: 기본값으로 늘어난다.flex-start: 요소가 컨테이너 상단에 붙는다.flex-end: 바닥에 붙는다.center: 중앙에 배치된다.align-self: flex item 에서 위 속성을 덮는다. 플렉스 아이템 정렬justify-contentflex-direction: row면 가로줄, column이면 세로줄에서 동작한다.flex-start: 기본값flex-end: 플렉스 컨테이너 끝에서부터 추가된다.space-between: 아이템 사이의 공간을 똑같은 간격으로 설정한다.space-around 모든 아이템 양쪽에 똑같은 간격의 마진을 설정한다.space-evenly 모든 공백을 똑같이 설정한다.아이템-아이템 간 컨테이너-아이템 간의 간격이 똑같다.center: 가운데 설정한다.align-content교차축 위에서 동작한다.flex-wrap: wrap이고 아이템 배치 공간보다 컨테이너가 길 때 사용할 수 있다.초기값은 start이다.나머지 동작은 justify-content와 같다.margin-left: auto; 를 사용하면 원하는 아이템을 반대방향에 배치할 수 있다. 반응형 플렉스박스flex-grow: flex-basis에 설정한 값보다 커질 수 있는지 설정한다.flex-shrink: flex-basis에 설정한 값보다 작아질 수 있는지 설정한다.500px 컨테이너에 200px 플렉스 아이템이 3개 있다면 활성화시 영역 안에 들어올 것이다.flex-basis: flex-direction 에 따라 너비나 높이의 기본값을 지정한다.flex-basis: content: 주축의 컨텐츠 크기로 설정된다.flex-basis: auto: 플렉스 아이템에 width 속성이 있다면 그 값을 flex-basis 로 사용한다. 특별한 경우가 아니라면 auto가 권장된다.보통 세 속성을 합쳐서 flex: 0 0 200px; 처럼 적는다. 플렉스박스 방향플렉스박스와 그리드는 dir=ltr dir=rtl 속성에 좌,우 영향을 받는다.flex-direction: row-reverseflex-direction: column-reverse grid2차원 레이아웃123456789101112131415161718192021222324252627282930&lt;style&gt; .container &#123; display: grid; grid-template-columns: 1fr 1fr 1fr; /* grid-column-gap, grid-row-gap 축약 */ grid-gap: 20px; /* 가장 최근 명세에서는 `grid-` prefix 가 빠졌다 */ gap: 20px; &#125;&lt;/style&gt;&lt;div class=\"container\"&gt; &lt;div class=\"item\"&gt; &lt;h2&gt;grid 1&lt;/h2&gt; &lt;/div&gt; &lt;div class=\"item\"&gt; &lt;h2&gt;grid 2&lt;/h2&gt; &lt;/div&gt; &lt;div class=\"item\"&gt; &lt;h2&gt;grid 3&lt;/h2&gt; &lt;/div&gt; &lt;div class=\"item\"&gt; &lt;h2&gt;grid 4&lt;/h2&gt; &lt;/div&gt; &lt;div class=\"item\"&gt; &lt;h2&gt;grid 5&lt;/h2&gt; &lt;/div&gt; &lt;div class=\"item\"&gt; &lt;h2&gt;grid 6&lt;/h2&gt; &lt;/div&gt;&lt;/div&gt; frfraction유연한 너비를 나타내는 단위이다. 그리드 트랙그리드의 열과 행을 나타낸다. 그리드 배치프로그래머의 수는 0부터 시작이지만 그리드 배치에서는 1부터여야한다.LTR 의 경우는 왼쪽 끝이 1 이다.RTL 의 경우는 오른쪽 끝이 1 이다.반대편 끝은 -1 이다.1234567891011.container &#123; display: grid; grid-template-columns: 1fr 1fr 1fr; grid-gap: 20px;&#125;.item1 &#123; grid-column: 1 / 3; grid-row: 1; &#125;.item2 &#123; grid-column: 3; grid-row: 1; &#125;.item3 &#123; grid-column: 1; grid-row: 2 / 4; &#125;.item4 &#123; grid-column: 2 / 4; grid-row: 2; &#125;.item5 &#123; grid-column: 2 / 4; grid-row: 3; &#125;grid-column: auto / span 2; 처럼 시작 위치를 auto로 잡고 끝 위치를 span 2로 잡으면 자동 배치 기능에 의해 그리드 아이템 위치는 자동으로 정해지고 너비는 항상 컬럼 두 개만큼 확장한다. 그리드 정렬justify-items로 설정하며 각 영역 안에서 정렬된다.초기값은 stretch이다. named area그리드에 이름을 직접 지정할 수도 있다..은 공백을 나타낸다.영역은 반드시 사각형이여야한다.align-items, justify-items 속성 변경시 반복이 무시된다. (stretch가 아니므로)123456789101112131415.container &#123; display: grid; grid-template-columns: 1fr 1fr 1fr; grid-gap: 20px; grid-template-areas: \"a a b\" \". d d\" \"c e e\"&#125;.item1 &#123; grid-area: a; &#125;.item2 &#123; grid-area: b; &#125;.item3 &#123; grid-area: c; &#125;.item4 &#123; grid-area: d; &#125;.item5 &#123; grid-area: e; &#125; 반응형 그리드auto-fill: 너비가 허용하는만큼 최대한 많이, 다만 아이템 갯수가 부족하면 빈 공간을 남긴다.auto-fit: 아이템 갯수가 부족하면 남은 공간은 균등하게 분배된다.minmax: 너비의 최소, 최대크기를 지정할 수 있다.아래 예시라면 200px 의 컬럼이 몇 개 들어가는지 계산한 뒤, 남은 공간을 컬럼에 균등하게 분배된다.123456.container &#123; display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); /* 컨텐츠에 따라 그리드가 길어진다. */ grid-auto-rows: minmax(150px, auto);&#125; 그리드 흐름grid-auto-flow 속성으로 조절한다.row: 기본값이며 왼쪽 위부터 오른쪽으로 칸을 채워나간다.column: 줄을 채우고 다음 컬럼을 채운다.dense: 빈 공간에 채워넣는다.sparse: 기본값이며 빈 공간을 내버려둔다.이 외에 order 속성으로 직접 순서 제어가 가능하다.다만 dense나 order는 탭 순서까지 변경해주지 않아 접근성을 벗어난다. supports구 브라우져와의 호환을 위해 @supports (display: grid) 처럼 서포트 피쳐쿼리를 사용할 수 있다.","categories":[{"name":"css","slug":"css","permalink":"https://gracefullight.dev/categories/css/"}],"tags":[{"name":"css","slug":"css","permalink":"https://gracefullight.dev/tags/css/"},{"name":"flexbox","slug":"flexbox","permalink":"https://gracefullight.dev/tags/flexbox/"},{"name":"grid","slug":"grid","permalink":"https://gracefullight.dev/tags/grid/"}]},{"title":"NodeJS에서 커맨드 파싱하기","slug":"NodeJS에서-커맨드-파싱하기","date":"2020-02-16T11:10:12.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2020/02/16/NodeJS에서-커맨드-파싱하기/","link":"","permalink":"https://gracefullight.dev/2020/02/16/NodeJS%EC%97%90%EC%84%9C-%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%8C%EC%8B%B1%ED%95%98%EA%B8%B0/","excerpt":"","text":"argzeit/arg 패키지를 이용하면 된다. 사용법arg 함수 하나로 파싱이 가능하다.1234const arg = require('arg');// `options` is an optional parameterconst args = arg(spec, options = &#123;permissive: false, argv: process.argv.slice(2)&#125;);세부적인 사용방법은 다음과 같다.타입을 정하고옵션과 축약 옵션을 정하고검증을 넣는다. 소스12345678910111213141516171819202122232425262728293031323334// 계정정보를 받는 스크립트라면const help = () =&gt; &#123; console.log(`usage =&gt; ...`);&#125;;let args = &#123;&#125;;try &#123; args = arg(&#123; \"--help\": Boolean, \"--user\": String, \"--password\": String, \"--verbose\": arg.COUNT, \"--test\": Boolean, \"-h\": \"--help\", \"-u\": \"--user\", \"-p\": \"--password\", \"-v\": \"--verbose\" &#125;);&#125; catch (err) &#123; if (err.code === \"ARG_UNKNOWN_OPTION\") &#123; help(); process.exit(1); &#125;&#125;if (!(args[\"--user\"] &amp;&amp; args[\"--password\"])) &#123; help(); process.exit(1);&#125;if (args[\"--test\"] === true) &#123; process.env.TEST = 1;&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"arg","slug":"arg","permalink":"https://gracefullight.dev/tags/arg/"}]},{"title":"Workbox5 버전의 주요 변경사항","slug":"Workbox5-breaking-changes","date":"2020-02-02T07:47:22.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2020/02/02/Workbox5-breaking-changes/","link":"","permalink":"https://gracefullight.dev/2020/02/02/Workbox5-breaking-changes/","excerpt":"","text":"Workbox5 버전잘 돌던 workbox-cli 가 5버전 릴리즈 후부터 돌지 않아서 확인해보았다.전체 문서는 여기서 확인 가능하다. injectManifestself.__WB_MANIFEST 를 주입받는 방식으로 변경되었다.12345// v4:precacheAndRoute([]);// v5:precacheAndRoute(self.__WB_MANIFEST); NavigationRouteblacklist, whitelist 에서 denylist, allowlist 로 키 명이 변경되었다. BroadcastChannelbroadcast-update 가 자체 API 에서 postMessage()로 변경되었다.이벤트 리스너가 많아져 복잡해지고, 기존 API에서는 메세징의 버퍼 기능이 없었기 때문이다.1234567891011121314151617// v4:const updatesChannel = new BroadcastChannel('api-updates');updatesChannel.addEventListener('message', (event) =&gt; &#123; const &#123;cacheName, updatedUrl&#125; = event.data.payload; // ... your code here ...&#125;);// v5:// This listener should be added as early as possible in your page's lifespan// to ensure that messages are properly buffered.navigator.serviceWorker.addEventListener('message', (event) =&gt; &#123; // Optional: ensure the message came from workbox-broadcast-update if (event.meta === 'workbox-broadcast-update') &#123; const &#123;cacheName, updatedUrl&#125; = event.data.payload; // ... your code here ... &#125;&#125;);","categories":[{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/categories/pwa/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/tags/pwa/"},{"name":"serviceworker","slug":"serviceworker","permalink":"https://gracefullight.dev/tags/serviceworker/"},{"name":"cache","slug":"cache","permalink":"https://gracefullight.dev/tags/cache/"}]},{"title":"Pythonic - 핸들링","slug":"Pythonic-handling","date":"2020-01-27T09:38:10.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2020/01/27/Pythonic-handling/","link":"","permalink":"https://gracefullight.dev/2020/01/27/Pythonic-handling/","excerpt":"","text":"Handling 파일File pointer 여는 법은 f.open(‘test.txt’, ‘w’)이 경우 f.write 후에 f.close 해줘야한다.with 사용시 close 를 생각하지 않아도 된다.with 구문에서 선언된 변수는 바깥에서 사용가능f.seek(5) 처럼 위치로 이동 가능하다.string.Template 과 함께 뷰 파일에서 사용할 수 있다.1234567891011121314151617181920212223242526272829303132# 예시 1with open('test.txt', 'w') as f: f.write('Test')# 예시 2with open('test.txt', 'r') as f: # print(f.read()) while True: chunk = 2 line = f.read(chunk) print(line) if not line: reak# 예시 3# w+ 로 열면 파일이 초기화 됨with open('test.txt', 'w+') as f: f.write(s) # 쓰기 후에 읽기위해 0번째로 이동 f.seek(0) print(f.read())# 예시 4import stringwith open('view/mail.tpl', 'r') as f: t = string.Template(f.read())# $name, $contentscontents = t.substitute(name='gracefullight', contents='Thanks')print(contents) 파일 확인os.path.exsistsos.path.isfileos.path.isdir 파일 제어os.renameos.symlink: 심볼릭shutil.copy: 복사pathlib.Path('TouchFilePath').touch(): 터치 파일 폴더 제어os.mkdiros.rmdir: 빈 디렉토리만 가능shutil.retree: recursive CSVcsv.DictWritercsv.DictReader 임시파일12345678910111213141516171819import tempfile# 삭제 됨with tempfile.TemporaryFile(mode='w+') as t: t.write('hello')# 삭제 안 됨with tempfile.NamedTemporaryFile(delete=False) as t: # print(t.name) with open(t.name, 'w+') as f: f.write('hello')# 삭제되는 디렉토리with tempfile.TemporaryDirectory() as td: print(td)# 삭제 안 되는 디렉토리temp_dir = tempfile.mkdtemp() 압축 tar12345678910import tarfilewith tarfile.open('test.tar.gz', 'w:gz') as tr: tr.add('dir')with tarfile.open('test.tar.gz', 'r:gz') as tr: tr.extractall(path='dir') with tr.extractfile('tarball') as f: print(f.read()) zip123456789import zipfilewith zipfile.ZipFile('test.zip', 'w') as z: # 하나의 폴더만 가능 z.write('dir') # 하위 전체 압축 for f in glob.glob('dir/**', recursive=True): z.write(f) iniconfigparser.ConfigParser() yamlpip install pyyaml 로깅logging.criticalerrorwarninginfodebug12345678910111213141516import logging# basicConfig 에 format 을 정의 가능# doc 확인logging.basicConfig(filename='test.log', level=logging.INFO)logging.info('info %s %s', 'test', 'test2') # === logging.info('info &#123;&#125;'.format('test')# 해당 파일에서 로그명 재정의logger = logging.getLogger(__name__)# 로그 레벨 재정의logger.setLevel(logging.DEBUG)# 전체 설정 변경logging.config.fileConfig(...)logging.config.dictConfig(...) 로깅 핸들러여러 핸들러를 쉽게 붙힐 수 있다. 문서handler = logging.FileHandler(...)logger.addHandler(handler) 로깅 필터로그의 출력을 필터를 사용해 쉽게 가공 가능하다. 문서 메일smtplib.SMTP 와 from email import message 패키지로 가능하다.파일 첨부는 email.mime 의 multipart와 text 패키지로 가능하다.파일 추가 시에는 헤더를 Content-Disposition: attachment로 줘야한다.logger.handelrs.SMTPHandler 로 메일로 로그를 받을 수 있다. 쉘 서브프로세스123import subprocesssubprocess.run(['ls', '-al']) 커맨드 체이닝여러 커맨드를 한 번에 실행시킬 경우 인젝션 방어를 위해 다음과 같이 처리하는 것이 좋다.12345process1 = subprocess.Popen(['ls', '-al'], stdout=subprocess.PIPE)process2 = subprocess.Popen(['grep' , 'test'], stdin=p1.stdout, stdout=subprocess.PIPE)process1.stdout.close()output = process2.communicate()[0] 커맨드 파싱argparse를 사용하자. 날짜파이썬에는 날짜를 timestamp 로 변환해 출력하는 기능은 없다. 초기화1234567891011121314151617181920212223import datetimeimport timenow = datetime.datetime.now()print(now)print(now.isoformat())print(now.strftime('%Y-%m-%d %H:%M:%S.%f'))# 날짜만today = datetime.date.today()print(today) # 2020-02-02print(today.isoformat()) # 2020-02-02print(today.strftime('%Y-%m-%d'))# 시간만t = datetime.time(hour=1, minute=10, second=5, microsecond=100)print(t) # 01:10:05.000100print(t.isoformat()) # 01:10:05.000100print(t.strftime('%H:%M:%S')) # 01:10:05# timestampprint(time.time()) # 1580617313.843047 연산12345now = datetime.datetime.now()print(now)d = datetime.timedelta(weeks=1)print(now - d)","categories":[{"name":"python","slug":"python","permalink":"https://gracefullight.dev/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://gracefullight.dev/tags/python/"}]},{"title":"쿠버네티스 리눅스 커널 튜닝하기","slug":"k8s-linux-kernel-tuning","date":"2020-01-24T14:43:55.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2020/01/24/k8s-linux-kernel-tuning/","link":"","permalink":"https://gracefullight.dev/2020/01/24/k8s-linux-kernel-tuning/","excerpt":"","text":"변경가능한 커널 설정노드 레벨의 sysctl과 네임스페이스 sysctl과 같은 커널 파라미터를 sysctl 인터페이스로 변경할 수 있다.변경 가능한 파라미터는 다음과 같다.abi: 실행 도메인 특성fs: 특정 파일 시스템, 파일 핸들링, inode, dentry, 쿼터 조정kernel: 전역 커널 설정 변경net: 네트워킹sunrpc: SUN rpc 호출vm: 메모리 조정, 버퍼 및 캐시 관리user: 사용자별 네임스페이스 제한taint, toleration 을 같이 사용해 사이드이펙을 방지하라고 권하고 있다. ARP 캐시neighbour: arp_cache: neighbor table overflow!쿠버네티스가 대량의 IP를 소비하면서 ARP 캐시 공간을 모두 사용할 경우 ARP 캐시 관련 변수 조절이 가능하다.대규모 HPC 클러스터에서는 흔한 일이며 쿠버네티스의 주소 소진을 방지할 수 있다.이 오류는 nodes with 40+ cores &amp;&amp; more than 16 segments in each node 정도에서 발생하는 듯 하다.net.ipv4.neigh.default.gc_thresh1: gc_thresh1 represents the minimum number of entries that may be in the ARP cache. Garbage collection will not be triggered if the number of entries is below this setting.net.ipv4.neigh.default.gc_thresh2: gc_thresh2 represents the soft maximum number of entries that may be in the ARP cache. This setting is arguably the most important, as ARP garbage collection will be triggered ~5s after reaching this soft maximum.net.ipv4.neigh.default.gc_thresh3: gc_thresh3 represents the hard maximum number of entries in the ARP cache.123net.ipv4.neigh.default.gc_thresh1 = 80000net.ipv4.neigh.default.gc_thresh2 = 90000net.ipv4.neigh.default.gc_thresh3 = 100000 예시1234567891011121314151617apiVersion: v1kind: Podmetadata: name: sysctl-examplespec: securityContext: sysctls: - name: kernel.shm_rmid_forced value: \"0\" - name: net.core.somaxconn value: \"10000\" - name: kernel.msgmax value: \"65536\" - name: fs.file-max value: \"2097152\" - name: net.ipv4.ip_local_port_range value: \"1024 65536\" 여담파면 팔수록 리눅스부터 다시 정리해야되겠다는 느낌이 든다. 참조Using sysctls in a Kubernetes Cluster리눅스 서버의 TCP 네트워크 성능을 결정짓는 커널 파라미터 이야기 - 2편How to increase the ARP cache garbage collection thresholdScaling Kubernetes to 2,500 nodes","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"},{"name":"k8s","slug":"server/docker/k8s","permalink":"https://gracefullight.dev/categories/server/docker/k8s/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"linux","slug":"linux","permalink":"https://gracefullight.dev/tags/linux/"},{"name":"k8s","slug":"k8s","permalink":"https://gracefullight.dev/tags/k8s/"}]},{"title":"서비스워커로 POST Request 캐싱하기","slug":"Serviceworker-cache-POST-requests","date":"2020-01-16T14:58:30.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2020/01/16/Serviceworker-cache-POST-requests/","link":"","permalink":"https://gracefullight.dev/2020/01/16/Serviceworker-cache-POST-requests/","excerpt":"","text":"앞서서비스워커로 Navigation Request 나 Static Assets 에 대한 리소스 캐시는 쉽다.(이전 포스팅 참조)하지만 POST Request 에 대한 레퍼런스는 찾기 힘들어 결국 만들어버렸다.복잡한 로직이지만 Request Body 를 SHA1로 해싱해 키로 IndexedDB 에 저장하고 그 키가 맞으면 꺼내주는 방식이다. 소스1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586// IndexedDB 는 Promisify 되어있지 않아서 라이브러리가 필요하다.importScripts(\"https://cdn.jsdelivr.net/npm/localforage@1.7.3/dist/localforage.min.js\");// 캐시하고 싶은 POST 엔드포인트const ENDPOINT = 'https://your-domain/post-request';const bin2Hex = buffer =&gt; &#123; let digest = ''; const dataView = new DataView(buffer); for (let i = 0, len = dataView.byteLength; i &lt; len; i += 4) &#123; let value = dataView.getUint32(i); // hex 로 바꾸면 패딩비트 0 이 제거된다. let hex = value.toString(16); // uint32 는 4bytes 로 나온다. let padding = '00000000'; // 패딩을 더해서 뒤에서 잘라준다. let paddedValue = (padding + hex).slice(-padding.length); digest += paddedValue; &#125; return digest;&#125;;const postRequestFetchListener = fetchEvent =&gt; &#123; const requestUrl = fetchEvent.request.url; const method = fetchEvent.request.method.toUpperCase(); // 맞는 엔드포인트인지 확인 if (!(method === 'POST' &amp;&amp; requestUrl === ENDPOINT)) &#123; return; &#125; fetchEvent.respondWith( fetchEvent.request.clone().arrayBuffer().then(buffer =&gt; &#123; const requestBody = String.fromCharCode.apply(null, new Uint8Array(buffer)); // request body 에 원하는 조건만 캐시처리할 수 있게 한다. if (requestBody.includes('cache=1')) &#123; // 속도면에서 다른 해싱 알고리즘을 사용해도 무방하다. return crypto.subtle.digest('SHA-1', buffer); &#125; return Promise.reject(); &#125;).then(sha1Buffer =&gt; &#123; const sha1Hash = bin2Hex(sha1Buffer); console.log('SHA1 Hash =&gt; ', sha1Hash); // IndexedDB 에서 캐시된 키를 찾는다. return localforage.getItem(sha1Hash) .then(cachedResponse =&gt; &#123; if (cachedResponse) &#123; console.log('Cached repsonse =&gt; ', cachedResponse); return new Response(cachedResponse, &#123; // 여기서 statusCode 를 304 로 내보내고 싶었으나, Body 를 반환할 수 없었다. status: 200, statusText: 'OK', headers: &#123; 'Content-Length': cachedResponse.length, 'Content-Type': 'application/json', // 그래서 커스텀 헤더를 추가했다. 'X-SW-Cache-Hit': 1, 'X-SW-Cache-Type': 'POST' &#125; &#125;); &#125; // 캐시된 데이터가 없을 경우 새로 요청한다. return fetch(fetchEvent.request).then(response =&gt; &#123; console.log('Fetching response =&gt; ', response.clone()); // 정상적일 경우만 IndexedDB 에 저장한다. if (200 &lt;= response.status &amp;&amp; response.status &lt; 400) &#123; // 이 작업은 비동기지만 굳이 기다리지 않아도 된다. response.clone().text().then(textResponse =&gt; &#123; console.log('Caching response =&gt; ', textResponse); return localforage.setItem(sha1Hash, textResponse); &#125;); &#125; return response; &#125;); &#125;); &#125;).catch(() =&gt; fetch(fetchEvent.request)) );&#125;;// 리스너를 등록해준다.self.addEventListener('fetch', postRequestFetchListener); 여담WorkBox 를 사용할 수 있다면 CacheableResponse와 CacheFirst 정책으로 단번에 처리 가능할 것이다.굳이 해시를 키로 사용하지 않아도 된다. RequestBody 의 Serialize 를 키로 써도 된다. (만들면서 crypto 라이브러리를 사용해보고 싶었을 뿐)","categories":[{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/categories/pwa/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/tags/pwa/"},{"name":"serviceworker","slug":"serviceworker","permalink":"https://gracefullight.dev/tags/serviceworker/"},{"name":"cache","slug":"cache","permalink":"https://gracefullight.dev/tags/cache/"}]},{"title":"Dockerfile의 모든 것","slug":"Dockerfile의-모든-것","date":"2020-01-13T13:36:44.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2020/01/13/Dockerfile의-모든-것/","link":"","permalink":"https://gracefullight.dev/2020/01/13/Dockerfile%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83/","excerpt":"","text":"인스트럭션FROM: 빌드하는 이미지의 기반 이미지 지정RUN: 이미지 빌드 시 컨테이너에서 실행할 명령어 정의COPY: 호스트에서 컨테이너로 파일 및 디렉토리 복사ADD: COPY + 압축 해제 + URL 다운로드운영 체제를 담은 기반 이미지를 만드는 경우처럼 특수한 경우에만 사용하면 된다.안정성 보장이 되지 않으므로 COPY 를 사용하자.CMD: 컨테이너에서 foreground로 실행할 명령어 정의ENTRYPOINT: 컨테이너를 실행 가능 파일로 사용할 때 정의하는 명령CMD 와 ENTRYPOINT 둘 다 사용 가능ARG: docker image build를 실행할 때 사용하는 변수ENV: 컨테이너 안의 환경변수 정의EXPOSE: 컨테이너가 노출하는 포트VOLUME: 호스트나 다른 컨테이너에서 마운트할 수 있는 포인트 생성LABEL: 이미지에 추가하는 메타데이터STOPSIGNAL: 컨테이너에 전달되면 컨테이너를 종료하는 시스템 시그널 설정HEALTHCHECK: 컨테이너 안에서 명령을 실행 후 결과를 헬스 체크에 사용USER: 컨테이너 실행 시 컨테이너 사용자이미지 빌드시 USER 뒤에 나오는 RUN 인스트럭션도 해당 사용자의 권한으로 실행된다.WORKDIR: 컨테이너의 작업 디렉토리ONBUILD: 컨테이너 안에서 실행되는 명령 정의, 이미지에서 실행되지 않는다.ONBUILD 를 정의한 이미지를 기반 이미지로 삼아 다른 이미지를 빌드할 때 실행된다. 이미지 린팅hadolint 를 설치해 Dockerfile best practices 에 기반해 이미지를 생성했는지 검증하자. 기반 이미지scratch: 아무 것도 없는 이미지https 통신이 필요한 경우 cacert.pem 을 /etc/ssl/certs 에 추가해야한다.디버깅도 힘들다busybox: 기본 유틸리티 (echo, ls 등) 이 있는 이미지패키지 관리자가 없다.디버깅은 좀 낫다.alpine: busybox 기반으로 4MB 지만 apk 패키지 매니저가 있다.glibc 대신 musl을 쓴다.apk add --no-cache packageapk add --no-cache --virtual=ailas package &amp;&amp; apk del --no-cache ailas 멀티스테이지 빌드golang과 같은 빌드가 필요한 이미지에서는 멀티스테이지 빌드를 이용해 빌드 환경과 프로덕션 환경을 다르게 가져갈 수 있다.12345678910FROM golang:1.9 AS buildWORKDIR /COPY . /go/src/github.com/...RUN go get gokpg.in/gorp.v1RUN cd /go/src/github.com/... &amp;&amp; go build -o bin/start main.goFROM alpine:3.7COPY --from=build /go/src/.../bin/start /usr/local/bin/CMD [\"start\"] distroless 이미지운영체제 기능은 없이 언어에 중점을 둔 이미지이다.distroless 에서 확인 가능하며 주로 구글이 배포한다.gcr.io/distroless/base 이미지는 glibc 기반이며 컴파일 애플리케이션을 실행하는 데에 적합하다. (Go)ca-certificates 및 TLS/SSL 관련 라이브러리 등 최소한의 라이브러리만 있다.CVE 취약점도 업데이트 된다고 한다.12345678FROM node:10.17.0 AS build-envADD . /appWORKDIR /appFROM gcr.io/distroless/nodejsCOPY --from=build-env /app /appWORKDIR /appCMD [\"hello.js\"] chucksum 검증ADD 인스트럭션으로 추가 된 파일은 해시기반 체크섬 검증을 해주는 것이 좋다.123456789101112131415ADD library.zip .ADD library_SHA256 .ADD library_SHA256.sig .# Import PGP public keyRUN curl https://.../pgp_keys.asc | gpg --import# 라이브러리 전자 서명 검증RUN gpg --verify library_SHA256.sig library_SHA256# Verify checksumRUN cat library_SHA256 | grep linux_amd64 | sha256sum -csRUN unzip libary.zipRUN mv library /usr/local/bin# 실행 dockerigonoreDockerfile 빌드 시에 따라 들어가지 않게 된다.Dockerfile 과 같은 레벨 디렉토리에 있어야한다..dockerignore12345.git.idea.vscode.github*.log 이미지 테스트빌드 후의 이미지 내부에 상태가 적절한지 테스트하기 위해 아래 두 가지 yaml 기반의 테스트 툴을 사용할 수 있다.container-structure-testgoss이 중 goss는 실제 포트 및 서비스가 서빙 중인지 확인이 가능해 더 유용할 것으로 보인다. 이미지 보안 user호스트의 리소스를 컨테이너에서 공유하는 Docker는 사용자 UID도 0으로 같이 공유되므로 같은 권한을 갖게 된다.이 문제를 방지하기 위해 useradd 로 어플리케이션 실행 유저를 만들어 주고 USER 인스트럭션을 사용해 실행을 해줘야한다.123456789FROM golang:1.10RUN mkdir /appCOPY main.go /appRUN useradd gracefullightUSER gracefullightCMD [\"go\", \"RUN\", \"/app/main.go\"] secretVault dockerd 튜닝max-concurrent-downloads: 기본값은 3이며, docker image pull 로 한 번에 다운로드 되는 이미지 스레드 수를 증가시켜준다.max-concurrent-uploads: 기본값은 5이며, docker image push 시에 이미지 업로드 스레드 수를 증가시켜준다.registry-mirrors: Docker hub의 미러 레지스트리를 만들어 트래픽 향상에 이점을 줄 수 있다. private registry빠른 이미지 푸쉬/풀과 소스 때문이라도 private registry 는 필수적이다.docker 에서 제공하는 registry 이미지를 사용하면 된다.GUI 기반으로 확인할 수 있는 툴은 아래와 같다.Harbor: 프라이빗 레포지토리를 위한 모든 기능이 다 있다. 쓰자.Portus: 인증 포함, 하지만 루비라 소스 개선이 힘들듯docker-registry-ui: 20년 최근까지 개선 중","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"k8s","slug":"k8s","permalink":"https://gracefullight.dev/tags/k8s/"},{"name":"kubernetes","slug":"kubernetes","permalink":"https://gracefullight.dev/tags/kubernetes/"}]},{"title":"쿠버네티스 로그 아키텍쳐","slug":"kubernetes-log-architecture","date":"2020-01-01T06:53:58.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2020/01/01/kubernetes-log-architecture/","link":"","permalink":"https://gracefullight.dev/2020/01/01/kubernetes-log-architecture/","excerpt":"","text":"관리 원칙어플리케이션 로그는 모두 stdout 으로 출력해야한다.컨테이너로 운영하는 것을 전제로 한다면 파일 출력 자체가 불필요하다.Nginx 등의 미들웨어에서는 로그가 stdout 으로 출력되도록 이미지를 빌드한다.stdout 으로 출력되는 로그는 모두 JSON 포맷으로 출력해 각 속성을 검색할 수 있게 한다.쿠버네티스 환경에서는 fluentd-kubernetes-daemonset 을 포함하는 파드를 DaemonSet을 사용해 각 호스트에 배치한다.쿠버네티스 리소스에서는 적절히 레이블을 부여해 로그를 검색할 수 있게 한다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"},{"name":"k8s","slug":"server/docker/k8s","permalink":"https://gracefullight.dev/categories/server/docker/k8s/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"k8s","slug":"k8s","permalink":"https://gracefullight.dev/tags/k8s/"},{"name":"kubernetes","slug":"kubernetes","permalink":"https://gracefullight.dev/tags/kubernetes/"}]},{"title":"맥 추천 패키지","slug":"mac-recommended-packages","date":"2019-12-29T04:57:47.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/12/29/mac-recommended-packages/","link":"","permalink":"https://gracefullight.dev/2019/12/29/mac-recommended-packages/","excerpt":"","text":"여러 맥 기기의 환경을 구성하다보니 적어 놓는 게 나을 듯 싶었다. brew1/usr/bin/ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\" formulae main formulae123456789101112brew install azure-cli \\ fzf \\ git \\ go \\ java \\ kubernetes-cli \\ mas \\ node \\ python \\ stern \\ tree \\ wgetazure-clifzfgitgojavakubernetes-climasnodepythonsterntreewget sub formulaedocker for mac1brew tap pivotal/tap12345678910brew install anaconda \\ dep \\ helm \\ kubectx \\ springboot \\ thefuck \\ yarn \\ youtube-dl \\ zsh-autosuggestions \\ zsh-syntax-highlightinganacondadephelmkubectxspringbootthefuckyarnyoutube-dlzsh-autosuggestionszsh-syntax-highlighting cask12brew tap homebrew/cask-fontsbrew tap adoptopenjdk/openjdk1234567891011121314151617181920212223242526272829brew cask install adguard \\ adoptopenjdk11 \\ battle-net \\ bitwarden \\ cheatsheet \\ cleanmymac \\ firefox \\ flux \\ font-cascadia \\ font-hack-nerd-font \\ fork \\ google-chrome \\ haptickey \\ hiddenbar \\ iina \\ iterm2 \\ java \\ jetbrains-toolbox \\ keepingyouawake \\ keka \\ kitematic \\ mattermost \\ microsoft-edge \\ pock \\ sequel-pro \\ slack \\ telegram-desktop \\ udeler \\ yt-musicadguard: 💰adoptopenjdk11: 자바battle-net: 배틀넷bitwarden: 비밀번호 관리cheatsheet: ⌘ 키를 오래 누르면 해당 프로그램의 모든 단축키를 볼 수 있음cleanmymac: 💰firefox: 파이어폭스flux: 블루라이트 차단font-cascadia: Cascadis Code 폰트font-hack-nerd-font: iTerm2 용 터미널 폰트fork: 무료 중 최고의 git clientgoogle-chrome: 크롬haptickey: 터치바 반응성 추가hiddenbar: 작업표시줄의 프로그램 숨기기iina: 깔끔한 인터페이스의 미디어 플레이어iterm2: 터미널jetbrains-toolbox: jetbrains IDE 버전 관리keepingyouawake: 잠자기 모드 제어keka: 압축 프로그램kitematic: 컨테이너 쇼핑mattermost: 매터모스트microsoft-edge: edgepock: 터치바를 Dock으로 만들어줌sequel-pro: MySQL GUI clientslack: 슬랙telegram-desktop: 텔레그램udeler: udemy 강의 다운로더yt-music: 유튜브 뮤직 플레이어 App store123456789101112mas install 497799835 \\ 1355679052 \\ 869223134 \\ 441258766 \\ 1295203466 \\ 1274495053 \\ 1289197285 \\ 1471801525 \\ 897118787 \\ 1176895641 \\ 425424353 \\ 1475628500xcode: 497799835dropover: 1355679052 드래그 후 흔들면 가상폴더로 저장kakaotalk: 869223134 카카오톡magnet: 💰 441258766 창 크기 전환microsoft remote desktop: 1295203466 윈도우 원격microsoft todo: 1274495053 todo 관리mindnode: 1289197285 마인드맵polyglot: 1471801525 사파리 번역기shazam: 897118787 음악 찾기spark: 1176895641 최고의 mail clientunicorn https: 1475628500 Encrypt DNS query 개선bundle 처리","categories":[{"name":"mac","slug":"mac","permalink":"https://gracefullight.dev/categories/mac/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://gracefullight.dev/tags/mac/"}]},{"title":"쿠버네티스 롤링 업데이트와 배포","slug":"kubernetes-rolling-update","date":"2019-12-27T11:43:20.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/12/27/kubernetes-rolling-update/","link":"","permalink":"https://gracefullight.dev/2019/12/27/kubernetes-rolling-update/","excerpt":"","text":"DeploymentDeployment 의 파드 교체 전략에는 RollingUpdate 와 Recreate 가 있다.기본 값은 RollingUpdate 이며 간단한 설정이 적용된 디플로이먼트는 아래와 같을 것이다.1234567891011121314151617181920212223242526apiVersion: apps/v1kind: Deploymentmetadata: name: test-rolling-update label: app: testspec: replicas: 4 strategy: type: RollingUpdate rollingUpdate: maxUnavailable: 3 maxSerge: 4 selector: matchLabels: app: test template: metadata: labels: app: test spec: containers: - name: test image: echo ports: - containerPort: 8080여기서 롤링업데이트 속성을 좀 더 자세히 알아보자. RollingUpdate maxUnavailable롤링 업데이트 중 동시에 삭제할 수 있는 파드의 최대 갯수기본 값은 replicas의 25% 이다.replicas: 4의 경우 1개 파드 삭제, replicas: 8의 경우 2개 파드 동시 삭제퍼센트 및 직접 지정이 가능하다.위의 예시 디플로이먼트에서 롤링업데이트 시작 시 파드 3개가 바로 죽는다.이 값을 높게 설정하면 동시에 교체되는 파드가 늘어나므로 롤링 업데이트 시간이 줄어든다.하지만 롤링업데이트 중에 남아 있는 파드에 요청 수가 몰릴 수 있다.따라서 1로 설정해 파드를 하나씩 교체하는 것이 안전할 수 있다. maxSurge롤링 업데이트 중 동시에 생성하는 파드 갯수기본 값은 replicas의 25% 이다.replicas: 4면서 maxSurge: 4면 롤링 업데이트 시작 시 새 버전의 파드가 4개 추가로 생성된다.이 값을 높게 설정하면 필요한 파드를 빨리 생성하므로 파드 교체 시간이 단축된다.하지만 필요한 시스템 자원이 급증할 수 있다. Probe세부 설정은 Docs를 참조하자 livenessProbe애플리케이션 헬스 체크 기능애플리케이션이 의존하는 컨테이너 안의 파일의 존재여부 확인Unhealthy 상태의 경우 파드 재시작 readinessProbe컨테이너 외부에서 HTTP 등의 트래픽을 발생시켜 처리할 수 있는 상태인지 확인tcpSocket으로 포트 지정도 가능하다. 응답 중인 파드 교체응답 중인 파드가 교체되는 경우 SIGTERM 신호를 보내 파드가 삭제되는데,Graceful Shutdown 상태로 만들기 위해서 종료 처리가 오래 걸리는 파드엔 terminationGracePeriodSeconds 를 설정해주는 것이 좋다.123456spec: # 기본값 30 terminationGracePeriodSeconds: 40 containers: - name: maria image: maria:latestNginx처럼 SIGTERM 시그널을 받고 바로 종료되는 어플리케이션이 있는 파드라면, 라이플사이클 훅을 활용해 안전하게 종료시키는 것이 중요하다.1234567891011spec: containers: - name: nginx image: nginx:latest ports: - containerPort: 80 lifecycle: # 파드 종료 전 훅 preStop: exec: command: [\"/usr/sbin/nginx\", \"-s\", \"quit\"] 파드 1:1 교체그렇다면 replicas: 1인 파드를 1:1 교체 시에는 어떤 전략을 가져가야할까답은 아래와 같다.1234567strategy: type: RollingUpdate rollingUpdate: # 롤링 업데이트 시 삭제 되는 파드 수 maxUnavailable: 0 # 롤링 업데이트 시 새로 생성되는 파드 수 maxSurge: 1여기에 파드가 트래픽을 받을 수 있는지 readinessProbe를 추가해주면 된다.123456789readinessProbe: httpGet: path: /ping port: 80 initialDelaySeconds: 5 periodSeconds: 5 successThreshold: 1 failureThreshold: 3 timeoutSeconds: 35초 후에 5초마다 /ping 을 보내 성공여부를 확인한다.타임아웃은 3초며 3번까지 재시도한다. Blue/Green디플로이먼트를 2개 만들고, 서비스의 selector 값을 라벨에 따라 변경하자.서비스메시를 연동하면 카나리아 배포 방식도 가능하다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"},{"name":"k8s","slug":"server/docker/k8s","permalink":"https://gracefullight.dev/categories/server/docker/k8s/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"k8s","slug":"k8s","permalink":"https://gracefullight.dev/tags/k8s/"},{"name":"kubernetes","slug":"kubernetes","permalink":"https://gracefullight.dev/tags/kubernetes/"}]},{"title":"Pythonic - 기본기","slug":"Pythonic-the-basics","date":"2019-12-15T07:52:01.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/12/15/Pythonic-the-basics/","link":"","permalink":"https://gracefullight.dev/2019/12/15/Pythonic-the-basics/","excerpt":"","text":"The Basics Types아무 것도 없는 타입은 None주석#&quot;&quot;&quot; &quot;&quot;&quot;포매팅f’test {변수}'&quot;test {}&quot;.format(변수)list, dict, set 등은 immutable 하지 않아 copy 메소드를 사용해 복사 필요스왑a, b = b, a 로 한 줄로 가능set{} 으로 set 지정가능집합연산 가능set([]) 로 배열을 set으로 변환 가능enum튜플로 지정하면 됨튜플은 freeze 되어 있다.('a', 'b', 'c')listmerge는 더하기로 가능 [] + [] Operatersif값 체킹에는 0.0 '' [] () {} set() 등 모든 빈 값이 false 로 떨어진다.따라서 len(foo) &gt; 0 보다 권장if foo != True 보다 if not foo 를 권장dict 키 검증 시에는 if 'key' in d: 를 권장 if ‘key’ in d.keys(): 필요없다.y=None x = 1 if y else 2 면 x=2 라는 문법이 된다.is 문은 값이 None 인지 확인할 때 권장if foo == None 보다 if foo is None 을 권장if foo is not Nonewhilewhile else 구문 가능else 는 while 에 break 가 없을 경우 while 끝나고 실행forfor infor in else 구문 가능else는 for 에 break 가 없을 경우 for 끝나고 실행for _ in range(10) 처럼 underscore 는 index 를 안쓸때 권장for i, item in enumerate(['a', 'b', 'c']) 처럼 index 넣어줄 수 있음for day, fruit in zip(days, fruit) 처럼 패킹(zip) 함수 기본 제공for k, v in d.items() 로 dict 타입 반복 가능funcdef func(): 로 함수선언def add(a: int, b: int) -&gt; int: 처럼 파라미터 및 리턴 타입 정의 가능compile error 발생 안 함보여주기 위한 타입 기능매개변수를 위치 인수로 넣을 수 있음def menu(entree, drink)라면 menu(drink='a', entree='b') 로 호출 가능list 매개변수는 기본값으로 넣으면 안 됨 def foo(list=[]) 면 리스트가 한 번만 생성됨 (함수 내부 초기화 필요)def func(*args) 로 동적매개변수 처리 가능 튜플로 처리됨def func(**kargs) 로 넣으면 dict로 전달가능 func(key1='val', key2='val')두 구문을 같이쓸 수 있지만 *args는 **kargs 보다 먼저 와야한다.함수 내부 &quot;&quot;&quot; &quot;&quot;&quot; doc 주석을 넣으면 help(func.__doc__), help(func) 로 도움말 호출 가능클로져로 wrapper 함수를 만들면 데코레이터로 바로 적용 가능func(lists, lambda item: item.value()) 람다 처리가능 (value: returnValue)비추천 dic = {x: y for x, y in (zip(w, f)} 처럼 한 번에 for문 dictionary 선언 가능genaratordef + yieldgen = (i for i in range(10) if i % 2 == 0) 처럼 한 번에 선언하면 제네레이터가 된다.tuple(gen) 하면 튜플로 처리된다.for 보다 빠를 수 있다.globals(), locals() 로 전역, 로컬변수 확인가능excpetiontry: except IndexError as ex: finally:try: except: else: finally: 가 있다면 try =&gt; else =&gt; finally 로 실행raise IndexError('test error') 처럼 raise 로 에러 발생 가능기본에러는 exception hierarchy 참조 Package__init__.py 가 있어야한다.import package.utils 또는 from package import utils 해서 utils.func 롤 호출from package import utils as NamedUtil 처럼 as 문으로 네임스페이스 변경 가능비추천 from package.folder import * 로 folder 레벨의 모든 python import 가 가능한데folder.__init__.py 에 __all__ = ['py', 'py2'] 처럼 선언해줘야한다.setup.py 를 만들어 패키지를 배포시킬 수 있다.PyCharm: Tools &gt; Create setup.py &gt; run setup.py &gt; sdist 로 출력Cli: python setup.py sdistPyPI 에 서드파티 라이브러리를 등록하면 pip install termcolor 처럼 설치 가능import 라이브러리 순서는 위에서부터 표준, pip, 로컬패키지, 로컬파일if __name__ == '__main__': main() 은 entrypoint 스크립트에서 사용되는 패턴이다. Class생성자 __init__(self):, Instance() 로 new 없이 생성소멸자 __del__(self):, del instance 로 삭제class method 의 첫 인자로는 self를 받아야 this처럼 사용이 가능하다. 두 번째 부터 파라미터를 받을 수 있다. protectedproteced 변수는 _var 처럼 underscore 하나를 넣는다.@property, @property_name.setter 데코레이터를 통해 getter/setter 처리가 가능하다.1234567891011class Instance(object): @property def foo(self): return self._foo @foo.setter def foo(self, bar): self._foo = barintance = Instance()instance.foo = bar privateprivate 변수는 self.__foo 로 underscore 두 개를 넣는다.인스턴스 밖에서 접근이 불가능하다. class variable클래스 변수는 모든 오브젝트 초기화시에 공유되므로 list, dict… 등을 사용하지 않아야한다.상수처럼 쓰는게 좋을 듯 class methodclass 메소드는 @classmethod 데코레이터로 가능하다.1234567class Instance(object): @classmethod def foo(cls): # cls 로 클래스 접근가능 return cls.barInstance.foo() static methodstatic 메소드는 @staticmethod 데코레이터로 정의할 수 있으나 잘 사용되지는 않는다. 상속1234567class Parent(object): def __init__(self): passclass Child(Parent): def __init__(self): super().__init__다중상속 하지말자class Twins(Parent, Parent2) 로 되지만 메소드명이 같을 경우 왼쪽에 선언된 것만 실행된다. 추상12345678910import abcclass Parent(metaclass=abc.ABCMeta): @abc.abstractmethod def foo(self): passclass Child(Parent): def foo(self): print('foo') 특수 메소드많지만 __str__ 이 제일 많이 쓴다. toString() 과 같다.__len__ (len(instance))__eq__ (instance == instance2)__add__ (instance + instance2)등등…클래스 기본기능을 해치는 개인적인 느낌 여담MSA의 시대에 살고 있는 어플리케이션 레이어의 개발자는 어쩔 수 없이 폴리글랏 프로그래머가 되기 마련이다.하나의 언어에 능통하면 다른 언어로 넘어가는 데에는 익숙함의 문제지만,그 언어를 제대로 사용하기 위해 가장 중요한 건 스타일 가이드, 린팅과 주기적인 Docs, Release Notes 확인이라고 생각한다.","categories":[{"name":"python","slug":"python","permalink":"https://gracefullight.dev/categories/python/"}],"tags":[{"name":"python","slug":"python","permalink":"https://gracefullight.dev/tags/python/"},{"name":"pep8","slug":"pep8","permalink":"https://gracefullight.dev/tags/pep8/"}]},{"title":"Carbon 으로 timestamp 파싱하기","slug":"carbon-parse-timestamp","date":"2019-12-13T15:05:56.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/12/13/carbon-parse-timestamp/","link":"","permalink":"https://gracefullight.dev/2019/12/13/carbon-parse-timestamp/","excerpt":"","text":"TimestampCarbon으로 타임스탬프를 파싱하는 데에는 createFromTimestamp 메소드가 있다.1Carbon::createFromTimestamp(1576249805)-&gt;format();하지만 더 쉽게 parse 메소드를 사용해 파싱할 수도 있다.12$timestamp = 1576249805;Carbon::parse('@' . $timestamp)-&gt;format();여기서의 @는 오류를 무시하는 기분이 들어서 찾아보았는데 표준이였다.Example #2 DateTime::setTimestamp() alternative in PHP 5.21234$ts = 1171502725;$date = new DateTime(\"@$ts\");echo $date-&gt;format('U = Y-m-d H:i:s') . \"\\n\";?&gt; 참조timestamp 는 UTC 기준이며 (1970년부터의 차이) timezone 을 정의할 수 없다.php man: datetime.settimestamp","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"carbon","slug":"php/carbon","permalink":"https://gracefullight.dev/categories/php/carbon/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"carbon","slug":"carbon","permalink":"https://gracefullight.dev/tags/carbon/"}]},{"title":"타입스크립트에서 json import 방법","slug":"import-json-with-typescript-ts5071","date":"2019-11-26T12:39:39.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/11/26/import-json-with-typescript-ts5071/","link":"","permalink":"https://gracefullight.dev/2019/11/26/import-json-with-typescript-ts5071/","excerpt":"","text":"TS5071node 에서 즐겨쓰는 package.json import 방법은 아래와 같다.12import packageJson from '../package.json';console.log(packageJson.version);편안하게 잘 사용되는 로직인데 타입스크립트로 변경시에는 몇 가지 설정을 해줘야한다.설명에 필요없는 설정은 생략했다.tsconfig.json1234567&#123; \"compilerOptions\": &#123; \"moduleResolution\": \"node\", \"resolveJsonModule\": true, \"esModuleInterop\": true, &#125;&#125;또는 tsc 실행시에 --esModuleInterop, --resolveJsonModule 옵션을 추가해 빌드해줘야한다. 참조https://github.com/microsoft/TypeScript/issues/26224https://github.com/microsoft/TypeScript/pull/26825/files","categories":[{"name":"typescript","slug":"typescript","permalink":"https://gracefullight.dev/categories/typescript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"json","slug":"json","permalink":"https://gracefullight.dev/tags/json/"},{"name":"typescript","slug":"typescript","permalink":"https://gracefullight.dev/tags/typescript/"}]},{"title":"vee-validate3 모든 규칙 추가시 TS7053 오류","slug":"Vee-validate-installing-all-rules-ts7053","date":"2019-11-26T11:29:46.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/11/26/Vee-validate-installing-all-rules-ts7053/","link":"","permalink":"https://gracefullight.dev/2019/11/26/Vee-validate-installing-all-rules-ts7053/","excerpt":"","text":"TS70533.0 버전이 되면서 HOC 기반으로 변경되며 rules를 상위 컴포넌트에서 확장하게 되었다.문제는 typescript 기반에서 룰 전체 등록이 TS(7053) 에러를 발생시킨다.123456import &#123; ValidationProvider, ValidationObserver, extend &#125; from \"vee-validate\";import * as rules from \"vee-validate/dist/rules\";Object.keys(rules).forEach(rule =&gt; &#123; extend(rule, rules[rule]); // rules[rule] 에서 타입오류 발생&#125;);12Element implicitly has an &#39;any&#39; type because expression of type &#39;string&#39; can&#39;t be used to index type &#39;typeof import(&quot;...&#x2F;node_modules&#x2F;vee-validate&#x2F;dist&#x2F;rules&quot;)&#39;.No index signature with a parameter of type &#39;string&#39; was found on type &#39;typeof import(&quot;...&#x2F;node_modules&#x2F;vee-validate&#x2F;dist&#x2F;rules&quot;)&#39;.ts(7053) 원인import, export 의 모듈명은 string index 로 쳐지지 않아 발생한다. 해결방법Object.entries와 for of를 사용해 타입에 안전하게 돌려주면 된다.12345678import &#123; extend &#125; from \"vee-validate\";import * as rules from \"vee-validate/dist/rules\";for (let [rule, validation] of Object.entries(rules)) &#123; extend(rule, &#123; ...validation &#125;);&#125; 여담새로운 구문 (async/await, import/export)를 사용해 돌릴 땐 먼저 for of를 사용하는 습관을 들여야겠다.머지되어서 다음 사람의 삽질은 없을 듯 하다. 참조Merged docs: added Installing All Rules with typescriptvee-validate#installing-all-rules","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"},{"name":"vee-validate","slug":"javascript/vue/vee-validate","permalink":"https://gracefullight.dev/categories/javascript/vue/vee-validate/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"},{"name":"vee-validate","slug":"vee-validate","permalink":"https://gracefullight.dev/tags/vee-validate/"},{"name":"typescript","slug":"typescript","permalink":"https://gracefullight.dev/tags/typescript/"}]},{"title":"Helm chart의 모든 것","slug":"Helm-chart의-모든-것","date":"2019-10-27T08:10:13.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2019/10/27/Helm-chart의-모든-것/","link":"","permalink":"https://gracefullight.dev/2019/10/27/Helm-chart%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83/","excerpt":"","text":"HelmHelm is a tool for manaing Kubernetes charts.Charts are packages of pre-configured Kubernetes resources.헬름은 쿠버네티스 차트를 관리하기 위한 도구차트는 사전 구성된 쿠버네티스 리소스의 패키지같은 어플레케이션을 여러 환경에 배포시 환경 변수, 도메인 등의 manifest 파일을 차트를 통해 관리차트를 중심으로 하는 쿠버네티스 개발 종합 관리 도구 설치1234567891011# 설치brew install kubernetes-helm# 초기화helm init# tiller 파드 확인kubectl -n kube-system get service,deployment,pod --selector app=helm# 버전 확인helm version 구성cli와 쿠버네티스 클러스터에 설치되는 서버인 tiller(틸러)로 구성 chart쿠버네티스는 service, deployment, ingress 등 리소스를 생성하고 manifest 파일을 적용하는 방식으로 어플리케이션을 배포한다. 이 manifest 파일을 생성하는 템플릿을 여러 개 패키징한 것helm repository 에 tgz 파일로 저장 chart 구성12345678chart-example├── charts # 차트가 의존하는 차트 디렉토리├── templates # manifest 파일 템플릿 디렉토리│ ├── NOTES.txt # 차트 사용법 등 참조 문서 템플릿│ ├── _helper.tpl # manifest 렌더링에 사용되는 템플릿 헬퍼│ └── example.yaml # 각종 K8S 리소스의 manifest 템플릿├── Chart.yaml # 차트 정보가 정의 파일└── values.yaml # 차트 기본값 value 파일차트 설치시 values.yaml 에 override 할 값을 정의한 yaml 파일을 만들면 된다. repositorylocal: 헬름 클라이언트가 설치된 로컬 리포, 로컬에서 생성한 패키지가 존재stable: stable charts repo, 기본값이며 helm/charts 차트 사용 가능incubator: stable 조건 미달 repohelm repo add incubator https://kubernetes-charts-incubator.storage.googleapis.com/helm search 로 차트 검색 가능 명령어 init보통은 helm init실서버에서는 helm init --service-account tiller --node-selectors system --history-max 10업그레이드는 helm init --upgrade–service-account: 틸러가 사용할 서비스계정–node-selectors: 틸러를 배포할 노드 레이블–upgrade: 틸러 업그레이드–history-max: 리소스 하나당 유지할 최대 히스토리 수 createhelm create 차트명 packagehelm package 차트명차트를 압축파일로 패키징–version: 차트 버전 지정없을 경우 차트의 버전을 따른다. searchhelm search 검색어-r, --regexp: 검색어를 정규표현식으로 사용-l, --versions: 버전 목록도 출력 fetchhelm fetch 차트경로–version: 특정 버전 지정 servehelm serve로컬 레포지토리로 사용할 웹 서버 시작–address: 서버가 개방할 주소기본값은 127.0.0.1:8879–repo-path: 차트 레포지토리가 될 로컬 디렉토리 installhelm install 차트명차트로 애플리케이션 설치123456helm install stable/redis --name my-redishelm install stable/redis --version 3.6.0 \\ --name my-redis \\ --namespace gracefullight \\ -f ./my-redis.yaml–dry-run–name: 릴리즈명–namespace: 설치 대상 네임스페이스-f, --values: yaml 파일 경로 (다수 가능)–version: 차트 버전 지정 listhelm listhelm list --namespace kube-system–deleted: 삭제된 릴리즈 포함–namespace: 해당 네임스페이스만 확인 gethelm get 릴리즈명설치된 릴리스 상ㅇ세 정보를 yaml 으로 출력–revision: 릴리즈 리비전 확인 deletehelm delete 릴리즈명–purge: 릴리즈 삭제하고 릴리즈명 해제","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"},{"name":"k8s","slug":"server/docker/k8s","permalink":"https://gracefullight.dev/categories/server/docker/k8s/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"k8s","slug":"k8s","permalink":"https://gracefullight.dev/tags/k8s/"},{"name":"kubernetes","slug":"kubernetes","permalink":"https://gracefullight.dev/tags/kubernetes/"},{"name":"helm","slug":"helm","permalink":"https://gracefullight.dev/tags/helm/"}]},{"title":"쿠버네티스 오브젝트와 클래스 오브젝트 비교","slug":"k8s-object-vs-class-object","date":"2019-10-25T06:49:57.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/10/25/k8s-object-vs-class-object/","link":"","permalink":"https://gracefullight.dev/2019/10/25/k8s-object-vs-class-object/","excerpt":"","text":"앞서쿠버네티스를 이해하는 건 어렵다. DevOps 의 전반적인 플로우를 알아야 이 플로우도 이해가 가기 때문이라 생각한다.생소한 용어들도 어렵다. 한 판을 정리 했지만 매번 참조해야되는 듯하다. 오브젝트 비교개념JAVA 클래스쿠버네티스 오브젝트캡슐화ClassContainer image인스턴스ObjectContainer재사용단위jarContainer image컴포지션Class A Contains Class BSidecar pattern상속Class A extends Class BA container’s from parent image배포단위jar, war…Pod빌드 및 런타임 아이솔레이션Module, Package, ClassNamespace, Pod, Container초기화ConsturctorInit container초기화 후 트리거Init methodpostStart종료 전 트리거DestroypreStopCleanupfinalize(), shutdown hookDefer container비동기, 병렬 실행ThreadPoolExecutor, ForkJoinPoolJob스케쥴링Timer, ScheduledExecutorServiceCronJob백그라운드Daemon threadDaemonSet설정관리System.getenv(), PropertiesConfigMap, Secret 여담개념 설정 전에 이 표를 알았더라면 훨씬 이해가 쉬웠을텐데","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"},{"name":"k8s","slug":"server/docker/k8s","permalink":"https://gracefullight.dev/categories/server/docker/k8s/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"k8s","slug":"k8s","permalink":"https://gracefullight.dev/tags/k8s/"},{"name":"kubernetes","slug":"kubernetes","permalink":"https://gracefullight.dev/tags/kubernetes/"}]},{"title":"Github Actions로 Hexo 배포 자동화하기","slug":"Deploy-Hexo-with-github-actions","date":"2019-08-20T14:25:15.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2019/08/20/Deploy-Hexo-with-github-actions/","link":"","permalink":"https://gracefullight.dev/2019/08/20/Deploy-Hexo-with-github-actions/","excerpt":"","text":"개념Docker 이미지로 생성된 후에 그 위에서 돌아간다.자세한 개념은 시간날 때 추가 예정 레파지토리 토큰 발급여기를 참조해 레파지토리의 secret 으로 등록한다. 서브모듈themes directory 하위의 테마들은 각각의 repo를 가지고 있다.이 테마들을 CI 중에 가져오기 위해선 서브모듈로 등록해주고 초기화시켜줘야한다.12345# 서브모듈 테마 추가git submodule add 테마깃경로 themes/테마명# 싱크git submodule update --init --remote여기서 remote 옵션을 쓰지 않을 경우 최신 마스터를 pull 하지 않는다. 서브모듈을 쓰는 이유는 내가 관리하지 않기 위함이니 꼭 추가해주자. 소스주석 없어도 하나하나가 무슨 느낌인지는 받아들여질 것 같다.123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051name: Node CIon: push: branches: - masterjobs: build: runs-on: ubuntu-latest strategy: matrix: node: [12] steps: - uses: actions/checkout@master - name: SETUP_NODE_$&#123;&#123; matrix.node &#125;&#125; uses: actions/setup-node@master with: node-version: $&#123;&#123; matrix.node &#125;&#125; - name: BEFORE_INSTALL run: npm i -g hexo workbox-cli - name: BEFORE_SCRIPT run: | git config --global user.name 'gracefullight' git config --global user.email 'eks012@gmail.com' sed -i \"s/__GITHUB_TOKEN__/$&#123;&#123; secrets.HEXO_DEPLOY_TOKEN &#125;&#125;/\" _config.yml - name: THEME_INSTALL run: | git submodule update --init --remote --recursive - name: NPM_INSTALL run: npm install - name: HEXO_CLEAN run: hexo clean - name: HEXO_GENERATE run: hexo generate - name: WORKBOX_BUILD run: workbox injectManifest - name: HEXO_DEPLOY run: hexo deploy GITHUB_TOKENsecrets.GITHUB_TOKEN 은 예약된 토큰이다.빌드 이미지에서 현재 repo를 접근하기 위한 토큰임을 알아두자. 결론travis-ci 안녕 참조Workflow syntaxVirtual env","categories":[{"name":"hexo","slug":"hexo","permalink":"https://gracefullight.dev/categories/hexo/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"github","slug":"github","permalink":"https://gracefullight.dev/tags/github/"},{"name":"hexo","slug":"hexo","permalink":"https://gracefullight.dev/tags/hexo/"}]},{"title":"puppeteer 크롤링 속도 증가시키기","slug":"increase-puppeteer-crawling-speed","date":"2019-07-29T12:44:24.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/07/29/increase-puppeteer-crawling-speed/","link":"","permalink":"https://gracefullight.dev/2019/07/29/increase-puppeteer-crawling-speed/","excerpt":"","text":"페이지를 가져온 뒤 css, image, font를 차단하면 더 빠른 DOM 액세스가 가능하다. 리소스 차단123456789101112131415161718192021222324// @types/puppeteerimport &#123; launch, Browser, Request, Page &#125; from 'puppeteer';const browser: Browser = await launch(&#123; headless: true&#125;);const page: Page = await browser.newPage();await page.setRequestInterception(true);page.on('request', (req: Request) =&gt; &#123; switch (req.resourceType()) &#123; case 'stylesheet': case 'font': case 'image': req.abort(); break; default: req.continue(); break; &#125;&#125;);await page.goto('URL');","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"},{"name":"puppeteer","slug":"javascript/nodejs/puppeteer","permalink":"https://gracefullight.dev/categories/javascript/nodejs/puppeteer/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"puppeteer","slug":"puppeteer","permalink":"https://gracefullight.dev/tags/puppeteer/"}]},{"title":"Chrome 75 Webview에서 서비스워커의 fetch request 가 실패하는 문제","slug":"network-request-failed-in-serviceworker-on-chrome-75-webview","date":"2019-06-30T04:50:12.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/06/30/network-request-failed-in-serviceworker-on-chrome-75-webview/","link":"","permalink":"https://gracefullight.dev/2019/06/30/network-request-failed-in-serviceworker-on-chrome-75-webview/","excerpt":"","text":"발단서비스워커는 n:m (사이트:디바이스)로 모든 클라이언트 기기에 설치된다.배포 후 아무 문제 없이 동작하였으나, 190604 이후 웹뷰에서 net::ERR_ABORTED 페이지가 보인다는 버그가 들어오기 시작했다.랜덤하게 발생되고 있어 추적이 어려웠으나 4일에 Chrome의 메이저 버전이 업데이트 되었다라는 것을 확인했고 디버깅을 시작했다. 디버깅서비스워커가 내려오지 않은 경우 페이지가 100% 정상동작을 하였다.서비스워커가 내려온 경우 랜덤하게 페이지가 로드되지 않았다.문제는 서비스워커로 확인되었고, 세부적인 디버깅 내역은 다음과 같다.fetchListener 내부 cacheStorage 접근 예외처리: 재현fetchListener 제거: 재현 안됨Chrome 75버전의 웹뷰에서 서비스워커의 fetching 방식이 변경되었다는 걸 확인할 수 있었다.74, 75버전의 Diff를 찾을 수 있어 서비스워커 코어가 어마어마하게 변경되었다는 걸 확인할 수 있었으나 이 코드를 디버깅하는 것보다 퇴사 후 행복하게 사는 게 멋질 것이란 판단이 들었다.다행히 구글러와 연락이 닿아 private 버그리포팅을 했고, Chrome은 오픈소스라 구글에서도 일일히 확인하기 힘들다라는 답변을 들을 수 있었다. 웹뷰와 서비스워커웹뷰의 서비스워커와 브라우저의 서비스워커는 다른 인스턴스이므로 서로 공유되지 않는다.그렇다면 웹뷰에서 재접속시에 앱 셸을 빠르게 로드하는 이점 뿐이라는 말이다. === 어드벤티지 없음WebView UA in Lollipop and Above에 따르면 안드로이드 롤리팝 이후부터 User Agent에 wv란 값을 물고 들어온다. 해결 예외처리Chrome 엔진이 업데이트 된다고 서비스워커가 제거되지 않는다.따라서 UA 에 android, wv 값이 있는 경우 서비스워커를 설치하지 않을 뿐 아니라 설치된 서비스워커를 제거해주는 로직이 있어야한다.아니라면 A way to immediately unregister a service worker 기능을 브라우저 벤더들이 개발해줘야한다.더 특정한 버전을 줘서 예외처리를 한다면 다음과 같을 것이다.Chrome 75.0.3770.67 ~ 75.0.3770.101 버전의 모든 안드로이드 웹뷰에서 서비스워커 설치를 차단, 이미 설치가 되어있다면 삭제 패치몇일 뒤에 다른 업체에서 public 하게 버그리포팅을 올렸고 버그를 찾아서 조만간 패치될 예정이다.This is affecting tens of thousands of our readers 로 보아 나와 같은 빡침이 느껴져서 아련했다.패치된 코드는 여기서 볼 수 있다. 여담브라우저에 버그 발생시 대처하는 방법은 거의 불가능하다.실수는 여기든 저기든 다 똑같구나","categories":[{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/categories/pwa/"}],"tags":[{"name":"chrome","slug":"chrome","permalink":"https://gracefullight.dev/tags/chrome/"},{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/tags/pwa/"},{"name":"servicewokrer","slug":"servicewokrer","permalink":"https://gracefullight.dev/tags/servicewokrer/"}]},{"title":"맥 구글 계정 연동시 인증 실패","slug":"mac-google-internet-account-failed-to-auth","date":"2019-06-29T03:10:44.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/06/29/mac-google-internet-account-failed-to-auth/","link":"","permalink":"https://gracefullight.dev/2019/06/29/mac-google-internet-account-failed-to-auth/","excerpt":"","text":"맥에서 구글 계정 연동 중에 Google 계정 인증에 실패했다는 오류메세지가 나온다면 다음과 같이 해결하면 된다. 해결설정 &gt; 일반 &gt; 기본 웹브라우저를 Safari.app으로 변경한다.구글링시 아래 기능들을 해제해보라는데 다 쓸모없다.2차 인증 해제앱 비밀번호 사용보안되지 않은 앱 허용","categories":[{"name":"mac","slug":"mac","permalink":"https://gracefullight.dev/categories/mac/"}],"tags":[{"name":"google","slug":"google","permalink":"https://gracefullight.dev/tags/google/"},{"name":"mac","slug":"mac","permalink":"https://gracefullight.dev/tags/mac/"}]},{"title":"타임존 데이터 최신버전으로 업데이트하기","slug":"update-timezone-database-on-php","date":"2019-06-23T08:19:48.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2019/06/23/update-timezone-database-on-php/","link":"","permalink":"https://gracefullight.dev/2019/06/23/update-timezone-database-on-php/","excerpt":"","text":"타임존 데이터는 php의 버전을 따라 올라가는데, 실무에선 항상 최신버전을 사용하기 쉽지 않다.그럴 때 데이터만 업데이트하는 방법을 쓸 수 있다. 설치2019.06 현재 최신 타임존 데이터베이스는 2019a (2019.01) 버전이다. perlperl로 설치되는 일반적인 경우는 아래와 같이 쉽게 설치 가능하다.1234# perl 로 설치$ perl install timezonedb# 끝! phpize그렇지 않은 경우 라이브러리를 수동으로 빌드해줘야한다.12345678910111213141516171819202122232425# 타임존 데이터 다운로드$ curl -LO https://pecl.php.net/get/timezonedb-2019.1.tgz# 압축 해제$ tar -xvzf timezonedb-2019.1.tgz$ cd timezonedb-2019.1# 빌드$ phpize$ ./configure --with-php-config=$&#123;PHP_CONFIG_PATH&#125;$ make &amp;&amp; make install# 라이브러리를 extensions 폴더로 이동$ mv timezonedb.so /usr/local/php/extentions# 라이브러리 추가$ vi php.ini$ extension=timezonedb.so# 아파치 재시작$ apachectl restart# 버전 확인$ /usr/bin/php -r \"echo timezone_version_get();\"2019.01 참조Compiling shared PECL extensions with phpize","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"phpize","slug":"phpize","permalink":"https://gracefullight.dev/tags/phpize/"},{"name":"tzdata","slug":"tzdata","permalink":"https://gracefullight.dev/tags/tzdata/"},{"name":"timezone","slug":"timezone","permalink":"https://gracefullight.dev/tags/timezone/"}]},{"title":"chrome usb 디버깅 장치를 못 찾거나 연결이 안될 때","slug":"chrome-usb-debugging-device-not-found","date":"2019-06-17T12:16:40.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/06/17/chrome-usb-debugging-device-not-found/","link":"","permalink":"https://gracefullight.dev/2019/06/17/chrome-usb-debugging-device-not-found/","excerpt":"","text":"usb 디버깅 승인 후 chrome://inspect#devices 탭에 접근하면 기기가 보이면서 디버깅이 가능해야하는데,그렇지 못한 경우에 아래처럼 진행해주면 된다. 해결먼저 usb 디버깅 권한을 모두 초기화하고 다시 연결한다.123# 디버깅 서버를 죽인 후 다시 실행한다.$ adb kill-server$ adb usb개발자도구의 More tools &gt; Remote devices의 목록에서 확인할 수 있다. 여담PTP 연결을 하라는데 이건 안드로이드 구버전에 대한거라 필요 없다.웹뷰 디버깅시에는 디버깅 권한이 있는 앱이여야 가능하다.","categories":[{"name":"chrome","slug":"chrome","permalink":"https://gracefullight.dev/categories/chrome/"}],"tags":[{"name":"chrome","slug":"chrome","permalink":"https://gracefullight.dev/tags/chrome/"}]},{"title":"Kubernetes의 모든 것","slug":"kubernetes의-모든-것","date":"2019-06-09T03:23:59.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/06/09/kubernetes의-모든-것/","link":"","permalink":"https://gracefullight.dev/2019/06/09/kubernetes%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83/","excerpt":"","text":"매번 용어 찾아보는 게 귀찮아서 정리했다.어떤 기능을 yaml 로 구성해야하는지 감이 오는 듯하다. 노드컨테이너가 배치되는 서버쿠버네티스 클러스터의 관리 대상으로 등록된 도커 호스트쿠버네티스 클러스터는 마스터와 노드의 그룹으로 구성kubectl get nodes 마스터 노드스웜의 매니저노드와 비슷한 느낌이다.kube-apiserver: 쿠버네티스 API를 노출하는 컴포넌트 kubectl로부터 리소스를 조작하라는 지시를 받음ectd: 고가용성을 갖춘 분산 Key/Value 스토어로 쿠버네티스 클러스터의 백킹스토어로 쓰인다. (CAS)kube-scheduler: 노드를 모니터링하고 컨테이너를 배치할 적절한 노드탐색kube-controller-manager: 리소스를 제어하는 컨트롤러 실행일반적인 (non-managed, GKE 등이 없는) 환경에선 마스터 노드서버가 단일 장애지점 (SPOF)가 되지 않도록 마스터를 3대 두는 것이 필수다. 네임스페이스쿠버네티스 클러스터 안의 가상 클러스터네임스페이스마다 권한을 줄 수 있으므로 개발팀이 클 때 유용하다.기본으론 default, docker, kube-public, kube-system 네임스페이스가 있다.kubectl get namespace 파드컨테이너의 집합 중 가장 작은 단위로, 컨테이너의 실행 방법을 정의적어도 하나 이상의 컨테이너로 이뤄져있다.nginx reverse proxy + application web server파드는 노드 안에 들어간다.함꼐 배포해야 정합성, 일관성이 유지된다면, 같은 파드로 묶어 배포한다.파드엔 각각 고유의 가상 IP가 할당된다.kubectl get pod 레플리카세트같은 스펙을 갖는 파드를 여러 개 생성/관리 하는 역할똑같은 파드의 레플리케이션 개수를 관리하는 리소스이다.삭제된 파드는 복원할 수 없기 때문에 웹 어플리케이션과 같은 stateless 파드에 사용하기에 좋다.kubectl get replicaset레플리카셋의 파드명은 container-1b2e3f 처럼 임의로 정해진다. 디플로이먼트레플리카세트의 리비전을 관리 (빠른 버저닝)리비전은 컨테이너 이미지가 수정된 경우에 생성된다.kubectl rollout history deployment .. 데몬셋모든 시스템에서 실행되어야하는 파드와 템플릿 제공 서비스파드의 집합에 접근하기 위한 경로를 정의쿠버네티스 클러스터 내에서 파드의 집합에 대한 경로나 서비스 디스커버리를 제공하는 리소스서비스의 대상이 되는 파드는 서비스에서 정의하는 레이블 셀렉터로 정해진다.서비스의 접근은 같은 네임스페이스라면 서비스명만으로 접근이 가능하다.http://${svc} =&gt; http://${svc}.default =&gt; http://${svc}.default.svc.local ClusterIP 서비스서비스의 기본 타입쿠버네티스 클러스터의 내부 IP 주소에 서비스를 공개할 수 있다.다른 파드 그룹으로 접근할 때 서비스를 거쳐 가도록 할 수 있으며, 서비스명으로 네임 레졸루션이 가능해진다.외부에서는 접근할 수 없다. NodePort 서비스쿠버네티스 클러스터 외부에서 접근할 수 있는 서비스서비스를 L4 레벨에서 노출하는 것이므로 TCP/UDP 모두 다룰 수 있다.kubectl get svc ... LoadBanlancer 서비스로컬 쿠버네티스 환경에선 사용할 수 없다. ExternalName 서비스쿠버네티스 클러스터에서 외부 호스트를 네임 레졸루션하기 위한 별칭이다.gracefullighut.dev 를 gracefullight 로 접근 가능하게 만든다. 인그레스서비스를 쿠버네티스 클러스터 외부로 노출NodePort 서비스는 L4라 HTTP/S의 경로기반 라우팅이 불가능한데, 인그레스는 L7 레벨로 제어가 가능하다.주로 HTTP/S 서비스를 노출하는 경우 사용한다.로컬 쿠버네티스 환경에서는 인그레스를 사용해 서비스를 노출시킬 수 없으므로 nginx ingress controller 를 사용한다. 컨피그맵설정 정보를 정의 후 파드에 전달 퍼시스턴트볼륨파드가 사용할 스토리지의 크기 및 종류를 정의 퍼시스턴트볼륨 클레임퍼시스턴트 볼륨을 동적으로 확보 스토리지클래스퍼시스턴트 볼륨이 확보하는 스토리지의 종류를 정의 스테이트풀세트같은 스펙으로 모두 동일한 파드를 여러 개 생성하고 관리스테이트풀셋의 파드명은 backend-0, backend-1 처럼 인덱스로 정해진다. 잡일회성 파드를 여러 개 생성하고 종료 보장 시크릿인증 정보 등 비밀 데이터 정의 롤네임스페이스 안에서 조작 가능한 쿠버네티스 리소스의 규칙 정의각 쿠버네티스 API 사용 권한 정의지정된 네임스페이스 내에서만 유효 롤 바인딩쿠버네티스 리소스 사용자와 롤을 연결 RBACRole-based access control (RBAC) is a method of regulating access to computer or network resources based on the roles of individual users within an enterprise.Docs 권한 디버깅12345# can-i 문으로 권한 확인 가능$ kubectl auth can-i ...# kubectl auth can-i create deployments# yes 클러스터롤클러스터 전체적으로 조작 가능한 쿠버네티스 리소스의 규칙 정의클러스터 전체에서 유효 클러스터롤 바인딩쿠버네티스 리소스 사용자와 클러스터롤을 연결일반 사용자 및 그룹/서비스 계정과 클러스터롤을 연결 서비스 계정파드가 쿠버네티스 리소스를 조작할 때 사용하는 계정구글의 서비스 계정 비슷한 듯 노드어피니티노드 셀렉터보다 더 세밀한 선택이 가능 (스케줄링 정책 조건 등) 테인트taint오염 조건을 추가해 노드 스케줄링에서 제외파드를 특정 노드로 강제할 수 있다. 컨트롤 플레인kubelet, kubenetes master 등 컨트롤 플레인은 시스템 내 모든 쿠버네티스 오브젝트의 레코드를 유지하면서, 오브젝트의 상태를 관리하는 제어 루프를 지속적으로 구동 Dynamic Admission Control웹훅으로 동작ValidationWebhookConfigurationMutatingWebhookConfiguration 클러스터 데몬클러스터 모든 서비스에 검사, 실행 필요시 사용 클러스터어시스턴스SSL 인증 배포 등 자동화cert-manager","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"},{"name":"k8s","slug":"server/docker/k8s","permalink":"https://gracefullight.dev/categories/server/docker/k8s/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"k8s","slug":"k8s","permalink":"https://gracefullight.dev/tags/k8s/"},{"name":"kubernetes","slug":"kubernetes","permalink":"https://gracefullight.dev/tags/kubernetes/"}]},{"title":"Mac에서 lsd 설치하기 (ls 명령어 꾸미기)","slug":"install-lsd-on-mac","date":"2019-05-27T14:55:47.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/05/27/install-lsd-on-mac/","link":"","permalink":"https://gracefullight.dev/2019/05/27/install-lsd-on-mac/","excerpt":"","text":"lsdLSDeluxe 커맨드로 ls 명령어를 예쁘게 변경해보자. 설치12345678910# 설치$ brew install lsd# alias 설정$ vi ~/.zshrcalias ls='lsd'alias ll='ls -alhF'$ source ~/.zshrc설치는 했지만 아이콘이 깨져서 보일 것이다. 글꼴 설정123# 글꼴 설치$ brew tap homebrew/cask-fonts$ brew cask install font-hack-nerd-fontiTerm2 &gt; Preferences &gt; Profiles &gt; Text 탭으로 이동해 Non-ASCII Font를 확장한 뒤 방금 설치한 Hack Regular Nerd Fonr Compelete 폰트를 설정해주자.Use ligatures 옵션 또한 체크한다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://gracefullight.dev/tags/mac/"}]},{"title":"nodejs triple des 암호화","slug":"nodejs-triple-des-encryption","date":"2019-05-12T11:29:20.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/05/12/nodejs-triple-des-encryption/","link":"","permalink":"https://gracefullight.dev/2019/05/12/nodejs-triple-des-encryption/","excerpt":"","text":"triple des 알고리즘으로 암호화하는 일은 요새는 드문데, 드물어서 그런지 구글링해도 아무 것도 나오지 않았다.레거시 언어들에는 3des 암호화된 로직이 많은데, 포팅하면서 개발해야될 필요성이 생겼다. 암호화nodejs 의 암호화 패키지는 crypto 안에 들어있다.crypto.getCiphers(); 메소드로 사용할 수 있는 알고리즘을 확인할 수 있다.ciphers.filter(cipher =&gt; cipher.includes('des'));3des 알고리즘은 des-ede3 로 시작한다.키는 24bytes 이며, iv 는 8bytes 다. 소스1234567891011121314151617181920212223242526272829303132333435363738394041424344454647const crypto = require('crypto');class TripleDes()&#123; // #iv; // #key; constructor(key, iv) &#123; this.key = key; this.iv = iv; &#125; getKey() &#123; return this.key.padEnd(24, String.fromCharCode(0)); &#125; getIv() &#123; return this.iv; &#125; encrypt(plain, iv) &#123; if (!iv) &#123; iv = this.iv ? Buffer.from(this.iv, \"hex\") : crypto.randomBytes(8); &#125; const cipher3des = crypto.createCipheriv(\"des-ede3-cfb8\", this.getKey(), iv); let encrypted = cipher3des.update(plain, \"utf8\", \"hex\"); encrypted += cipher3des.final(\"hex\"); this.iv = iv.toString(\"hex\"); return encrypted; &#125; decrypt(encrypted, iv) &#123; if (!iv) &#123; iv = this.iv; &#125; const decipher3des = crypto.createDecipheriv(\"des-ede3-cfb8\", this.getKey(), Buffer.from(iv, \"hex\")); let decrypted = decipher3des.update(encrypted, \"hex\", \"utf8\"); decrypted += decipher3des.final(\"utf8\"); return decrypted; &#125;&#125;module.exports = TripleDes;위의 encrypt 메소드는 아래처럼 버퍼를 합친 후에 헥스로 바꾸는 것과 동일하다.123456let encrypted = Buffer.concat([ cipher3des.update(plain, \"utf8\"), cipher3des.final(\"utf8\")]);encrypted = encrypted.toString(\"hex\"); 사용법1234567const TripleDes = require('./TripleDes');const tripleDes = new TripleDes('encryptionKey');// 암호화const encrypted = tripleDes.encrypt('yummy');// 복호화const decrypted = tripleDes.decrypt(encrypted); 참조nodejs.crypto","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"}]},{"title":"DEV 도메인과 Github Pages 연결하기","slug":"connecting-a-DEV-domain-to-github-pages","date":"2019-05-06T15:10:55.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/05/06/connecting-a-DEV-domain-to-github-pages/","link":"","permalink":"https://gracefullight.dev/2019/05/06/connecting-a-DEV-domain-to-github-pages/","excerpt":"","text":"도메인 구입Google Domains 에서 구입한다.미국 주소가 있어야된다는 말이 나오는데, 무시하고 구매하기를 하자.도메인 기관에서 연락이 갈 수 있다는 내용에 주소를 대한민국으로 변경 후 입력해주고결제지 우편번호는 대충 쓰고 미국으로 하고 넘어가면 쉽게 구매할 수 있다. DNS 설정DNS &gt; 맞춤 리소스 레코드 탭에서 Github Domain IP 를 A 레코드로 추가한다.185.199.108.153185.199.109.153185.199.110.153185.199.111.153 http 예외http 로 서빙하는 경우가 있다면 www.gracefullight.dev 도 사용할 수 있게 CNAME 을 등록하자.1www CNAME 1h gracefullight.github.io.물론 HSTS 를 적용하는 경우 필요없다. CNAME 파일 추가public 경로 아래 CNAME 파일을 생성 후 도메인을 적는다.CNAME1gracefullight.dev github pages 설정github.com/gracefullight/gracefullight.github.io/settings 의 GitHub Pages 탭으로 이동해Custom domain 에 설정할 도메인을 넣고, Enforce HTTPS 를 체크한다.아래 문구가 보이면 성공한 것이다.Your site is published at https://gracefullight.dev/ 웹마스터 설정 Google구글 검색에서 도메인 변경을 다시 인덱싱해주기 위해 마이그레이션이 필요하다.새로운 사이트를 등록해 준 뒤 이전 버전의 서치콘솔에서 기존 사이트의 설정버튼을 누르면 바로 설정이 가능하다. 기타네이버와 빙은 같은 site verification 코드가 나와서 사이트만 추가해주면 되는데,얀덱스의 경우는 코드를 변경하고 빌드해줘야한다. 여담CNAME 변경하면 Github setting의 Custom domain이 빠지기 때문에 다시 등록해줘야하는 번거로움이 있다.애널리틱스는 도메인만 바꿔주면 바로 연동된다.애드센스가 도메인 승인이 2주가 걸려서 그전까진 애드-프리 사이트가 될 듯하다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"github","slug":"github","permalink":"https://gracefullight.dev/tags/github/"}]},{"title":"RxJS의 모든 것","slug":"RxJS의-모든-것","date":"2019-04-30T05:12:58.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/04/30/RxJS의-모든-것/","link":"","permalink":"https://gracefullight.dev/2019/04/30/RxJS%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83/","excerpt":"","text":"RxJS리액티브 프로그래밍은 개인적으로 비동기 프로그래밍과 함수형 프로그래밍의 종착지라고 생각한다.Stage1 Draft로 제안되어 더 이상 피할 수 없는 Observable 을 알아보자. 정의위키피디아에선 다음과 같이 정의되어있다.reactive programming is a declarative programming paradigm concerned with data streams and the propagation of change.데이터 스트림과 변화의 전파에 중점을 둔 프로그래밍 패러다임2011년 태초에 RX 의 개념을 만든 MS 문서에서는 Reactive eXtensions 다음과 같다.Reactive Extensions (Rx) is a library for composing asynchronous and event-based programs using observable sequences and LINQ-style query operators.옵져버블 시퀀스와 링큐 쿼리 연산자를 사용하는 비동기, 이벤트 기반 프로그래밍 라이브러리조금 더 디테일하게 말하면 데이터스트림을 Pulling 방식의 이터레이터 패턴인 IEnumerable&lt;T&gt;/IEnumerator&lt;T&gt; 로 만들어 Pushing 방식의 옵저버 패턴인 IObservable&lt;T&gt;/IObserver&lt;T&gt;로 전파/구독하는 것이다.Rx를 모두 이해한 뒤 이 정의를 보면 어쩜 이렇게 깔끔하게 한 줄로 이 내용을 다 담았을까? 란 생각이 드는데, 처음보는 입장에선 비동기인 건 알겠네 정도로만 이해가 되는 듯하다.어려운 게 당연하다. 멀티쓰레드 프로그래밍을 처음 배울 때의 감정을 생각해보자. 용어비동기 프로그래밍: 이 문서를 볼 정도면 설명이 필요 없을 것 같다.함수형 프로그래밍: 함수를 FirstClass 로 취급해 파라미터, 리턴, 변수에 할당 가능하며 함수 합성이 가능하고 원하는 시점에 호출이 쉽다.데이터스트림: file stream, event stream, http stream 의 친구로 data 식 표현이터레이터: 설명 필요 없을 듯.옵져버: 디자인패턴 책의 옵져버패턴 단원 참조, 자바스크립트에선 이미 이벤트리스너가 옵져버 패턴이다.옵져버블: 특정 객체를 관찰하는 옵저버에게 여러 이벤트나 값을 전파하는 역할풀: 데이터를 받을지 결정푸쉬: 데이터를 보낼지 결정싱글: 하나의 값이나 이벤트를 다룸멀티플: 여러 개의 값이나 이벤트를 다룸이 모든 용어를 하나의 표로 정리하면 다음과 같다.싱글멀티플풀함수이터레이터푸쉬프로미스옵져버블 패턴옵져버블의 변수 스타일은 이름 뒤에 const click$ 처럼 $을 뒤에 붙혀주는게 정형화되어있다.subscribe 는 next, error, complete를 파라미터로 받는다. 마블 다이어그램마블 다이어그램은 연산자를 쉽게 이해하기 위해, 옵져버블을 테스트하기위해 도식화된 다이어그램이다.타이밍과 값의 변화를 한 눈에 파악할 수 있다.위에 줄은 input 이고 연산자를 만나고나면 아래 줄에서 output 이 어떻게 바뀌는지 보여진다.가로 줄은 하나의 옵져버블이다.줄의 | 파이프는 구독 완료를 나타낸다. 소스 생성가장 간단한 옵져버블을 만들고 확인해보자.1234567891011121314151617181920212223242526272829const &#123; Observable &#125; = require('rxjs');const test$ = Observable.create(observer =&gt; &#123; console.log('create'); observer.next(1); observer.next(2); observer.complete(); console.log('done');&#125;);test$.subscribe( item =&gt; &#123; console.log(item); &#125;, error =&gt; &#123; &#125;, () =&gt; &#123; console.log('complete'); &#125;);/*create12completedone*/간단하지만 이터레이터이면서 구독가능하다는 걸 확인할 수 있다. 구독해제옵져버블의 리턴함수로 구독해제 콜백을 지원한다, 콜백이 필요하지 않다면 unsubscribe() 를 호출해주기만 하면 된다.123456789101112const test$ = Observable.create(observer =&gt; &#123; const interval = setInterval(() =&gt; &#123; console.log('test'); &#125;, 1000); return () =&gt; &#123; clearInterval(interval); &#125;;&#125;)const subscription = test$.subscribe();subscription.unsubscribe(); 파이퍼블 연산자Pipeable 연산자는 옵져버블 인스턴스를 pipe 함수 안에서 다룰 수 있는 연산자이다.기본적으로 rxjs/operators 라이브러리 안에 들어있다.12345678910111213141516const &#123; map &#125; = require('rxjs/operators');const test$ = Observable.create(observer =&gt; &#123; observer.next(1); observer.next(2); observer.complete();&#125;);test$.pipe( map(value =&gt; value * 2)).subscribe(item =&gt; console.log(item));/*24*/소스 옵져버블에서 발행된 값을 원하는대로 바꿀 수 있다. 연산자 ofargs 순서대로 값을 반환한다. fromObservableArrayPromiseIterableStringArrayLike위 타입을 옵져버블로 변환해준다. fromEventEventEmitter 클래스의 객체와 조합하거나 브라우저의 이벤트를 옵져버블로 바꿀 때 사용한다. defer팩토리 함수로 옵져버블을 생성한 후 구독한느 시점에 팩토리 함수를 호출해 이미 생성한 옵져버블을 리턴받아 구독한다.from 과의 차이는 다름과 같다.from프로미스 내부 구현부가 언제 실행되던지 상관 없을 때이미 실행 중이거나 완료한 프로미스를 옵져버블로 만들 때defer옵져버블을 구독하는 시점에 프로미스를 생성해 구현부가 실행되어야할 때프로미스 객체 생성 시점이 구독하는 시점이여야할 때 range범위 지정 후 그 값을 순서대로 발행한다. 반복문이 필요할 때 사용된다. intervalms 단위로 값을 발행한다. timer파라미터가 하나일 경우 ms 이후에 한 번 값을 발행하고,두 개일 경우 ms 이후에 두번 째 파라미터만큼 주기적으로 값을 발행한다. empty값 발행 후 중간에 멈춰야하는 상황에 사용한다. 이 함수만 사용하지는 않고 다른 함수나 연산자와 조합해서 complete 함수를 호출해야 할 때 사용된다.즉, 바로 구독을 완료해야될때 사용된다.12// 상수로 사용된다.const &#123; EMPTY &#125; = require('rxjs'); never아무 것도 하지 않고 옵져버블 생성이 필요할 때 사용된다.12// 상수로 사용된다.const &#123; NEVER &#125; = require('rxjs'); throwError옵져버블로 값을 발행하다가 에러를 발생시키고 종료해야하는 상황에 사용한다. filter주로 파이퍼블 연산자와 연결해서 사용된다.12345const &#123; filter &#125; = require('rxjs/operators');// 1~10 중 짝수 필터range(1, 10).pipe( filter(x =&gt; x % 2 === 0)).subscribe(x =&gt; console.log(x)); first처음으로 일치하는 값을 발행한다. 두 번째 인자로 기본 값을 줄 수 있다. last마지막으로 일치하는 값을 발행한다. 두 번째 인자로 기본 값을 줄 수 있다. take정해진 갯수만큼 구독하고 구독을 해제한다.interval 과 같이 무한 반복이 실행되는 연산자와 같이 쓰면 된다.1234567891011const &#123; take &#125; = require('rxjs/operators');interval(1000).pipe( take(3)).subscribe(x =&gt; console.log(x));/*012*/ takeUntil특정 이벤트가 발생할 때까지 옵져버블을 구독해야할 때 사용한다.예시로 보는 게 빠르다.1234interval(1000).pipe( take(100), takeUntil(fromEvent(document.querySelector('#btn'), 'click'))).subscribe(x =&gt; console.log(x)); takeWhiletake 와 filter 가 합쳐진 연산자이다.123interval(1000).pipe( takeWhile(x =&gt; x &lt;= 10)).subscribe(x =&gt; console.log(x)); takeLastLast 의 파라미터 수 만큼 저장해뒀다가 구독 완료시에 일괄적으로 발행한다.발행하는 값이 [0, 2, 4, 6, 8, 10] 일 때 takeLast(3) 일 경우 내부에 저장된 값은 다음과 같다.발행값내부배열0[0]2[0, 2]4[0, 2, 4]6[6, 2, 4]8[6, 8, 4]10[6, 8, 10] skip이름 그대로 n 개만큼의 발행을 건너 뛴다. skipUntiltakeUntil 과의 반대로 옵져버블이 실행될 때까지 건너 뛴다.12345678910const time = 1000;interval(time).pipe( skipUntil(interval(time * 5)), take(2)).subscribe(x =&gt; console.log(x));/*45*/ skipWhile조건을 만족하지 않는 순간부터 값을 발행한다. debounce많이 사용하진 않지만, 디바운스할 옵져버블을 계산값을 리턴해주는 함수를 파라미터로 주면 된다. debounceTime로대쉬나 다른 라이브러리의 debounce 와 같다. distinct중복은 제거하고 발행한다. 값 비교에는 === 연산자가 사용된다.123456789101112131415of( &#123;id: 1&#125;, &#123;id: 1&#125;, &#123;id: 2&#125;, &#123;id: 3&#125;).pipe( distinct(data =&gt; data.id), map(data =&gt; data.id)).subscribe(x =&gt; console.log(x));/**123*/두번째 파라미터로 flush 조건을 옵져버블로 넘겨 중복 조건을 초기화시킬 수 있다. distinctUntilChanged중복값이 연속으로 발행된 경우만 제거한다.1234567891011of(1, 2, 3, 3, 4, 1).pipe( distinctUntilChanged()).subcribe(x =&gt; console.log(x));/**12341*/첫번째 파라미터로는 비교함수 (prev, next 를 파라미터로 받는)를 넣어 연속 비교조건을 변경할 수 있다.두번째 파라미터로는 비교할 값 셀렉터를 변경해줄 수 있다.12345678910of( &#123;a: 1, b: 10&#125;, &#123;a: 1, b: 10&#125;, &#123;a: 2, b: 20&#125;, &#123;a: 3, b: 30&#125;, &#123;a: 3, b: 30&#125;, &#123;a: 2, b: 20&#125;).pipe( distinctUntilChanged(null, data =&gt; data.a)).subscribe(x =&gt; console.log(x)); sample이건 마블 다이어그램으로 이해하는 게 빠르다.notifier 옵져버블(x 옵져버블)이 발행되면 이전 최근 값을 발행한다.값 c 처럼 소스 옵져버블에 새로운 값이 없을 경우 값을 중복으로 발행하지 않는다. sampleTime일정 간격 사이에 있는 최근 값을 발행한다. pluck기본 map 연산자는 뻔하기에 적지 않았다.map 처럼 동작하지만 소스 옵져버블에서 객체를 리턴할 때 객체의 property 를 뽑아낸다. mergeMap switchMap concatMap scan partition groupBy buffer bufferCount window windowCount 여담RxJS 의 장점은 이벤트 구독을 취소하고, 모든 이벤트를 하나의 스트림으로 제어할 수 있는 것이라고 생각한다.이해하는데 상당한 기간이 소요되었지만, 웹에선 다음과 같은 상황에서 사용될 것 같다.SPA에디터와 같이 많은 컴포넌트끼리 통신이 필요할 때이 상황에서도 앵귤러가 아닌 스토어 기반의 리액트, 뷰를 사용한다면 RxJS를 쓸거야 라고 보여주기 위해 사용하는 느낌이 든다.모두가 같이 가기엔 꽤 어려운 개념이다.싱글 스레드 기반의 백엔드에서 더 유용하게 쓰일 수 있을 듯learn-rxjs의 예제를 분석하는 게 더 많은 도움이 될 것 같다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"rxjs","slug":"javascript/rxjs","permalink":"https://gracefullight.dev/categories/javascript/rxjs/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"rxjs","slug":"rxjs","permalink":"https://gracefullight.dev/tags/rxjs/"}]},{"title":"Ansible 정리","slug":"Ansible-정리","date":"2019-04-28T14:32:15.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2019/04/28/Ansible-정리/","link":"","permalink":"https://gracefullight.dev/2019/04/28/Ansible-%EC%A0%95%EB%A6%AC/","excerpt":"","text":"앤서블서버 구성 관리 자동화 프로그램 용어애드훅: 일회성 실행플레이북: yaml 로 재사용 CMDBConfiguration Management DataBase (구성 관리 데이터베이스)분산 설치된 서버, 스토리지, 네트워크 장비 등의 CPU, 메모리, 디스크 등의 하드웨어 정보와 OS, 응용프로그램 종류 등의 소프트웨어 정보 관리다양한 시스템의 정보를 한 번에 파악 가능하고, 각 장비 간 연관 관계 파악이 쉬워 예방, 장애 파악, 유지보수에 좋음앤서블 CMDB 는 앤서블 호스트 파일 또는 지정된 인벤토리를 통해 설정 관리 대상 시스템의 정보를 setup 모듈을 통해 수집, 저장앤서블 vault 로 중요 정보 암호화 가능Device42, servicenow 등이 지원ansible-cmdb 를 사용해 간단한 대시보드로 볼 수 있다. 최적화 pipelining앤서블 실행 단계를 한 단계로 줄일 수 있음플레이북 내에서는 ansible_ssh_pipelining 으로 설정 가능/etc/ansible/ansible.cfg 에서 설정 가능 forks한 번에 실행할 수 있는 노드의 수 제어 (default: 5)serial 은 단순히 전체 노드에서 어느 정도를 실행할 것인지를 설정하는 거라 forks 와는 다르다. async태스크 별 지정된 주기에 체크하고 모든 노드의 동일 태스크가 완료되어야 다음 태스크 실행주기를 0으로 설정하면 상태 체크 없이 다음 태스크가 진행된다. strategy free상태 체크는 하지만 다른 노드의 진행을 기다리지 않고 각 노드 간 독립적으로 태스크 진행빠르게 작업이 끝나는 노드가 생기므로 forks 수의 제한을 가능한 늘려줘야한다. 설정 확인ansible-config dump --only-changed 로 변경된 설정 확인 가능 블록with_items, with_nested, with_dict, with_file을 사용해 여러 개의 태스크를 한 번에 실행 가능 fact_caching기본적으로 앤서블의 fact 는 실행 시마다 수집되는데, 이 옵션을 설정으로 디스크 또는 메모리에 캐싱해 fact 수집 시간을 단축시킴기본 값은 24시간 ansible-vault평문 파일을 aes256으로 암복호화 no_log플레이북 실행시 -v, -vv, -vvv의 옵션으로 암호화 파일의 유추가 가능한데, no_log 옵션을 줘서 해결 가능 여담설정이 많고, 모듈도 많아서 사용할 때 홈페이지를 참고해가며 삽질해야할 듯Docker 설치 전 물리적인 서버의 설정을 맞춰줄 때나 디버깅할 때 필수로 보인다.시스템 관리자가 아니거나 AWS 쓴다면 사용할 일이 거의 없을 것 같다.AWX로 Web 콘솔에서 관리가 가능하다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"ansible","slug":"server/ansible","permalink":"https://gracefullight.dev/categories/server/ansible/"}],"tags":[{"name":"ansible","slug":"ansible","permalink":"https://gracefullight.dev/tags/ansible/"}]},{"title":"Mac 에서 포트 접근 확인하기","slug":"Mac에서-포트-접근-확인하기","date":"2019-04-26T03:37:42.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2019/04/26/Mac에서-포트-접근-확인하기/","link":"","permalink":"https://gracefullight.dev/2019/04/26/Mac%EC%97%90%EC%84%9C-%ED%8F%AC%ED%8A%B8-%EC%A0%91%EA%B7%BC-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0/","excerpt":"","text":"윈도우의 경우에는 telnet-client 를 켜주면 되고, 맥에서도 brew 로 설치하면 되지만 더 좋은 내장 툴이 있다. 네트워크 유틸리티네트워크 유틸리티 &gt; 포트 스캔 을 사용하자.IP 를 입력하고 테스트할 포트 범위를 입력 후 스캔 버튼을 누르면 된다.Ping, DNS, Netstat, Traceroute (MTR), Whois 등의 기능이 있어서 유용하게 사용할 것 같다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://gracefullight.dev/tags/mac/"}]},{"title":"jQuery 프로토타입 오염 취약점 (CVE-2019-11358)","slug":"jQuery-Prototype-Pollution-Vulnerability","date":"2019-04-24T13:25:45.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/04/24/jQuery-Prototype-Pollution-Vulnerability/","link":"","permalink":"https://gracefullight.dev/2019/04/24/jQuery-Prototype-Pollution-Vulnerability/","excerpt":"","text":"프로토타입 오염이 공격은 JSON.parse 와 Object.deepCopy 를 사용하는 모든 로직에서 발생할 수 있다.2019-04-17 에 발표된 이 취약점은 $.extends 구문 상에서 프로토타입 XSS 공격이 가능하다. 예시123456var myObject = '&#123;\"myProperty\" : \"a\", \"__proto__\" : &#123; \"isAdmin\" : true &#125; &#125;';var newObject = $.extend(true, &#123;&#125;, JSON.parse(myObject));console.log(newObject.isAdmin); // truevar temp = &#123;&#125;;console.log(temp.isAdmin); // true 패치취약점 패치는 아래 부분을 변경해준다.1234567891011121314151617181920212223242526272829303132333435363738jQuery.extend = jQuery.fn.extend = function() &#123; // 사이 로직 생략 for (; i &lt; length; i++) &#123; if ((options = arguments[i]) != null) &#123; for (name in options) &#123; src = target[name]; copy = options[name]; // [AS-IS] // if (target === copy) &#123; // [TO-BE] if (name === \"__proto__\" || target === copy) &#123; continue; &#125; if ( deep &amp;&amp; copy &amp;&amp; (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy))) ) &#123; if (copyIsArray) &#123; copyIsArray = false; clone = src &amp;&amp; jQuery.isArray(src) ? src : []; &#125; else &#123; clone = src &amp;&amp; jQuery.isPlainObject(src) ? src : &#123;&#125;; &#125; target[name] = jQuery.extend(deep, clone, copy); &#125; else if (copy !== undefined) &#123; target[name] = copy; &#125; &#125; &#125; &#125; return target;&#125;;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"jquery","slug":"javascript/jquery","permalink":"https://gracefullight.dev/categories/javascript/jquery/"}],"tags":[{"name":"jquery","slug":"jquery","permalink":"https://gracefullight.dev/tags/jquery/"}]},{"title":"NARS 직구하기","slug":"NARS-직구하기","date":"2019-04-18T12:25:48.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2019/04/18/NARS-직구하기/","link":"","permalink":"https://gracefullight.dev/2019/04/18/NARS-%EC%A7%81%EA%B5%AC%ED%95%98%EA%B8%B0/","excerpt":"","text":"NARS CosmeticsFrançois Nars가 런칭한 프랑스발 유명 색조 브랜드 나스는 남자라도 갖고 싶게하는 매력있는 디자인을 가진 제품들이 많다.한국에 들어오면 1.5배정도 가격이 뛰던지, 한정판은 들어오자마자 못 구한다.이번 2019 Orgasm Collection 도 마찬가질 것 같다.특히 립스틱 4개를 모아야 하나의 NARS 문구로 완성 되는 건 상술이지만 아름답다. 이름의 유래나스 화장품 명칭은 대부분 섹슈얼한데 주된 명칭은 다음과 같다.오르가즘 '99 에 런칭된 베스트셀러이다.슈퍼오르가즘섹스어필섹스판타지쓰리썸게이어티패티쉬즈드딥쓰롯왜 이런 이름을 지었는지에 대해 궁금해져서 여성도 성에 당당해지자 라는 카더라가 있는데, 카더라는 꺼무위키처럼 제껴두고 나스가 보그와 한 인터뷰를 확인해보자.Q: I think it’s safe to say your products have some of the all-time best names—Orgasm, Jungle Red, Belle de Jour, Chinatown, Schiap. How do you name them?네이밍은 상품에 개성을 부여하는 것과 같다고 생각했기에, 여성들이 뭔가 특별한 것을 입고 있는 것처럼 느끼게 하고 싶었습니다. 메이크업은 섹시 악세사리라고 생각하기 때문에 재밌있게, 섹시하게 만들길 원했습니다. 여성들은 섹시해보기 위해, 섹시함을 느끼기 위해 이걸 사용합니다.A: You know, I always said we were either going to give them numbers, or interesting names. I didn’t want to go with boring names like Pink Peach. It had to be almost like giving each product its own personality, so that women could dream, could connect to the product, could feel like they were wearing something special. I wanted it to be fun. And sexy, too. Because makeup is a sexy accessory—women use it to look sexy and to feel sexy, for themselves and for the world. It gets difficult, because, you can imagine, we’ve been copied a lot. I have those little Hermès agendas, and 24 hours a day I keep writing names that come to my mind from books that I read, exhibits I go to, movies, places. I keep writing names. That’s how it works. I usually think about the name first, and then a color matches that name. Nothing is really planned. 구매하기 공홈NARS 공식 홈페이지는 한국인이 한국카드를 쓰거나 배대지를 이용할 경우 구매 취소가 되어버린다.이 것에 대해 카드, 페이팔, 배대지 변경까지 세 번의 도전을 모두 실패하고 결국 문의를 해서 이런 답변을 받았다.Please be aware that at this time NARScosmetics.com can only bill and ship within the U.S. and both billing and shipping must be made to a U.S. residential address.의역하면 응 안돼~ 가 되시겠다.사은품도 많고, 정품 패키지도 엄청 예쁜데 구매하려면 미국 친구나 미국 공구를 알아봐야한다.이 문제는 나에게 High Priority 이슈로 등록되어서 대안을 마련해야만 했다. Sephora편집숍인 세포라엔 나스 신상이 바로바로 입고되고 있었다.가입 후 배대지 주소를 넣어주고, 오르가즘 컬렉션을 추가한 뒤 사은품도 꼭꼭 챙기자.블러셔립자주 이용할 듯 싶다. 여담도착하면 이 컬렉션을 한국의 어떤 뷰티 유튜버보다도 빨리 리뷰할 수 있을 것 같다.시놀로지 나스도 구매도 해야하는데","categories":[{"name":"etc","slug":"etc","permalink":"https://gracefullight.dev/categories/etc/"}],"tags":[{"name":"nars","slug":"nars","permalink":"https://gracefullight.dev/tags/nars/"}]},{"title":"Pi-hole과 라즈베리파이로 모든 광고 차단하기","slug":"Install-Pi-Hole-on-Raspberry-Pi-3-b","date":"2019-04-17T14:07:03.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2019/04/17/Install-Pi-Hole-on-Raspberry-Pi-3-b/","link":"","permalink":"https://gracefullight.dev/2019/04/17/Install-Pi-Hole-on-Raspberry-Pi-3-b/","excerpt":"","text":"앞서유튜브 광고가 많아졌다. 명색이 프로그래머인데 AdGuard를 정액제로 사용하고 싶지 않았다.이 문서엔 없지만 피캡을 구현해보고 싶었다. 기기 구매라즈베리파이3 B+ 스타터킷을 구매한다. 아래 재료가 있을 경우 빼고 구매해도 된다.SD 카드 리더기5핀 충전기라즈베리파이용 방열판라즈베리파이 케이스 환경설정 포맷SD 카드를 비워주기위해 파워쉘이나 CMD를 관리자 모드로 접근한다.123456PS &gt; diskpartDISKPART &gt; list diskDISKPART &gt; select disk $&#123;SD_CARD_DRIVE_NUMBER&#125;DISKPART &gt; clean 라즈비안운영체제인 Raspbian Stretch Lite 버전을 다운로드한다.데비안 기반이다. etcher컴퓨터에 SD 카드용 이미지 굽는 프로그램을 설치한다.다운로드된 라즈비안과 etcher로 이미지를 굽는다.직관적이라 1, 2, 3 선택하듯이 설치하면 된다.도중에 깨질 경우 다시 포맷한다. ssh 접근이미지 설치 후 다시 USB 를 인식시키면 Boot drive 가 보이는데 접근 후 루트에 ssh 란 이름의 터치파일을 만들어준다.1$ touch ssh이 파일이 있어야 ssh 접근이 가능하다. 공유기에 꼽고 내부아이피 확인하자.1234# ssh 접근$ ssh pi@YOUR_RASPBERRY_INTERAL_IP# 초기 비밀번호는 raspberry 이다. 패키지 설치부팅 후 apt-get 을 사용할 시간이다.1$ sudo apt-get upgrade -y &amp;&amp; sudo apt-get update vimvim 도 없다.1$ sudo apt-get install vim oh-my-zsh123$ sudo apt-get install zsh$ chsh -s $(which zsh)$ sh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"agnoster theme, zsh-syntax-highlighting, zsh-autosuggestion 세팅해주자. pi-hole이제 파이홀을 설치할 수 있다.라즈베리파이를 유선연결했으니 eth0 인터페이스만 잘 체크해주면, 나머진 기본옵션으로 다음 다음만 해주면 된다.1234$ sudo curl -sSL https://install.pi-hole.net | bash# 비밀번호 변경$ sudo pihole -a -p dns-encrypt이왕 DSN 가로채는 거 암호화도 해주자.매뉴얼 내용을 정리했다.1234567891011121314151617181920212223242526$ cd /opt# 설치$ sudo wget https://github.com/jedisct1/dnscrypt-proxy/releases/download/2.0.22/dnscrypt-proxy-linux_arm-2.0.22.tar.gz# 폴더 생성$ sudo tar -xf dnscrypt-proxy-linux_arm-2.0.22.tar.gz$ sudo mv linux-arm dnscrypt-proxy &amp;&amp; cd dnscrypt-proxy# 기본 설정 복사$ sudo cp example-dnscrypt-proxy.toml dnscrypt-proxy.toml# 설정 변경$ sudo vi dnscrypt-proxy.toml# 이 세 옵션을 찾아서 변경해준다.server_names = ['dnscrypt.nl-ns0']# 기본 53번 포트는 pi-hole에서 쓰고 있다.listen_address = ['127.0.0.1:54', '[::1]:54']require_dnssec = true# 서비스 등록$ sudo ./dnscrypt-proxy -service install# 시작$ sudo ./dnscrypt-proxy -service startdnscrypt.nl-ns0 Public DNSCrypt 서버이다.다른 서버는 여기를 참조하자. 일본이나 싱가폴 쪽에 있으면 좋을텐데 아쉽다. Upstream DNS 변경관리자 화면의 Settings &gt; DNS &gt; Upstream DNS Servers 탭에서 '127.0.0.1:54', '[::1]:54'를 넣어주고 저장한다. Primary DNS Address 변경공유기 설정에 들어가서 라즈베리파이 내부 아이피를 기본 DNS 주소로 설정한다.IPTIME 의 경우 고급 설정 &gt; 네트워크 관리 &gt; 인터넷 설정 정보 에 있다. BlockListsSettings &gt; Blocklists 에서 추가하고 Save and Update 하면 차단할 주소가 추가된다. 아래는 참고할만한 링크다.레딧Best blocking lists 확인Cloudflare Browsing Experience Security Check서 체크하자.DNSSEC, TLS1.3에 초록불 들어오면 된다.그리고 유튜브를 쾌적하게 즐기자. 여담Query Log 메뉴에서 어느 도메인을 확인하려는지 알 수 있다.Instagram 광고 차단 필터를 찾아봐야겠다.정작 내 블로그엔 애드센스 달려있는데…세팅비 2만원 받아도 되지않을까? 😄","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"raspberry","slug":"server/raspberry","permalink":"https://gracefullight.dev/categories/server/raspberry/"}],"tags":[{"name":"pi-hole","slug":"pi-hole","permalink":"https://gracefullight.dev/tags/pi-hole/"},{"name":"raspberry","slug":"raspberry","permalink":"https://gracefullight.dev/tags/raspberry/"}]},{"title":"RecursiveDirectoryIterator 사용하기","slug":"RecursiveDirectoryIterator-사용하기","date":"2019-04-12T10:42:34.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/04/12/RecursiveDirectoryIterator-사용하기/","link":"","permalink":"https://gracefullight.dev/2019/04/12/RecursiveDirectoryIterator-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/","excerpt":"","text":"앞서보통 디렉토리 순회를 한다고하면 무슨 메소드를 쓸까?123456&lt;?php// 쉘실행하고?exec('find dir');// 아니면 for문과 scandir?scandir('dir');위 방법은 간단하지만 /home/gracefullight/tmp/**/*.bak 와 같은 중첩된 디렉토리 파일의 데이터를 가져오려면 엄청난 if/else 처리가 들어갈 것이다. RecursiveIterator RecursiveDirectoryIterator오토로딩을 하기 위해 필수로 들어가있는 Standard PHP Library엔 파일 순회에 사용할 수 있는 이터레이터 클래스가 들어가 있다.12345678910&lt;?php// $path 하위를 가져오고 .. 와 . 는 제외한다.$directory = new RecursiveDirectoryIterator($path, RecursiveDirectoryIterator::SKIP_DOTS);$iterator = new RecursiveIteratorIterator($directory);foreach ($iterator as $file) &#123; $file-&gt;getPathname(); $file-&gt;getMTime();&#125;?&gt;$file은 SplFileInfo 이다. RecursiveFilterIterator위의 foreach 문 안에서 조건을 줘서 필터링할 수 있지만 다른 깔끔한 방법이 있다.12345678910111213141516171819202122232425262728293031&lt;?phpclass TextFilterIterator extends RecursiveFilterIterator&#123; public static $FILTERS = [ 'txt' ]; public function accept() &#123; // 순회하기위해 자식 트리가 있을 경우 true if ($this-&gt;hasChildren()) &#123; return true; &#125; $current = $this-&gt;current(); if (!$current-&gt;isFile()) &#123; return false; &#125; // 확장자가 txt 인 파일만 필터링 return in_array($current-&gt;getExtension(), self::$FILTERS); &#125;&#125;// 감싸주면 끝난다.$iterator = new RecursiveIteratorIterator( new TextFilterIterator($directory), // 이 옵션은 하위 폴더만 순회하게 해준다. RecursiveIteratorIterator::LEAVES_ONLY, // 이 옵션은 Read 에 실패할 경우 오류를 스킵한다. RecursiveIteratorIterator::CATCH_GET_CHILD); RecursiveCallbackFilterIterator콜백으로 만들어 더 예쁘게 짤 수 있다.12345678910111213141516171819&lt;?php$FILTERS = ['txt'];$textFilterIterator = new RecursiveCallbackFilterIterator( $directory, function ($current, $key, $iterator) use ($FILTERS) &#123; if ($iterator-&gt;hasChildren()) &#123; return true; &#125; if (!$current-&gt;isFile()) &#123; return false; &#125; return in_array($current-&gt;getExtension(), $FILTERS); &#125;);$iterator = new RecursiveIteratorIterator($textFilterIterator); 여담쓸 수 있다면 symfony/finder 쓰자.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"Mac에서 Kubernetes is starting이 지속되는 현상","slug":"Mac에서-Kubernetes-is-starting이-지속되는-현상","date":"2019-04-12T10:30:42.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2019/04/12/Mac에서-Kubernetes-is-starting이-지속되는-현상/","link":"","permalink":"https://gracefullight.dev/2019/04/12/Mac%EC%97%90%EC%84%9C-Kubernetes-is-starting%EC%9D%B4-%EC%A7%80%EC%86%8D%EB%90%98%EB%8A%94-%ED%98%84%EC%83%81/","excerpt":"","text":"원인모하비 문제인지 최근 엣지 버전 Docker for Mac 이 문제인지 잘 모르겠지만,부팅시에 Kubernates is starting 문구가 지속되며 CPU의 온도를 90도까지 올려버린다.맥북이 트랜스포머가 되어 곧 제트기가 될 것처럼 굉음이 나는데 해결해보자. 해결Docker &gt; Prefereneces &gt; Reset 에서 Reset to factory defaults 로 공장 초기화를 진행한다.-~/.kube 폴더를 강제로 삭제한다.다시 쿠버네티스를 실행한다. 여담쿠버네티스 뿐 아니라 도커 자체가 맥에서 CPU 가 튀는 현상이 있는데,여기 이슈에서 관리가 되고 있다.file watch 기능을 끄거나, 볼륨을 해제하거나, 맥 디스크 암호화 기능을 꺼보라는데 신뢰할 수 있는 방법은 아니다.도커 켜놓고 잠자기 해놓으면 과열로 맥북 켜지지도 않을 수 있어서 해결될 때까진 윈도우에서 돌려야할 듯 싶다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"k8s","slug":"k8s","permalink":"https://gracefullight.dev/tags/k8s/"},{"name":"kubernetes","slug":"kubernetes","permalink":"https://gracefullight.dev/tags/kubernetes/"},{"name":"mac","slug":"mac","permalink":"https://gracefullight.dev/tags/mac/"}]},{"title":"querySelectorAll 로 배열만들기","slug":"querySelectorAll-로-배열만들기","date":"2019-03-30T13:11:05.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/03/30/querySelectorAll-로-배열만들기/","link":"","permalink":"https://gracefullight.dev/2019/03/30/querySelectorAll-%EB%A1%9C-%EB%B0%B0%EC%97%B4%EB%A7%8C%EB%93%A4%EA%B8%B0/","excerpt":"","text":"document.querySelectorAll('.class') 와 같이 엘레먼트를 받았는데, for문을 돌리면 오류가 발생한다. 해결1234567// 이 방법이나let classes = Array.from(document.querySelectorAll('.class'));// 이렇게 가능하다classes = [...document.querySelectorAll('.class')];// 구버전 브라우저를 지원해야한다면classes = Array.prototype.slice.call(document.querySelectorAll('.class')); 여담puppeteer 로 크롤링할 때 항상 헷갈린다.삽질로 찾았는데 stackoverflow 에 정리된 게 있는 듯…","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"PWA 홈 설치의 모든 것 (A2HS)","slug":"PWA-A2HS","date":"2019-02-17T12:39:40.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2019/02/17/PWA-A2HS/","link":"","permalink":"https://gracefullight.dev/2019/02/17/PWA-A2HS/","excerpt":"","text":"PWA의 캐싱과 푸쉬 기능은 익히 알려져 있지만, 홈 설치에 대해선 제대로 되어있는 문서가 거의 없다.기능은 기존 바로가기의 전체화면 버전이라 간단해보이지만 구현해보면 빙산의 일각인 걸 절실히 깨닫게 된다. A2HSAdd To Home Screen, 홈 설치, 웹 앱 설치 사전지식아래 사전지식이 없으면 이 문서가 읽기 힘들 수 있다.es6서비스워커캐싱 전략 조건홈 설치가 되려면 다음과 같은 조건이 필요하다.크롬 측 설명인데 다른점이 많아서 하나씩 까보자.HTTPS서비스워커 설치start_url 이 오프라인 사용가능최소 192px 아이콘 지원manifest.json 에 name 과 short_name 값 등록 HTTPSHTTPS 를 통해 서비스가 제공되어야한다고 나오는데,도메인 뿐아니라 페이지의 모든 리소스가 HTTPS 프로톨콜로 전송되어야한다. 서비스워커 설치PWA 를 시작하는데 필수 요소니 자세한 설명은 생략 start_url 오프라인 사용가능어느 캐싱전략을 사용해도 상관없으나 오프라인 모드로 연결이 되어야한다.국내 서비스일 경우 크게 느리지 않으므로 Network First Strategy 로 캐싱하는 걸 추천한다.국외 서비스일 경우 로드되는 리소스까지 캐싱전략을 세워야될 수 있다.여기서 start_url 에 querystring 을 추가해 사용하는 경우가 대부분일텐데 캐싱되는 URL 은 querystring 이 없다는 걸 감안해야한다.예를 들어보자.1234567// 보통 fetch request 로 접근되는 경로는 다음과 같다.start_url: '/',// 검색 파라미터가 달려있다면 이런 모양일 것이다.start_url: '/?NaPm=',// 하지만 manifest.json 에 들어있는 경로는 다음과 같을 것이다.start_url: '/?pwa=1&amp;utm_source=pwa'유저가 접근시 ['NaPm', 'pwa', 'utm_source'] 등의 파라미터를 제거해야 경로가 캐시처리되며 오프라인 접근이 될 것이다. 아이콘 지원크롬에선 최소 192px 의 아이콘을 지원하라고 나와있지만 스플래시 스크린에서 사용되는 아이콘은 512px 이 우선이다. 게다가 엣지 등의 다른 브라우저는 512px 도 있어야한다.큰 사이즈의 이미지가 있을 경우 설치시에 네이티브 코드에서 이미지를 리사이징해서 아이콘을 만드므로 512px 하나만 있어도 되지만 홈 설치 시간이 느려지는 원인이 되므로 최소 192px, 512px 두 개는 지원해주자.여력이 된다면 더 많은 사이즈의 이미지를 지원해줘도 된다. 이미지 업로드 하는 페이지의 리사이징 비용과 이미지별 트래픽 비용도 추가되겠지만 항상 유저의 속도가 중요한 것 아닌가?이미지가 많을 경우 아래 쪽에 언급할 compatible 기능에서 문제가 생길 수 있다. 앱 이름name 속성은 스플래시 스크린에 사용되며, short_name 은 바로가기 앱 명에 사용된다.name 속성에 빈 값이 들어갈 경우 (빈 값엔 space 및 ‘ㄱ’ 한자 1키도 포함된다.) short_name 으로 대체된다.두 속성이 모두 빈 값일 경우 홈 설치가 비활성화 된다.이 기능은 스펙에 명시되어 있어서 변경 불가능하다.크롬에선 스플래시 스크린 하단에 앱 이름이 노출되며 기타 브라우저에선 중앙에 노출된다.최근에 하단으로 변경된 것으로 보인다. 고려 대상필수 조건에는 없지만 고려해야할 대상들은 아래와 같다.background_colortheme_colordisplayrelated_applications background_color이 속성은 스플래시 스크린의 배경색을 담당하는데, 배경색은 스플래시 스크린 상의 앱 이름 (name 속성)의 색상에 영향을 미친다.앱 이름은 배경색이 거므스름한지의 여부에 따라 흰색 또는 검정색으로 노출된다.이 공식은 contrast ratio 란 스펙으로 정의되어 있으며, 안드로이드 내부에 구현되어있는 소스는 다음과 같다.1234567891011121314151617181920212223242526272829private static final float CONTRAST_LIGHT_ITEM_THRESHOLD = 3f;/** * Calculates the contrast between the given color and white, * using the algorithm provided by * the WCAG v2 in http://www.w3.org/TR/WCAG20/#contrast-ratiodef. */private static float getContrastForColor(int color) &#123; float bgR = Color.red(color) / 255f; float bgG = Color.green(color) / 255f; float bgB = Color.blue(color) / 255f; bgR = (bgR &lt; 0.03928f) ? bgR / 12.92f : (float) Math.pow((bgR + 0.055f) / 1.055f, 2.4f); bgG = (bgG &lt; 0.03928f) ? bgG / 12.92f : (float) Math.pow((bgG + 0.055f) / 1.055f, 2.4f); bgB = (bgB &lt; 0.03928f) ? bgB / 12.92f : (float) Math.pow((bgB + 0.055f) / 1.055f, 2.4f); float bgL = 0.2126f * bgR + 0.7152f * bgG + 0.0722f * bgB; return Math.abs((1.05f) / (bgL + 0.05f));&#125;/** * Check whether lighter or darker foreground elements (i.e. text, drawables etc.) * should be used depending on the given background color. * @param backgroundColor The background color value which is being queried. * @return Whether light colored elements should be used. */public static boolean shouldUseLightForegroundOnBackground(int backgroundColor) &#123; return getContrastForColor(backgroundColor) &gt;= CONTRAST_LIGHT_ITEM_THRESHOLD;&#125; theme_color이 속성은 주소창의 색상 또는 standalone 모드 시의 상단 상태바의 색상으로 노출된다.하지만 IOS Safari 에서는 ['black', 'black-translucent'] 두 가지 색상으로만 선택이 가능하다.이 것도 위의 Contrast 알고리즘을 활용해 거므스름한 여부에 따라 설정하면 된다. display크롬 문서엔 standlone, fullscreen, minimal-ui 모두 A2HS 의 기능을 활용할 수 있다고 설명되어 있으나, 실제로는 앞의 두 속성만 가능하다.삼성브라우저는 minimal-ui 속성을 지원하지 않는다. related_applications앱을 가지고 있을 경우 앱 다운로드를 유도할 수 있는데, manifest 에 아래 속성만 넣으면 된다.id 는 apk 업로드할 때 그 것과 같다.1234567\"prefer_related_applications\": true,\"related_applications\": [ &#123; \"platform\": \"play\", \"id\": \"com.google.samples.apps.iosched\" &#125;] Install BannerApp Install Prompt 또는 각각 브라우저마다 불리는 용어가 다른 이 기능은 PWA 접속시 홈 화면에 추가하라는 유도 배너를 말한다. 이 기능은 브라우저별로 이벤트 및 노출 유무가 천차만별이다. 스펙배너설치아이콘배너재노출일브라우저아이콘Chrome노출-~3 months-Firefox-노출-표시Samsung노출노출~2 weeks표시Edge노출-?표시UC?-??Opera노출-?표시Whale?---크롬 빼고는 지원되는 브라우저에서 홈 설치시에 브라우저 아이콘이 모두 노출된다.이러면 웹 푸쉬를 받을 시에 원래 브라우저에 뱃지가 생긴다고 보면 된다.배너를 닫을 시에 재노출 기간이 비상식적으로 길다.배너는 prompt() 메소드로 강제 노출이 불가능하며, 버튼을 클릭하는 액션이 있어야만 한다.재노출일을 초기화할 시에는 브라우저의 데이터를 모두 삭제해야한다.(서비스워커 삭제로 불가능, 계정 또는 브라우저에 저장되는 값으로 추정됨)UC 브라우저는 문서도 있고 설치가 되었던 것 같은데 최근 설치가 되지 않는다.Whale 는 크로미움 기반이라 설치가 되었던 것 같은데 최근 설치가 되지 않는다. IOS Safari모바일계의 IE인 사파리는 Web App Manifest 기능을 아직 개발 중에 있다.그리고 매우 불친절한 개발자 문서1 와 불친절한 개발자 문서2만 가지고 있다. 사파리 버그사파리에서만 나타나는 크리티컬한 버그가 몇 가지 있다. OAuth 인증 불가정확히 말하면 타 도메인 또는 새 창을 사용하는 SSO 와 OAuth 인증이 불가능하다.사파리 자체 버그로 IOS 12.2.0 버전에 수정되었다. 제스처 사용 불가뒤로가기 제스처 사용이 불가능하다.이를 위해 하이브리드 웹앱처럼 하단 네비게이션 바를 만들어줄 수 있다.이 버그도 IOS 12.2.0 버전에 수정되었다. 전용 속성홈 화면 아이콘과 스플래시 스크린, 테마 색상을 meta, link 태그로 만들어줘야한다.이를 위해 manifest.json 의 값을 가져와 canvas 를 통해 프론트에서 이미지를 만들어야한다.123456&lt;meta name=\"apple-mobile-web-app-capable\" content=\"yes\"&gt;&lt;meta name=\"apple-mobile-web-app-title\" content=\"AppTitle\"&gt;&lt;meta name=\"apple-mobile-web-app-status-bar-style\" content=\"black\"&gt;&lt;meta name=\"apple-itunes-app\" content=\"app-id=myAppStoreID\"&gt;&lt;link rel=\"apple-touch-icon\" href=\"touch-icon-iphone.png\"&gt;&lt;link rel=\"apple-touch-startup-image\" href=\"icon.png\"&gt; CompatibleChrome, Safari, Edge 등 호환성을 맞추다보면 머리에 쥐가 날지도 모른다.이럴 때 브라우저별 호환성을 맞춰주는 google 에서 제공되는 라이브러리가 있다.pwa.compat 으로 다음과 같이 로드하면 된다.12&lt;link rel=\"manifest\" href=\"manifest.json\" /&gt;&lt;script async src=\"path/to/pwacompat.min.js\"&gt;&lt;/script&gt;다음과 같은 호환성이 해결된다.Safari 전용 속성Safari 홈 화면 아이콘과 스플래시 이미지Edge, IE 전용 속성meta 태그로 추가되지 않은 manifest.json 속성 단점manifest.json 과 icon 배열의 수만큼 request 수가 증가한다.static resource 이므로 HTTP Cache 로 해결 가능하다. 버그삼성브라우저에서 앱 이름에 &quot; 큰따옴표가 들어간 경우 설치가 실패한다.Manifest JSON 을 파싱하면서 브라우저 내에서 오류가 발생한다. 통계홈 설치를 한 뒤에 유저가 얼마나 설치했을지 통계를 내는 것 또한 중요한데,beforeInstallPrompt 나 appInstalled 이벤트는 브라우저 호환성이 보장되지 않는다.따라서 위 이벤트로 로깅하는 건 무의미하고, start_url 에 들어온 파라미터로 통계를 내면 된다. 테스트크롬 개발자도구의 application &gt; Manfiest &gt; Add to homescreen 으로 이벤트를 발생시킬 수 있다고 하나 잘 되진 않는다.홈 설치 조건을 만족시킬 경우, 크롬 설정 아이콘에서 “앱 명 추가” 라는 설정 메뉴가 하나 더 보이는데 이 기능으로 조건을 만족하는지와 브라우저 PWA 정도는 테스트 가능하다.모바일 디버깅용으론 eruda를 사용하자. 여담IE7-8 호환성 맞추던 시절이 떠올랐다.아직 픽스될 버그가 많으며, 안정될 때까지 최소 1년은 더 필요할 것으로 보인다.추가되고 고쳐져야할 기능도 몇 가지 있다.브라우저 호환성 (주소창 옆 아이콘으로 통일될 듯)이벤트 호환성manifest href 에 blob 형태 지원 (현재 json decode 하면서 경로 오류 발생)manifest가 변경될 경우 업데이트알림 (이슈)개인 홈페이지에 적용할 경우 Web App Manifest Generator 를 이용하는게 속 편하다.Desktop PWA 나 TWA 는 다루지 않았다. 레퍼런스W3C SpecProgressive Web Apps Book브라우저별Chrome, App Install PromptSafari, Safari App BannersSamsungEdgeFirefoxUCOpera웹문서Progressive Web Apps on iOS are herePWAs on iOS 12.2 betaA2HS for PWAs Is Biggithubgithub/pwa-bugsgithub/awesome-meta-and-manifestgithub/pwa-tips-tricks","categories":[{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/categories/pwa/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/tags/pwa/"},{"name":"a2hs","slug":"a2hs","permalink":"https://gracefullight.dev/tags/a2hs/"},{"name":"serviceworker","slug":"serviceworker","permalink":"https://gracefullight.dev/tags/serviceworker/"}]},{"title":"전세 자금 대출의 모든 것","slug":"전세-자금-대출의-모든-것","date":"2019-01-20T14:23:18.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2019/01/20/전세-자금-대출의-모든-것/","link":"","permalink":"https://gracefullight.dev/2019/01/20/%EC%A0%84%EC%84%B8-%EC%9E%90%EA%B8%88-%EB%8C%80%EC%B6%9C%EC%9D%98-%EB%AA%A8%EB%93%A0-%EA%B2%83/","excerpt":"","text":"여기 저기 흩어져있는 전세자금 대출 정보를 하나로 모으고 싶었다.필요한 서류도 엄청나고, 준비할 것도 많은데 다들 자기 할말만하고 끝나는 느낌이였다.집 구하는 걸 무서워하지 말고 한 단계씩 실행해보자. 중고나라인데 집을 사는 것 뿐이다. 사전 작업먼저 회사에 요청해 원천징수영수증과 재직증명서를 발급받는다.둘 다 직인이 찍혀있는 서류여야한다.원천징수영수증에 연봉이 3500만 이하면서 중소기업에 취업중이면 어마어마한 저리(低利)로 대출을 받을 수 있다.이 조건에 들 경우, 중소기업취업청년 전월세보증금대출 대출을 받을 수 있는데 된다면 무조건 대출받아야한다.조건이 안 되면 차선책으로 버팀목 전세자금 대출이 있다.중소기업 여부는 여기서 확인할 수 있다.법인 번호는 여기서 찾을 수 있다. 주소 확인어차피 문 밖의 전단지 매물은 허위매물이니 부동산에 들어가 다음과 같이 말한다.전세집을 찾고 있고, 어느정도의 금액을 생각하고 있다. 대출 한도를 확인하려하니 주소를 하나 알려주시오.그럼 공실클럽 이란 중개업자용 직방 웹에서 매물을 찾아서 보여주고 주소를 알려줄 것이다.안 보여준다면 주소만 하나 알아오면 된다. 혹시 부동산과 연결되어있는 은행이 있는지 확인하고 나온다.불친절하다면 다음에 온다고 말하고 바로 나오자 시간 아깝다.어차피 원룸촌이라면 그 지역 매물 다 거기서 거기이다.근린시설, 다중주택, 다세대주택이 아닌지를 꼭 확인한다. 대출이 안 나올 수 있다. 대출 한도 확인주거래 은행이 아니여도 상관없다. 월급 통장이 있는 은행일 경우 빠른 처리가 가능하고,우리은행이 주택도시기금의 주 거래은행이라 빠른 서류처리가 된다. 부동산에서 추천한 은행이 제일 좋긴하다.은행에 가서 대출상담창구로 간 뒤 전세자금 대출을 한도 확인하러 왔다고 말한 뒤원천징수영수증과 재직증명서, 그리고 주소를 준다.원천징수영수증 + 재직증명서 + 주소 &lt;=&gt; 한도 로 교환한다고 보면 된다.나의 한도를 확인하고 다시 부동산에 방을 보러간다. 방 확인전세자금대출이 가능하며, 버팀목 대출일 경우 미리 전입신고가 가능한 방만 보여달라고 한다.한도에 맞는 방을 보고, 중개업자와 함께 돌아다닌다.사진보다 실물로 봐야 훨씬 방이 크니 꼭 그 집에 가보자.내가 생각하는 집의 조건은 다음과 같다.낑긴 층창문 및 결로현상 확인가벽 여부 확인온수 확인수압 및 물샘 확인에어컨, 인덕션, 세탁기, 냉장고, 전자레인지 옵션 확인가스, 수도, 전기가 개별요금인지 확인집 냄새 확인장판 및 벽지 들추고 곰팡이 확인엘리베이터 확인최소 5군데 이상은 돌아보자. 2년 살 집이다. 계약서 작성집을 선택하고 건물주의 등기부등본을 확인한다.이건 건물주가 빚이 얼마나 있는지, 실제 판매하면 얼마정도로 가격을 받을 수 있는지가 나오며내 전세자금이 안전할 수 있는지에 대한거라 꼭 확인이 필요하다.그리고 부동산이 보증보험증권에 가입되어있는지도 확인한다.마음에 드는 집이 있다면 전세가격의 5% 를 계약금으로 걸고, 계약서를 쓴다.대출이 생각보다 길어질 수 있으므로 넉넉하게 3주 이상으로 잡자. 대출 사전 작업 중소기업취업청년 전월세보증금대출나이제한: 만 19세 ~ 만 34세연봉제한: 3500세대주제한: 없음평수제한: 25평금액제한: 1억이자: 1.2%1억을 빌려도 한달 이자가 10만원인 대출이다. 10만원이 비싸다고 생각하면, 월급쟁이가 10년 일해야 1억모은다는 걸 생각해보자. 버팀목 전세자금 대출나이제한: 만 25세 ~연봉제한: 5000세대주제한: 세대주만 가능평수제한: 25평금액제한: 1.2억이자: 2.5~2.9%1억을 빌리면 한달 이자가 30만원 언저리로 나온다. 관리비를 포함한다면 월세집을 사는 게 나을 수 있다. 세대주 작업버팀목 전세자금의 경우 무주택 세대주여야한다. 조부모님 사촌, 친구을 활용해 전입신고를 하자.그렇게 못한다면 내가 집의 세대주가 되거나 세대 분리로 세대주가 되어야하는데,세대주 변경의 경우 부모님 명의로 된 집이 있다면 대출 조건에서 걸린다.부모님 집의 명의를 돌리고 돌려서, 무주택자 부모님 밑에서 사는 서류가 된다 하더라도대출시 은행으로 부모님이 직접 가서 무주택자라고 자필 서명을 해야한다.세대 변경은 부모님 공인인증서와 내 공인인증서 설치가 모두 있는 경우에 한해 온라인으로 가능하고, 아니면 부모님의 도장으로 서류를 작성해야한다.세대 분리는 동사무소에 전화해서 분리하고 싶다고 문의를 할 수 있는데, 상담해주시는 분에 따라 케바케라 힘들다고 보면 된다.결국 집을 구할 때 이사 전 전입 신고가 가능한 집주인을 찾아보는 게 속 편하다.그리고 등본을 발급하기 전 이사할 집에 전입신고를 한다. 서류 작업공인인증서와의 긴 싸움이 시작된다.확정일자가 있는 전세계약서계약금 납입 영수증가족관계증명서4대보험가입내역확인서건강보험자격득실확인서주민등록등본버팀목의 경우 세대주로 찍혀야함주민번호 뒷자리까지 모두 노출주민등록초본태어날 때부터 모든 주소변경이력 포함위 서류에 중소기업 대출일 경우 아래 서류가 추가로 필요하다.사업자등록증 사본주업종코드확인서고용보험피보험자격이력내역서서류 준비가 완료되면 대출심사를 진행하고 (보통 3영업일 이상)전세계약서를 들고 이사할 지역의 동사무소를 찾아가 전입 확정일자를 찍어달라고 말한다. (600원 필요) 대출 확인대출심사 진행 중 은행에서 해당 건물이 진짜 원룸인지 확인을 나간다.다 될 경우 어마어마한 대출 서류에 싸인한 뒤 대출 보증세, 이자, 중도상환에 대해 확인한다.그러면 계약일에 집주인 계좌로 은행에서 바로 송금을 해준다.계약일이 주말일 경우 이전 영업일에 송금되니 참고하자. 계약계약은 꼭 공인중개사, 집주인과 하자.공인중개사는 휴대폰 대리점처럼 중개인을 두고 출근하지 않는 경우가 많고 집주인도 멀리 산다고 오지 못 한다는 경우가 많은데계약시엔 대리인을 두지 말고 담당자들과 거래하는 것이 좋다. 이사 이삿짐 센터 확인원룸 이사를 용달로 할 경우 견적전화를 돌리고, 모든 게 있는 풀옵션일 경우 자차로 이사할지에 대해 정한다.인건비는 명 당 십만원 정도로 생각하자. 입주박스를 구해다가 포장하고 이삿날에 잘 입주하기만 하면 된다.굳이 계약날이 입주일은 아니여도 된다. 팁입주 후 생필품을 사는데에 100만원정도 지출이 필요할 수 있다.가능하다면 대출한도를 전부 대출받아 청약 당첨이나 재계약등에 대비할 수 있다.부동산 관련 서류(등기 등)은 여기서 출력 가능하다.해당 공인중개사가 인증된 사람인지 확인은 여기서 가능하다.","categories":[{"name":"etc","slug":"etc","permalink":"https://gracefullight.dev/categories/etc/"}],"tags":[]},{"title":"Google Analytics Javascript API 사용하기","slug":"google-analytics-javascript-api-usage","date":"2019-01-14T12:42:16.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/01/14/google-analytics-javascript-api-usage/","link":"","permalink":"https://gracefullight.dev/2019/01/14/google-analytics-javascript-api-usage/","excerpt":"","text":"GA Client JS API문서가 있는데 생각보다 사용하기가 어렵다. 하나하나 시작해보자. 인증 토큰 발급Cridentials page에서 Create credentials 를 눌러 OAuth Client ID 를 발급받는다. 예제받은 Client ID 를 메타태그에 넣어준다.example123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;meta charset=\"utf-8\"&gt; &lt;title&gt;Hello Analytics Reporting API V4&lt;/title&gt; &lt;meta name=\"google-signin-client_id\" content=\"OAuth 2.0 Client ID\"&gt; &lt;meta name=\"google-signin-scope\" content=\"https://www.googleapis.com/auth/analytics.readonly\"&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Analytics Reporting API V4&lt;/h1&gt;&lt;p&gt; &lt;div class=\"g-signin2\" data-onsuccess=\"queryReports\"&gt;&lt;/div&gt;&lt;/p&gt;&lt;!-- The API response will be printed here. --&gt;&lt;textarea cols=\"80\" rows=\"20\" id=\"query-output\"&gt;&lt;/textarea&gt;&lt;script&gt; // Replace with your view ID. var VIEW_ID = '136416454'; // Query the API and print the results to the page. function queryReports() &#123; gapi.client.request(&#123; path: '/v4/reports:batchGet', root: 'https://analyticsreporting.googleapis.com/', method: 'POST', body: &#123; reportRequests: [ &#123; viewId: VIEW_ID, dateRanges: [ &#123; startDate: '7daysAgo', endDate: '6daysAgo' &#125; ], metrics: [ &#123; expression: 'ga:sessions' &#125; ] &#125; ] &#125; &#125;).then(function (response) &#123; var formattedJson = JSON.stringify(response.result, null, 2); document.getElementById('query-output').value = formattedJson; &#125;, console.error.bind(console)); &#125;&lt;/script&gt;&lt;script src=\"https://apis.google.com/js/client:platform.js\"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 파라미터 확인문서의 내용을 확인하기 보다 Query Explorer에서 테스트 후에 그 값들을 Body 로 옮겨 적는 게 확인하기 쉽다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"ga","slug":"ga","permalink":"https://gracefullight.dev/tags/ga/"}]},{"title":"Windows와 Mac에서 세계시간 설정하기","slug":"Windows-and-Mac-world-clock-setting","date":"2019-01-06T07:32:34.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2019/01/06/Windows-and-Mac-world-clock-setting/","link":"","permalink":"https://gracefullight.dev/2019/01/06/Windows-and-Mac-world-clock-setting/","excerpt":"","text":"윈도우 날짜/시간 설정Window + R 키로 실행 창을 띄운다.timedate.cpl 을 입력한 뒤 날짜/시간 설정에 들어간다.추가시계 탭에서 시계 표시를 체크한 뒤 시간대를 설정한다.시계표시줄에 세계 시간이 추가된 걸 확인할 수 있다. 맥 알림 목록우측 상단 시리 옆의 알림 목록에서 설정할 수 있다.알림 목록의 편집 버튼을 클릭하면 세계시계 위젯을 추가할 수 있다. Clocker설치할 때 굳이 도시 추가를 안하지 않아도 설치 후에 더 직관적으로 추가할 수 있다.Clocker 앱을 다운받는다.실행하고 원하는 도시를 추가한다.설치시에 권한은 따로 주지 않아도 시계는 볼 수 있다.설정의 ON/OFF 모양의 아이콘에서 세계 시간 설정이, 티셔츠 모양 아이콘에서 세부 표시 설정이 가능하다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://gracefullight.dev/tags/mac/"},{"name":"windows","slug":"windows","permalink":"https://gracefullight.dev/tags/windows/"}]},{"title":"Hyper-V Virtual Eternet 네트워크 제거","slug":"remove-hyper-v-virtual-network","date":"2018-12-23T13:43:37.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/12/23/remove-hyper-v-virtual-network/","link":"","permalink":"https://gracefullight.dev/2018/12/23/remove-hyper-v-virtual-network/","excerpt":"","text":"windows RS4, RS5 업데이트 이후로 Hyper-V 가 켜있으면 블루스크린이 발생한다.에러 내용은 vmswitch.sys driver_irql_not_less_or_equal 또는 kernel security check failed 였다.간헐적으로 발생되는 거라 시한폭탄을 들고 있는 거와 같다고 느껴져서,이번 기회에 가상화는 맥북에서만 이용하려고 Hyper-V 를 모두 제거해봤다. Hyper-V 제거 Docker for Windows 제거Docker for Windows 를 먼저 제거한다. 남아있는 가상서비스 제거Hyper-V 관리자에서 남아있는 가상 컴퓨터를 모두 삭제한다. 기능 제거윈도우 실행에서 OptionalFeatures를 치면 바로 Windows 기능 켜기/끄기 메뉴로 들어가진다.Hyper-V 를 Disable 시키고 재부팅 2번을 기다리자. 네트워크 초기화 가상 네트워크 제거위의 상태로 제거해도 네트워크 &gt; 속성 &gt; 어댑터 설정 에는 Hyper-V virtual Eternet 이 보이는데,장치관리자 &gt; 네트워크 어댑터 에서 직접 삭제해주면 된다.장치관리자는 윈도우 실행에서 devmgmt.msc 치면 바로 들어갈 수 있다. 이더넷 재설정가상 스위치를 제거하면 인터넷이 아예 끊겨버리는데, 이더넷을 원래 상태로 복원하면 된다.이더넷 설정에서 Hyper-V Extensible Virtual Switch 를 체크 해제하고 확인 버튼을 누른다.재부팅하고 클린한 네트워크 환경을 맞아보자. 이슈systeminfo 입력 후 OS 버전이 17763 버전일 경우 Docker for windows의 설치가 아예 되지 않는 듯 싶다.1PS1 &gt; systeminfo","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"hyperv","slug":"hyperv","permalink":"https://gracefullight.dev/tags/hyperv/"}]},{"title":"카카오 카풀 후기 (베타 리뷰)","slug":"reviews/kakao-carpool-review","date":"2018-12-17T11:33:40.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/12/17/reviews/kakao-carpool-review/","link":"","permalink":"https://gracefullight.dev/2018/12/17/reviews/kakao-carpool-review/","excerpt":"","text":"사용후기 호출카카오 T 앱을 켜고 카풀 탭에서 위치를 선택한다.배차가 되면 취소 위약금 3,000원이 나가니 꼭 필요한 경우에만 호출하자. 배차배차가 되면 탑승 위치에서 기다리면 된다.차종과 카풀 운전자 (크루) 명, 색상 등을 알 수 있다. 탑승탑승 후엔 크루가 탑승을 눌러주고, 그 이후부터 편하게 타고가면 된다.실시간으로 내 위치를 볼 수 없다는 게 너무 불편했다.남의 차를 타는 것도 안전에 대해 확인할 수 없는데,내가 어디를 가고 있는지도 다른 지도 앱을 켜야 알 수 있다는 건 웃긴 일이다. 하차목적지에 도달해서 하차하면 크루를 평가할 수 있는 화면이 나온다. 총평내가 이동한 거리는 택시비로 33,500원이 나오는 거리지만 카카오 카풀로는 17,500원이 나왔다.더 이상 무슨 말이 필요할까?그렇지만 개선점은 많은 것 같다.미국에서 우버를 이용했을 땐 정말 편리했다.호출 전 주변 우버 차량의 위치를 확인할 수 있고이동시간 내내 차의 위치를 지도에서 실시간으로 확인이 가능하고결제 후에도 이동거리와 비용에 대한 내역이 메일로 곧바로 온다.아직 카카오 카풀엔 이런 편의 기능들이 제공되지 않는다.출퇴근 시에만 이용가능하다고 하는데, 사용해보니 편법의 테두리에서 우버랑 똑같은 서비스라고 본다.카카오에서 제공하는 보험 1억5천까지는 보상 받을 수 있지만, 보험사에서 돈을 받을 수는 없다.여기에서 변호사 분의 말을 참조하자.여럿이서 타는데엔 타다가 좋고, 혼자 타기엔 카카오 카풀이 좋은 듯 싶다. 팁위치 선택시에 조금만 걸으면 되는 거리로 옮기면 2~3천원이 저렴해 지는 경우가 많다.아직 베타기간이라서 그런지 차량이 많이 없고 잡히면 먼 곳에 있다. 적어도 출발 15분 전에는 호출하자연말까지 1회 3만원에 한해 무료 이벤트가 추가되었다. 몇 시간만에 철회되었다.","categories":[{"name":"reviews","slug":"reviews","permalink":"https://gracefullight.dev/categories/reviews/"},{"name":"kakao","slug":"reviews/kakao","permalink":"https://gracefullight.dev/categories/reviews/kakao/"}],"tags":[{"name":"carpool","slug":"carpool","permalink":"https://gracefullight.dev/tags/carpool/"}]},{"title":"넷플릭스 - 디스인챈트 리뷰","slug":"reviews/netflix-disenchantment-review","date":"2018-12-17T11:24:15.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/12/17/reviews/netflix-disenchantment-review/","link":"","permalink":"https://gracefullight.dev/2018/12/17/reviews/netflix-disenchantment-review/","excerpt":"","text":"디스인챈트심슨 느낌이 물씬나는 그림체다.실제로도 심슨 제작자가 만든 애니메이션이라고 한다. 리뷰호머의 몸집에 모의 성격을 가진 왕바트의 성격을 가진 빈 공주밀하우스 같은 엘포정체를 알 수 없는 악마그리고 왕비들이 조합이 신선했지만 심슨이 더 재밌긴 하다.이쯤에선 재밌게 행동해도 될 것 같은데, 결국 아동용 애니메이션처럼 착하게(?) 끝난다.20부작으로 제작되었는데, 시즌1 마지막화인 10화에서 너무 큰 떡밥을 풀어서 기다리기 힘들다. 줄거리중세시대를 풍자한 그런 느낌이다. 스포일러마지막화가 반전의 전부이다.","categories":[{"name":"reviews","slug":"reviews","permalink":"https://gracefullight.dev/categories/reviews/"},{"name":"netflix","slug":"reviews/netflix","permalink":"https://gracefullight.dev/categories/reviews/netflix/"}],"tags":[{"name":"netflix","slug":"netflix","permalink":"https://gracefullight.dev/tags/netflix/"},{"name":"movie","slug":"movie","permalink":"https://gracefullight.dev/tags/movie/"},{"name":"disenchantment","slug":"disenchantment","permalink":"https://gracefullight.dev/tags/disenchantment/"}]},{"title":"카카오 계정 변경하기","slug":"카카오-계정-변경하기","date":"2018-11-29T12:13:07.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2018/11/29/카카오-계정-변경하기/","link":"","permalink":"https://gracefullight.dev/2018/11/29/%EC%B9%B4%EC%B9%B4%EC%98%A4-%EA%B3%84%EC%A0%95-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0/","excerpt":"","text":"카카오 계정의 메일 주소를 바꾸는 방법을 알아보자. 해결방법먼저 카카오 측에서 회신이 온 메일 내용을 보자.변경약관123456계정 보안 강화를 위해 카카오계정 이메일 주소를 인증한 사용자의 경우이메일 주소를 직접 변경하실 수 없습니다.다만, 메일 서비스 탈퇴 및 종료 등으로 인해 이메일을 정상적으로 수신할 수 없는 경우에 한하여해당 카카오계정에 연결되었던 휴대폰 번호의 이용계약증명서 및메일 사용현황에 대한 확인 과정 진행 후 이메일 주소 변경을 지원해 드릴 수 있습니다.이메일을 정상적으로 수신할 수 없는 경우에 한해 휴대폰 이용계약증명서를 가지고 오면 확인 후 변경이 가능하단다. 조건을 만들어보자. 기존 아이디 탈퇴예를 들어 gracefullight@email.com 의 이메일을 카카오 계정으로 사용하고 있다면먼저 이메일 계정의 사이트에 들어가 탈퇴를 진행해야한다. (카카오 계정 탈퇴가 아니다!) 비밀번호 찾기메일 탈퇴 후 카카오 홈페이지 우측 로그인화면 하단의 비밀번호 찾기 를 해 탈퇴된 메일로 비밀번호 찾기 메일이 보내지게 만든다.내부적으로 없는 메일주소로 메일을 보내는 오류 확인이 필요한 것 같다. 문의카카오 문의하기 에서 일반문의 &gt; 기타문의 를 선택하고 정보들을 입력한다.문의내용엔 다음과 비슷한 내용으로 적는다.문의내용1234기존 메일 서비스 이용 불가로 카카오 계정을 변경하고 싶습니다.기존: as-is@email.com변경: to-be@email.com첨부파일엔 통신사 사이트에 로그인해 가입증명원 을 첨부해야한다.KT의 경우 마이페이지 &gt; 조회/변경 &gt; 가입정보 중앙에 가입증명원 인쇄 메뉴로 접근 후 PDF 저장을 활용하자. 메일 인증번호 확인문의등록 후 1~2영업일 후에 메일 인증번호를 입력해 재문의하라는 회신이 온다.인증번호확인1234567고객님께서 변경 요청하신 [ to-be@email.com ] 이메일 주소로 인증번호를 보내드렸습니다.번거로우시겠지만, &#39;이메일 재설정 인증 코드&#39; 8자리를문의 내용에 기재하시어 재문의 주시면 확인 후 이메일 주소 변경을 도와드리겠습니다.다만, 인증코드를 다르게 기재하여 보내주실 경우 처리가 어려우므로정확하게 기재하여 재문의 부탁드립니다.별도로 전송된 인증번호로 일반문의를 이용해 재문의하고 조금 더 기다린다. 비밀번호 변경최종으로 변경되었다는 회신이 온 뒤 비밀번호를 변경해주자.최종변경1234고객님의 [ as-is@email.com ] 계정 이메일 주소가 [ to-be@email.com ]으로 변경 되었습니다.로그인 버튼 하단의 &#39;이메일 주소 또는 비밀번호를 잊으셨나요?&#39; 링크를 누르신 뒤[ to-be@email.com ] 계정의 비밀번호를 찾아 로그인 부탁드립니다.비밀번호 변경 후엔 예전 쓰던 데이터 그대로 새로운 메일 계정으로 이용이 가능하다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"kakao","slug":"kakao","permalink":"https://gracefullight.dev/tags/kakao/"}]},{"title":"Git GUI 클라이언트 분석 (windows)","slug":"Best-Git-GUI-clients-for-win","date":"2018-11-20T12:43:03.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2018/11/20/Best-Git-GUI-clients-for-win/","link":"","permalink":"https://gracefullight.dev/2018/11/20/Best-Git-GUI-clients-for-win/","excerpt":"","text":"Git 고수들은 CLI 만 사용한다지만난 Rebase 와 Squash 를 하다보면 몇 개의 문서를 다시 열어보는지 모르겠다.그래서 공식 GUI Clients에서 무료 Git 클라이언트를 파해쳐봤다. 분석21세기 디자인이면서 커밋 그래프가 제공되고 git flow가 가능하며 쉬운 rebase 가 지원되는 클라이언트는 git kraken 과 git fork 였다.나머진 다음과 같은 단점이 있었다.SourceTree윈도우즈에서 UI 가 너무 후지다.인증이 왜 이렇게 어려운지 모르겠다.느리다.Github Desktop딱 깃헙용이다.되는 기능이 많지 않다.커밋 그래프도 없다.Tortoise Git왠지 SVN이 떠올라서 패스했다.Git Extensions21세기 디자인은 아닌 것 같다.GitEye솔직히 Git Clients 의 끝인 듯 싶다.하지만 워크벤치 쓰는 듯한 느낌이라 직관적이진 않다.gitg너무 간단하다.ungit너무 간단하다.git-colacli를 옮겨놓은 느낌이다.Cyeligent Git Toolfree 인데 라이센스를 물어본다.설치 폴더를 설정할 수 없다.Aurees좋아보였으나 바이러스가 감염됨으로 다운로드 불가능하다.CodeReviewdiff 용이다.gmasternon-commercial use 이고,그래프가 너무 느리게 그려진다.GitAhead좋아보이지만 non-commercial useGuitardiff 용RepoZ애드온 같은 느낌이다. Git Kraken느렸는데 최근 빨라졌다.근데 아직도 느리다. 일렉트론 기반이라 그런 것 같다.예쁜 그래프가 있다.쉬운 rebase 를 제공한다.git flow 가능하다.검은색 테마가 가능하다.non-commercial use 라 회사에서 못 쓴다. Git Fork빠르고 직관적이다.그래프가 지원된다.쉬운 rebase 가 가능하다.검은 테마가 가능하다.완전한 무료이다.지속적인 버전 업데이트가 되고 있다.구글에서 git fork를 검색하면 정말 fork 하는 방법만 나오고 검색이 되지 않는다. 결론GitFork 를 쓰자.첫 실행 시에 git config 설정 UI 가 뜨는데 제대로 입력해줘야한다.그리고 workspace 를 설정하는 란엔 사용하는 workspace 만을 등록하자.전체를 등록할 경우 모든 폴더의 .git 디렉토리를 읽어오는 것 같다.","categories":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"},{"name":"gitfork","slug":"gitfork","permalink":"https://gracefullight.dev/tags/gitfork/"}]},{"title":"Javascript로 리소스 체크","slug":"Javascript로-리소스-체크하기","date":"2018-11-20T11:42:17.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2018/11/20/Javascript로-리소스-체크하기/","link":"","permalink":"https://gracefullight.dev/2018/11/20/Javascript%EB%A1%9C-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%B2%B4%ED%81%AC%ED%95%98%EA%B8%B0/","excerpt":"","text":"페이지나 리소스가 있는지 체크하는 방법은 서버사이드에선 엄청 간단하다.단 두 가지 기능만 있으면 해결된다. 심지어 certinfo 값 안에선 인증서 만료일까지 확인할 수 있다.HEAD 메소드CURL하지만 수 백개의 리소스를 동시에 체크해야할 경우는 어떨까?리소스가 있는 서버에선 DDoS 공격으로 오인할 수 있고, 심지어 내 서버가 차단될 가능성도 있다.클라이언트에서 리소스를 확인할 수 있는 방법이 있을까? 삽질 ajax당연하지만 크로스도메인 XHR 은 CORS 가 없는 이상 막힌다.HEAD 메소드도 똑같다.fetch 도 똑같다. scriptscript tag 를 DOM 에 렌더링하는 것이므로 XSS 공격이 가능하다.스크립트 태그에 한해서 onLoad 와 onError 로 체크가 가능하다. image이미지 태그에 한해서 onLoad 와 onError 로 체크가 가능하다. linkcss 일 경우 onLoad 와 onError 로 체크가 가능하다.DOM 에 렌더링하는 것이므로 UI가 틀어질 수 있다.html 등의 페이지도 체크가 가능하지만 firefox 등의 브라우저에서 일관성이 없다.IE와 Edge 브라우저에서 없는 css 인 경우에도 onError 이벤트가 발생하지 않았다.마지막 이슈는 크리티컬했는데, 다행히 에러를 만들어 낼 수 있었다.cssRules 는 스타일시트가 없을 경우 접근할 수 없는 내부 값이기에 에러를 던진다.1234567891011121314link.onload = loadEvent =&gt; &#123; // ie, edge 체크 const isIE = /MSIE|Trident|Edge/i.test(navigator.userAgent) // sheet 는 현재 로드 된 스타일시트 엘레먼트 if (isIE &amp;&amp; loadEvent.target.sheet) &#123; try &#123; // 강제로 시트 내의 cssRuls 값에 접근한다. let temp = loadEvent.target.sheet.cssRules &#125; catch (e) &#123; // onError 와 같은 이벤트 처리 &#125; &#125;&#125; video없는 영상에 대해 onError 가 동작하지 않는다. 기타embed 나 iframe 은 X-Frame-Options 헤더에 차단되거나 XSS 공격이 가능하다.onError 이벤트의 일관성이 없다. 해결삽질의 결과로 js (script), css (link), image (img) 에 한해서 리소스 체크가 가능한 걸 확인했다.하지만 js 와 css 의 렌더링으로 인해 페이지가 틀어지는 걸 어떻게 방지할 수 있을까?불현듯 샌드박스란 단어가 떠올랐다. sandbox보이지 않는 샌드박스 프레임을 만들고, 거기에서 위험한 일을 하면 된다.1&lt;iframe id=\"sandbox\" src=\"about:blank\" style=\"display:none;\" /&gt;만들고123456789$sandbox.contentDocument.write(` &lt;html&gt; &lt;head&gt; &lt;script&gt; 여기에 프레임간 메세징과 리소스별 onLoad, onError 체크 로직을 넣는다. &lt;/script&gt; &lt;/head&gt; &lt;/html&gt;`)넣고메인 프레임에선 샌드박스 메소드를 postMessage 하면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"windows 에 faceswap 환경 구축하기 (tensorflow 설치)","slug":"faceswap-for-windows","date":"2018-10-11T14:26:32.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/10/11/faceswap-for-windows/","link":"","permalink":"https://gracefullight.dev/2018/10/11/faceswap-for-windows/","excerpt":"","text":"윈도우즈에서 텐서플로 프로젝트를 돌리려면 머나먼 길을 떠나야한다.단계별로 설치해보자. 준비물NVIDIA GFORCE 그래픽 카드NVIDIA 개발자 계정WINDOWS 10 환경 설치 scooppython 과 anaconda 설치를 쉽게 해결하기 위해 scoop package manager 설치한다.안 쓰면 여기서부터 의존성으로 엄청 고생한다.스쿱을 대충 설치하고 다음과 같이 빌드를 실행한다.12# 파워쉘에서 대충 설치$ iex (new-object net.webclient).downloadstring('https://get.scoop.sh')12# 필요한 패키지 설치$ scoop install anaconda3 cmake msys2 patch unzip vcredist2015 vcredist2017 winpython알아서 잘 설치될 것이다.아나콘다 설치는 최대 30분이 걸릴 수도 있다. CUDAtensorflow 와 호환을 위해 무조건 9.0 버전을 다운로드 받아야한다.설치가 끝나면 C:\\Program Files\\NVIDIA GPU Computing Toolkit\\CUDA\\v9.0 폴더를 띄워놓자. cuDNN여기에서 로그인하고 CUDA 9.0 호환 압축파일을 다운받는다.압축을 해제하면 usr, lib 등의 폴더가 있는데 방금 열어둔 CUDA\\v9.0 에 같은 폴더에 한 파일씩 복사한다.폴더 구조가 같아서 보기만해도 어디에 뭘 넣을지 감이 올 것이다. faceswapdeepfakes/faceswap 레포지토리에서 클론한다.1$ git clone https://github.com/deepfakes/faceswap.git 의존성 설치클론받은 faceswap 폴더로 이동해 설치한다. dlibdlib 라이브러리 먼저 설치해야한다.1$ pip3 install https://pypi.python.org/packages/da/06/bd3e241c4eb0a662914b3b4875fc52dd176a9db0d4a2c915ac2ad8800e9e/dlib-19.7.0-cp36-cp36m-win_amd64.whl#md5=b7330a5b2d46420343fbed5df69e6a3f버전을 직접 지정해주자.윈도우즈 빌드 툴을 아무리 설치해도 라이브러리가 멍청해서 windows10 에서 오류가 계속 난다. (참조) requirements1$ pip3 install -r \"requirements.txt\"패키지 설치는 어렵지 않다. 세팅1$ python setup.pywindows 에선 docker + gpu 환경은 불가능하다.docker 설정은 NGPU 설정은 YSystem 의존성은 Y다 설치되면 All python3 dependencies are met. You are good to go. 란 문구가 나온다. 실행1$ python faceswap.py gui딥 러닝을 시작해보자.","categories":[{"name":"python","slug":"python","permalink":"https://gracefullight.dev/categories/python/"},{"name":"tensorflow","slug":"python/tensorflow","permalink":"https://gracefullight.dev/categories/python/tensorflow/"}],"tags":[{"name":"python","slug":"python","permalink":"https://gracefullight.dev/tags/python/"},{"name":"tensorflow","slug":"tensorflow","permalink":"https://gracefullight.dev/tags/tensorflow/"},{"name":"faceswap","slug":"faceswap","permalink":"https://gracefullight.dev/tags/faceswap/"},{"name":"scoop","slug":"scoop","permalink":"https://gracefullight.dev/tags/scoop/"}]},{"title":"넷플릭스 - 얼터드카본 리뷰","slug":"reviews/netflix-altered-carbon-review","date":"2018-09-26T14:41:10.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/09/26/reviews/netflix-altered-carbon-review/","link":"","permalink":"https://gracefullight.dev/2018/09/26/reviews/netflix-altered-carbon-review/","excerpt":"","text":"얼터드 카본스포일러에 주의해주세요.회당 70억이 들어간 작품에 SF 스릴러라길래 보기 시작했다. 리뷰주인공이 질투날 정도로 잘생겼다.AI + 뇌에 대해 How to create your mind를 읽고 나서 동경을 했었는데, 그 시대가 그려진 것 같아 보는 내내 행복했다.반전이 생각지 못해서 좋았지만, 여형사의 월권이 너무 개연성이 없긴 했다. 줄거리뇌를 Cortical Stack 이란 칩에 넣어 몸을 바꿔낄 수 있는 시대가 열렸다.돈 많은 사람들은 Head in the Clouds 란 부유선에 자기 정보를 백업해 놓는다. 그리고 백업된 정신으로 몸만 바꿔가면서 성경의 므두셀라처럼 영생을 산다.영생에 반대하는 반군 엔보이의 일원인 주인공 코바치는 므두셀라 1인자인 뱅크로프트의 살해사건을 맡기 위해 250년 만에 깨어난다. 스포일러므두셀라는 가까운 곳에 있었다.","categories":[{"name":"reviews","slug":"reviews","permalink":"https://gracefullight.dev/categories/reviews/"},{"name":"netflix","slug":"reviews/netflix","permalink":"https://gracefullight.dev/categories/reviews/netflix/"}],"tags":[{"name":"netflix","slug":"netflix","permalink":"https://gracefullight.dev/tags/netflix/"},{"name":"movie","slug":"movie","permalink":"https://gracefullight.dev/tags/movie/"},{"name":"alteredcarbon","slug":"alteredcarbon","permalink":"https://gracefullight.dev/tags/alteredcarbon/"}]},{"title":"vi 에디터 단축키 마스터하기","slug":"mastering-vi-key-bindings","date":"2018-09-26T13:27:36.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/09/26/mastering-vi-key-bindings/","link":"","permalink":"https://gracefullight.dev/2018/09/26/mastering-vi-key-bindings/","excerpt":"","text":"viemu 의 단축키 리스트가 있지만, 손에 익기 전엔 사용하기가 힘들다.a, i, 저장, 나가기 이런 기초적인 건 제외하고 vi 에디터에서 더 빠른 작업을 위한 명령어들을 다시 알아보자. 이동키커서l 또는 →오른쪽 한 문자h 또는 ←왼쪽 한 문자j 또는 ↓한 줄 아래로k 또는 ↑한 줄 위로0현재 줄 처음으로^현재 줄 첫 번째 공백 아닌 글자로＄현재 줄 마지막으로W다음 단어나 마침표 기호 처음으로shift + W다음 단어 처음으로 (마침표 무시)B이전 단어나 마침표 기호 처음으로shift + B이전 단어 처음으로 (마침표 무시)ctrl + F 또는 PageDown한 페이지 아래로ctrl + B 또는 PageUp한 페이지 위로number + shift + G (1G)해당 줄로shift + G파일의 마지막 줄로L, H, J, K 가 문자 이동에 사용되는 이유는, 방향키까지 손가락을 움직이기엔 너무 멀기 때문이다. 편집 빈줄 추가키커서o현재 줄 아래에 빈 줄 추가shift + O현재 줄 위에 빈 줄 추가 삭제 및 자르기d 명령어는 삭제한 텍스트를 버퍼에 보관한다.키커서x현재 문자3x현재 문자를 포함한 다음 2개 문자dd현재 줄4dd현재 줄을 포함한 다음 4줄dW현재 커서부터 다음 단어 앞까지d＄현재 커서부터 현재 줄 끝까지d0현재 커서부터 현재 줄 맨 앞까지d^현재 커서부터 그 줄의 공백아닌 첫 글자까지dG현재 줄부터 파일 끝까지d10G현재 줄부터 다음 10번째 줄까지 복사키커서yy현재 줄4yy현재 줄을 포함한 다음 3줄yW현재 커서부터 다음 단어 앞까지y＄현재 커서부터 현재 줄 끝까지y0현재 커서부터 현재 줄 맨 앞까지y^현재 커서부터 그 줄 공백아닌 첫 글자까지yG현재 줄부터 파일 끝까지y10G현재 줄부터 다음 10번째 줄까지 붙혀넣기p 치환1:%s/Search/Replace/gc%: 파일 열 전체 (1,＄ 라면 1번 줄부터 파일 끝까지)s: search and replace/Search/Replace/: Search 를 Replace 문자열로 치환g: globalc: confirm 실행 치환 확인 명령키작업y치환 실행n건너뛰기a전체 치환q종료l이번만 치환하고 종료ctrl + E스크롤 위로 이동ctrl + Y스크롤 아래로 이동","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"shell","slug":"server/shell","permalink":"https://gracefullight.dev/categories/server/shell/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"shell","slug":"shell","permalink":"https://gracefullight.dev/tags/shell/"},{"name":"vi","slug":"vi","permalink":"https://gracefullight.dev/tags/vi/"}]},{"title":"넷플릭스 - 클로버필드 패러독스 리뷰","slug":"reviews/netflix-cloverfield-paradox-review","date":"2018-09-16T15:20:14.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/09/16/reviews/netflix-cloverfield-paradox-review/","link":"","permalink":"https://gracefullight.dev/2018/09/16/reviews/netflix-cloverfield-paradox-review/","excerpt":"","text":"클로버필드 패러독스스포일러에 주의해주세요.클로버필드 전작들의 떡밥 회수용이라길래 기대했다. 리뷰처음에 뉴스 인터뷰처럼 나오는 과학자? 의 말을 잘 들으면 그게 결말이다.뒷부분에 깜짝 놀랄만한 게 있다.그래비티와 선샤인을 합쳐놓은 느낌이다.펜도럼처럼 긴장감이 있진 않다. 줄거리에너지원을 찾기위해 우주정거장에서 입자가속기를 돌렸는데지구가 눈앞에서 사라졌는데 알고보니 카시오페이아 자리 옆까지 우주정거장이 이동한 거였다.근데 양자가 얽혀서 다른 시공간의 우주였다.우주선을 힘들게 복구해 가속기를 돌려 원래 시공간으로 돌아온다.그런데 원래 지구는 가속기 때문에 상상하지 못한 일이 일어나있다. 스포일러괴물","categories":[{"name":"reviews","slug":"reviews","permalink":"https://gracefullight.dev/categories/reviews/"},{"name":"netflix","slug":"reviews/netflix","permalink":"https://gracefullight.dev/categories/reviews/netflix/"}],"tags":[{"name":"netflix","slug":"netflix","permalink":"https://gracefullight.dev/tags/netflix/"},{"name":"movie","slug":"movie","permalink":"https://gracefullight.dev/tags/movie/"},{"name":"cloverfield","slug":"cloverfield","permalink":"https://gracefullight.dev/tags/cloverfield/"}]},{"title":"넷플릭스 - 익스팅션 종의 구원자 리뷰","slug":"reviews/netflix-extinction-review","date":"2018-09-16T12:30:54.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/09/16/reviews/netflix-extinction-review/","link":"","permalink":"https://gracefullight.dev/2018/09/16/reviews/netflix-extinction-review/","excerpt":"","text":"익스팅션: 종의 구원자스포일러에 주의해주세요.넷플릭스를 결제하고 SF 탭을 방황하다가 본 첫 번째 영화다.되게 재밌어 보였다. 리뷰주인공 (마이클 페나) 때문에 집중이 잘 되지 않았다.연기는 잘 하는데 자꾸 엔트맨 친구 짠돌이 사장 이미지가 생각난다.반전은 충격적이지 않았다. 프레데터인 줄 알았더니…건너 뛰면서 볼 정도로 흥미는 떨어진다. 줄거리주인공은 환상을 자주 본다. (도입부 30%가 이 장면이다.)와이프도 보스도 정신 착란과 불면증으로 의심해 안 믿어준다.결국 실제로 일어났다.열린 결말 스포일러인간이 AI 를 소멸 시키려는 것","categories":[{"name":"reviews","slug":"reviews","permalink":"https://gracefullight.dev/categories/reviews/"},{"name":"netflix","slug":"reviews/netflix","permalink":"https://gracefullight.dev/categories/reviews/netflix/"}],"tags":[{"name":"netflix","slug":"netflix","permalink":"https://gracefullight.dev/tags/netflix/"},{"name":"movie","slug":"movie","permalink":"https://gracefullight.dev/tags/movie/"},{"name":"extinction","slug":"extinction","permalink":"https://gracefullight.dev/tags/extinction/"}]},{"title":"Array map, filter, values 분석","slug":"Array-map-filter-values-분석","date":"2018-09-14T12:46:12.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2018/09/14/Array-map-filter-values-분석/","link":"","permalink":"https://gracefullight.dev/2018/09/14/Array-map-filter-values-%EB%B6%84%EC%84%9D/","excerpt":"","text":"Array map, filter, values 분석아래 데이터로 php 와 js 의 다른 점을 확인해보자.id 가 3 이상인 id 만 추출하고 싶었다.users.json1234567891011121314151617181920212223242526272829303132[ &#123; \"id\": 1, \"name\": \"Leanne Graham\", \"username\": \"Bret\", \"email\": \"Sincere@april.biz\" &#125;, &#123; \"id\": 2, \"name\": \"Ervin Howell\", \"username\": \"Antonette\", \"email\": \"Shanna@melissa.tv\" &#125;, &#123; \"id\": 3, \"name\": \"Clementine Bauch\", \"username\": \"Samantha\", \"email\": \"Nathan@yesenia.net\" &#125;, &#123; \"id\": 4, \"name\": \"Patricia Lebsack\", \"username\": \"Karianne\", \"email\": \"Julianne.OConner@kory.org\" &#125;, &#123; \"id\": 5, \"name\": \"Chelsey Dietrich\", \"username\": \"Kamren\", \"email\": \"Lucio_Hettinger@annie.ca\" &#125;] AS-IS JS머리 속으로 돌려본 원래 느낌은 이랬다.1234567891011let userIdxs = users.map(user =&gt; &#123; if (user.id &gt;= 3) &#123; return user &#125;&#125;)// userIdxs [ null, null, 3, 4, 5 ]userIdxs = userIdxs.filter(Boolean)// userIdxs [ 3, 4, 5 ] php생각 없이 짜면 array_map 을 먼저 사용할 수 있다.123456789101112131415$userIdxs = array_map(function ($user) &#123; if ($user['id'] &gt;= 3) &#123; return $user['id']; &#125;&#125;, $users);// userIdxs [ null, null, 3, 4, 5 ]// 참담한 결과가 나왔다.$userIdxs = array_filter($userIdxs);// 필터를 먹여도 id: 3의 인덱스는 2이다.// 이걸 해결하려면 array_values 를 한번 더 사용한다.$userIdxs = array_values($userIdxs);// userIdxs [ 3, 4, 5 ]array_values(array_filter(array_map())) 과 같이 호출할 수 있긴 하다.너무 지저분했다. TO-BE조금만 생각해도 FP 의 개념에 어긋남을 느낄 수 있다.범위를 줄이고 나서 해당 값을 추출하는 게 맞다. JS2123const userIdxs = users.filter(user =&gt; user.id &gt;= 3).map(user =&gt; user.id)// userIdxs [ 3, 4, 5 ] php2array_values 를 쓰지 않고도 깔끔한 코딩이 가능하다.123456789$userIdxs = array_filter($users, function ($user) &#123; return $user['id'] &gt;= 3;&#125;);$userIdxs = array_map(function ($user) &#123; return $user['id'];&#125;, $userIdxs);// userIdxs [ 3, 4, 5 ] lara물론 더 멋진 방법이 있다.12345678910$userIdxs = collect($users) -&gt;filter(function ($user) &#123; return $user['id'] &gt;= 3; &#125;) -&gt;map(function ($user) &#123; return $user['id']; &#125;) -&gt;all();// userIdxs [ 3, 4, 5 ] 여담php, js, java, python 을 넘나들다보니 사용하는 언어의 흐름에 대한 개념이 1/n 로 줄어드는 것 같다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"IaaS, PaaS, SaaS 란?","slug":"IaaS-PaaS-and-SaaS","date":"2018-09-04T12:38:53.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2018/09/04/IaaS-PaaS-and-SaaS/","link":"","permalink":"https://gracefullight.dev/2018/09/04/IaaS-PaaS-and-SaaS/","excerpt":"","text":"IaaS, PaaS, Sass아이아스, 파스, 싸스 언제 들어도 헷갈리는 단어 3종 세트를 쉽게 파헤쳐보자. 다이어그램출처: 5 tips if you are considering cloud-based BI이 그림이 모든 걸 나타내준다.아이아스는 DevOps(또는 운영자), 파스는 개발자, 싸스는 엔드유저(또는 사용자) 용이다. IaaSInfrastructure as a Service사용할 준비가 된 컴퓨터 및 네트워크 하드웨어클라우드에서 리눅스 서버를 받는 것 PaaSPlatform as a Service제공된 프레임워크 또는 스택에서 실행되는 소프트웨어구글 앱엔진, 아마존 엘라스틱 빈스톡 등 SaaSSoftware as a Service웹사이트로 제공되는 응용프로그램CMS 등나이스해 보이고 싶어서 끼워 맞춘 용어 여담","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"}]},{"title":"Gitment 사용하기","slug":"Gitment-사용하기","date":"2018-08-25T03:35:05.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2018/08/25/Gitment-사용하기/","link":"","permalink":"https://gracefullight.dev/2018/08/25/Gitment-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/","excerpt":"","text":"Gitment 사용하기블로그에 붙힐만한 댓글 라이브러리로는 Disqus, Commento, livere 등이 있지만깃헙 페이지라 Gitment를 사용하고 싶었다. 사전 준비Github &gt; Settings &gt; Developer settings &gt; OAuth Apps 메뉴로 들어가 새로운 OAuth App 을 만들어준다.Client ID 와 Client Secret 을 저장해 놓고Authorization callback URL 은 Homepage URL 과 같은 주소를 입력한다.1234567891011# Application nameGracefulLight# Homepage URLhttps://gracefullight.github.io# Application descriptionGracefulLights Blog# Authorization callback URLhttps://gracefullight.github.io 소스 추가원하는 페이지에 소스를 추가한다.123456789101112131415161718&lt;script src=\"https://cdn.jsdelivr.net/npm/bluebird@3.5.1/js/browser/bluebird.core.min.js\"&gt;&lt;/script&gt;&lt;section class=\"comments\" id=\"comments\"&gt; &lt;div id=\"gitment_thread\"&gt;&lt;/div&gt; &lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/gitment@0.0.3/style/default.css\" /&gt; &lt;script src=\"https://cdn.jsdelivr.net/npm/gitment@0.0.3/dist/gitment.browser.js\"&gt;&lt;/script&gt; &lt;script&gt; var gitment = new Gitment(&#123; id: 'Gitment 를 구분할 아이디 (ex: 페이지 제목 또는 포스팅 일시)', owner: 'github 아이디 (ex: gracefullight)', repo: 'repository 명 (ex: gracefullight.github.io)', oauth: &#123; client_id: '위에서 발급 받은 client_id', client_secret: '위에서 발급 받은 client_secret', &#125; &#125;) gitment.render('gitment_thread') &lt;/script&gt;&lt;/section&gt;gitment.min.js 파일은 없으므로, 직접 minify 해서 사용하면 된다.bluebird (promise) core 를 추가한 이유는, IE 에서 gitment 를 지원해야하기 때문이다. 옵션 관리위 4개 옵션 외에 추가로 옵션을 더 줄 수 있다.desc 와 labels 정도가 추가되면 좋을 것 같다. 댓글 쓰기깃허브 아이디로 로그인한 뒤 Initialize Comments 를 누르고 댓글을 작성하면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"gitment","slug":"javascript/gitment","permalink":"https://gracefullight.dev/categories/javascript/gitment/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"},{"name":"gitment","slug":"gitment","permalink":"https://gracefullight.dev/tags/gitment/"}]},{"title":"Nuxt에 ThirdParty js (particles.js) 추가하기","slug":"Nuxt에-ThirdParty-js-추가하기","date":"2018-06-02T04:42:11.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2018/06/02/Nuxt에-ThirdParty-js-추가하기/","link":"","permalink":"https://gracefullight.dev/2018/06/02/Nuxt%EC%97%90-ThirdParty-js-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0/","excerpt":"","text":"시작하기 앞서Nuxt Project 에 Particles.js 를 붙히고 싶었다.어떻게하면 쉽게 붙힐 수 있을까 하다가 멀리 돌아오게 된 삽질기다. 시작 vue-plugin 사용공식 문서 를 봤었고 Vue Plugin일 경우 너무나 쉽게 추가가 가능한 것처럼 보였다.얼른 vue-particles 를 설치하고 플러그인을 만들어 등록했다.만들고vue-particles.js1234import Vue from 'vue'import VueParticles from 'vue-particles'Vue.use(VueParticles)등록했다.nuxt.config.js123module.exports = &#123; plugins: ['~/plugins/vue-particles']&#125;그런데 화면에 Particle이 보이지 않는다. no-ssr구글링을 하니, 플러그인에 no-ssr 옵션을 주면 해결이 된다고 한다.nuxt.config.js123456module.exports = &#123; plugins: [&#123; src: '~/plugins/vue-particles', ssr: false &#125;]&#125;Particles.vue12345&lt;template&gt; &lt;no-ssr&gt; &lt;vue-particles /&gt; &lt;/no-ssr&gt;&lt;/template&gt;대충 이런식으로 코딩했더니 화면에서 볼 수 있게 되었다.그런데… IE11에서는 스크립트 오류가 발생하기 시작했다. IE 오류vue-particles 자체에 const 구문을 사용하고 있기 때문에, no-ssr 옵션을 준다면 번들링 시 로직을 건너 뛰기에, 크롬에서는 실행이 되지만 IE에서는 실행되지 않는 치명적인 오류가 발생했다.그래서 다른 방법을 시도해봤다. script 삽입하기nuxt.config.js 에서 head 태그를 이용하면 스크립트를 추가할 수 있고,window.particlesJS 처럼 전역 변수로 참조하면 될 줄 알았다.하지만 번들링 시 window 객체가 없어 aframe 벤더가 필요하다고 오류가 발생했다.쓸데 없는 리소스를 추가해야되니 여기서 멈추었다. 해결 process.browserwindow-document-undefined 문서에 따르면 이런 참조 문제를 해결할 수 있다고 한다.Particles.vue12345678910111213141516&lt;template&gt; &lt;vue-particles /&gt;&lt;/template&gt;&lt;script&gt;if (process.browser) &#123; require('vue-particles')&#125;export default &#123; mounted () &#123; if (window.particlesJS) &#123; window.particlesJS.load() &#125; &#125;&#125;&lt;/script&gt;위와 같이 로직을 변경해주니 IE11 에서도 정상 작동하였다. 여담vue-particles 의 문서엔 완벽한 nuxt 호환이라 되어있지만 예외적인 상황이 있는 듯 하다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nuxt","slug":"nuxt","permalink":"https://gracefullight.dev/tags/nuxt/"},{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"},{"name":"particles","slug":"particles","permalink":"https://gracefullight.dev/tags/particles/"}]},{"title":"thefuck 설치하기","slug":"thefuck-설치하기","date":"2018-05-29T10:24:45.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/05/29/thefuck-설치하기/","link":"","permalink":"https://gracefullight.dev/2018/05/29/thefuck-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0/","excerpt":"","text":"thefuck 이게 뭐죠커맨드로 명령어를 실행하다보면 생각보다 오타를 많이 치게 된다tab tab 자동완성 기능과 Oh-My-Zsh 의 syntax highlighting 기능을 사용한다면 충분히 커버가 가능할 것 같지만 현실은 그렇지 않다.123456# git checkout master를 치고 싶었으나..$ git checktou mastergit: 'checktou' is not a git command. See 'git --help'.The most similar command is checkoutthefuck 을 활용하면 오타가 나 분노한 나의 마음을 표출할 수 있다. 설치다들 python 3.6 버전 정도는 갖고 있다고 가정한다.1$ pip install thefuck alias 설정fuck 만 쳐도 thefuck 의 기능을 사용하기 위해 alias 설정을 해주자. git bashbash_profile 에 아래처럼 추가해준다.123vi ~/.bash_profileeval \"$(thefuck --alias)\" 환경 변수 설정Win+R &gt; sysdm.cpl고급 &gt; 환경 변수 &gt; 시스템 변수 &gt; 새로만들기 에서 PYTHONIOENCODING 값을 utf-8로 준다.확인 ✔️ X 3 powershellps 를 주로 사용한다면 설치 후 $PROFILE 파일에 값을 넣어주면 된다.1234PS &gt; Notepad $PROFILE$env:PYTHONIOENCODING=\"utf-8\"iex \"$(thefuck --alias)\"profile 파일이 없다고 오류가 발생하면, 아래 명령어로 profile 파일을 만들어주자.1PS &gt; New-item -type file -force $PROFILE 활용하기12345678910$ git checkuot mastergit: 'checkuot' is not a git command. See 'git --help'.The most similar command is checkout$ fuckgit checkout master [enter/↑/↓/ctrl+c]Already on 'master'Your branch is up to date with 'origin/master'.오타 걱정 없이 쉘 커맨드를 실행할 수 있게 되었다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"linux","slug":"server/linux","permalink":"https://gracefullight.dev/categories/server/linux/"},{"name":"shell","slug":"server/linux/shell","permalink":"https://gracefullight.dev/categories/server/linux/shell/"}],"tags":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"},{"name":"bash","slug":"bash","permalink":"https://gracefullight.dev/tags/bash/"},{"name":"thefuck","slug":"thefuck","permalink":"https://gracefullight.dev/tags/thefuck/"}]},{"title":"git merge 후 binary 파일 충돌시","slug":"git-merge-후-binary-파일-충돌시","date":"2018-05-11T12:27:29.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/05/11/git-merge-후-binary-파일-충돌시/","link":"","permalink":"https://gracefullight.dev/2018/05/11/git-merge-%ED%9B%84-binary-%ED%8C%8C%EC%9D%BC-%EC%B6%A9%EB%8F%8C%EC%8B%9C/","excerpt":"","text":"바이너리 파일은 diff 가 안 되서 확인을 할 수가 없는데,merge 시에 내 바이너리를 쓸 지 받은 것의 바이너리를 쓸 지 여부를 지정해주면 된다. merge strategy12345# 받아온 브랜치의 바이너리 파일을 사용$ git merge -X theirs origin/브랜치# 내 로컬 바이너리 파일을 사용$ git merge -X ours origin/브랜치 gc 해제이렇게 받다보면 unlink of file failed 란 오류가 발생할 수가 있는데,git 가비지 컬렉터 옵션을 해당 프로젝트에서만 꺼주면 된다.기능에는 아무 문제 없다. 궁금하면 git help gc를 해보시길…12# gc 기능 끄기$ git config --local gc.auto 0","categories":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"}]},{"title":"VueJS 선택 가이드","slug":"VueJS-선택-가이드","date":"2018-04-17T12:04:20.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/04/17/VueJS-선택-가이드/","link":"","permalink":"https://gracefullight.dev/2018/04/17/VueJS-%EC%84%A0%ED%83%9D-%EA%B0%80%EC%9D%B4%EB%93%9C/","excerpt":"","text":"서문Angular1와 React16로는 서비스 레벨까지 SPA 를 만들었고,Angular 프레임워크와 Vue SPA로는 큰 프로젝트는 아니지만 사이트를 운용 중이며, Vue는 멀티페이지에 서비스 레벨로 사용 중에 있다.결국엔 VueJS가 최고라는 걸 삽질⛏️로 깨달았다.페이지를 만드는 기본적인 구조는 다른 프레임워크와 똑같지만 Vue는 쉽고 간결하고 멋지다. 인지도인지도에서 Vue가 밀린다고 생각하는 당신께,1804 현재 VueJS의 ⭐ 수는 전체랭킹 6위며React와는 아주 근소한 차이며 이 위에는 부트스트랩 뿐이다. JS 프레임워크 별 비교공식문서에 아주 자세히 설명되어있지만 주관을 덧붙혀보자.보통 Angular Framework는 너무 프레임워크 종속적이라 제쳐두고React와 Vue를 많이 비교하게 되는데, React가 더 무겁고 느리며 배울게 많다.React는 느려서 Preact라는 가볍고 빠른 버전이 있다.그럼에도 불구하고 리액트가 인기 있는 이유는 React-Native가 있어 한 번 배우면 모든 Client 화면 코딩이 가능하게 되는 것이라고 생각한다.Vue는 Weex라는 Native 라이브러리가 있지만 테스트환경 조차 갖추기 힘든 인큐베이터 라이브러리며 Angular에는 Ionic이 있지만 같은 듯 다른 느낌의 컴포넌트라 러닝 커브가 또 있고 웹뷰로 돌아가서 느리다는 단점이 있다. 코드 별 비교세 프레임워크를 사용한 웹 중 유지보수를 위해 하나를 택해야 된다면 어떤 걸 맡고 싶을까?모든 구문은 다음과 같은 html 안에서 실행된다고 가정한다.123456789&lt;!-- 컴포넌트가 붙기 전 --&gt;&lt;div id=\"container\"&gt; &lt;App /&gt;&lt;/div&gt;&lt;!-- 컴포넌트 렌더링 후 --&gt;&lt;div id=\"container\"&gt; &lt;div&gt;○○○가 최고야&lt;/div&gt;&lt;/div&gt; VueJS 버전별 구문 차이가 거의 없다.또한 누가 봐도 id=container에 div가 렌더링 될 것이라는 예상이 가능하다. ES6 + Component1234567891011Vue.component('App', &#123; template: '&lt;div&gt;Vue가 최고야&lt;/div&gt;', mounted () &#123; console.log('컴포넌트 로드 완료'); &#125;&#125;);new Vue(&#123; el: '#container'&#125;); ES5 + Component1234567891011Vue.component('App', &#123; template: '&lt;div&gt;Vue가 최고야&lt;/div&gt;', mounted: function () &#123; console.log('컴포넌트 로드 완료'); &#125;&#125;);new Vue(&#123; el: '#container'&#125;); ReactJSX가 어떻게 변환되는지 알아야되며, ES6는 선택이 아닌 필수다. ES6 + JSX + Component123456789101112131415161718192021import ReactDOM from 'react-dom';import React, &#123; Component &#125; from 'react';class App extends Component &#123; componentDidMount () &#123; console.log('컴포넌트 로드 완료'); &#125; render () &#123; return ( &lt;div&gt;React가 최고야?&lt;/div&gt; ); &#125;&#125;ReactDOM.render( App, document.getElementById('container')); ES5 + ComponentJSX를 안 쓰면 예쁜 코딩은 물건너간다.또한 createElement API를 봐야할 것 같은 느낌이다.123456789101112131415var App = React.createClass(&#123; componentDidMount: function() &#123; console.log('컴포넌트 로드 완료'); &#125;, render: function () &#123; return React.createElement('div', null, '정말 React가 최고야?'); &#125;&#125;);ReactDOM.render( React.createElement(App), document.getElementById('container')); Angular5이건 파일 하나로 합치면 읽다가 지치기 때문에 세 파일로 나눴다.Decorator, TypeScript에 대한 이해가 필요하며 API 문서가 옆에 있어야한다.12345678910111213141516171819202122232425262728293031323334353637383940414243// app.component.tsimport &#123; Component, OnInit &#125; from '@angular/core';@Component(&#123; selector: 'App', template: '&lt;div&gt;Angular가 최고는 아닌 것 같아&lt;/div&gt;'&#125;)export class AppComponent implements OnInit &#123; ngOnInit() &#123; console.log('컴포넌트 로드 완료'); &#125;&#125;// app.module.tsimport &#123; BrowserModule &#125; from '@angular/platform-browser';import &#123; NgModule &#125; from '@angular/core';import &#123; AppComponent &#125; from './app.component';@NgModule(&#123; declarations: [ AppComponent ], imports: [ BrowserModule ], providers: [], bootstrap: [ AppComponent ]&#125;)export class AppModule &#123; &#125;// main.tsimport &#123; platformBrowserDynamic &#125; from '@angular/platform-browser-dynamic';import &#123; AppModule &#125; from './app.module';platformBrowserDynamic() .bootstrapModule(AppModule) .catch(err =&gt; console.log(err)); 시작하기스크립트 하나면 충분하다.1&lt;script src=\"https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.min.js\"&gt;&lt;/script&gt; 기본 Watcher 모듈화 Event Bus Component MultiPageApp SPA Vuex Nuxt Laravel-Mix","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"}]},{"title":"youtube-dl로 유튜브 무료 다운로드하기","slug":"download-music-video-with-youtube-dl","date":"2018-03-26T10:55:54.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/03/26/download-music-video-with-youtube-dl/","link":"","permalink":"https://gracefullight.dev/2018/03/26/download-music-video-with-youtube-dl/","excerpt":"","text":"유튜브, 비메오 등의 영상을 소장하고 싶거나 좋은 노래를 다운받아서 듣고 싶을 때 많은 고민을 하게 된다Youtube Free Download 같은 사이트에서 광고를 한참 보다가 한개씩 다운받아야하고, 영상일 경우 저화질만 받을 수 있다이 고민거리를 한 방에 해결해주는 Youtube-DL(DownLoad)이 있다 시작해보자. 설치커맨드와 매뉴얼 설치방법으로 나눴다. 윈도우 scoop 설치쉽게 설치하기 위해서 윈도우 패키지 매니저인 Scoop을 먼저 설치하자.시작표시줄 우측 클릭 후 속성에 들어가면 win + x 키를 누를 때 관리자 파워쉘로 접속할 수 있는 설정이 있다.설정을 체크해주고, win + x 후 a 키를 누르면 관리자 파워쉘로 접근한다.1PS &gt; iex (new-object net.webclient).downloadstring('https://get.scoop.sh') 패키지 설치12# ffmpeg 은 음악, 영상 파일 포맷 변환기이다.$ scoop install ffmpeg youtube-dl 수동 설치위에 커맨드가 너무 어렵다면 매뉴얼대로 설치해보자.여기를 누르면 다운받는다 (사실 이게 더 쉽지만 쉘로 설치하는게 뭔가 나이스하니까)비디오를 오디오로 변경해주기위해 ffmpeg를 다운받아야한다.링크를 따라가서 Download Build 버튼을 클릭해 압축을 풀어주자ffmpeg/bin 안에 youtube-dl.exe 를 넣어준다 환경 변수 설정Win+R &gt; sysdm.cpl고급 &gt; 환경 변수 &gt; 시스템 변수 &gt; Path 선택 &gt; 편집 &gt; 새로만들기 에서 ffmpeg/bin 경로를 넣어준다.D:\\ffmpeg\\bin확인 ✔️ X 3Win+R &gt; cmd를 친 뒤에 테스트를 해본다, 아니면 Win+x &gt; cmd (or Powershell) 한 다음 열어도 된다.12345678910# ffmpeg 세팅 확인$ ffmpeg -versionffmpeg version N-90433-g5b31dd1c6b Copyright (c) 2000-2018 the FFmpeg developersbuilt with gcc 7.3.0 (GCC)# youtube-dl 세팅 확인$ youtube-dl --version2018.03.14 맥12# brew 로 한 번에 설치가 가능하다.$ brew install youtube-dl 사용법 mp4 다운로드12345678910111213$ youtube-dl 주소# mp4 best quality로 다운받고 싶다면$ youtube-dl 주소 -f 'bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best'# 4K 영상을 다운받고 싶다면$ youtube-dl 주소 -f '(bestvideo[vcodec=vp9]/bestvideo[ext=mp4]/bestvideo)+bestaudio/best'# 비공개 비밀번호 입력 영상이라면$ youtube-dl 주소 --video-password 비밀번호# 로그인하고 받아야되는 영상이라면$ youtube-dl 주소 -u 아이디 -p 비밀번호 mp3 다운로드12# audio-quality는 기본값이 5고 0으로 갈수록 좋은 음질$ youtube-dl 주소 -x --audio-format mp3 --audio-quality 0 예시트위터의 경우 동영상 주소 복사 버튼을 클릭하면 나오는 주소로도 다운로드가 가능하다.12345678# 영상 다운로드$ youtube-dl https://www.youtube.com/watch?v=IlSY06XGu3Y# mp3 다운로드 일반음질 (128K)$ youtube-dl https://www.youtube.com/watch?v=nfs8NYg7yQM -x --audio-format mp3# mp3 다운로드 고음질 (VBR)$ youtube-dl https://www.youtube.com/watch?v=nfs8NYg7yQM -x --audio-format mp3 --audio-quality 0 버전 업데이트명령어 하나로 셀프 업데이트가 가능하다.12# 다운로드 오류 발생시 업데이트하면 해결된다.$ youtube-dl -U 지원하는 사이트유튜브 말고 수많은 사이트의 리소스 다운이 가능하다.사이트 목록은 여기서 확인 가능하다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"bash","slug":"bash","permalink":"https://gracefullight.dev/tags/bash/"},{"name":"youtube","slug":"youtube","permalink":"https://gracefullight.dev/tags/youtube/"}]},{"title":"웹팩이 모듈을 불러오는 슈도코드","slug":"웹팩이-모듈을-불러오는-슈도코드","date":"2018-03-25T13:32:45.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2018/03/25/웹팩이-모듈을-불러오는-슈도코드/","link":"","permalink":"https://gracefullight.dev/2018/03/25/%EC%9B%B9%ED%8C%A9%EC%9D%B4-%EB%AA%A8%EB%93%88%EC%9D%84-%EB%B6%88%EB%9F%AC%EC%98%A4%EB%8A%94-%EC%8A%88%EB%8F%84%EC%BD%94%EB%93%9C/","excerpt":"","text":"잊기 전에 슈도코드를 정리해놓자. 슈도코드12345678910111213141516var 전체모듈 = [ function() &#123; const 합계함수 = (a, b) =&gt; a + b return 합계함수 &#125;, function() &#123; const 내부_합계함수 = 전체모듈[0]() const 합계 = 내부_합계함수(10, 20) console.log(합계) return 합계 &#125;]let 시작모듈_인덱스 = 1전체모듈[시작모듈_인덱스]() 해석배열에 다 때려넣고 호출해서 사용하는 방법이다물론 내부는 더 복잡하다, 코드 스플리팅이 된다면 더더욱. 복잡한 내부https://github.com/hg-pyun/minipack-kr/blob/master/src/minipack.js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206/** * @source https://github.com/hg-pyun/minipack-kr/blob/master/src/minipack.js * * 모듈 번들러들은 작은 코드 조각들을 웹 브라우저에서 실행될 수 있는 크고 복잡한 파일로 컴파일합니다. * 이 작은 조각들은 단지 자바스크립트 파일들일 뿐이며, 이들 사이의 종속성은 모듈 시스템에 의해 표현됩니다 * (https://webpack.js.org/concepts/modules). * * 모듈 번들러들은 entry file 이라는 개념을 가지고 있습니다. 브라우저에 스크립트 태그를 몇개 추가하여 * 실행하는 대신, 번들 담당자에게 응용 프로그램의 메인 파일이 무엇인지 알려 줍니다. 이 파일이 어플리케이션을 * 실행하는 진입점이 됩니다. * * 번들러는 entry file의 의존성을 분석합니다. 그리고 그 다음 파일의 의존성을 파악합니다. * 이 작업은 애플리케이션의 모든 모듈과 각 모듈이 서로 어떻게 의존하는지 파악할 때까지 반복됩니다. * * 이러한 프로젝트에 대한 이해를 종속성 그래프라 부릅니다. * * 이 예제에서는 종속성 그래프를 만들고 이 그래프를 사용하여 모든 모듈들을 하나의 번들로 패키징 합니다. * 그럼 시작해 보겠습니다 :) * * 참고: 이 예제는 매우 단순화되어 있습니다. 순환 참조, 캐싱 모듈, 파싱 최적화 등에 대한 내용은 생략 * 하여 가능한가 단순하게 만들었습니다. */const fs = require(\"fs\")const path = require(\"path\")const babylon = require(\"babylon\")const traverse = require(\"babel-traverse\").defaultconst &#123; transformFromAst &#125; = require(\"babel-core\")let ID = 0// 우선 file path를 받는 함수를 생성하고// 파일을 내용을 읽고, 종속성을 추출합니다.function createAsset(filename) &#123; // 파일의 내용을 문자열로 읽습니다. const content = fs.readFileSync(filename, \"utf-8\") // 이제 이 파일이 어떤 파일에 종속되는지 알아보겠습니다. 우리는 import 문자열을 보고 의존성을 // 파악할 수 있습니다 하지만, 이것은 단순한 접근법이어서, 대신에 자바스크립트 파서를 사용하겠습니다. // 자바스크립트 파서들은 자바스크립트 코드를 읽고 이해할 수 있도록 도와주는 툴입니다. // 파서는 AST(abstract syntax tree)라는 좀더 추상화된 모델을 생성합니다. // // AST에 대해 이해하려면 AST Explorer(https://astexplorer.net)을 꼭 보기를 강력하게 추천합니다. // AST가 어떻게 이루어져 있는지 확인할 수 있습니다. // // AST는 우리의 코드에 대해 많은 정보를 가지고 있습니다. 우리는 쿼리를 이용하여 // 우리의 코드가 하려는 일에 대해 이해할 수 있습니다. const ast = babylon.parse(content, &#123; sourceType: \"module\" &#125;) // 이 배열은 현재 모듈의 의존성을 상대 경로로 가지고 있을 것입니다. const dependencies = [] // 우리는 AST 순회를 통해 각각의 모듈들이 어떤 의존성을 가지고 있는지 이해하려 합니다. // 이것을 통해 AST안에서 모든 import keyword 선언을 파악할 수 있습니다. traverse(ast, &#123; // ECMAScript 모듈들은 정적이므로 매우 파악하기 쉽습니다.이는 변수를 가져올 수 없거나 조건부로 // 다른 모듈을 가져올 수 없음을 의미합니다. import 구분을 볼 때 마다 카운팅을 하고 의존성을 가지고 // 있는 것으로 간주 할 수 있습니다. ImportDeclaration: (&#123; node &#125;) =&gt; &#123; // import 구문마다 dependencies 배열에 값을 추가합니다. dependencies.push(node.source.value) &#125; &#125;) // 또한 간단한 카운터를 이용하여 이 모듈에 고유 식별자를 할당합니다. const id = ID++ // 우리는 일부 브라우저에서만 지원하는 ECMAScript module들이나 기능들을 사용할 가능성도 있습니다. // 우리가 만드는 번들이 모든 브라우저에서 돌아가도록 Babel을 이용해서 transpile할 수 있습니다 // (https://babeljs.io 참고). // // `presets` 옵션은 Babel이 어떻게 우리 코드를 바꿀지에 대해 결정합니다. 우리는 `babel-preset-env` // 를 이용하여 대부분의 브라우저에서 우리의 코드를 사용할 수 있도록 바꾸도록 하겠습니다. const &#123; code &#125; = transformFromAst(ast, null, &#123; presets: [\"env\"] &#125;) // 이 모듈에 대한 정보를 return 합니다. return &#123; id, filename, dependencies, code &#125;&#125;// 이제 단일 모듈의 종속성을 추출할 수 있으므로, entry file의 의존성을 추출하는 것부터 시작하겠습니다.// 이 작업은 애플리케이션의 모든 모듈과 각 모듈이 서로 어떻게 의존하는지를 파악할 때까지 계속 진행할 것입니다.// 이 작업의 결과물을 의존성 그래프라 부릅니다.function createGraph(entry) &#123; // entry file부터 분석을 시작합니다. const mainAsset = createAsset(entry) // queue를 사용해서 모든 asset의 의존성을 분석하도록 하겠습니다. 이 작업을 위해 // entry asset을 가지고 있는 배열을 정의합니다. const queue = [mainAsset] // 여기서 queue의 반복을 위해 `for ... of` 반복문을 사용합니다. 처음에는 queue가 asset을 하나만 // 가지고 있지만 작업이 반복되는 동안에 새로운 asset들을 queue에 추가합니다. 이 반복문은 queue가 // 비어질 때 까지 계속됩니다. for (const asset of queue) &#123; // 모든 asset들은 의존성이 있는 모듈에 대한 상대경로들을 리스트로 가지고 있습니다. 우리는 그 리스트를 // 순회하면서 `createAsset()`함수로 분석하고, 아래 객체를 통하여 모듈들의 의존성을 추척할 것입니다. asset.mapping = &#123;&#125; // 이것은 이 모듈이 있는 디렉토리입니다. const dirname = path.dirname(asset.filename) // 종속성에 대한 상대 경로 리스트를 순회합니다. asset.dependencies.forEach(relativePath =&gt; &#123; // `createAsset()` 함수는 절대 경로가 필요합니다. dependencies 배열은 상대 경로를 가지고 // 있는 배열입니다. 이러한 경로들은 모듈이 import된 file에 따라 상대적입니다. 따라서 부모 asset의 // 경로를 이용해서 상대 경로를 절대경로로 바꿔야 합니다. const absolutePath = path.join(dirname, relativePath) // asset의 내용울 분석하고, 내용을 읽고, 의존성을 추출합니다. const child = createAsset(absolutePath) // `asset`의 의존성은 `child`에게 달려있습니다. 우리는 `mapping` 객체에 relativePath와 child.id를 // 이용해서 관계를 표현할 수 있습니다. asset.mapping[relativePath] = child.id // 마지막으로 child asset을 queue에 추가하여 구문 분석이 반복되도록 합니다. queue.push(child) &#125;) &#125; // 이 시점에서 queue는 애플리케이션의 모든 모듈이 포함된 배열입니다. 이것이 우리가 그래프를 표현하는 방법입니다. return queue&#125;// 다음으로, 그래프를 이용하여 브라우저에서 실행할 수 있는 번들을 반환하는 함수를 정의합니다.//// 우리의 번들은 self-invoking(자신을 부를수 있는)함수를 가지고 있습니다.//// (function() &#123;&#125;)()//// 이 함수는 하나의 인자만 받을 수 있습니다: 모든 모듈의 정보를 가지고 있는 그래프.function bundle(graph) &#123; let modules = \"\" // 이 함수를 구성하기 전에 매개 변수로 전달할 객체를 만들겠습니다. 반드시 알아둬야할 것은 우리가 만드는 // 스트링은 2개의 중괄호(&#123;&#125;)로 감싸져 있어야 한다는 것입니다. 우리는 다음과 같은 포멧으로 추가할 // 것입니다: `key: value,`. graph.forEach(mod =&gt; &#123; // 그래프안에 있는 모든 모듈들은 entry를 객체로 가지고 있습니다. 우리는 module의 id를 // 값에 대한 키로 사용합니다.(각 모듈마다 2개의 값이 있습니다.) // // 찻번째 값은 함수로 감싼 각 모듈의 코드입니다. 그 이유는 모듈의 scope를 지정해야 하기 때문입니다. // 한 모듈에서 변수를 정의하면 다른 모듈이나 글로벌 scope에 영향을 주지 않아야 합니다. // // transpiled된 모듈들은 CommonJS 모듈 시스템을 사용합니다: // 해당 모듈 시스템은 `require`, `module`, 그리고 `exports`를 통해 모듈화 합니다. // 이 키워드들은 일반적으로 브라우저에서 사용할수 없으므로, 우리의 함수를 이용하여 주입해야 합니다. // // 두번째 값은 모듈간의 의존성 매핑을 stringify하는 것입니다. 다음과 같은 객체입니다. // &#123; './relative/path': 1 &#125;. // // transpiled된 우리의 모듈들이 상대경로와 합께 `require()`를 호출하기 때문입니다. 이 함수를 호출하면 // 그래프에서 이 모듈의 상대 경로에 해당하는 모듈을 확인할 수 있습니다. modules += `$&#123;mod.id&#125;: [ function (require, module, exports) &#123; $&#123;mod.code&#125; &#125;, $&#123;JSON.stringify(mod.mapping)&#125;, ],` &#125;) // 마지막으로 self-invoking 함수의 body를 만듭니다. // // `require()` 함수를 만들며 시작하겠습니다: 모듈 id를 받아 앞서 만든 모듈 오브젝트에서 `module`을 // 찾습니다. function wrapper와 맵핑 객체를 얻기위해 two-value 객체를 이용합니다. // // 모듈의 코드는 모듈의 id들 대신 상대경로와 함께 `require()`함수를 호출합니다. 우리가 만든 require 함수는 // id 받습니다. 또한 두개의 모듈은 동일한 상대 경로를 요구할 수 있지만, 실제론 두개의 다른 모듈들을 // 의미하게 됩니다. // // 이 문제를 해결하기 위해 별도의 `require` 함수를 제공합니다. 모듈의 맵핑 오브젝트를 이용하여 상대경로를 ids에 할당합니다. // 맵핑 오브젝트는 구체적인 모듈을 가져오기 위한 용도로, 상대 경로와 모듈 ids를 맵핑합니다. // // 마지막으로, 모듈이 require 되었을 때 exports 객체의 값이 노출되어야 합니다. 따라서 모듈 코드에 의해 변환 된 // `exports` 객체는 `require()`로 반환됩니다. const result = ` (function(modules) &#123; function require(id) &#123; const [fn, mapping] = modules[id]; function localRequire(name) &#123; return require(mapping[name]); &#125; const module = &#123; exports : &#123;&#125; &#125;; fn(localRequire, module, module.exports); return module.exports; &#125; require(0); &#125;)(&#123;$&#123;modules&#125;&#125;) ` // 결과를 반환합니다. 만세! :) return result&#125;const graph = createGraph(\"./example/entry.js\")const result = bundle(graph)console.log(result)여기의 번역된 내용을 확인해보자.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"webpack","slug":"webpack","permalink":"https://gracefullight.dev/tags/webpack/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"}]},{"title":"나를 위한 면접 (Backend Developer Interview Questions)","slug":"나를-위한-면접-(BE)","date":"2018-02-18T05:13:34.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/02/18/나를-위한-면접-(BE)/","link":"","permalink":"https://gracefullight.dev/2018/02/18/%EB%82%98%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%A9%B4%EC%A0%91-(BE)/","excerpt":"","text":"BE Interview Questions를 아는 만큼 답해보았다지극히 주관적이라 정답이 아닐 수 있습니다 Design Patterns Why are global and static objects evil?전역변수는 어디서 변경되었는지 추적이 힘듦그리고 자바의 경우 콜스택이 끝나면 비워지는 지역변수와 달리 메모리의 static 영역에 계속 상주해 있음 Tell me about Inversion of Control and how does it improve the design of code클래스 안에 다른 클래스의 기능이 필요하다면 내부에서 생성자를 이용해 두 클래스 간의 종속이 생겨버리는데IoC를 통한다면 DI 패턴으로 구현해 new A(new B()) 처럼 종속성을 분리시킬 수 있음TypeHint를 통해 의존성을 확인할 수 있으므로 더 직관적이기도 하다 참고What is Inversion of Control? Active-Record is the design pattern that promotes objects to include functions such as Insert, Update, and Delete, and properties that correspond to the columns in some underlying database table. In your opinion and experience, which are the limits and pitfalls of the this pattern?Pros하나의 구조로 모든 모델을 제어할 수 있게 해준다또한 모든 DB 마다 다른 쿼리문 (예를 들어 페이징)을 손쉽게 처리할 수도 있다무엇보다 엄청 빠르게 DB 조작이 가능해진다ConsDB를 잊어버리게 되는 것 아닐까? ActiveRecord로 개발을 시작하는 건 아니다라고 본다여러 테이블의 조인이 힘들고 (조인 조건을 만족하기 위해) 계산이 들어간 쿼리문이라면 어차피 RAW 쿼리를 날려야한다.프로시져를 사용할 수 도 없고, 관계형 모델들은 select를 키값을 통해 여러 번 select 한 뒤 합쳐주는 것 뿐이라 성능상의 이슈도 있다.결국 필요한 곳에서만 (RESTful 구조의) 사용해서 개발하는 게 좋을 것 같다 Data-Mapper is a design pattern that promotes the use of a layer of Mappers that moves data between objects and a database while keeping them independent of each other and the mapper itself. On the contrary, in Active-Record objects directly incorporate operations for persisting themselves to a database, and properties corresponding to the underlying database tables. Do you have an opinion on those patterns? When would you use one against the other?The big benefit of the Data Mapper pattern is, your domain objects don’t need to know anything about how they are stored in the database. This means that your objects will be lighter because they don’t have to inherit the full ORM, but also there will be a stricter, more formal process for interacting with the database because you can’t just call the save() method anywhere in your code데이터 매퍼는 DB 스키마와 독립적인 모델을 갖고 싶을 때 사용한다ActiveRecord의 속도보다 성능이 필요한 경우 사용하면 된다 참고What’s the difference between Active Record and Data Mapper Why it is often said that the introduction of null is a “Billion dollar mistake”? Would you discuss the techniques to avoid it, such as the Null Object Pattern introduced by the GOF book, or Option types?null 로 변수를 생성하는 건 안하는 거랑 똑같지만, 안 해주면 프로그램이 뻗어버려서null 타입 체크를 하거나 default값을 추가한다 참고10억 달러짜리 실수 Many state that, in Object-Oriented Programming, Composition is often a better option than Inheritance. What’s you opinion?부모-자식 관계면 상속이지만, Has 관계이면 컴포지션 참고잘못 알려진 디자인 패턴의 두번째 원칙 What is an Anti-corruption Layer?추상화 한 레이어를 하나 더 두고 하위 도메인들을 쉽게 접근할 수 있게 하는 방법, facade 처럼 Singleton is a design pattern that restricts the instantiation of a class to one single object. Writing a Thread-Safe Singleton class is not so obvious. Would you try?Volatile How would you deal with Dependency Hell?패키지 매니저툴을 이용하며 버전을 명시한다, maven, composer, npm 등등 Is goto evil?적절하게, 가독성 있게 사용하면 괜찮다리눅스 커널 이런 느낌으로 Code Design It is often heard that one of the most important goals in Object-Oriented Design is to have High Cohesion and Loose Coupling. What does it mean? Why is it that important and how is it achieved?Coupling모듈 간에 상호 의존하는 정도각 모듈 간의 결합도가 약해야 하며 의존하는 모듈이 적어야한다.결합도가 강하면 시스템 구현 및 유지보수 작업이 어렵다Cohesion정보 은닉 개념을 확장한 것명령어나 호출문 등 모듈의 내부 요소들의 서로 관련되어 있는 정도모듈이 독립적인 기능으로 정의되어 있는 정도독립적인 모듈이 되기 위해서는 각 모듈의 응집도가 강해야한다 Why does array index start with ‘0’ in most of languages?배열이 참조하는 메모리의 위치를 나타내므로 (시작 위치에서의 기준점) Are comments in code useful? Some say they should be avoided as much as possible, and hopefully made unnecessary.변수명, 메소드명으로 명확하게 표현할 수 있으면 좋은데, 그러긴 현실적으로 힘들고JSDoc 같은 구문으로 주석을 단다면 참조하는 다른 소스에서도 hover만으로 모든 설명을 볼 수 있어서도 좋고 What is the difference between design and architecture?Software architecture is more about the design of the entire system, while software design emphasizes on module / component / class level.Architecture: MVC, 3-tier layered design, etc.Design: What are the responsibilities, functions, of module x? Of class Y? What can it do, and what not? 참고Software Design vs. Software Architecture C++ supports multiple inheritance, and Java allows a class to implement multiple interfaces. What impact does using these facilities have on orthogonality? Is there a difference in impact between using multiple inheritance and multiple interfaces? Is there a difference between using delegation and using inheritance?implements가 좀 더 유연하다 클래스 안에서 직접 구현해야되는거니까 Pros and cons of holding domain logic in Stored Procedures.Pros한 번 만든걸 계속 호출해서 쓸 수 있음컴파일 언어의 경우 쿼리만 변경하는거니 유지보수가 좋을 수 있음계산이 들어가는 쿼리의 경우 SP는 캐싱되므로 이만한게 없음ConsDB에 완전 종속됨DBA가 있어야함git에서 변경점 추적 불가능 In your opinion, why have Object-Oriented Design dominated the market for so many years?관심사의 분리 Languages Tell me the 3 worse defects of your preferred languagePHP컴파일 언어가 아니라 느림 (PHP7부턴 달라짐, OpCache를 사용하면 되긴함)쓰레드가 없음 (PHP React나 Guzzle promise 같은 걸 사용하면 event driven 방식으로 되긴 함)인식이 안 좋음 (제발 spring framework랑 레거시 php랑 비교하지 말아줘요)함수명이 너무 제각각임 (어떤건 snake_case 어떤건 붙혀서) Why is there a rising interest on Functional Programming?각 실행 단계를 이뮤터블로 만들어 Side effect를 없앤다, 테스트도 쉽고가독성이 높아진다 What is a closure, and what is useful for? What’s in common between closures and classes?FE 인터뷰에 정리해놓았다 What are generics useful for?타입 캐스팅 What are high-order functions? What are they useful for?함수를 파라미터로 전달받거나, 함수를 리턴하는 함수로 다형성을 지원해 재사용이 가능하다 What does it mean when a language treats functions as first-class citizens?변수나 데이터에 할당 가능파라미터로 넘길 수 있어야함리턴값으로 리턴이 가능해야함 Show me an example where an Anonymous Function can be useful모든 콜백에서 유용함 Whats the Stack and what’s the Heap? What’s a Stack Overflow?Stack: LIFOHeap: 최소 또는 최대 값이 루트에 있는 완전 이진 트리Stack Overflow: 지식인 또는 Stack이 꽉 찼는데 삽입하려 들 때 Some languages, especially the ones that promote a Functional approach, allow a technique called Pattern Matching. Do you know it? How is Pattern Matching different from Switch clauses?C#에서 is 구문을 말하는건가? switch는 하나의 타입에서만 비교가 가능한데, 패턴매칭을 쓰면 더 동적으로 비교가 가능하다 If Cat is an Animalis TakeCare&lt;Cat&gt; a TakeCare&lt;Animal&gt; ?같지는 않지만 집어넣을 수는 있다 In the last years there has been a lot of hype on Node. What’s your opinion on the use in the back end of a language that was initially conceived to run in the browser?Atwood’s Law: any application that can be written in JavaScript, will eventually be written in JavaScript. 참고The Principle of Least Power Web development Why first-party cookies and third-party cookies are treated so differently?first-party cookie자사 쿠키는 방문하는 웹사이트가 설정하며 해당 사이트에서만 사용third-party cookie타사 쿠키에서 분석 등의 용도로 사용 How would you manage Web Services API versioning?시맨틱 버저닝 From a Back End perspective, are there any disadvantages or drawbacks on the adoption of Single Page Applications?백엔드 관점Pros웹을 SPA로 가면 API가 필요하고, 디바이스 확장성에 대해 좋음ConsSEO 때문에 어차피 SSR 해줘야됨 Why do we usually put so much effort for having stateless services? What’s so good in stateless code and why and when statefullness is bad? 참고stateful vs stateless REST and SOAP: when would you choose one, and when the other? 참고SOAP이냐 REST이냐 In Web development, Model-View Controller and Model-View-View-Model approaches are very common, both in the Back End and in the Front End. What are they, and why are they advisable?MVCController로 사용자의 입력이 들어옵니다.Controller는 Model을 데이터 업데이트 및 불러오고Model은 해당 데이터를 보여줄 View를 선택해서 화면에 보여주게 됩니다.MVVMView에 입력이 들어오면 Command 패턴으로 ViewModel에 명령을 합니다.ViewModel은 필요한 데이터를 Model에 요청 합니다.Model은 ViewModel에 필요한 데이터를 응답 합니다.ViewModel은 응답 받은 데이터를 가공해서 저장 합니다.View는 ViewModel과의 Data Binding으로 인해 자동으로 갱신 됩니다. 참고MVC, MVP, MVVM 비교 Databases How would you migrate an application from a database to another, for example from MySQL to PostgreSQL? If you had to manage that project, which issues would you expect to face?Oracle =&gt; MySQLdate 처리에서 애를 먹었는데, 덤프를 바로 옮기지 않고 데이터를 가져와 다시 넣는 방식으로 마이그레이션 했다Right join (+ 조인)을 Left로 바꾸는데 시간이 걸렸다MySQL =&gt; Maria완벽 호환, utf8mb4로 콜렉션과 차셋도 바꿔줌 Why databases treat null as a so special case? For example, why in SQL SELECT * FROM table WHERE field = null does not match records with null field?저걸 처리하기 위해선 IS NULL 구문을 사용해야함 ACID is an acronym that refers to Atomicity, Consistency, Isolation and Durability, 4 properties guaranteed by a database transaction in most of the database engines. What do you know about this topic? Would you like to elaborate?원자성Atomicity트랜잭션 내의 명령은 반드시 완벽히 수행모두가 수행되거나 오류시 전부가 취소되어야함일관성ConsistencyDB의 전체 요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야함독립성Isolation = 격리성 = 순차성둘 이상의 트랜잭션이 병행 실행되는 경우 다른 트랜잭션 연산이 끼어들 수 없음수행 중인 트랜잭션은 완료될 때 까지 다른 트랜잭션에서 참조 불가영속성Durability = 지속성시스템이 고장나도 영구적으로 반영 How would you manage database schema migrations, that is, how would you automate the changes a database schema is affected to, as the application evolve, version after version?프레임워크에서 migration 기능을 지원한다면 그걸 사용할 것이다 How is Lazy Loading achieved? When is it useful? What are its pitfalls?Pros실제 로직이 실행될 때 로드가 되므로, 자원 소모를 해당 액션이 실행되기 전까지로 미룰 수 있다ConsN+1 problem. The so called “N + 1 problem” is an issue that occurs when the code needs to load the children of a parent-child relationship with a ORMs that have lazy-loading enabled, and that therefore issue a query for the parent record, and then one query for each child record. How to fix it?Eager loading을 사용하거나 JPA의 경우 join fetch를 사용한다 In your opinion, is it always needed to use database normalization? When is it advisable to use denormalized databases?삽입, 삭제, 갱신 이상이 해결된다면, join의 감소를 위해 비정규화도 적절히 필요하다 NoSQL What is Eventual Consistency?데이터 삽입이 끝났지만 어떤 클라이언트에서는 업데이트 된 내용을 확인할 수 없다, 하지만 곧 확인할 수 있다 참고NoSQL에 대해서 간단히 알아보자! The Brewer’s Theorem, most commonly known as the CAP theorem, states that in the presence of a Network Partition (the P in CAP), a system’s designer has to choose between Consistency (the C in CAP) and Availability (the A in CAP). Can you think about examples of CP, AP and CA systems?일관성, 가용성, 분단허용성Consistent - Available : Postgres, MySQL같은 전통적인 RBMSConsistent - Partition Tolerant : BitTable, Hypertable, HBase, MongoDB, Terrastore, Redis, Scalaris, MemcacheDB, BerkeleyDBAvailable - Partition Tolerant : Amazon Dynamo, Cassandra, CouchDB, Amazon SimpleDB, Riak 참고CAP Theorem, 오해와 진실NoSQL에 대해서 #2 How would you explain the recent rise in interest for NoSQL?Redis In which case would you use a document database like MongoDB instead of a relational database like MySQL or PostgreSQL?단순 반복적인 질의기능 및 잦은 확장이 주로 필요한 서비스 참고NoSQL – 도대체 어떻게 선택해야 할까? code versioning Could you describe GitHub Flow and GitFlow workflows?Git Flow: feature &gt; develop &gt; release &gt; hotfix &gt; masterGitHub Flow: feature 별 브랜치 &gt; master, PR What’s a rebase?여러 브랜치를 하나의 브랜치(커밋)으로 합치기 Concurrency Why do we need Concurrency, anyway?I/O를 기다리지 않고 다른 일을 처리하고 싶을 때, CPU 코어들을 최대한 쓰고 싶을 때 Why is testing multithreading / concurrent code so difficult?언제 값이 변경되는지 잡기가 힘들어서 What is a Race Condition? Code an example, using whatever language you like.두 개 이상의 스레드에서 공유된 리소스에 접근할 때 순서에 따라 결과가 달라지는 현상for 문으로도 보여줄 수 있다 What is a Deadlock? Would you be able to write some code that is affected by deadlocks?이미 리소스를 점유한 스레드의 Lock이 해제될 까지 서로의 스레드가 계속 기다리는 현상 What is Process Starvation? If you need, let’s review its definition.우선 순위가 낮은 프로세스가 우선 순위가 높은 프로세스 때문에 계속 기다리는 현상 What is a Wait Free algorithm?전체 쓰레드가 공유 자원을 일관적으로 사용하면서도 대기하지 않고 그냥 진행되는 것 참고Lock FreeLock-Free and Wait-Free, definition and examples Distributed Systems What are the Fallacies of Distributed Computing?The network is reliable.Latency is zero.Bandwidth is infinite.The network is secure.Topology doesn’t change.There is one administrator.Transport cost is zero.The network is homogeneous. 참고Fallacies of distributed computing When would you use Request/Reply and when Publish/Subscribe?클라이언트에서 요청을 한 뒤 업데이트가 되야하면 Request/Reply요청이 없어도 업데이트가 되야하면 Pub/Sub Suppose the system you are working on does not support transactionality. How would you implement it from scratch?임시 테이블과 트랜잭션 성공테이블을 나눈다 Software Lifecycle and Team Management What is the biggest difference between Agile and Waterfall?고객과의 커뮤니케이션일정 주기를 가지고 점진적인 기능개발 How would you manage a very late project차를 만들지 않고 바퀴부터 만들겠다앱 환경에 따라 나중에 개발할 부분을 먼저 찾겠다 Are Program Managers useful?항상 필요하다클라이언트나 보스로 부터의 의견 절충을 해주지 않으면설계도가 나와 건물 다 올렸는데 철근 추가하는 미친 짓을 해야되니까. logic and algorithms How would you sort a 10GB file? How would your approach change with a 10TB one?머지 소트 How would you programmatically detect file duplicates?contents를 md5나 sha1 해싱 후 비교 Software Architecture When is a cache not useful or even dangerous?서버로 데이터를 전송할 때 Why does Event-Driven Architecture improve scalability?노드간의 이벤트가 있을때마다 로직을 처리할 수 있어서 Scale out vs scale up: how are they different? When to apply one, when the other?Scale out서버 대수를 늘리는 것, 수평 스케일, 분산처리Scale Up서버 재원을 늘리는 것, 수직 스케일, 서버가 부담을 받을 때 What is CQRS (Command Query Responsibility Segregation)? How is it different from the oldest Command-Query Separation Principle?명령과 쿼리의 역할을 분리한다는 것인데 참고 도표를 보는게 빠르다.R/W DB를 분리해서 이벤트방식으로 동기화를 시키는 모델 같은데 잘 모르겠다. 참고나만 모르고 있던 CQRS &amp; EventSourcing What is Three-Tier architecture?HTTP를 처리하는 Web Server웹 애플리케이션을 실행하는 WAS(Web Application Server)그리고 DBMS 로 각각의 계층으로 분리하는 3 Tier 방식의 아키텍처 참고3 Tier 아키텍쳐다층구조 How would you design a software system for scalability?1234 =&gt; Front =&gt; BackLB =&gt; Front =&gt; LB =&gt; Back =&gt; DB =&gt; Replication DB =&gt; Front =&gt; Back =&gt; Static Resources What are the strategies to deal with the C10k problem?C10k하나의 시스템당 동접 수가 10k를 효율적 운영방안이벤트 드리븐과 비동기, LB로 부하 분산, 세션 수 제한 (기다리게) How would you design a decentralized (that is, with no central server) P2P system?BlockChain Node와 SockJS로의 P2P 데이터 동기화 What are the disadvantages of the Publish-Subscribe pattern at scale?sub이 많아지면 느려진다sub에서 메시지를 받았는지는 모른다 When is it OK to use tight coupling?강결합은 나쁜 것으로만 배워서 잘 모르겠다A major advantage of a tightly coupled architecture is that it enables the rapid and efficient processing of large volumes of data, provides a single point of truth instead of several, often redundant, data sources, and enables open access to data throughout the organization.이 답변은 너무 모호한 설명인 듯… 참고When is tight coupling essential or a good thing? Service Oriented Architecture and Microservices What are the differences between Soa and Microservices?서비스 지향 아키텍처는 하나의 입구마이크로서비스는 여러 개의 입구 참고Difference between Microservices Architecture and SOA Let’s talk about web services versioning, version compatibility and breaking changes.시맨틱 버저닝 What are the pros and cons of MicroService architecturePros기능을 모듈로서 개발이 가능함DB 또는 언어를 알맞게 선택이 가능함개별 디버깅, QA가 쉬움Cons혼자 개발 못함엄청난 문서화가 필요함다른 서비스와 통신하는 비용 필요 Security How do you write secure code? In your opinion, is it one of the developer’s duties, or does it require a specialized role in the company? And why?기본적인 웹 보안 코딩은 할 수 있음,개발자의 의무이긴한데 회사차원에서도 필요함예를들어 하위레벨에서의 방화벽이 필요할 경우에… What do you know about Cross-Site Scripting? What do you know about Cross-Site Forgery Attack?CSRF는 인증된 사용자를 통해 공격자가 원하는 명령을 수행하게 하는 기법CSRF 토큰을 사용해 페이지가 처음 로드 될 때 토큰 값을 가지고 있고, 서버에 요청을 보낼 때 토큰을 같이 보내 비교한다 How does HTTPS work? 참고https ssl 보안 프로토콜 접속절차SSL-TLS HTTPS 적용 What’s a Man-in-the-middle Attack, and why does HTTPS help protect against it?전송 구간에서도 암호화가 되어 전송되니까 중간자공격이 통할리가. How can you prevent the user’s session from being stolen?Sessin Expire를 당연히 줘야하고, IP 체크 General What’s the difference between TCP and HTTP4번째 레이어와 7번째 레이어HTTP는 response받으면 응답을 끊지만 TCP는 끊을 때까지 계속 연결TCP가 하위니까 속도가 더 빠름 What are the tradeoffs of client-side rendering vs. server-side renderingCSR은 CDN에SSR은 Bot만이 들어올 수 있게.","categories":[{"name":"interview","slug":"interview","permalink":"https://gracefullight.dev/categories/interview/"}],"tags":[{"name":"interview","slug":"interview","permalink":"https://gracefullight.dev/tags/interview/"}]},{"title":"12 팩터 앱","slug":"12-팩터-앱","date":"2018-02-15T15:13:32.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2018/02/15/12-팩터-앱/","link":"","permalink":"https://gracefullight.dev/2018/02/15/12-%ED%8C%A9%ED%84%B0-%EC%95%B1/","excerpt":"","text":"헤로쿠 사에서 클라우드-네이티브 아키텍처를 구축하면서 나온 패턴들이 12-팩터 앱 가이드로 정착.단일 유닛으로 이뤄진 어플리케이션 아키텍처를 declarative configuration, statelessness, deployment independence에 초점을 두고 설계하는 안내서MSA에 적용 12 factor코드베이스의존성설정백엔드 서비스빌드, 릴리즈, 실행프로세스포트 바인딩동시성폐기 가능 (쓰고 버리기)환경 일치로그관리 프로세스 코드베이스codebase하나의 코드베이스는 VCS 에서 여러 배포버전을 기록하며, 하나의 앱은 하나의 코드베이스를 기반으로 소스 코드를 형상관리코드는 여러 대의 분산처리 운영서버나 여러 개발자의 컴퓨터로 배포, 실행될 수 있다 의존성dependency의존성은 명시적으로 선언하되 격리한다인터넷이 차단된 개발 환경의 의존성을 어떻게 패키징할지도 고민 대상시스템 유틸리티에 의존하지 않는다 설정configuratioon여러 서버의 접속 정보 등을 설정을 코드에 저장하지 않는다가변적인 것들은 환경변수를 이용한다 백엔드 서비스backing service기반 서비스부가 리소스로 취급하며 URL 를 통해 서비스에 접속한다 빌드, 릴리즈, 실행빌드와 실행단계를 엄격히 구분한다CI / CD 와 연관된다 프로세스단일/다수의 무상태 프로세스로 앱을 실행한다프로세스 사이에 아무 것도 공유하지 않고, 내부 상태를 갖고 있지 않는다모든 데이터는 백엔드 서비스로 다뤄야한다 포트 바인딩서비스는 포트를 바인딩하여 내보낸다한 앱이 다른 앱의 서비스가 될 수 있다 동시성concurrency프로세스 모델 중심으로 scale out개별 프로세스는 멀티스레딩하면 된다같은 일하는 프로세스는 수직적, 다른일 하는 프로세스는 수평적 폐기 가능disposability프로세스는 쓰고 바로 버릴 수 있어야한다프로세스가 갑자기 죽어도 서비스 장애가 발생해서는 안 된다 같은 환경environment parity개발, 스테이징, 운영 환경을 최대한 비슷하게 유지한다 로그표준 콘솔창 (stdout)에 로그를 출력한다 관리 프로세스admin process관리자가 수행하는 작업(DB migration, batch, at 등)은 일회성 프로세스로 실행한다데이터베이스를 직접 수정하지 않는다 참고The Tweleve-Factor AppDjango 자습, 12 팩터 앱스프링부트 워크북, 12-팩터 앱 가이드","categories":[],"tags":[{"name":"12factor","slug":"12factor","permalink":"https://gracefullight.dev/tags/12factor/"}]},{"title":"알고리즘 - 피보나치","slug":"알고리즘-피보나치","date":"2018-02-11T14:36:34.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/02/11/알고리즘-피보나치/","link":"","permalink":"https://gracefullight.dev/2018/02/11/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98-%ED%94%BC%EB%B3%B4%EB%82%98%EC%B9%98/","excerpt":"","text":"파이썬과 익숙해질 겸, 비지니스 로직 속에 빠져있는 나에게 기본을 잊지말자란 채찍질을 할 겸 뭔가를 시작해보았다보통 피보나치는 재귀로 구현하는데, n 이 조금만 커져도 시간이 어마어마하게 증가한다f(n-2) + f(n-1)의 반복이니 기존 값을 저장해뒀다가 쓰면 되어 배열로 처리한다는 걸 생각해 볼 수 있을 것이다먼저 코드를 보자 해답 배열fibonacci.py123456789def fibonacci(num): fibos = [0, 1] # 2 &lt;= i &lt; num + 1 까지 돌린다 for i in range(2, num + 1): fibos.append(fibos[i-2] + fibos[i-1]) # 마지막 데이터가 구하려는 데이터가 된다 return fibos[num]테스트해보면 재귀보다 엄청나게 빨라진 속도를 피부로 느낄 수 있다뭐 여기까진 다들 생각해봤고 구현할 수 있을 것 같다배열에 append하는 것 보다 미리 크기가 num만큼 정의된 배열에 i로 접근해 넣으면 더 빠른 속도가 날 것 같았다하지만… python 엔 배열을 정해진 크기만큼 초기화할 방법이 없더라[0] * num이라는 방법 뿐배열을 안 쓰는 방법이 있을까? 한참을 고민하다가 다른 솔루션을 찾아봤다 재할당멋진 방법이 있었다fibonacci.py12345678910def fibonacci(num): a = 0 b = 1 # 0 &lt;= i &lt; num for i in range(num): temp = a a = b b += temp return aa 엔 b 값을 주고, b 에는 기존의 a 값을 계속 더해준다이 짓을 num - 1만큼 반복한다배열을 안 쓰니 절반정도의 시간이 더 줄어들었다 공식이마저도 조금 아쉬움이 있었다, 피보나치는 수열이고 수열은 공식이 있기 마련이다위키피디아엔 이미 그 공식이 있었다수학의 힘을 빌려보자fibonacci.py123456from decimal import Decimal# fibonacci의 85번 째부터 Double 값을 넘어가기에 Decimal 기능을 써야한다sqrt5 = Decimal(5).sqrt()def fibonacci(n): return ((1 + sqrt5) ** n - (1 - sqrt5) ** n) / (2 ** n * sqrt5)20 만번 째도 0.2 초만에 구해진다 여담피보나치의 데이터를 도식화하면 힙 모양이 되는데 아주 큰 값을 구하는 거라면 피보 힙이 제일 빠르지 않을까?수학의 정석 심화편이 생각나는 건 왜일까?","categories":[{"name":"algorithm","slug":"algorithm","permalink":"https://gracefullight.dev/categories/algorithm/"}],"tags":[{"name":"algorithm","slug":"algorithm","permalink":"https://gracefullight.dev/tags/algorithm/"}]},{"title":"react에서 scrollTo 메소드로 스크롤 이동이 안될 때","slug":"react에서-scrollTo-메소드로-스크롤-이동이-안될-때","date":"2018-02-08T08:16:14.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/02/08/react에서-scrollTo-메소드로-스크롤-이동이-안될-때/","link":"","permalink":"https://gracefullight.dev/2018/02/08/react%EC%97%90%EC%84%9C-scrollTo-%EB%A9%94%EC%86%8C%EB%93%9C%EB%A1%9C-%EC%8A%A4%ED%81%AC%EB%A1%A4-%EC%9D%B4%EB%8F%99%EC%9D%B4-%EC%95%88%EB%90%A0-%EB%95%8C/","excerpt":"","text":"window.scrollTo(0, 0) 를 아무리 해봐도 스크롤이 맨 위로 올라가지 않을 때 많은 구글링을 한 뒤 다음과 같은 해결책을 적용해보았다react-scroll 라이브러리를 써보고혹시 window 가 레이아웃 컴포넌트에 갇혀있어서 그런가 window 를 App.js 에서 Top 기능을 쓰는 곳까지 내려보고jQuery 를 추가해서도 해보고별 짓을 다하다가아무 것도 안 되서 리프레쉬하러 옥상에 갔다가 갑자기 든 생각이 있었다잠깐만 component 라는게 하나의 element 안에서 쇼를 하는 거 잖아.그럼 element 안에서 스크롤을 이동하면? 해결Footer.js123456789101112131415class Footer extends Component &#123; scrollToTop = event =&gt; &#123; document.getElementById(\"root\").scrollTo(0, 0); &#125;; render() &#123; return ( &lt;div&gt; &lt;div className=\"top\"&gt; &lt;a onClick=&#123;this.scrollToTop&#125;&gt;위로가기&lt;/a&gt; &lt;/div&gt; &lt;/div&gt; ); &#125;&#125;index.js 에서 ReactDOM 을 렌더링해주는 element(나같은 경우엔 div#root)를 찾아서 그 엘레먼트의 스크롤을 올려주자 여담책에서 봤는데 뇌가 쉴 때 가장 좋은 아이디어가 나온다고 했는데, 사실인 것 같다","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"react","slug":"javascript/react","permalink":"https://gracefullight.dev/categories/javascript/react/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"react","slug":"react","permalink":"https://gracefullight.dev/tags/react/"}]},{"title":"windows에 spring boot cli 설치하기","slug":"windows-spring-boot-setup","date":"2018-02-07T16:03:20.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/02/07/windows-spring-boot-setup/","link":"","permalink":"https://gracefullight.dev/2018/02/07/windows-spring-boot-setup/","excerpt":"","text":"설치스프링 부트를 설치해보자.여기서 원하는 버전 스냅샷의 bin.zip 파일을 받아 압축을 풀어준다예를 들면 spring-boot-cli-2.1.0.M1-bin.zip 를 C:/spring에 압축을 풀면 된다.정식버전은 여기의 zip 파일을 받으면 된다. 설정환경변수를 3 개 추가해줘야한다JAVA_HOME 변수에 JDK 설치 경로 (C:/Program Files/Java/jdk-10.0.2)SPRING_HOME 변수에 방금 압축푼 spring cli 의 경로 (C:/spring)path 변수에 %SPRING_HOME%\\bin 경로 오류git bash에서 org.springframework.boot.loader.JarLauncher 을(를) 찾거나 로드할 수 없습니다란 오류가 뜰 때는 spring/bin/spring파일을 열어 다음과 같이 수정하자spring1234567891011# 16번째 줄 if 문 주석처리# For Cygwin, ensure paths are in UNIX format before anything is touched.# if $cygwin ; then [ -n \"$JAVA_HOME\" ] &amp;&amp; JAVA_HOME=`cygpath --unix \"$JAVA_HOME\"`# fi# 94번째 줄 if 문 주석처리# if $cygwin; then PRING_HOME=`cygpath --path --mixed \"$SPRING_HOME\"` CLASSPATH=`cygpath --path --mixed \"$CLASSPATH\"`# fi출처그래도 같은 오류가 발생한다면 spring 쉘 스크립트를 아예 새로 짜버리자spring1234567891011[ -n \"$JAVA_HOME\" ] &amp;&amp; JAVA_HOME=`cygpath --unix \"$JAVA_HOME\"`# 아래에 다음 줄을 추가하자# 이 구문은 스프링 홈 경로를 unix 스타일로 바꿔준다[ -n \"$SPRING_HOME\" ] &amp;&amp; SPRING_HOME=`cygpath --unix \"$SPRING_HOME\"`# 94번째 줄을 다음과 같이 바꿔버리자# if $cygwin; then # SPRING_HOME=`cygpath --path --mixed \"$SPRING_HOME\"` # CLASSPATH=`cygpath --path --mixed \"$CLASSPATH\"` CLASSPATH=`cygpath --unix \"$CLASSPATH\"`# fi세 변수를 echo 찍었을 때 아래와 비슷하게 나오면 된다.12345678# echo $JAVA_HOME;/d/Program Files/Java/jdk-10.0.2# echo $SPRING_HOME;/d/spring# echo $CLASS_PATH;.:/d/spring/bin:/d/spring/lib/spring-boot-cli-2.1.0.BUILD-SNAPSHOT.jar그리고 마지막 줄의 명령어를 echo 할 때는 다음과 같다.12# echo \"$&#123;JAVA_HOME&#125;/bin/java\" $&#123;JAVA_OPTS&#125; -cp \"$CLASSPATH\" org.springframework.boot.loader.JarLauncher \"$@\"/d/Program Files/Java/jdk-10.0.2/bin/java -cp .:/d/spring/bin:/d/spring/lib/spring-boot-cli-2.1.0.BUILD-SNAPSHOT.jar org.springframework.boot.loader.JarLauncher 확인123$ spring --versionSpring CLI v2.1.0.M1","categories":[{"name":"java","slug":"java","permalink":"https://gracefullight.dev/categories/java/"},{"name":"spring","slug":"java/spring","permalink":"https://gracefullight.dev/categories/java/spring/"}],"tags":[{"name":"java","slug":"java","permalink":"https://gracefullight.dev/tags/java/"},{"name":"spring","slug":"spring","permalink":"https://gracefullight.dev/tags/spring/"}]},{"title":"adonisjs에 response.sendStatus 추가하기","slug":"adonisjs-response-sendStatus","date":"2018-02-06T01:02:51.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/02/06/adonisjs-response-sendStatus/","link":"","permalink":"https://gracefullight.dev/2018/02/06/adonisjs-response-sendStatus/","excerpt":"","text":"express에 있는 sendStatus 기능을 활용하기 위해 start/hooks.js에도 다음 로직을 추가하자 소스start/hooks.js123456789const &#123; hooks &#125; = require(\"@adonisjs/ignitor\")hooks.after.providersBooted(() =&gt; &#123; const Response = use(\"Adonis/Src/Response\") Response.macro(\"sendStatus\", function(status) &#123; this.status(status).send(\"\") &#125;)&#125;)추가 후엔 controller에서 response.sendStauts(403)과 같은 응답을 반환할 수 있다","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"},{"name":"adonis","slug":"javascript/nodejs/adonis","permalink":"https://gracefullight.dev/categories/javascript/nodejs/adonis/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"adonis","slug":"adonis","permalink":"https://gracefullight.dev/tags/adonis/"}]},{"title":"redux-form 사용하기","slug":"redux-form-start","date":"2018-02-05T03:15:39.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/02/05/redux-form-start/","link":"","permalink":"https://gracefullight.dev/2018/02/05/redux-form-start/","excerpt":"","text":"react 로 form 을 만들어 사용하는 일은 생각보다 많은 걸 해야한다.onSubmit에 이벤트를 잡아서 event.target.fieldName.value로 하나씩 체크를 해서 validating 을 하다가귀찮아질 때 쯤 function 을 만들어서 관리를 하고자주 사용하는 form input 을 컴포넌트로 만들며form 에 초기값을 넣어줘야할 경우 (edit 페이지 같은) 값을 가져와 하나하나 바인딩하고input 에 값이 바뀌었는지에 따라 submit 버튼을 활성, 비활성화 하는 로직도 있어야한다번거로운 일을 하는 것 보다 redux-form 라이브러리를 사용해보자검색시에 나오는 포스트들은 아주 기본적인 예제 밖에 없어서 문서를 매번 헤집는 시간이 필요했다.먼저 이 라이브러리를 쓰기 위해선 다음 사전 지식이 필요하다redux, react-reduxHOC 설치1$ yarn add redux-formredux-form 의 리듀서를 연결시켜줘야한다rootReducer12345678import &#123; reducer as formReducer &#125; from 'redux-form'const rootReducer = combineReducers(&#123; // form 키를 사용해야한다 form: formReducer&#125;)export defult rootRecuder 사용redux-form component 와 redux-form 이 들어갈 compoent 를 만들어야한다편의상 Login component와 LoginForm component라고 하자Login12345678910111213141516import React, &#123; Component &#125; from \"react\";import &#123; connect &#125; from \"react-redux\";import LoginForm from \"LoginForm\";class Login extends Component &#123; submitLoginForm = formData =&gt; &#123; console.log(\"LoginFormData =&gt; \", formData); // this.props.loginAuth(formData) &#125;; render() &#123; return &lt;LoginForm onSubmit=&#123;this.submitLoginForm&#125; /&gt;; &#125;&#125;export default connect()(Login);LoginComponent에서는 딱히 특별한게 없이 LoginForm Component 를 호출하고 함수 하나를 내려준 게 끝이다LoginForm123456789101112131415161718192021222324252627282930313233import React, &#123; Component &#125; from \"react\";import &#123; Field, reduxForm &#125; from \"redux-form\";class LoginForm extends Component &#123; render() &#123; const &#123; handleSubmit, // submit 이벤트를 redux-form에서 관리하게 수정 pristine, // form이 변경점이 없을 경우 true submitting // form이 submit 중일 경우 true &#125; = this.props; return ( &lt;form onSubmit=&#123;handleSubmit&#125;&gt; &lt;Field name=\"id\" type=\"text\" component=\"input\" placeholder=\"아이디를 입력하세요\" /&gt; &lt;Field name=\"password\" type=\"password\" component=\"input\" placeholder=\"비밀번호를 입력하세요\" /&gt; &lt;/form&gt; ); &#125;&#125;export default reduxForm(&#123; form: \"LoginForm\" // formReducer에 어떤 이름으로 이 폼을 등록할지&#125;)(LoginForm);redux-form에서 Field Component와 reduxForm High Order Component를 가져온 뒤input tag 대신 Field Component 의 component 속성으로 input 을 만들어준다그리고 해당 폼을 reduxForm 으로 감싸 redux 와 연결한다handleSubmit은 onSubmit prop 으로 들어온 함수를 폼과 연결해준다 (event.preventDefault() 및 폼의 필드들을 serialize 해서 object 로 바꿔 onSubmit 함수의 parameter 로 넘겨준다)말이 좀 어렵다면 Login.js의 submitLoginForm 속 console.log(formData)의 구조를 보자1234&#123; id: 'idValue', password: 'passwordValue'&#125;오 꽤 나이스하다하지만 필드만 덩그라니 있는 경우는 없다 더 업그레이드 해보자 스타일이 필요한 필드보통의 필드들은 label이 들어가 있고, selectBox, checkBox의 경우엔 스타일을 주기위해 대부분 외부 라이브러리를 쓴다이럴 때 Field Component 의 component 속성에 원하는 모양을 만들어서 넣어주면 된다LoginForm12345678910111213141516171819202122232425262728293031323334353637383940414243...const renderInputField = (&#123; input, type, label, placeholder, meta: &#123; touched, error &#125;&#125;) =&gt; &#123; return ( &lt;div&gt; &lt;label&gt;&#123;label&#125;&lt;/label&gt; &lt;input &#123;...input&#125; type=&#123;type&#125; placeholder=&#123;placeholder&#125; /&gt; &#123; touched &amp;&amp; error &amp;&amp; &lt;span className=\"error\"&gt;&#123;error&#125;&lt;/span&gt; &#125; &lt;/div&gt; )&#125;class LoginForm extends Component &#123; render() &#123; const &#123; handleSubmit, pristine, submitting &#125; = this.props return ( &lt;form onSubmit=&#123;handleSubmit&#125;&gt; &lt;Field name=\"id\" type=\"text\" label=\"아이디\" component=&#123;renderInputField&#125; placeholder=\"아이디를 입력하세요\" /&gt; &lt;Field name=\"password\" type=\"password\" label=\"비밀번호\" component=&#123;renderInputField&#125; placeholder=\"비밀번호를 입력하세요\" /&gt; &lt;/form&gt; ) &#125;&#125;renderInputField라는 함수형 컴포넌트를 만들어서 Field.component prop 에 넣긴했는데, div&gt;input을 렌더링 해주는 것만 보이고 엄청난 파라미터들 때문에 정신이 아득할 것이다component prop 에 함수형 컴포넌트를 넣으면 field prop 을 받게 된다여기엔 내려준 prop 뿐 아니라 reduxForm 에서 넣어준 prop 도 존재한다원래 해당 렌더링 컴포넌트는 아래와 같은 모습이다123const renderInputField = field =&gt; &#123; return &lt;div&gt;...&lt;/div&gt;;&#125;;그럼 먼저 reduxForm 에서 넣어준 prop 을 보자field.input: input 은 모든 HTML input attribute 를 가지고 있는게 아니라 다음 몇가지만 갖고 있다checkednameonBluronChangeonDragStartonDroponFocusvaluefield.meta: meta 는 해당 input 의 상태에 관한 데이터가 있다touched: 해당 input 이 한 번이라도 클릭이 되어졌는지valid: 해당 input 값이 valid 한지error: 해당 input 값에 에러가 있으면 error message 가 들어온다… 나머진 문서를 참조하자이제 type, label, placeholder 는 field.input prop 에 없어서 직접 넣어줬고, meta 는 이미 정의되어 있었구나 란 renderInputField 함수의 props 가 보일 것이고 Field Component 의 구조를 마음대로 변경할 수 있게 되었다 동적으로 value 를 바꿔야할 때checkbox, select 의 경우엔 스타일이 들어가면 element 의 onClick 를 잡아서 hidden field 의 데이터를 바꿔줘야한다checkbox 전체 영역을 클릭할 때마다 기존의 값을 toggle 해주는 component 를 만들 수 있다LoginForm1234567891011const renderCheckboxField = (&#123; input, label &#125;) =&gt; &#123; return ( &lt;div onClick=&#123;event =&gt; input.onChange(!input.value)&#125;&gt; &lt;i className=&#123;`fa $&#123;!input.value ? \"fa-square-o\" : \"fa-check-square-o\"&#125;`&#125; /&gt; &lt;label&gt;&#123;label&#125;&lt;/label&gt; &lt;input type=\"hidden\" &#123;...input&#125; /&gt; &lt;/div&gt; );&#125;;value 에 따라서 font-awesome icon이 변경된다함수로 값을 변경해야할 경우가 있을 수도 있다이럴 땐 reduxForm prop 의 change 메소드를 사용하면 된다바꿀 input 의 name 속성과 value 값을 넘겨주자123changeInputValue = (targetInputName, val) =&gt; &#123; this.props.change(targetInputName, val);&#125;; 초기값로그인 폼에는 아이디 저장 기능을 붙히면 폼이 초기화될 때 그 값을 가져와야한다Login1234567891011121314151617181920212223242526...class Login extends Component &#123; state = &#123; userId: '' &#125; componentDidMount() &#123; const userId = localStorage.getItem('userId') this.setState(&#123; userId &#125;) &#125; render() &#123; return ( &lt;LoginForm onSubmit=&#123;this.submitLoginForm&#125; initialValues=&#123;&#123; id: this.state.userId &#125;&#125; /&gt; ) &#125;&#125;Login Component 에는 초기값을 가져와서 initialValues prop 안에 넣어준다LoginForm123456789101112class LoginForm extends Component &#123; render() &#123; return &lt;form&gt;...&lt;/form&gt;; &#125;&#125;export default reduxForm(&#123; form: \"LoginForm\", // 이 값은 LoginForm 컴포넌트가 로드되고 나서 // initialValues가 바뀔 경우 폼 값도 업데이트가 되야되는지의 여부이다 enableReinitialize: true&#125;)(LoginForm);localStorage.userId에 값이 들어있다면 그 값으로 id Field 가 초기화 된다컴포넌트가 로딩되기 전에 값이 정해져있다면 enableReinitialize 옵션이 없어도 되지만, 수정 폼처럼 기존 데이터 fetch 후 또는 componentDidMount 후에 값을 가져온다면 해당 옵션값을 true로 넣어줘야한다 validation여기까지 이해했다면 validation 은 큰 어려움 없이 문서의 예제소스를 참조하면 붙힐 수 있다 여담react 라이브러리들은 읽은 뒤 바로 적용하긴 힘들다고 생각한다 매번 삽질이 필요한듯","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"react","slug":"javascript/react","permalink":"https://gracefullight.dev/categories/javascript/react/"},{"name":"redux-form","slug":"javascript/react/redux-form","permalink":"https://gracefullight.dev/categories/javascript/react/redux-form/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"react","slug":"react","permalink":"https://gracefullight.dev/tags/react/"},{"name":"redux","slug":"redux","permalink":"https://gracefullight.dev/tags/redux/"},{"name":"redux-form","slug":"redux-form","permalink":"https://gracefullight.dev/tags/redux-form/"}]},{"title":"react-intl로 번역 적용하기 (react i18n)","slug":"react-intl로-번역-적용하기-react-i18n","date":"2018-01-15T07:21:41.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/01/15/react-intl로-번역-적용하기-react-i18n/","link":"","permalink":"https://gracefullight.dev/2018/01/15/react-intl%EB%A1%9C-%EB%B2%88%EC%97%AD-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0-react-i18n/","excerpt":"","text":"리액트 앱에서 번역기능을 사용하려면 react-intl 패키지를 사용하면 된다.근데 Documentation을 보면 format 기능들, HOC로 데이터를 넣는 등 여러 기능 덕에 정신이 아득하다step by step으로 간단하게 적용해보자 설치1$ yarn add react-intl 번역 데이터 생성편의상 root에 locale.js로 만들었다. 서비스시엔 locale 폴더에 언어별로 파일을 나눠 관리하자.locale.js1234567891011export default &#123; en: &#123; 'hello': 'Hello' &#125;, ko: &#123; 'hello': '안녕하세요' &#125;, ja: &#123; 'hello': 'こんにちは' &#125;&#125; 연동index.js1234567891011121314151617181920212223import &#123; IntlProvider, addLocaleData &#125; from 'react-intl'// 이 서브 라이브러리들이 내 locale 파일을 사용할 수 있게 해준다import en from 'react-intl/locale-data/en'import ko from 'react-intl/locale-data/ko'import ja from 'react-intl/locale-data/ja'import locale from './locale'addLocaleData([...en, ...ko, ...ja])// 저장되어 있는 언어 데이터를 가져온다const defaultLang = localStorage.getItem('lang') || 'en'ReactDOM.render( &lt;Provider store=&#123;store&#125;&gt; &lt;IntlProvider locale=&#123;defaultLang&#125; messages=&#123;locale[defaultLang]&#125; &gt; &lt;App /&gt; &lt;/IntlProvider&gt; &lt;/Provider&gt;, document.getElementById('root')) 사용1234import &#123; FormattedMessage &#125; from 'react-intl'&lt;FormattedMessage id=\"hello\"/&gt;// 저장되어 있는 언어 값에 따라 Hello, 안녕하세요, こんにちは 중 하나가 보여진다 injectplaceholder 등에서 텍스트만 필요할 때 component를 사용하지않고 다음과 같이 intl을 주입해서 사용한다.1234567891011121314151617181920212223242526import React, &#123; Component &#125; from 'react'import &#123; injectIntl &#125; from 'react-intl'class SignupForm extends Component &#123; render() &#123; const &#123; intl &#125; = this.props return ( &lt;form&gt; &lt;input type=\"text\" name=\"id\" placeholder=&#123; intl.formatMassage(&#123; id: 'hello' &#125;) &#125; /&gt; &lt;/form&gt; ) &#125;&#125;export default injectIntl(SignupForm) childHOC를 사용하지 않을 경우 FormattedMessage의 child로 번역된 문구를 받으면 된다123456789&lt;FormattedMessage id=\"hello\"&gt; &#123;hello =&gt; ( &lt;input type=\"text\" name=\"id\" placeholder=&#123;hello&#125; /&gt; )&#125;&lt;/FormattedMessage&gt; dynamicHello, {Gracefullight} 처럼 동적으로 문구가 변해야할 경우 values prop을 활용하자먼저, locale.js에서 변수가 될 부분을 {}로 감싸준다locale.js1234567891011export default &#123; en: &#123; 'helloUser': 'Hello &#123;user&#125;' &#125;, ko: &#123; 'helloUser': '&#123;user&#125; 안녕하세요' &#125;, ja: &#123; 'helloUser': '&#123;user&#125; こんにちは' &#125;&#125;values 아래 object로 변수 값을 넣어주면 된다123456&lt;FormattedMessage id='helloUser' values=&#123;&#123; user: 'Gracefullight' &#125;&#125;/&gt; 여담mo, po 파일 건들던 시간들이 너무 아깝다","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"react","slug":"javascript/react","permalink":"https://gracefullight.dev/categories/javascript/react/"},{"name":"react-intl","slug":"javascript/react/react-intl","permalink":"https://gracefullight.dev/categories/javascript/react/react-intl/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"react","slug":"react","permalink":"https://gracefullight.dev/tags/react/"},{"name":"react-intl","slug":"react-intl","permalink":"https://gracefullight.dev/tags/react-intl/"}]},{"title":"나를 위한 면접 (Frontend Developer Interview Questions)","slug":"나를-위한-면접-(FE)","date":"2018-01-10T13:32:52.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/01/10/나를-위한-면접-(FE)/","link":"","permalink":"https://gracefullight.dev/2018/01/10/%EB%82%98%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%A9%B4%EC%A0%91-(FE)/","excerpt":"","text":"FE Interview Questions를 아는 만큼 답해보았다지극히 주관적이라 정답이 아닐 수 있습니다 event delegation사용자의 액션에 의해 이벤트 발생 시 이벤트는 document 레벨까지 버블링 되어 올라간다.이 때문에 자식 엘리먼트에서 발생하는 이벤트를 부모 엘리먼트에서도 감지할 수 있다.이러한 동작을 이용해 사용할 수 있는 방법이 event delegation이다.특정 엘리먼트에 하나하나 이벤트를 등록하지 않고 하나의 부모에 등록하여 부모에게 이벤트를 위임하는 방법123456789101112131415161718// 버튼마다 onClick Event Listener 등록document.getElementById(\"btn1\").addEventListener(\"click\", event =&gt; &#123;&#125;);document.getElementById(\"btn2\").addEventListener(\"click\", event =&gt; &#123;&#125;);document.getElementById(\"btn3\").addEventListener(\"click\", event =&gt; &#123;&#125;);// Event Delegationdocument.getElementById(\"div\").addEventListener(\"click\", event =&gt; &#123; switch (event.target.id) &#123; case \"btn1\": break; case \"btn2\": break; case \"btn3\": break; &#125;&#125;); 참고출처 this는 어떻게 작동하는가?Global Context: windowFunction Context: “use strict” ? 실행 시 할당 : windowObject method: 자기 자신 객체Object Prototype Chain: 자기 자신 객체Getter, Setter: get 또는 set 되는 속성 객체생성자: 생성된 자신call, apply: 지정해 주는 객체bind: 바인딩 될 때의 thisDom Event: event.currentTarget === event.target === thisin-line Event: Element 참고출처 prototype 기반 상속은 어떻게 하는가?Object.create로 prototype을 확장하던지 proto로 prototype link를 걸던지 AMD와 CommonJS는 뭐고 어떻게 생각하나?AMD: requireJSCommonJS: NodeJS 방식결국엔 UMD 패턴으로 모듈을 만들어야한다.둘 다 실무에서 쓰려면 번들링이 필요하고, Webpack 쓸 바에 두 개 다 필요없이 import 구문으로 처리하겠다. 다음 코드가 즉시 호출 함수 표현식(IIFE)로 동작하지 않는 이유?Immediately Invoked Function Expression1function foo()&#123; &#125;()함수선언문을 어떻게 실행하냐함수를 괄호로 감싸면 됨 null과 unedefined 그리고 undeclared의 차이점null: 선언되었지만 값 없음undefined: 선언조차 안됨undeclared: 선언문 (var 등) 없이 전역변수로 할당되는 유효범위를 지정하지 않은 건데 린팅에 어긋남 클로져(Closure)는 무엇이며, 어떻게/왜 사용?무엇: 초기화시의 상태를 내부에 가지고 있는 형태의 함수어떻게: return으로 공개할 메소드 또는 데이터를 꺼냄왜: private 기능 구현, for문에서 context 참조 익명함수(anonymous functions)는 주로 어떤 상황에서 사용?함수 표현식 (변수로 함수 선언), callback 당신의 코드를 어떻게 구성하는지?ESLint standard + No semi 호스트 객체 vs 네이티브 객체Host Objects: 사용자에 의해 생성된 객체Native Objects: 브라우저 또는 구동 엔진에 내장된 객체 다음 코드의 차이점?123function Person() &#123;&#125; // 선언문var person = Person(); // 함수 표현식var person = new Person(); // 생성자 .call과 .apply의 차이점?call()은 함수에 전달될 여러 개의 인자를 받는데 비해, apply()는 배열로 된 하나의 인자를 받는다 Function.prototype.bind?호출될 때의 함수의 this 값을 넘겨준 값으로 바인딩 document.write()는 언제 사용?스크립트 심을 때 document.write는 block 되지 않으므로근데 appendChild로 심을 수 있어서 안씀 AJAXXMLHttpRequest 객체를 사용해 비동기 방식으로 서버와 통신을 하는 것 장점화면 전환 없이 특정 영역만 갱신 (업데이트) 가능 단점없다 JSONP vs AJAXJSONP는 스크립트 태그를 심어서 로드될 때 콜백 함수를 호출하는 거고 get만 가능Same origin policy를 벗어날 수 있음 호이스팅자바스크립트 엔진이 실행 컨텍스트를 생성하면서 scope 를 정의 할때코딩 순서에 상관없이 선언부에 대한 처리를 맨 위로 끌어올려 먼저 해석하는 것 Event Bubbling자식 이벤트가 부모로 전달 되는 것event.stopPropagation으로 막을 수 있음 속성(Attribute) vs 요소(property)Attribute: HTML 요소에 추가적인 정보 전달Property: Attribute에 대한 HTML DOM tree에서의 표현 내장된 JavaScript 객체를 확장하는 것이 좋지 않은 이유?그것을 참조한 모든 객체가 확장한 구문을 따라가기 때문에 document load event vs DOMContentLoaded eventdocument.load: DOM 안의 모든 게 로딩이 끝나야 발생 (더 느림)DOMContentLoaded: DOM 초기화시 발생 == vs ===타입 체크 동일출처정책(the same-origin policy)js나 문서가 다른 origin에서 fetch되지 못하게 하는 정책 삼항식(Ternary statement)을 사용하는 이유?if else의 간소화 use strictWhen adding ‘use strict’;, the following cases will throw a SyntaxError before the script is executing:Octal syntax var n = 023;with statementUsing delete on a variable name delete myVariableUsing eval or arguments as variable or function argument nameUsing one of the newly reserved keywords (in prevision for ECMAScript 2015): implements, interface, let, package, private, protected, public, static, and yieldDeclaring function in blocks if (a &lt; b) { function f() {} }Obvious errorsDeclaring twice the same name for a property name in an object literal {a: 1, b: 3, a: 7} This is no longer the case in ECMAScript 2015 (bug 1041128).Declaring two function parameters with the same name function f(a, b, b) {} 참고출처 전역 scope를 사용했을 때 장점어디에서나 접근 가능 단점release 문제 때때로 load event를 사용하는 이유? 단점과 대안은?DOM의 모든 게 로드가 끝난 후에 이벤트를 걸어야할 것이 있을 때 사용 (lazy loading) SPA에서 SEO에 유리하도록 만들기 위한 방법Sitemap, JSON-LD, UA가 Bot일 경우 SSR Promise를 사용해 본 경험?네 Promise vs Callback 장점Chaining, 가독성, 여러 Promise를 한 번에 제어 가능 단점없다 JavaScript를 디버깅할 때 사용하는 도구?VSCode, Chrome Dev Tools 객체 안의 속성과 배열의 아이템을 순회할 때 사용하는 문법?Object: for in hasOwnProperty, Object.keys().forEach, for ofArray: for, Array.forEach, for of mutable object vs immutable objectmutable: 변경 가능immutable: 변경 불가능, Object freeze 또는 Object assign으로 metadata 수정 JavaScript에서 immutable 객체의 예String: 문자열이 생성되면 그 다음에 수정할 수 없음Symbol: 유일한 값 immutability의 장단점? 장점변경점 찾기 및 디버깅이 쉬움 단점mutable한 코드보다 훨씬 느림 자신의 코드에서 불변성(immutability)을 어떻게 달성할 수 있나요?functional programming 또는 immutableJS 동기방식과 비동기 방식 함수의 차이설명 가능 event loopJS에서 사용하는 동시성 처리 모델1234// 현재 아무 메시지도 없다면 새로운 메시지 도착을 동기적으로 기다림while (queue.waitForMessage()) &#123; queue.processNextMessage();&#125; call stack함수 호출시 저장되는 스택, 재귀를 생각하면 됨 task queue비동기 함수가 저장되는 큐, call stack이 비워지면 실행 됨 function foo() {}와 var foo = function() {}에서 foo 의 차이전자는 호이스팅, 후자는 안 됨 let, var, const의 차이점var: function-scoped 로 호이스팅, 재선언 가능let: block-scoped 로 재선언 불가, 재할당 가능const: block-scoped 로 재선언 불가, 재할당 불가 test code를 작성하면서 개발하는 방식의 장단점 장점결과가 나와있고 로직을 맞추면되서 디버깅, 리팩토링이 쉬워지고 유지보수에도 좋음 단점시간 test code를 테스트하는 툴 사용경험Karma, PhantomJS 단위 테스트 vs 기능 테스트unit test: unit 즉 method 별로 테스트functional test: 전체 시스템에서 기능을 테스트, 많은 method와 서비스가 연결되어있음 code style linting tool을 사용했을때 장점?모두가 일관된 스타일로 코딩 가능, 가독성 증가 성능관련 이슈들을 발견하기 위해서 사용하는 방법?실행시간 timestamp 로깅, Chrome Dev Tools Performance 웹사이트 scrolling 성능을 향상시키기 위한 방법?throttle 브라우저의 layout, painting, compositingLayout: 각 element가 차지하는 공간과 배치할 공간을 결정Painting: element를 그리고, element의 모든 시각적 부분을 그리는 작업Compositing: element를 올바른 순서로 화면에 그려 페이지를 렌더링 참고출처 웹사이트의 assets을 여러 도메인으로 서빙했을 때 장점브라우저 마다 다르지만 HTTP1.1에서는 하나의 호스트당 평균 4개의 동시 다운로드만 가능해서, 병렬 처리를 하기 위해 여러 도메인으로 서빙을 했었다 하지만 이젠 http2로 다 해결 가능 참고Why it is better to serve site assets from multiple domains브라우저의 리소스 병렬 다운로드를 가로막는 자바스크립트HTTP/2 소개 #요청 및 응답 다중화Blief history of http URL로 접속했을 때 어떤 플로우로 화면에 웹사이트가 그려지는지 네트워크 관점로컬 DNS에서 URL IP 확인3way handshake로 IP에 TCP 연결 설정 후 HTTP 헤더와 Body 요청 전송응답받은 HTTP 헤더와 Body로 웹사이트 렌더링 Long-Polling과 Websocket, Server-Sent EventLong-Polling: response를 닫지 않고 계속 보내주는 것Websocket: subscribe 후에 양방향으로 메세지 교환Server-Sent Event: Push, HTTP 사용 request headersExpires headers tell the browser whether they should request a specific file from the server or whether they should grab it from the browser’s cache.Date: The date and time that the message was sentThe Age response-header field conveys the sender’s estimate of the amount of time since the response (or its revalidation) was generated at the origin server.The If-Modified-Since request-header field is used with a method to make it conditional: if the requested variant has not been modified since the time specified in this field, an entity will not be returned from the server; instead, a 304 (not modified) response will be returned without any message-body.Do Not Track: disable either its tracking or cross-site user trackingCache-Control: Tells all caching mechanisms from server to client whether they may cache this object. It is measured in secondsTransfer-Encoding: The form of encoding used to safely transfer the entity to the user. Currently defined methods are: chunked, compress, deflate, gzip, identity.ETag: An identifier for a specific version of a resource.X-Frame-Options can be used to indicate whether or not a browser should be allowed to render a page in a frame, iframe or object. 참고출처HTTP Cache 튜토리얼 HTTP MethodsGET: 리소스 요청HEAD: 리소스 요청이나 body가 없음POST: 리소스 생성PUT: 리소스 업데이트PATCH: 리소스 부분 업데이트DELETE: 리소스 삭제OPTIONS: Cross Domain request에서 해당 메소드가 안전한지 확인하기 위해 사용","categories":[{"name":"interview","slug":"interview","permalink":"https://gracefullight.dev/categories/interview/"}],"tags":[{"name":"interview","slug":"interview","permalink":"https://gracefullight.dev/tags/interview/"}]},{"title":"phantomjs Can't find variable Promise 오류","slug":"phantomjs-Can-t-find-variable-Promise-오류","date":"2018-01-10T09:40:56.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/01/10/phantomjs-Can-t-find-variable-Promise-오류/","link":"","permalink":"https://gracefullight.dev/2018/01/10/phantomjs-Can-t-find-variable-Promise-%EC%98%A4%EB%A5%98/","excerpt":"","text":"원인phantomjs에서 Promise를 지원하지 않기 때문이다. 해결spec html문서에 polyfill을 추가하자1&lt;script src=\"https://cdn.jsdelivr.net/npm/promise-polyfill\"&gt;&lt;/script&gt;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"},{"name":"phantomjs","slug":"javascript/nodejs/phantomjs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/phantomjs/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"phantomjs","slug":"phantomjs","permalink":"https://gracefullight.dev/tags/phantomjs/"}]},{"title":"나를 위한 면접 (ALL)","slug":"나를-위한-면접-(ALL)","date":"2018-01-09T13:13:40.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2018/01/09/나를-위한-면접-(ALL)/","link":"","permalink":"https://gracefullight.dev/2018/01/09/%EB%82%98%EB%A5%BC-%EC%9C%84%ED%95%9C-%EB%A9%B4%EC%A0%91-(ALL)/","excerpt":"","text":"실무에 치이느라 기본적인 걸 까먹을까봐 정리해보자정보처리 에서 컴퓨터 기초를 보면 되고.지극히 주관적이라 정답이 아닐 수 있습니다 수학 미적분편미분까진 안물어보더라 베이지안 확률사후확률 = 가능도 * 사전확률 / 증거12// 붉은 점이 얼굴에 보일 때 수두 환자일 확률은 어떻게 구할까?P(수두 | 붉은점) = P(붉은 점 | 수두) * P(수두) / P(붉은점) 자료구조 B Treem-원 트리의 단점임 한쪽으로 편중된 트리를 생성되는 경우를 보완하고자 루트노드로부터 리프노드의 레벨을 같도록 유지한 트리BASIS FOR COMPARISONB-TREEBINARY TREEEssential constraintA node can have at max M number of child nodes(where M is the order of the tree).A node can have at max 2 number of subtrees.UsedIt is used when data is stored on disk.It is used when records and data are stored in RAM.Height of the treelogM N (where m is the order of the M-way tree)log2 NApplicationCode indexing data structure in many DBMS.Code optimization, Huffman coding, etc.space complexity B-tree is O(n).Insertion and deletion time complexity is O(logn).출처 B+ TreeB+은 index node와 data node로 구성출처 B* TreeB-tree의 경우에 각 노드가 최소한 반 이상 차 있어야 하는 조건을 각 노드가 최소한 2/3이상 차있어야 한다로 변경하면 이것이 B*tree이다공간 활용도를 높일 수 있다.출처 Binary Tree모든 노드의 차수가 2 이상을 넘지 않는 트리를 말한다, 왼쪽자식노드는 부모노드의 값보다 작이야하며 오른쪽 자식노드는 부모노드의 값보다 커야한다. Binary Search Tree이진탐색(binary search)과 연결리스트(linked list)를 결합한 자료구조의 일종입니다. 이진탐색의 효율적인 탐색 능력을 유지하면서도, 빈번한 자료 입력과 삭제를 가능하게끔 고안됐습니다.모든 원소는 서로 다른 유일한 키를 가짐왼쪽 서브트리에 있는 원소들의 값은 그 루트의 값보다 작음오른쪽 서브트리에 있는 원소의 값들은 그 루트의 값보다 큼왼쪽 서브트리와 오른쪽 서브트리도 이진 탐색 트리임O(n), 완전 이진 트리에 가까울 수록 O(log2(n))출처 Insertion Sort앞에서부터 하나씩 비교하여 위치를 삽입O(n^2)123456789101112131415function insertionSort(unsortedList) &#123; var len = unsortedList.length; for (var i = 1; i &lt; len; i++) &#123; // Copy of the current element. var tmp = unsortedList[i]; // Check through the sorted part and compare with the number in tmp. If large, shift the number for (var j = i - 1; j &gt;= 0 &amp;&amp; (unsortedList[j] &gt; tmp); j--) &#123; // Shift the number unsortedList[j + 1] = unsortedList[j]; &#125; // Insert the copied number at the correct position // in sorted part. unsortedList[j + 1] = tmp; &#125;&#125;출처 Selection Sort하나씩 뒤로 비교하여 최소값을 맨 앞으로 삽입O(n^2)1234567891011121314151617181920212223function selectionSort(items) &#123; var length = items.length; for (var i = 0; i &lt; length - 1; i++) &#123; // Number of passes // min holds the current minimum number position for each pass; i holds the Initial min number var min = i; // Note that j = i + 1 as we only need to go through unsorted array for (var j = i + 1; j &lt; length; j++) &#123; // Compare the numbers if (items[j] &lt; items[min]) &#123; // Change the current min number position if a smaller num is found min = j; &#125; &#125; if (min != i) &#123; // After each pass, if the current min num != initial min num, exchange the position. // Swap the numbers var tmp = items[i]; items[i] = items[min]; items[min] = tmp; &#125; &#125;&#125;출처 Quick Sortpivot을 하나 뽑는다 보통 list.length / 2 -1 을 선택한다.pivot 앞에는 pivot보다 작게, pivot 뒤에는 pivot보다 크게 값을 바꿔치고 재귀를 돌린다최악 O(n^2), 평균 O(nlogn)123456789101112131415161718def quicksort(x): if len(x) &lt;= 1: return x # // 연산자는 나누고 소숫점을 버림 pivot = x[len(x) // 2] less = [] more = [] equal = [] for a in x: if a &lt; pivot: less.append(a) elif a &gt; pivot: more.append(a) else: equal.append(a) return quicksort(less) + equal + quicksort(more) 참고퀵 정렬 List Linked List List vs Linked List리스트가 대부분 좋다연결 리스트는 중간에 삽입 삭제시 좋다리스트는 끝에 넣을 떄 좋다연결 리스트는 검색시 링크를 따라가므로 비효율적이다.리스트가 순차라 검색시에 좋다.공간의 효율성은 연결 리스트효율성 비교123456789101112131415161718192021222324252627282930function LinkedList() &#123; this.head = null;&#125;LinkedList.prototype.push = function (val) &#123; var node = &#123; value: val, next: null &#125; if (!this.head) &#123; this.head = node; &#125; else &#123; current = this.head; while (current.next) &#123; current = current.next; &#125; current.next = node; &#125;&#125;var sll = new LinkedList();sll.push(2);sll.push(3);sll.push(4);// check values by traversing LinkedListsll.head; // Object &#123;data: 2, next: Object&#125;sll.head.next; // Object &#123;data: 3, next: Object&#125;sll.head.next.next; // Object &#123;data: 4, next: null&#125;출처 Graph그래프(Graph)는 연결되어 있는 원소간의 관계를 표현하는 자료구조이다. 나와 연관된 인간 관계를 나타내는 인맥 지도, 수도 배관에 대한 배수 시스템, 물질의 분자 구조 등은 연결 구조가 다양하기 때문에 선형 자료 구조나 트리로는 표현 할 수가 없다.그래프는 연결할 객체를 나타내는 정점(vertex)와 객체를 연결하는 간선(edge)의 집합으로 구성된다. 그래프 G를 _G=(V,E)_로 정의하는데, V는 그래프에 있는 정점들의 집합을 의미하고, E는 정점을 연결하는 간선들의 집합을 의미한다.출처123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293// Implement a Graph// basic operations:// - add vertex (node)// - add edge (node -&gt; node)function GraphNode(val) &#123; this.val = val; this.edges = &#123;&#125;;&#125;function Graph() &#123; this.vertices = &#123;&#125;;&#125;// O(1) operationGraph.prototype.addVertex = function(val) &#123; // add vertex only if it does not exist. if (!this.vertices[val]) &#123; this.vertices[val] = new GraphNode(val); &#125;&#125;;// O(E) operation - edgesGraph.prototype.removeVertex = function(val) &#123; if (this.vertices[val]) &#123; // once you remove a vertex, you need to remove all edges pointing // to the vertex. delete this.vertices[val]; Object.keys(this.vertices).forEach(function(key, index) &#123; if (this.vertices[key].edges[val]) &#123; delete this.vertices[key].edges[val]; &#125; &#125;.bind(this)); &#125;&#125;;// O(1) operationGraph.prototype.getVertex = function(val) &#123; return this.vertices[val];&#125;;// O(1) operationGraph.prototype.addEdge = function(start, end) &#123; // check to see if vertices exists. // if it exists, set the edges and be done. if (this.vertices[start] &amp;&amp; this.vertices[end]) &#123; // check to see if edge exists, if it does, increment it's weight if (this.vertices[start].edges[end]) &#123; this.vertices[start].edges[end].weight += 1; &#125; else &#123; // edge does not exist, set weight to 1. this.vertices[start].edges[end] = &#123; weight: 1 &#125;; &#125; &#125;&#125;;// O(1) operationGraph.prototype.removeEdge = function(start, end) &#123; if (this.vertices[start] &amp;&amp; this.vertices[end]) &#123; if (this.vertices[start].edges[end]) &#123; delete this.vertices[start].edges[end]; &#125; &#125;&#125;;// O(1) operationGraph.prototype.getEdge = function(start, end) &#123; return this.vertices[start].edges[end] || null;&#125;;Graph.prototype.neighbors = function(val) &#123; return this.vertices[val] ? this.vertices[val].edges : null;&#125;;var graph = new Graph();graph.addVertex(5);graph.addVertex(2);graph.addVertex(6);graph.addVertex(7);graph.addEdge(2, 5);graph.addEdge(6, 7);graph.addEdge(7, 5);console.log(graph.getEdge(2, 5));console.log(graph.getEdge(6, 7));graph.removeVertex(5);console.log(graph.getEdge(2, 5));console.log(graph.neighbors(6));console.log(graph.neighbors(5));출처 알고리즘 시간복잡도알고리즘이 문제를 해결하는 데에 얼마나 걸리는 지를 분석하는 것프로그램을 실행시켜 완료하는데 걸리는 시간을 의미 빅오표기법실행 시간은 최대한 이만큼 커지지만 더 천천히 커질 수도 있다는 의미인 점근적 표기법 형태를 사용하는 것 (점근 표기법)최악의 경우를 표기하는 방법 빅오에서 n이 의미하는것입력 데이터 개수 최단거리 알고리즘다익스트라 알고리즘A* 알고리즘 슬라이딩 윈도우이 문제가 도움 될 듯 데이터베이스 정규화관계형 데이터베이스의 설계에서 중복을 최소화하게 데이터를 구조화하는 프로세스 목적이상이 있는 관계를 재구성하여 작고 잘 조직된 관계를 생성하는 것에 있다. 일반적으로 정규화란 크고, 제대로 조직되지 않은 테이블들과 관계들을 작고 잘 조직된 테이블과 관계들로 나누는 것을 포함한다. 비정규화과도한 정규화로 인해서 테이블의 수가 증가하게 되면, 다수의 JOIN이 발생함에 따라서 성능 저하가 발생할 수 있다. 보통의 경우 정규화 과정을 모두 거친 다음 마지막 단계에서 비정규화를 실시한다. 단, 테이블을 합치는 것만이 비정규화는 아니다. 인덱싱 자료구조12345B-Tree 알고리즘은 가장 일반적으로 사용되는 인덱스 알고리즘으로서, 상당히 오래전에 도입된 알고리즘이며 그만큼 성숙해진 상태입니다. B-Tree 인덱스는 칼럼의 값을 변형하지 않고, 원래의 값을 이용해 인덱싱하는 알고리즘 입니다.Hash 인덱스 알고리즘은 컬럼의 값으로 해시 값을 계산해서 인덱싱하는 알고리즘으로, 매우 빠른 검색을 지원합니다. 하지만 값을 변형해서 인덱싱하므로, 전방(Prefix) 일치와 같이 값의 일부만 검색하고자 할 때는 해시 인덱스를 사용할 수 없습니다. Hash 인덱스는 주로 메모리 기반의 데이터베이스에서 많이 사용합니다.Fractal-Tree 알고리즘은 B-Tree의 단점을 보완하기 위해 고안된 알고리즘입니다. 값을 변형하지 않고 인덱싱하며 범용적인 목적으로 사용할 수 있다는 측면에서 B-Tree와 거의 비슷하지만 데이터가 저장되거나 삭제될 때 처리 비용을 상당히 줄일 수 있게 설계된 것이 특징입니다. 아직 B-Tree 알고리즘만큼 안정적이고 성숙되진 않았지만 아마도 조만간 B-Tree 인덱스의 상당 부분을 대체할 수 있지 않을까 생각합니다.출처 캐싱시 자료구조Hash Table and a Linked List 디비 클러스터링개념 참조운영 참조 Isolation levelRead UncommittedRead CommittedRepeatable ReadSerializable개념 참조이하 참조 Read Uncommitted Isolation LevelSELECT 문장을 수행하는 경우 해당 데이터에 Shared Lock이 걸리지 않는 Level입니다. 따라서, 어떤 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 B라는 아직 완료되지 않은(Uncommitted 혹은 Dirty) 데이터 B를 읽을 수 있습니다. Read Committed Isolation LevelSQL Server가 Default로 사용하는 Isolation Level입니다. 이 Level에선 SELECT 문장이 수행되는 동안 해당 데이터에 Shared Lock이 걸립니다. 그러므로, 어떠한 사용자가 A라는 데이터를 B라는 데이터로 변경하는 동안 다른 사용자는 해당 데이터에 접근할 수 없습니다. Repeatable Read Isolation Level트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정이 불가능합니다. 가령, Select col1 from A where col1 between 1 and 10을 수행하였고 이 범위에 해당하는 데이터가 2건이 있는 경우(col1=1과 5) 다른 사용자가 col1이 1이나 5인 Row에 대한 UPDATE이 불가능합니다. 하지만, col1이 1과 5를 제외한 나머지 이 범위에 해당하는 Row를 INSERT하는 것이 가능합니다. Serializable Isolation Level트랜잭션이 완료될 때까지 SELECT 문장이 사용하는 모든 데이터에 Shared Lock이 걸리므로 다른 사용자는 그 영역에 해당되는 데이터에 대한 수정 및 입력이 불가능합니다. 예를 들어, Repeatable Read의 경우 1에서 10 사이에 해당되는 데이터에 대한 UPADTE이 가능하였습니다. 하지만 이 Level에서는 UPDATE 작업도 허용하지 않습니다. ACID원자성, 일관성, 독립성, 영속성 Atomicity트랜잭션 내의 명령은 반드시 완벽히 수행모두가 수행되거나 오류시 전부가 취소되어야함 ConsistencyDB의 전체 요소는 트랜잭션 수행 전과 트랜잭션 수행 완료 후의 상태가 같아야함 (질량 보존 법칙처럼) Isolation둘 이상의 트랜잭션이 병행 실행되는 경우 다른 트랜잭션 연산이 끼어들 수 없음수행 중인 트랜잭션은 완료될 때 까지 다른 트랜잭션에서 참조 불가. Durability시스템이 고장나도 영구적으로 반영 CRUDCreate(생성), Read(읽기), Update(갱신), Delete(삭제) InnoDB와 MyISAM의 차이 참고MyISAM vs InnoDB Storage EngineMySQL Storage Engine의 양대산맥! MyISAM vs InnoDB MariaDB가 MySQL보다 나은점많은 스토리지 엔진속도 개선확장성과 새로운 기능들 (regexp_replace 등)오픈 소스 및 활발한 contribute 참고공식 홈페이지mysql-에서-mariadb-로-마이그레이션-해야할-10가지-이유 증분 백업정해진 시간을 기준으로 그 이후에 변경된 파일만을 백업하는 방식 서버 서버 로드밸런싱설명할 수 있음 이미지 클러스터링k-means(피벗 추출 후 2진수 비교인데 아직 이해하기가 힘들다, 18년 말에는 딥러닝을 파보자!) Build Process 설명 Deploy Server Git Flow브랜치 관리 전략feature: develop에서 분기 후 기능 개발 후 develop으로develop: 개발 브랜치release: master로의 merge를 위한 준비hotfix: master의 버그 픽스 후 develop과 master로 빠른 수정master: 프로덕션 브랜치 참고Git flow, GitHub flow, GitLab flow WAS 세팅 및 튜닝 프론트앤드 Virtual DOM123456789DOM 조작의 실제 문제는 각 조작이 레이아웃 변화, 트리 변화와 렌더링을 일으킨다는겁니다.Virtual DOM 은 변화가 일어나면 그걸 오프라인 DOM 트리에 적용시키죠. 이 DOM 트리는 렌더링도 되지 않기때문에 연산 비용이 적어요. 연산이 끝나고나면 그 최종적인 변화를 실제 DOM 에 던져주는거에요. 딱 한번만 한는거에요.사실, 이 과정은 Virtual DOM 이 없이도 이뤄질수 있어요. 그냥, 변화가 있을 때, 그 변화를 묶어서 DOM fragment 에 적용한 다음에 기존 DOM 에 던져주면 돼요.그러면, Virtual DOM 이 해결 하려고 하는건 무엇이냐? 그 DOM fragment를 관리하는 과정을 수동으로 하나하나 작업 할 필요 없이, 자동화하고 추상화하는거에요. 그 뿐만 아니라, 만약에 이 작업을 여러분들이 직접 한다면, 기존 값 중 어떤게 바뀌었고 어떤게 바뀌지 않았는지 계속 파악하고 있어야하는데 (그렇지 않으면 수정 할 필요가 없는 DOM 트리도 업데이트를 하게 될 수도 있으니까요), 이것도 Virtual DOM 이 이걸 자동으로 해주는거에요. 어떤게 바뀌었는지 , 어떤게 바뀌지 않았는지 알아내주죠.마지막으로, DOM 관리를 Virtual DOM 이 하도록 함으로써, 컴포넌트가 DOM 조작 요청을 할 때 다른 컴포넌트들과 상호작용을 하지 않아도 되고, 특정 DOM 을 조작할 것 이라던지, 이미 조작했다던지에 대한 정보를 공유 할 필요가 없습니다. 즉, 각 변화들의 동기화 작업을 거치지 않으면서도 모든 작업을 하나로 묶어줄 수 있다는거죠.출처 ES6 SEO Angular React Vue","categories":[{"name":"interview","slug":"interview","permalink":"https://gracefullight.dev/categories/interview/"}],"tags":[{"name":"interview","slug":"interview","permalink":"https://gracefullight.dev/tags/interview/"}]},{"title":"Window에서 aws cli 사용시 bad interperter 오류","slug":"Window에서-aws-cli-사용시-bad-interperter-오류","date":"2018-01-09T03:10:59.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/01/09/Window에서-aws-cli-사용시-bad-interperter-오류/","link":"","permalink":"https://gracefullight.dev/2018/01/09/Window%EC%97%90%EC%84%9C-aws-cli-%EC%82%AC%EC%9A%A9%EC%8B%9C-bad-interperter-%EC%98%A4%EB%A5%98/","excerpt":"","text":"git bash에서 aws cli 명령어를 실행시에 c:\\Program Files… bad interpreter 오류가 나오면서 실행이 안 될 때는 다음과 같이 하면 된다. 해결~/.bash_profile 에 aws alias를 추가한다.12345$ vi ~/.bash_profile# aws script 경로를 강제로 지정한다alias aws='python \"C:\\Program Files\\Python\\Scripts\\aws\"'# 추가 후 저장$ source ~/.bash_profile","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"aws","slug":"server/aws","permalink":"https://gracefullight.dev/categories/server/aws/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"aws","slug":"aws","permalink":"https://gracefullight.dev/tags/aws/"}]},{"title":"Cloudfront 캐시 지우기","slug":"Cloudfront-캐시-지우기","date":"2018-01-05T04:41:12.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2018/01/05/Cloudfront-캐시-지우기/","link":"","permalink":"https://gracefullight.dev/2018/01/05/Cloudfront-%EC%BA%90%EC%8B%9C-%EC%A7%80%EC%9A%B0%EA%B8%B0/","excerpt":"","text":"클라우드프론트로 static website hosting 을 할 경우에 삭제된 s3 의 파일이 노출되는 경우가 있다.캐싱처리되어서 보이는 현상인데 다음과 같이 해결하면 된다. 해결Invalidate 기능을 사용해서 캐시를 지워버리자.Cloudfront Distributions &gt; ID 클릭 &gt; Invalidations 에서 Create Invalidation 버튼을 누른다.Object Paths에 캐시를 지울 경로를 입력한다.예를 들어 assets/js 하위의 소스 맵 파일만 지운다면 다음과 같다.1/assets/js/*.map입력 후에 Invalidate 버튼을 누르면 5~10 분 안에 리스트의 Status 가 Completed 로 변하고 기존 캐시가 사라진다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"aws","slug":"server/aws","permalink":"https://gracefullight.dev/categories/server/aws/"},{"name":"cloudfront","slug":"server/aws/cloudfront","permalink":"https://gracefullight.dev/categories/server/aws/cloudfront/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"aws","slug":"aws","permalink":"https://gracefullight.dev/tags/aws/"},{"name":"cloudfront","slug":"cloudfront","permalink":"https://gracefullight.dev/tags/cloudfront/"}]},{"title":"pm2 앱에서 git hook시에 nginx 502 gateway timeout 오류","slug":"pm2-앱에서-git-hook시에-nginx-502-gateway-timeout-오류","date":"2018-01-04T01:19:13.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/01/04/pm2-앱에서-git-hook시에-nginx-502-gateway-timeout-오류/","link":"","permalink":"https://gracefullight.dev/2018/01/04/pm2-%EC%95%B1%EC%97%90%EC%84%9C-git-hook%EC%8B%9C%EC%97%90-nginx-502-gateway-timeout-%EC%98%A4%EB%A5%98/","excerpt":"","text":"원인git pull을 hook으로 실행하는데 계속 nginx 502 gateway timeout 오류가 발생해 pm2 logs 앱 또는 nginx log를 계속 추적해도 별다른 에러 로그가 없었다. (exec: Interal Server error 라고만 적혀있었다.)삽질 끝에 watch 속성을 사용하고 있는게 문제였다. 해결ecosystem.config.js123456789101112131415module.exports = &#123; apps: [ &#123; name: \"server\", script: \"server.js\", env_production: &#123; NODE_ENV: \"production\" &#125;, watch: true, ignore_watch: [\"node_modules\", \".git\", \"yarn.lock\", \"package-lock.json\"], exec_mode: \"cluster\", instances: \"max\" &#125; ]&#125;;ignore_watch 속성에 .git 폴더와 다른 폴더들이 제대로 예외처리 되었는지 확인해보자.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"},{"name":"pm2","slug":"javascript/nodejs/pm2","permalink":"https://gracefullight.dev/categories/javascript/nodejs/pm2/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"nginx","slug":"nginx","permalink":"https://gracefullight.dev/tags/nginx/"},{"name":"pm2","slug":"pm2","permalink":"https://gracefullight.dev/tags/pm2/"}]},{"title":"nginx에 letsencrypt 인증서로 https 가장 빨리 적용하기","slug":"nginx-letsencrypt-fastest-way","date":"2018-01-03T04:29:33.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/01/03/nginx-letsencrypt-fastest-way/","link":"","permalink":"https://gracefullight.dev/2018/01/03/nginx-letsencrypt-fastest-way/","excerpt":"","text":"centos7 기준 nginx 설치1234567891011121314151617181920$ vi /etc/yum.repos.d/nginx.repo[nginx]name=nginx repobaseurl=http://nginx.org/packages/centos/7/$basearch/gpgcheck=0enabled=1$ yum makecache$ yum install -y nginx$ vi /etc/nginx/conf.d/default.conf# server_name에 도메인 연결# 문법 체크$ nginx -t# nginx 시작$ systemctl enable nginx$ systemctl start nginx certbot 설치12345$ yum install -y epel-release$ yum install -y certbot-nginx# 인증$ certbot --nginx -d my.domain.com ssl nginx 설정기존 포스트 nginx 연동 탭 참조 renew 설정12345$ crontab -e1 0 1 * * certbot renew --nginx$ systemctl restart crondsystemctl restart nginx 하면 완료","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"nginx","slug":"server/nginx","permalink":"https://gracefullight.dev/categories/server/nginx/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"nginx","slug":"nginx","permalink":"https://gracefullight.dev/tags/nginx/"},{"name":"letsencrypt","slug":"letsencrypt","permalink":"https://gracefullight.dev/tags/letsencrypt/"}]},{"title":"리액트 네이티브 윈도우 네트워크 설정 (react-native)","slug":"react-native-windows-network-setting","date":"2018-01-01T14:50:31.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2018/01/01/react-native-windows-network-setting/","link":"","permalink":"https://gracefullight.dev/2018/01/01/react-native-windows-network-setting/","excerpt":"","text":"리액트 네이티브로 개발한 앱을 Expo로 구동 중 network response timed out 에러 메세지가 보인다면 다음과 같이 해결하면 된다. 방화벽인바운드로 19000, 19001 포트를 열어줘야한다.방화벽 &gt; 고급 설정 &gt; 인바운드 규칙 &gt; 새 규칙 &gt; 포트 에서 아래와 같이 설정해주고 이름은 react-native-expo 등 원하는 이름으로 규칙을 생성하자. Hostname 설정 아이피 확인ipconfig로 현재 Wifi가 설정된 내부 아이피 주소를 확인한다.123456무선 LAN 어댑터 Wi-Fi: 연결별 DNS 접미사. . . . : 링크-로컬 IPv6 주소 . . . . : IPv4 주소 . . . . . . . . . : 192.168.0.7 서브넷 마스크 . . . . . . . : 255.255.255.0 기본 게이트웨이 . . . . . . : 192.168.0.1192.168.0.7 을 기억해 놓자. 설정 추가REACT_NATIVE_PACKAGER_HOSTNAME 환경 변수를 설정해줘야한다.Git Bash 환경에서는 다음과 같다.1export REACT_NATIVE_PACKAGER_HOSTNAME=192.168.0.7 실행yarn start 후에 Expo 앱으로 QRCode를 찍으면 정상적으로 실행이 가능하다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"react","slug":"javascript/react","permalink":"https://gracefullight.dev/categories/javascript/react/"},{"name":"react-native","slug":"javascript/react/react-native","permalink":"https://gracefullight.dev/categories/javascript/react/react-native/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"react","slug":"react","permalink":"https://gracefullight.dev/tags/react/"},{"name":"react-native","slug":"react-native","permalink":"https://gracefullight.dev/tags/react-native/"}]},{"title":"utf8 charset에서 emoji 필터링하기","slug":"utf8-charset에서-emoji-필터링","date":"2017-12-27T04:05:20.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/12/27/utf8-charset에서-emoji-필터링/","link":"","permalink":"https://gracefullight.dev/2017/12/27/utf8-charset%EC%97%90%EC%84%9C-emoji-%ED%95%84%ED%84%B0%EB%A7%81/","excerpt":"","text":"개요utf8 charset 에서는 이모지를 처리할 수 없다.utf8mb4 언어셋 소개 및 표현범위 포스팅에 따르면 이모지가 mysql 또는 maria 의 utf8 셋의 가변공간을 사용하려 들려 하는 문제인데, utf8mb4 셋으로 변경하면 해결 된다.mysql 이거나 maria 의 charset 을 변경하기 힘들 때 text 를 모두 replace 치면 된다. 시작해보자 phpwriting a simple removeEmoji function stackoverflow 글에 좋은 함수가 있다. 소스123456789101112131415161718192021222324252627282930313233&lt;?php// https://stackoverflow.com/questions/12807176/php-writing-a-simple-removeemoji-functionfunction removeEmoji($text) &#123; $clean_text = \"\"; // Match Emoticons $regexEmoticons = '/[\\x&#123;1F600&#125;-\\x&#123;1F64F&#125;]/u'; $clean_text = preg_replace($regexEmoticons, '', $text); // Match Miscellaneous Symbols and Pictographs $regexSymbols = '/[\\x&#123;1F300&#125;-\\x&#123;1F5FF&#125;]/u'; $clean_text = preg_replace($regexSymbols, '', $clean_text); // Match Transport And Map Symbols $regexTransport = '/[\\x&#123;1F680&#125;-\\x&#123;1F6FF&#125;]/u'; $clean_text = preg_replace($regexTransport, '', $clean_text); // Match Miscellaneous Symbols $regexMisc = '/[\\x&#123;2600&#125;-\\x&#123;26FF&#125;]/u'; $clean_text = preg_replace($regexMisc, '', $clean_text); // Match Dingbats $regexDingbats = '/[\\x&#123;2700&#125;-\\x&#123;27BF&#125;]/u'; $clean_text = preg_replace($regexDingbats, '', $clean_text); // Match Flags $regexDingbats = '/[\\x&#123;1F1E6&#125;-\\x&#123;1F1FF&#125;]/u'; $clean_text = preg_replace($regexDingbats, '', $clean_text); // Others $regexDingbats = '/[\\x&#123;1F910&#125;-\\x&#123;1F95E&#125;]/u'; $clean_text = preg_replace($regexDingbats, '', $clean_text); $regexDingbats = '/[\\x&#123;1F980&#125;-\\x&#123;1F991&#125;]/u'; $clean_text = preg_replace($regexDingbats, '', $clean_text); $regexDingbats = '/[\\x&#123;1F9C0&#125;]/u'; $clean_text = preg_replace($regexDingbats, '', $clean_text); $regexDingbats = '/[\\x&#123;1F9F9&#125;]/u'; $clean_text = preg_replace($regexDingbats, '', $clean_text); return $clean_text;&#125;12345&lt;?php$textWithEmoji = 'thumbs up👍👍';$text = removeEmoji($textWithEmoji);// text =&gt; thumbs up nodeemoji-regex 라이브러리를 쓰면 된다.1$ yarn add emoji-regex 소스1234567const emojiRegex = require(\"emoji-regex\")// const regex = emojiRegex()const textWithEmoji = \"thumbs up👍👍\"const text = textWithEmoji.replace(emojiRegex(), \"\")// text =&gt; thumbs up 여담이모지처리 (붙히고 제거하고), linkify 를 합친 통합 모듈이 있다면 다운로드 수가 좀 될 것 같은데.","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"}]},{"title":"Docker로 스웨거 설치 후 테마 설정하기 (swagger)","slug":"Docker로-Swagger-설치-후-테마-설정하기","date":"2017-12-26T13:03:44.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/12/26/Docker로-Swagger-설치-후-테마-설정하기/","link":"","permalink":"https://gracefullight.dev/2017/12/26/Docker%EB%A1%9C-Swagger-%EC%84%A4%EC%B9%98-%ED%9B%84-%ED%85%8C%EB%A7%88-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0/","excerpt":"","text":"Swagger UI와 Swagger Editor를 Docker 로 띄워서 빠르게 사용해보자.Swagger Hub에서 작업하는건 한글 입력이 잘 되지 않는 경우가 있었고 OAS3를 사용할 겸 설치하는 게 편하다. 설치설치는 서버 하나만 있으면 충분하다. Editor12345$ docker run -d \\ -p 7000:8080 \\ --restart always \\ --name swagger-editor \\ swaggerapi/swagger-editor UIUI 에서는 API 문서를 상대경로로 사용하기 위해 볼륨 마운트를 했다.Docker for Windows에서 c 드라이브를 마운트하기 위해서는 아래처럼 //c/path 로 접근하면 된다.123456$ docker run -d \\ -p 9010:8080 \\ -v //c/swagger-spec:/usr/share/nginx/html/spec \\ --restart always \\ --name swagger-ui \\ swaggerapi/swagger-ui 테마 추가테마는 나이스한 라이브러리를 사용하자.두 컨테이너 모두 /usr/share/nginx/html/ 경로의 index.html을 열어 head 안에 넣어주면 된다.docker exec로 쉘에 접근하는 건 다 하시리라 믿고 다만, 컨테이너에 bash 쉘이 없기에 기본 sh 쉘로 접근하면 된다.index.html1&lt;link rel=\"stylesheet\" href=\"https://unpkg.com/swagger-ui-themes@3.0.0/themes/3.x/theme-material.css\" /&gt; 여담스웨거에 side menu 가 있는 버전이나 라이브러리가 있으면 좋을텐데, 누가 만들었을 것 같은데 아직 못 찾았다.","categories":[{"name":"swagger","slug":"swagger","permalink":"https://gracefullight.dev/categories/swagger/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"swagger","slug":"swagger","permalink":"https://gracefullight.dev/tags/swagger/"}]},{"title":"PWA - 서비스 워커 웹 캐싱 (Web Caching)","slug":"PWA-ServiceWorker-Web-Caching","date":"2017-12-22T11:53:41.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/12/22/PWA-ServiceWorker-Web-Caching/","link":"","permalink":"https://gracefullight.dev/2017/12/22/PWA-ServiceWorker-Web-Caching/","excerpt":"","text":"개요Progressive Web App의 시대가 왔다.Client단에서 모든 static 파일을 브라우저에 캐시를 할 수 있고 웹을 앱처럼 오프라인에서 작업하게 할 수 있다.그 첫번째로 캐싱에 대해 알아보자. 준비Promise, Fetch, Worker 및 Javascript 의 실행 구조, DOM 에 대한 사전지식이 필히 있어야 한다.HTTP Cache 를 걸어봤다면 이해가 쉬울 듯 싶다. ServiceWorker서비스 워커는 브라우저가 백그라운드에서 실행하는 스크립트이며, 클라이언트에 설치되는 프록시다.이 개념은 중요해서 외워야한다. 브라우저 백그라운드에서 네트워크를 가로채는 Thread 라고 보면 된다.웹 캐싱 뿐만 아니라 백그라운드 동기화, 웹 푸쉬 등의 기능을 처리할 수 있다. 궁금하다면 여기를 들어가보자. (포스팅을 다 읽고 들어가보는 걸 추천한다.)웹 캐싱은 CacheStorage를 사용한다. Sqlite 같은 클라이언트 데이터베이스인데, Key:value 로 구성된 데이터베이스라고 보면 된다. 주의https 환경 또는 localhost 도메인에서만 이 기능을 사용할 수 있다.브라우저별 지원상황은 다음과 같다 1803기준 Safari에도 Shipped가 되었다!1712 기준 Safari가 아직도 Developement 상태인게 조금 아쉽다 세팅sw.js란 파일을 public폴더(index.html이 있는)에 생성하자.그리고 메인 script파일에 다음과 같이 service-worker를 불러오는 구문을 추가한다.123456789101112131415// navigator (브라우저)에 serviceWorker 기능이 있는지 확인if (\"serviceWorker\" in navigator) &#123; // 서비스워커 설치시 DOM 블로킹을 막아준다. window.addEventListener(\"load\", function() &#123; // 서비스워커를 register 하면 promise를 반환한다. navigator.serviceWorker .register(\"/sw.js\") .then(() =&gt; &#123; console.log(\"서비스 워커가 등록되었다.\"); &#125;) .catch(error =&gt; &#123; console.log(error); &#125;); &#125;);&#125;개발자도구를 열고 Application &gt; ServiceWorkers 탭으로 가면 설치가 된 것을 확인할 수 있다.이렇게 뜨면 설치된 것이다. Basic서비스워커에서는 self 키워드로 자기 자신을 접근할 수 있다. 몇 가지 static 파일들을 캐싱처리 해보자.모던 브라우저에서만 지원이 되므로 arrow function을 사용해도 된다.sw.js1234567891011121314151617181920212223242526var PRE_CACHE_NAME = \"캐시-스토리지1\";// 캐시하고 싶은 리소스var urlsToCache = [ \"/public/image/image1.png\", \"/public/css/font-awesome.min.css\"];// 서비스워커가 설치될 때self.addEventListener(\"install\", event =&gt; &#123; // 캐시 등록 이벤트가 끝날 때까지 기다려 event.waitUntil( // '캐시-스토리지1'을 연다. // @return &#123;Promise&#125; 연결된 Cache Database를 반환한다. caches .open(PRE_CACHE_NAME) .then(cache =&gt; &#123; console.log(\"캐시 디비와 연결됨\"); // addAll 메소드로 내가 캐싱할 리소스를 다 넣어주자. return cache.addAll(urlsToCache); &#125;) .then(() =&gt; &#123; // 설치 후에 바로 활성화 단계로 들어갈 수 있게 해준다. return self.skipWaiting(); &#125;) );&#125;);이렇게 추가해주고 개발자도구의 Application 탭으로 가서 좌측 메뉴의 Cache Storage 를 새로고침 하면 방금 추가한 캐시-스토리지1에 내 이미지와 css가 등록된 걸 확인할 수 있다.그리고 개발자도구의 Network 탭에서 호출하는 이미지의 size에 **(from ServiceWorker)**가 보인다. Intermediate내용이 업데이트 되야하는 페이지나 리소스에 대해서는 동적으로 캐싱 처리를 해야한다. Dynamic cachingsw.js123456789101112131415161718192021222324252627282930313233343536373839404142var DYNAMIC_CACHE_NAME = \"다이나믹-캐시-스토리지1\";// fetch event는 어딘가에서 리소스를 가져올 때 모두 실행된다.// js를 가져오거나 이미지를 가져오거나 페이지를 가져오거나 등등self.addEventListener(\"fetch\", event =&gt; &#123; event.respondWith( caches.match(event.request).then(response =&gt; &#123; // 캐시에 있으면 repsonse를 그대로 돌려준다. if (response) &#123; return response; &#125; // 여기서 request를 복사해준다. // request는 스트림으로 fetch 당 한 번만 사용해야하기 때문이다. // 근데 event.request로 받아도 실행은 된다 var fetchRequest = event.request.clone(); // if (response) return response 구문을 하나로 합칠 수도 있다. // return response || fetch(fetchRequest) return fetch(fetchRequest).then(response =&gt; &#123; // 응답이 제대로 왔는지 체크한다. // 구글 문서에는 다음과 같이 처리하라고 되어있는데 // 이 경우 Cross Site Request에 대해 캐싱 처리를 할 수가 없다. // if(!response || response.status !== 200 || response.type !== 'basic') &#123; if (!response) &#123; return response; &#125; // 응답은 꼭 복사 해줘야한다. var responseToCache = response.clone(); // 캐시 스토리지를 열고 정말 캐싱을 해준다. caches.open(DYNAMIC_CACHE_NAME).then(cache =&gt; &#123; cache.put(event.request, responseToCache); &#125;); // 여기서 response를 내보내줘야 캐싱 처리 후에 리소스를 반환한다. return response; &#125;); &#125;) );&#125;); 오래된 캐시 삭제캐시 스토리지명을 바꿔 캐시의 버전을 올리면 기존 캐시 스토리지는 삭제해줘야한다.sw.js1234567891011121314151617181920212223242526// 서비스 워커가 활성화 될 때self.addEventListener(\"activate\", event =&gt; &#123; // 영구적으로 가져갈 캐시 스트리지 화이트리스트 var cacheWhiteList = [PRE_CACHE_NAME, DYNAMIC_CACHE_NAME]; event.waitUntil( // 캐시 스토리지의 모든 스토리지명을 가져온다. caches.keys().then(cacheNames =&gt; &#123; // 캐시를 삭제하는 건 Promise를 반환하므로 Promise.all을 사용해 끝날 시점을 잡아야한다. return Promise.all( // 이 결과는 [Promise, Promise...] 형태가 되시겠다. cacheNames.map(cacheName =&gt; &#123; // 각각의 캐시 스토리지명이 화이트 리스트와 같지 않을 경우 if (cacheWhitelist.indexOf(cacheName) === -1) &#123; // 캐시를 삭제하는 Promise를 배열에 추가한다. return caches.delete(cacheName); &#125; &#125;) ); &#125;) ); // activate 시에는 clients claim 메소드를 호출해서 // 브라우저에 대한 제어권을 가져와야한다. return self.clients.claim();&#125;);결과적으로 DYNAMIC_CACHE_NAME이 아닌 캐시 스토리지는 삭제된다. offline fallback캐시된 페이지와 리소스는 오프라인에서도 접근이 가능하다.여기서 오류가 발생하면 offline.html 같은 페이지로 떨어지게 할 수 있다. (마치 404 오류 페이지처럼)sw.js12345678910111213141516171819self.addEventListener('fetch', event =&gt; &#123; event.respondWith( caches.match(event.request) .then(response =&gt; &#123; ... &#125;) .catch(error =&gt; &#123; // 에러 발생시 캐시되어있는 offline.html로 이동시킨다. return caches.open(CACHE_NAME) .then(cache =&gt; &#123; // 들어온 요청의 Accept 헤더가 text/html 을 포함하고 있다면 (페이지 요청이라면) if (event.request.headers.get('accept').includes('text/html')) &#123; // 캐시된 offline fallback 페이지를 보여준다. return cache.match('/offline.html'); &#125; &#125;) &#125;) );&#125;); Advanced서비스워커에 static, dynamic cache를 첨가했는데 소스가 너무 지저분하다.직관적으로 만들어보자. 리팩토링sw.js1234567891011121314151617181920212223242526(() =&gt; &#123; const STATIC_CACHE_NAME = 'STATIC_CACHE_VERSION_1'; const DYNAMIC_CACHE_NAME = 'DYNAMIC_CACHE_VERSION_1'; const WEB_CACHE = &#123; init() &#123; self.addEventListener('install', this.staticCacheStrategy.bind(this)); self.addEventListener('activate', this.deleteOldCache.bind(this)); self.addEventListener('fetch', this.dynamicCacheStrategy.bind(this)); &#125; staticCacheStrategy(event) &#123; // 스태틱 캐싱 &#125;, deleteOldCache(event) &#123; // 캐시 삭제 &#125;, dynamicCacheStrategy(event) &#123; // 다이나믹 캐싱 &#125; &#125;; WEB_CACHE.init();&#125;)();IIFE를 사용해 좀 더 예쁘게 변했다. cross domain request서비스워커에서 fetch로 외부 리소스를 가지고오면 opaque response가 반환된다.cors 정책이 설정되어 있지 않아 아무 정보도 가지고 올 수 없는 건데, 이런 리소스만 골라서 캐싱처리를 하고 싶다면 request url이나 response content-type을 가지고 처리할 수 있다.sw.js12345678910111213141516171819202122232425262728293031323334353637dynamicCacheStrategy(event) &#123; // 캐싱 처리하고 싶은 content-type var cacheContentsTypes = [ 'image/png', 'image/gif', 'image/jpeg', 'application/font-woff' ]; event.respondWith( caches.match(event.request) .then(response =&gt; &#123; var fetchRequest = event.request.clone(); return response || fetch(fetchRequest) .then(response =&gt; &#123; if (!response) &#123; return response; &#125; // response header에서 content-type을 가져와 비교한다. // 아니면 request.url이 캐싱처리를 할 외부 url인지 확인한다. if (cacheContentsTypes.indexOf(response.headers.get('content-type')) !== -1 || event.request.url.indexOf('external.url') !== -1 ) &#123; caches.open(DYNAMIC_CACHE_NAME) .then(cache =&gt; &#123; cache.put(event.request, response.clone()); &#125;) &#125; return response; &#125;) .catch(error =&gt; console.log(error)) &#125;) );&#125; WorkBox이제 클라이언트 캐시가 어떻게 돌아가는지 확인했으니 구글에서 만든 멋진 라이브러리를 사용해보자.간결하고 직관적인 문법으로 위의 구문들을 예쁘게 만들 수 있다. Stratergy그 전에 캐싱 전략을 알아야한다. cacheFirst캐시부터 요청하고 네트워크를 접근해 리소스를 보여준다.오프라인을 우선적으로 보여주는 페이지에 적합하다. cacheOnly캐시에서만 가져온다.static file들이 여기에 해당된다. networkFirst네트워크를 먼저 접근하고 오프라인일 경우 캐시를 가져온다.이 방법은 연결이 원활하지 않거나 느린 경우 네트워크가 실패할 때까지 기다린 뒤 리소스가 보여지므로 UX에 좋지 않을 수 있다. networkOnly캐시가 필요없는 GET 메소드가 아닌 다른 메소드가 주로 여기에 해당된다. staleWhileRevalidate이 방식은 그림을 보고 이해하는게 빠르다.캐시를 먼저 가져오고 다음 요청은 네트워크에서 요청된 리소스의 캐시를 반환한다.주로 이 방식이 사용된다. Cache then network페이지가 두 개의 요청(캐시에 요청, 네트워크에 요청)을 동시에 하고 캐시된 데이터를 먼저 표시한 다음 네트워크 데이터가 도착하면 페이지를 업데이트를 한다.WorkBox에는 없는 strategy인데 networkFirst보다 UX상 좋다고 한다. 설치ServiceWorker에서는 라우팅 기능을 사용하기 위해 구글 CDN에서 제공하는 스크립트를 사용하고Pre-Cache를 정의하기 위해 로컬에서 workbox-cli를 추가해야한다. importScriptimportScript는 ServiceWorker 파일에서만 사용가능한 구문으로 import나 require와 같다고 보면 된다.123importScripts( \"https://storage.googleapis.com/workbox-cdn/releases/3.2.0/workbox-sw.js\"); workbox-cli1$ yarn global add workbox-cli 메소드 precache프리캐시는 정적 자원들을 미리 캐싱처리해서 Cache Only Stratergy를 사용하는 것이다.주로 이미지나 css, vendor-js 등을 여기에 담아준다.workbox-cli를 설치하고 wizard 명령어를 실행하면 config 파일이 생성된다.1$ workbox wizard설정을 입맛에 맞게 변경해주고 pre-cache할 파일 목록을 생성해주는 명령어를 실행하자1$ workbox injectManifest config.jsServiceWorker에 workbox.precaching.precacheAndRoute([]) 구문이 있다면 목록이 들어가 있는 걸 확인할 수 있다.123456789workbox.precaching.precacheAndRoute([ &#123; \"url\": \"css/fonts/fontawesome/fontawesome-webfont.eot\", \"revision\": \"674f50d287a8c48dc19ba404d20fe713\" &#125;, &#123; ... &#125;]) RoutingWorkBox를 사용하는 이유는 바로 이 라우팅에 있다.위에서 많은 양의 라우팅 분기 코드로 캐싱을 처리했는데 WorkBox는 다음과 같이 간결해진다.아래는 이 블로그에 사용하고 있는 코드이다.12345678910111213141516171819202122232425262728293031323334importScripts( \"https://storage.googleapis.com/workbox-cdn/releases/3.4.1/workbox-sw.js\");// importScripts 후 타이밍 차이로 인해 모듈을 못 불러오는 경우를 방지하기 위해// 캐싱 정책 모듈 로드를 기다린다.workbox.loadModule(\"workbox-strategies\");workbox.skipWaiting();workbox.clientsClaim();// accept 헤더에 text/html 값이 있으면 (html 페이지 요청일 경우)// networkFirst 캐싱workbox.routing.registerRoute(routeData =&gt; &#123; return routeData.event.request.headers.get(\"accept\").includes(\"text/html\");&#125;, workbox.strategies.networkFirst());// imgur 요청일 경우 cacheFirst 캐싱workbox.routing.registerRoute( /.*(?:imgur)\\.com.*$/, workbox.strategies.cacheFirst());// jsdelivr 요청일 경우 stateWhileRevalidate 캐싱workbox.routing.registerRoute( /.*(?:jsdelivr)\\.net.*$/, workbox.strategies.staleWhileRevalidate());// bootcss 요청일 경우 stateWhileRevalidate 캐싱workbox.routing.registerRoute( /.*(?:bootcss)\\.com.*$/, workbox.strategies.staleWhileRevalidate());코드가 너무 예뻐졌다. callback으로 Request의 모든 걸 캐치해 낼 수 있다.더 구체적으로 쓰고 싶으면 문서를 참조하자 부가 기능이 기능 말고도 다음과 같은 멋진 기능을 사용할 수 있다, 하지만 언제 쯤 써볼 수 있을지…backgroundSync (오프라인이 되면 큐에 데이터를 넣고 연결될 시 서버에 전송)broadcastUpdate (postMessage를 사용하는 그 것 맞다)cacheableResponse offline GA오프라인에서도 Google Analytics 를 사용할 수 있다.한 줄의 코드만 삽입해주면 된다.1workbox.googleAnalytics.initialize(); Webpack웹팩에 WorkBox-Webpack-Plugin을 붙힐 수 있는데 아직 도전을 안 해봤다. 후술할 sw-precache를 굳이 뺄 이유가 없고, 레퍼런스도 워낙 많기에… sw-precachecreate-react-app이나 Vue-Cli나 @angular/cli 모두 클라이언트 캐싱에 WorkBox 대신 이 라이브러리를 사용하고 있다. (WorkBox에서 캐싱기능만 떼어낸 라이브러리라고 보면 된다)기본 설정을 굳이 안 건들여도 되고, exact해서 사용 중이라면 옵션을 라이브러리를 한 번 쯤 봐주는 것도 나쁘지 않다. 참고Google Web Fundementals Guides Base TechnologyGoogle Web Fundamentals Offline cookbookWorkBox DocsWorkBoxsw-precache 여담기술 정리하는 건 시간이 너무 오래 걸린다.Redis, eTag, Vanish, SW 까지 사용하면 성능상에 이점은 있겠지만 키를 어떻게 관리해야될지가 중요할 듯","categories":[{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/categories/pwa/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"pwa","slug":"pwa","permalink":"https://gracefullight.dev/tags/pwa/"},{"name":"serviceworker","slug":"serviceworker","permalink":"https://gracefullight.dev/tags/serviceworker/"},{"name":"cache","slug":"cache","permalink":"https://gracefullight.dev/tags/cache/"}]},{"title":"adonisjs 로그 포맷 변경하기 (custom log format)","slug":"adonisjs-custom-log-format","date":"2017-12-21T06:25:45.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/12/21/adonisjs-custom-log-format/","link":"","permalink":"https://gracefullight.dev/2017/12/21/adonisjs-custom-log-format/","excerpt":"","text":"아도니스는 로깅 모듈로 winston 을 사용하는데 winston 은 로그를 json 포맷으로 출력하고 심지어 timezone 변수가 따로 나온다.로그는 기본적으로 프로젝트 폴더 하위의 tmp 폴더에 생성된다이 폴더가 없으면 로깅이 되지 않으므로 먼저 만들어주자예를 들면 다음과 같다.12&#123;\"level\":\"info\",\"message\":\"serving app on http://127.0.0.1:3333\",\"timestamp\":\"2017-12-21T05:34:50.235Z\"&#125;&#123;\"level\":\"info\",\"message\":\"serving app on http://127.0.0.1:3333\",\"timestamp\":\"2017-12-21T05:45:32.220Z\"&#125;이걸 다음과 같이 바꿔보자1[2017-12-21 15:01:03.506] INFO serving app on http://127.0.0.1:3333 수정오늘 날짜를 구하기 위해 moment를 먼저 설치하자.winston 패키지는 @adonisjs/framework 패키지에 종속된다.config/app.js123456789101112131415161718192021222324252627282930const moment = use('moment')const &#123; config &#125; = use('winston')module.exports = &#123; ... logger: &#123; transport: 'file', ... file: &#123; driver: 'file', name: 'adonis-app', // 파일명을 바꿔준다 filename: `adonis_$&#123;moment().format('YYYYMMDD')&#125;.log`, level: 'debug', // json 로그 포맷을 해제하고 json: false, // 원하는 형태로 바꿔준다 formatter: (&#123; level, message, meta &#125;) =&gt; &#123; const now = moment().format('YYYY-MM-DD HH:mm:ss.SSS') // 로그 레벨에 색상을 추가하는 작업인데, 굳이 필요하진 않다 const logLevel = config.colorize(level, level.toUpperCase()) const formattedMeta = meta &amp;&amp; Object.keys(meta).length ? '\\n\\t'+ JSON.stringify(meta) : '' return `[$&#123;now&#125;] $&#123;logLevel&#125; $&#123;message || ''&#125; $&#123;formattedMeta&#125;` &#125; &#125; &#125;&#125; 버전@adonis/framework: 4.0.28winston: 2.4.0","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"},{"name":"adonis","slug":"javascript/nodejs/adonis","permalink":"https://gracefullight.dev/categories/javascript/nodejs/adonis/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"adonis","slug":"adonis","permalink":"https://gracefullight.dev/tags/adonis/"}]},{"title":"왜 리덕스 사가(Redux-saga) 인가?","slug":"Why-redux-saga","date":"2017-12-06T00:50:37.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/12/06/Why-redux-saga/","link":"","permalink":"https://gracefullight.dev/2017/12/06/Why-redux-saga/","excerpt":"","text":"redux, redux-thunk, redux-promise-middleware, redux-actions, redux-saga 머리가 뽀개질 지경이다. 결국엔 redux-saga를 써야만 했고 왜 saga로 수렴하게 되는지에 대한 삽질기다.도대체 몇 개의 미들웨어 라이브러리를 파야하는지 화남을 포스팅했기에 오 프론트엔드를 꾸미는데는 리액트가 최고야 라고 생각하는 분들에겐 마음이 안들 수도 있다.정신건강을 위해 mobx 사용을 추천드립니다. 모듈의 필요성 redux하위, 상위 컴포넌트에 데이터를 props로 넘겨주는게 너무 관리하기 힘들어서 선택한다. 하나의 Store(Object)에 SPA의 모든 데이터를 보관한다. 대안으로는 Event Bus Component를 만들면 되는데, 하나의 스토어를 갖는게 그게 그거라 거의 강제된다.redux를 적용하기에 앞서 기존 MVC 패턴에 쩌든 사상을 Flex(단방향) 패턴으로 바꾼다는게 거의 남북간 화합 수준이였다. 이 부분에 있어선 연습만이 답이다. 눈감고 코딩할 수 있을 만큼 예제 프로젝트를 반복해보자.일단 몸에 익으면 action creator가 뭔지 왜 dispatch를 해야하고 reducer로 값을 처리해야 하는지가 뇌에서도 이해가 되는 느낌이였다. (counter 예제는 좋지 않다고 본다. shopping cart예제나 todo 예제가 더 이해하기 쉽다.)Redux redux-promise-middlewareredux에서 action의 payload를 비동기 데이터로 넘길 때를 알아서 처리해준다.많은 포스팅이 있는데, 별 쓸모 없다. 실무에서 예제 포스팅을 따라할만한 간단한 비동기 처리 로직은 없다.Redux-promise-middleware redux-thunk하나의 action에서 여러 개의 다른 action을 호출하던지, action이 dispatch되는 걸 조작할 수 있어, 비동기 처리에도 사용한다.멋진 라이브러리이지만 클로저 패턴을 사용해야하므로 소스가 지저분하다.(이게 깔끔하다고 생각하면 쓰면 된다. promise then promise then chaning도 깔끔하다고 생각하다면)Redux-thunk redux-actionsaction, type, reducer의 반복되는 코드를 더 깔끔하게 구현하길 원한다면 이게 답일 수 있다.하지만 이 미들웨어는 구문적인 편의성을 제공하는 것일 뿐 비동기를 처리할 수 없어서 promise, thunk 또는 여기서 소개할 saga가 강제된다. 여기를 참조하자.Redux-actions rematch1803 최근엔 이 모든 고민을 해결해주는 rematch 라는 라이브러리가 있다async/await를 사용해 간결한 문법을 제공하는데 아직 삽질해보지 않아 소개정도만 하고 지나가겠다 redux-saga어떤 action은 promise payload를 뱉고, 어떤 action은 dispatch로 다른 action을 호출하고 어떤 action은 plain object를 뱉고 이런 일관성없는 짓을 계속하다보면 정말 비효율적이라는 느낌을 받는다. 안 받으셨다면 해보시면 느껴질 것이다.더 극단적으로 든 생각은 Vuex를 사용하면 그냥 mapGetters, mapActions 두 함수만으로 직관적이고 디자이너도 알아볼 법한 코드로 구현이 가능한데 왜 react를 해야되지? 란 의문이 계속 들었다.Redux-saga를 접하고는 드디어 state 관리의 친구를 만난 느낌이였다.그렇다면 saga는 뭘까? 한 줄 표현만 기억해보자.saga란 action에 대한 listener이다.음… 액션 리스너구나. 이벤트 리스너같은 것이군.설치를 하기 전에 redux와 generator의 개념을 완벽히 이해했다고 가정한다. 설치12# yarn add redux react-redux$ yarn add redux-sagacreate-react-app으로 생성된 프로젝트로 폴더 구조를 다음과 같이 가져갔다.12345678910111213.├── public└── src ├── components ├── containers └── store ├── actions ├── reducers ├── sagas └── types├── package.json├── App.js└── index.js 연동게시글을 가져오는 액션으로 시작해보자.예시라 모든 코드를 해당 폴더의 index.js에 넣었다. 분리는 편하신대로 하면 되겠다.빠르게 훑는 generatoriterable (돌리고 돌릴 수 있다)비동기든 동기든 간에 yield 구문으로 순차적 처리가 가능하다. typetypes/index.js123export const FETCH_BOARDS = \"FETCH_BOARDS\";export const FETCH_BOARDS_FULFILLED = \"FETCH_BOARDS_FULFILLED\";export const FETCH_BOARDS_REJECTED = \"FETCH_BOARDS_REJECTED\"; actionactions/index.js123456789101112131415export const fetchBoards = () =&gt; (&#123; type: FETCH_BOARDS&#125;);// saga에서 호출하는 액션export const fetchBoardsFulfilled = boards =&gt; (&#123; type: FETCH_BOARDS_FULFILLED, payload: boards&#125;);// saga에서 호출하는 액션export const fetchBoardsRejected = error =&gt; (&#123; type: FETCH_BOARDS_REJECTED, error&#125;);action이 pure object만을 반환하는 것을 보고 있으면 아름답다는 생각이 저절로 든다. reducerreducers/index.js123456789101112131415161718192021const INITIAL_STATE = &#123; boards: []&#125;;export default (state = INITIAL_STATE, &#123; type, payload, error &#125;) =&gt; &#123; switch (type) &#123; case FETCH_BOARDS_FULFILLED: return &#123; ...state, boards: payload &#125;; case FETCH_BOARDS_REJECTED: return &#123; ...state, showError: true, error &#125;; default: return state; &#125;&#125;; sagasaga는 action을 listen(watch)한다.saga/index.js123456789101112131415161718192021222324252627import &#123; call, spawn, put, takeEvery &#125; from \"redux-saga/effects\";import * as actions from \"../actions\";import axios from \"axios\";function* fetchBoardsSaga() &#123; // try catch finally 구문으로 오류 제어가 가능하다. try &#123; // 이부분을 call 메소드를 이용해 테스트가 쉽게 바꿀 수 있다. // (yeild를 사용하기 때문에 next 명령어로 반복 가능하므로) // const &#123; data &#125; = yield call([axios, 'get'], '/boards') const &#123; data &#125; = yield axios.get(\"/boards\"); yield put(actions.fetchBoardsFulfilled(data)); &#125; catch (error) &#123; yield put(actions.fetchBoardsRejected(error.response)); &#125;&#125;function* watchBoard() &#123; // type의 action이 실행되면 fetchBoardsSaga도 항상(Every) 실행한다 yield takeEvery(FETCH_BOARDS, fetchBoardsSaga);&#125;// 모든 listener(watcher)를 하나로 묶어준다.// rootReducer에 묶어주는 그것과 같다고 보면 된다.export default function* root() &#123; yield spawn(watchBoard);&#125;왜 watcher들을 spawn으로 묶어야하는지는 이슈에 나와있다.(여기엔 자동으로 saga가 재시작되는 패턴도 있는데, 아직 활용해본 적은 없다)action =&gt; saga =&gt; action =&gt; reducer 로 연결되는 saga가 완성되었다. store스토어 담는건 각자의 취향이니 어떻게 연결하는지만 보면 된다.store/index.js1234567891011121314151617181920import createSagaMiddleware, &#123; END &#125; from \"redux-saga\";const saga = createSagaMiddleware();export default function configureStore(initialState) &#123; const store = createStore( rootReducer, initialState, compose( applyMiddleware(...middlewares), inDevelopment &amp;&amp; window.devToolsExtension ? window.devToolsExtension() : f =&gt; f ) ); store.runSaga = saga.run; store.close = () =&gt; store.dispatch(END); return store;&#125;index.js12const store = configureStore();store.runSaga(rootSaga); 메소드 allyield 구문으로 기다리는 건 순차적으로 실행되기 때문에, 동시에 실행되고 전부 resolve되는 패턴이 필요하다면 all 메소드를 사용하면 된다. (Promise.all을 생각하면 쉽다)12345678export function* testSaga() &#123; // 기존 포스팅들에는 이렇게 사용하라는 구문이 많은데 // deprecated 경고를 뱉는다 const [response1, response2] = yield [asyncTask1(), asyncTask2()]; // 아래와 같이 사용하자 const [response1, response2] = yield all([asyncTask1(), asyncTask2()]);&#125; callFunction.prototype.call() 함수와 같다. takeEvery모든 액션시마다 실행 된다.GET 메소드에 사용하자. takeLatest액션 호출시에 같은 액션이 실행 중이면 그 액션은 파기되고 마지막 호출만 실행된다.POST, PUT, DELETE 같은 리소스 변경 메소드에 사용하자. put액션을 호출한다. dispatch라고 보면 된다. 다시보기비유를 통한 설명이 좋으면 이렇게 이해해도 된다.회사에서 주로 푸드플라이로 서브웨이를 주문하는데 거기에 빗대어 보았다. 1. Board를 가져오는 타입 만들기서브웨이를 푸드플라이로 시킨다고 한다면const 푸드플라이_서브웨이 = '푸드플라이_서브웨이' 처럼 컴퓨터가 알 수 있게 변수로 행동(액션)의 종류를 설정해주는 것const 푸드플라이_서브웨이_주문성공 = '푸드플라이_서브웨이_주문성공' 처럼 주문이 완료됬을 때의 행동명도 만들 수 있다. 2. fetchBoards 액션 만들기푸드플라이에서 주문서를 넣는 행동과 같다.액션은 타입과 결과(payload)를 return하는 함수이다.굳이 payload를 안 써도 되는데, 그게 예쁘다. 3. fetchBoards 사가 만들기푸드플라이 서버에서 주문서를 처리하는 것서버에서 디비 값을 바꾸고 서브웨이로 주문을 밀어넣어주는 것마지막에 주문이 들어갔다는 다른 액션을 put으로 호출한다. 4. fetchBoards의 액션과 사가를 연결하기주문서를 넣으면 푸드플라이의 주문서 로직을 실행해야된다는 걸 컴퓨터에게 알려주는 부분takeEvery로 감싸면 매번 주문서가 들어올 때마다 로직이 실행된다는 것takeLatest로 감싸면 매번 주문서가 들어올 때마다 마지막에 들어온 것만 실행하는 것take는 무한루프가 안 예쁘다. 5. fetchBoards 액션이 완료될 경우 발생하는 fetchBoardsFulfilled 액션의 리듀서를 만들기서브웨이에서 주문서를 받아서 서브웨이 멜트 만드는 준비를 하는 부분 6. 리듀서에서 초기 상태 값을 업데이트 해주기초기상태값은 서브웨이 멜트에 터키가 최소 2장, 햄 최소 2장 들어간다 같은 것업데이트는 서브웨이 멜트를 진짜 만드는 행동 7. 컴포넌트(클래스)를 리덕스 스토어와 연결 8. Boards Prop과 fetchBoards Action을 가져오기 (map…toProps 아실 거에요) 9. componentDidMount, onClick에서 fetchBoards 실행 10. Boards.map 등 DOM에 바인딩 여담Saga API Docs엔 action을 기다리는 take 기능 등 많은 고급 기능이 있다.supervisor 패턴으로 구성한 사람도 보이는데 아직 필요성을 잘 못 느끼겠다.처음부터 mobx로 시작했어도 쉬웠을텐데saga에서 쓰는 개념들은 rx의 스트림과 비슷하게 느껴졌다.잘 이해가 안 된다면 mobx를 이해하는 게 정신건강에 좋습니다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"react","slug":"javascript/react","permalink":"https://gracefullight.dev/categories/javascript/react/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"react","slug":"react","permalink":"https://gracefullight.dev/tags/react/"},{"name":"redux","slug":"redux","permalink":"https://gracefullight.dev/tags/redux/"}]},{"title":"Vue - Laravel Pagination 연동","slug":"Vue-Laravel-Pagination-연동","date":"2017-11-28T06:36:34.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/28/Vue-Laravel-Pagination-연동/","link":"","permalink":"https://gracefullight.dev/2017/11/28/Vue-Laravel-Pagination-%EC%97%B0%EB%8F%99/","excerpt":"","text":"Laravel에서 paginate 메소드를 json으로 받았을 시에 데이터는 다음과 같다.response123456789101112&#123; \"current_page\": 1, \"data\": [&#123;&#125;, &#123;&#125;, &#123;&#125;], \"from\": 1, \"last_page\": 1, \"next_page_url\": null, \"path\": \"https://example.com/ajax/list\", \"per_page\": 15, \"prev_page_url\": null, \"to\": 8, \"total\": 8&#125;이 데이터를 blade에서 links 메소드로 쉽게 사용할 수 있는 것 처럼 Vue에서도 그럴 수는 없을까?Laravel Vue Pagination 패키지를 활용하면 된다.SPA일 경우에는 다운 받고 Usage 탭에 적힌대로 바로 사용하면 되지만, Multi Page일경우는 직접 컴포넌트를 가져와야한다. 사용법123456789101112131415161718192021222324252627282930313233343536&lt;ul&gt; &lt;li v-for=\"post in response.data\" v-text=\"post.title\"&gt;&lt;/li&gt;&lt;/ul&gt;&lt;nav&gt; &lt;pagination :data=\"response\" :limit=\"3\" @pagination-change-page=\"fetchPosts\" /&gt;&lt;/nav&gt;&lt;script&gt; new Vue(&#123; data: &#123; response: &#123; data: [] &#125; &#125;, methods: &#123; fetchPosts: function(page) &#123; var vm = this; axios .get(\"url\", &#123; params: &#123; page: page || 1 &#125; &#125;) .then(function(response) &#123; vm.response = response; &#125;); &#125; &#125; &#125;);&lt;/script&gt; 예외처리Component 소스의 template 부분을 보면 nav로 감싸져있지 않기에 Laravel 기본 템플릿과 일치시키려면 nav 태그로 감싸주면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"},{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"}]},{"title":"React-Router Code Splitting - 가장 쉬운 방법","slug":"React-Router-Code-Splitting-가장-쉬운-방법","date":"2017-11-23T01:58:22.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/23/React-Router-Code-Splitting-가장-쉬운-방법/","link":"","permalink":"https://gracefullight.dev/2017/11/23/React-Router-Code-Splitting-%EA%B0%80%EC%9E%A5-%EC%89%AC%EC%9A%B4-%EB%B0%A9%EB%B2%95/","excerpt":"","text":"create-react-app으로 생성한 리액트 앱에 시작시 가져오는 컴포넌트 빼고는 비동기로 불러와야 메인이 가벼워진다.검색해보면 AsyncComponent를 만들라는 게 보이는데, 더 쉬운 방법이 있다. React-LoadableReact-router 의 Code Splitting탭 에서 찾아볼 수 있는데, 아주 간결하게 컴포넌트를 불러 온다.123456789101112131415import React, &#123; Component &#125; from \"react\";import Loadable from \"react-loadable\";import Loading from \"./Loading\";const LoadableComponent = Loadable(&#123; loader: () =&gt; import(\"./Dashboard\"), /* 컴포넌트 로딩시 보여지는 로딩 컴포넌트 */ loading: Loading&#125;);export default class LoadableDashboard extends Component &#123; render() &#123; return &lt;LoadableComponent /&gt;; &#125;&#125;너무 너무 쉽다. 진작에 이 정도 레벨의 추상화가 있었어야했다. 옵션자세한 옵션 delay, timeout 등은 여기서 확인할 수 있다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"react","slug":"javascript/react","permalink":"https://gracefullight.dev/categories/javascript/react/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"react","slug":"react","permalink":"https://gracefullight.dev/tags/react/"}]},{"title":"Laravel 5.5 - Model Collection 데이터 처리하기","slug":"Laravel-5-5-Model-Collection-데이터-처리하기","date":"2017-11-22T07:39:54.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/11/22/Laravel-5-5-Model-Collection-데이터-처리하기/","link":"","permalink":"https://gracefullight.dev/2017/11/22/Laravel-5-5-Model-Collection-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%B2%98%EB%A6%AC%ED%95%98%EA%B8%B0/","excerpt":"","text":"Model Collection의 데이터를 처리하는 메소드를 사용하고 싶을 때 아래처럼 접근하면 된다.회원 모델과 사용가능한 포인트를 산출하는 availablePoint 메소드가 있다고 가정한다. 해결1234567891011121314151617181920212223242526&lt;?php$members = Member::where('status', 1) -&gt;get() -&gt;map(function($member) &#123; // Model에서 정의된 filter 메소드를 적용할 수 있다. return $member-&gt;availablePoint(); &#125;);// pagination 에서 사용하는 방법$members = Member::where('status', 1)-&gt;paginate();// 쉬운 방법$members-&gt;map(function($member) &#123; return $member-&gt;availablePoint();&#125;);// 긴 방법//$members-&gt;getCollection()-&gt;transform(function($member) &#123;// return $member-&gt;availablePoint();//&#125;);// pagination에서 data 필드만 필요하다면$members = Member::where('status', 1) -&gt;paginate() -&gt;map(function($member) &#123; return $member-&gt;availablePoint(); &#125;);","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Vue로 생성된 DOM에 Events를 붙여야할 때","slug":"Vue로-생성된-DOM에-Events를-붙여야할-때","date":"2017-11-22T07:10:11.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/22/Vue로-생성된-DOM에-Events를-붙여야할-때/","link":"","permalink":"https://gracefullight.dev/2017/11/22/Vue%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%90%9C-DOM%EC%97%90-Events%EB%A5%BC-%EB%B6%99%EC%97%AC%EC%95%BC%ED%95%A0-%EB%95%8C/","excerpt":"","text":"data 값이 변경되고 나서 .hover, .click과 같은 jQuery 이벤트를 붙여야할 때, DOM이 다시 그려진 완료 시점을 잡아야한다.Vue에서 nextTick 메소드로 이 시점을 잡을 수 있다.(ajax로 데이터를 가져오지 않고 그려지는 DOM은 mounted 메소드 안에 붙힐 Event 로직을 짜면 된다.)1234567891011121314151617181920212223242526new Vue(&#123; data: &#123; members: [] &#125;, created: function() &#123; var vm = this; axios.get(\"/members\") .then(function(response) &#123; vm.members = response.data; /* promise가 지원되는 환경에서 */ return vm.$nextTick(); // promise 미지원시 /* vm.$nextTick(function() &#123; $('.members').hover(); &#125;); */ &#125;) .then(function() &#123; $('.members').hover(); &#125;); &#125;&#125;)인스턴스 메소드를 사용하고 싶지 않다면 Vue.nextTick으로 바꿔주면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"}]},{"title":"Vue 선언된 data에 chiledren 추가시 렌더링이 안될 때","slug":"Vue-선언된-data에-chiledren-추가시-렌더링이-안될-때","date":"2017-11-22T07:10:02.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/22/Vue-선언된-data에-chiledren-추가시-렌더링이-안될-때/","link":"","permalink":"https://gracefullight.dev/2017/11/22/Vue-%EC%84%A0%EC%96%B8%EB%90%9C-data%EC%97%90-chiledren-%EC%B6%94%EA%B0%80%EC%8B%9C-%EB%A0%8C%EB%8D%94%EB%A7%81%EC%9D%B4-%EC%95%88%EB%90%A0-%EB%95%8C/","excerpt":"","text":"data가 이미 정의 되어있고 나중에 데이터를 추가하면 observer가 생성되지 않아 데이터가 갱신이 되어도 DOM이 업데이트가 안 된다. 예시 템플릿123456789101112&lt;div id=\"memberList\"&gt; &lt;div v-for=\"member in members\" &gt; &#123;&#123; member.name &#125;&#125; &lt;ul v-if=\"member.logs &amp;&amp; member.logs.length &gt; 0\"&gt; &lt;li v-for=\"log in member.logs\"&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt;&lt;/div&gt; JS1234567891011121314151617new Vue(&#123; el: '#memberList', data: &#123; members: [ &#123; id: 1, name: 'gracefullight' &#125; ] &#125;, mounted: function() &#123; /* member의 logs 데이터는 그냥 배열로 선언된다. */ this.members[0].logs = []; /* 데이터를 넣어도 위 템플릿의 &lt;li&gt; 부분이 반복되지 않는다. */ this.members[0].logs = [ &#123; id: 1, message: 'test action', created_at: '2017-11-22' &#125; ]; &#125;&#125;) 해결set 메소드 또는 $forceUpdate 메소드를 사용하면 된다.123456789101112/* 1안 */mounted: function() &#123; this.$set(this.members[0], 'logs', []); this.members[0].logs = [...];&#125;/* 2안 */mounted: function() &#123; this.members[0].logs = []; this.members[0].logs = [...]; this.$forceUpdate();&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"}]},{"title":"adonisjs 시작하기 (nodejs framework)","slug":"adonisjs-시작하기-nodejs-framework","date":"2017-11-20T09:53:10.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/20/adonisjs-시작하기-nodejs-framework/","link":"","permalink":"https://gracefullight.dev/2017/11/20/adonisjs-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-nodejs-framework/","excerpt":"","text":"개요nodejs로 정말 간단한 oauth2, jwt 등의 인증을 사용하지 않는 API를 만들기에는 express가 정말 딱이다.하지만 조금 더 깔끔한 코드를 원하거나 새롭지만 반복적인 기능을 넣기 위해선 더 큰 프레임워크가 필요했다. 조건언제나 개발시간은 부족하기에 내가 필요한 기능들을 정리해 보았다.await, async를 아무 세팅 없이 사용해 Promise chaining에서 벗어나고 싶다. (Babel과 Webpack을 직접 세팅하는 시간 걸리는 짓을 안하고 싶다.)기본적인 웹 보안기능 (validate, csrf, xss, injection) 및 API Throttle Request 기능이 있어야한다.소셜 로그인을 passport를 사용하지 않고 한 줄로 끝내고 싶었다.JWT 인증, Log 기능, Bcrypt 암호화를 직접 붙히고 싶지 않다.ORM에 맞게 E-commerce DB를 구조화했기 때문에 ORM이 꼭 필요하다.직관적이여야 한다. (Model과 Controller가 완벽히 나뉘는 구조를 원했다.)문서화가 완벽해야한다.커뮤니티나 Github Issue가 활성화 되어있어야한다.관리자 기능을 SSR로 해야할 가능성이 있어 템플릿 기능이 있어야하며, ejs는 절대 쓰고 싶지 않고 다른 템플릿을 직접 세팅해야하는 일은 더더욱 없어야한다.이 조건을 거르니 adonisjs 라는 처음 보는 프레임워크가 눈앞에 있었다. 성능나쁘지 않다. 어차피 nginx에서 reverse proxy 처리에, auto scaling 걸꺼고 그래도 더 빠른 속도를 원하면 golang으로 가야지 왜 이 포스트를 보고있나!여기서 자세한 내용을 확인할 수 있다. 평판이 프레임워크를 쓰는 다른 사람은 어떻게 생각할까도 궁금했다.Node.js broken ecosystem and rise of AdonisJs란 포스팅이 마음을 사로잡았다.원문 읽을 시간이 없다면 이 글의 요약은 이 것이다.Why not use Express + Sequelize + Config manager + Passport + dotEnv + NodeMailer + Node Validator +30 other modules.How assembling 100+ modules manually can be better than a beautifully pre-configured framework?한글로 번역하면 왜 안 쓰시죠? 정도가 되시겠다. 시작하기 요구사항Node &gt;= 8.0NPM &gt;= 3.01711 기준 8.9가 LTS 버전이기 때문에 그냥 쓰면 된다. Cli 설치요즘 멋진 프레임워크들은 다들 cli를 가지고 있다.1$ yarn global add @adonisjs/cli 앱 설치123$ adonis new 프로젝트명$ cd 프로젝트명$ adonis serve --devlocalhost:3333에서 서버가 돌아간다. 폴더 구조123456789.├── ace├── package.json├── public├── server.js└── start ├── app.js ├── kernel.js └── routes.js파일/폴더설명aceadonis에서 제공하는 cli 명령어 툴package.json-publiccss, js, images와 같은 public 리소스server.jsHTTP 서버를 부트스트래핑한다. .env 파일의 PORT 변수를 따른다.start/app.jsadonis 실행시 필요한 기능들을 부트스트래핑한다.start/kernel.js미들웨어를 등록한다.start/routes.js라우팅 라우팅start/routes.js에서 등록한다. 메소드Route 뒤에 method를 붙히면 된다.12345678Route.get('/boards', async () =&gt; &#123;&#125;)Route.get('/boards/:id', async (&#123; params &#125;) =&gt; &#123; const board = await Board.find(params.id) return board&#125;) 컨트롤러와 연결123456789101112131415Route.get('boards', 'BoardController.index')/* 리소스로 사용시에 */Route.resource('boards', 'BoardController')/* 리소스에서 create, edit 메소드를 빼고 사용시 */Route.resource('boards', 'BoardController') .apiOnly()/* 구미가 당기는 것만 사용시 */Route.resource('boards', 'BoardController') .only(['index', 'destroy'])/* 구미가 안 당기는 것을 제외할 시 */Route.resource('boards', 'BoardController') .except(['index', 'destroy']) 그룹화보통은 기능이 비슷한 것 끼리 그룹화를 해서 가독성을 높인다.123456/* /api/boards routes */Route.group(() =&gt; &#123; Route.get('/boards', 'BoardController.index') Route.post('/boards', 'BoardController.store')&#125;).prefix('api') 컨트롤러cli에서 쉽게 생성이 가능하다.1$ adonis make:controller BoardController 리소스 컨트롤러리소스가 대단한 건 아니고 미리 정의 된 메소드 7개로 RESTful API를 빠르게 만들기 위한 것이다.1$ adonis make:controller BoardController --resource각 메소드들이 연결되는 건 다음과 같다.index: GET boardscreate: GET boards/createstore: POST boardsshow: GET boards/:idedit: GET boards/:id/editupdate: PUT boards/:iddestory: DELETE boards/:id 모델하나의 모델은 하나의 테이블과 매칭된다고 보면 된다.1$ adonis make:model Board 모델 구조모델 생성 후에 몇 가지 설정을 해줘야한다.Board.js1234567891011121314151617181920212223242526272829303132333435363738class Board extends Model &#123; // 테이블 명을 변경해야할 경우 // (테이블 명이 모델명의 복수형이 아닐 경우) static get table() &#123; return 'board' &#125; // 기본 커넥션이 변경될 경우 static get connection() &#123; return 'mysql' &#125; // PK 컬럼명이 id가 아닐 경우 static get primaryKey() &#123; return 'uid' &#125; // PK의 Auto Increment가 아닐 경우 static get incrementing() &#123; return false &#125; // 비밀번호 같은 컬럼을 보여주지 않아야 될 경우 // 이 경우 모델에서 fetch 또는 first 메소드로 쿼리빌더를 실행해야된다 static get hidden() &#123; return ['password'] &#125; // 생성일 컬럼이 변경될 경우 static get createdAtColumn() &#123; return 'created_at' &#125; // 업데이트일 컬럼이 변경될 경우 static get updatedAtColumn() &#123; return 'updated_at' &#125;&#125;위 속성을 제외하고는 문서를 참조해보자. 기존 코드를 내려받을 때.env.example 파일을 .env로 복사해 환경설정을 해주고 로그를 남기기 위해 tmp 폴더를 생성해준다/1234$ cp .env.example .env# .env 파일을 수정하고$ mkdir tmp 여담이 프레임워크는 라라벨 스타일로 만들어졌기 때문에 (개념이 같다) 모던 PHP 개발자가 되는 건 식은 죽 먹기가 될 수 있다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"},{"name":"adonis","slug":"javascript/nodejs/adonis","permalink":"https://gracefullight.dev/categories/javascript/nodejs/adonis/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"adonis","slug":"adonis","permalink":"https://gracefullight.dev/tags/adonis/"}]},{"title":"Windows에서 환경변수 cmd로 등록하기","slug":"Windows에서-환경변수-cmd로-등록하기","date":"2017-11-20T09:05:30.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/20/Windows에서-환경변수-cmd로-등록하기/","link":"","permalink":"https://gracefullight.dev/2017/11/20/Windows%EC%97%90%EC%84%9C-%ED%99%98%EA%B2%BD%EB%B3%80%EC%88%98-cmd%EB%A1%9C-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0/","excerpt":"","text":"매번 내 컴퓨터 &gt; 설정 &gt; 고급 설정 &gt; 환경 변수에 들어가는 걸 그만하고 싶은 사람이라면 다음과 같이 하면 된다. 추가123$ setx path \"%path%;새로운 경로\"$ refreshenv 설명환경변수를 등록하고 그 변수를 반영한다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[]},{"title":"Linux startup 파일에서 피해야할 것","slug":"Linux-startup-파일에서-피해야할-것","date":"2017-11-19T13:53:29.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/11/19/Linux-startup-파일에서-피해야할-것/","link":"","permalink":"https://gracefullight.dev/2017/11/19/Linux-startup-%ED%8C%8C%EC%9D%BC%EC%97%90%EC%84%9C-%ED%94%BC%ED%95%B4%EC%95%BC%ED%95%A0-%EA%B2%83/","excerpt":"","text":"스타트업 파일은 사용자가 로그인 할 때 시스템이 어떻게 반응해야 하는지를 결정한다.스타트업 파일 수정시에 다음 사항들을 꼭 피해야한다. 주의셸 스타트업 파일에 그래픽 명령을 넣지 않는다.셸 스타트업 파일에 DISPLAY 환경 변수를 설정하지 않는다.셸 스타트업 파일에 터미널 유형을 설정하지 않는다.스타트업 파일에서 표준 출력으로 인쇄하는 명령을 실행하지 않는다.셸 스타트업 파일에 LD_LIBRARY_PATH를 결코 설정하지 않는다.LD_LIBRARY_PATH 변수 조작시 런타임 링커가 모든 프로그램에 대해 이 디렉터리들을 찾기 때문에 충돌을 일으킬 수 있고, 라이브러리의 조합이 틀어질 수 있기 때문이다.추가적으로 디폴트 스타트업 파일에 상세한 주석을 충분히 첨부한다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"linux","slug":"server/linux","permalink":"https://gracefullight.dev/categories/server/linux/"},{"name":"shell","slug":"server/linux/shell","permalink":"https://gracefullight.dev/categories/server/linux/shell/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://gracefullight.dev/tags/linux/"},{"name":"shell","slug":"shell","permalink":"https://gracefullight.dev/tags/shell/"}]},{"title":"Laravel 5.5 - Model Event Listener","slug":"Laravel-5-5-Model-Event-Listener","date":"2017-11-18T02:12:21.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/11/18/Laravel-5-5-Model-Event-Listener/","link":"","permalink":"https://gracefullight.dev/2017/11/18/Laravel-5-5-Model-Event-Listener/","excerpt":"","text":"라라벨 이벤트 리스너 기능을 붙혀보자.Model이 Create 될 때 이벤트 리스너를 붙혀 다른 기능을 연결하는 예제가 가장 쉽다.(예를 들면 로그가 생성될 때 SMS를 날리는 경우) 이벤트 생성 EventServiceProvider먼저 EventServiceProvider에 내가 사용할 이벤트와 리스너를 등록해줘야한다.app/Providers/EventServiceProvider1234567891011&lt;?php...class EventServiceProvider extends ServiceProvider&#123; protected $listen = [ // 로그 생성시 이벤트를 'App\\Events\\LogCreated' =&gt; [ // 로그 생성됨 리스너에 연결시켜준다. 'App\\Listeners\\LogCreatedListener', ], ];$listen 변수에 기본으로 등록되어있는 이벤트는 지워주자 generate이제 소스 파일을 생성시켜준다.1$ php artisan event:generate명령어를 실행하면 app/Events와 app/Listeners에 방금 등록한 이벤트 리스너 파일이 자동으로 생성된다. 바인딩 모델모델에서 방금 추가된 이벤트를 연결시켜주자.app/Models/Log123456789101112&lt;?phpuse App\\Events\\LogCreated;class Log extends Model&#123; ... protected $dispatchesEvents = [ // 모델이 create(insert) 되면 해당 이벤트를 호출한다. 'created' =&gt; LogCreated::class // use 구문을 사용하지 않고 여기에 직접 \"App\\Events\\LogCreated\" 로 정의해도 될 것 같은데 테스트는 안 해봤다. ];&#125; 이벤트이벤트에서 해당 모델을 연결시켜주자.app/Events/LogCreated1234567891011121314151617181920212223&lt;?phpuse App\\Models\\Log;...class LogCreated&#123; use Dispatchable, InteractsWithSockets, SerializesModels; // 리스너에서 받을 모델 변수를 public으로 생성한다. public $log; // DI public function __construct(Log $log) &#123; $this-&gt;log = $log; &#125; public function broadcastOn() &#123; // 채널을 이용하지 않을 것이기에 빈 배열을 리턴시킨다. return []; &#125;&#125; 처리리스너에서 받은 이벤트를 처리하자.app/Listeners/LogCreatedListener123456789101112131415161718&lt;?php...use App\\Events\\LogCreated;class LogCreatedListener&#123; ... public function handle(LogCreated $event) &#123; // Events의 public으로 선언한 데이터가 $event 아래로 바인딩 된다. $log = $event-&gt;log; logger('LOG Received'); logger($log); // 여기서 기능을 구현하면 된다. &#125;&#125;ShouldQueue로 확장해 큐에 담을 수도 있다. 여담메일 발송과 비슷한 플로우였다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Vue에서 jquery와 bootstrap 전역으로 사용하기","slug":"Vue에서-jquery와-bootstrap-전역으로-사용하기","date":"2017-11-17T07:45:23.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/17/Vue에서-jquery와-bootstrap-전역으로-사용하기/","link":"","permalink":"https://gracefullight.dev/2017/11/17/Vue%EC%97%90%EC%84%9C-jquery%EC%99%80-bootstrap-%EC%A0%84%EC%97%AD%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/","excerpt":"","text":"expose-loader의 설치가 필요 없는 방법을 사용해보자Vuejs-kr에 좋은 내용이 있지만 웹팩을 통해 jquery를 꺼내는 방법이 더 간단하다. 설치1$ yarn add jquery bootstrap 설정 webpackbuild/webpack.base.conf.js1234567891011121314const webpack = require('webpack')module.exports = &#123; ... plugins: [ new webpack.ProvidePlugin(&#123; $: 'jquery', jquery: 'jquery', 'window.jQuery': 'jquery', jQuery: 'jquery' &#125;) ] ...&#125; eslint.enlintrs.js1234567module.exports = &#123; ... globals: &#123; \"$\": true, \"jQuery\": true &#125;&#125; 연동src/main.js1234...import 'bootstrap'new Vue(&#123;...&#125;)","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"},{"name":"bootstrap","slug":"bootstrap","permalink":"https://gracefullight.dev/tags/bootstrap/"},{"name":"jquery","slug":"jquery","permalink":"https://gracefullight.dev/tags/jquery/"}]},{"title":"Top 명령어 단축키","slug":"Top-명령어-단축키","date":"2017-11-16T13:25:47.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/16/Top-명령어-단축키/","link":"","permalink":"https://gracefullight.dev/2017/11/16/Top-%EB%AA%85%EB%A0%B9%EC%96%B4-%EB%8B%A8%EC%B6%95%ED%82%A4/","excerpt":"","text":"top 명령어는 자주 치는 명령어지만 예쁘게 소팅하기란 쉽지 않다. 단축키단축키내용spacebar화면 즉시 업데이트M현재 상주 메모리 사용량에 따라 분류T전체 누적 CPU 사용량에 따라 분류P현재 CPU 사용량(디폴트 값)에 따라 분류c프로세스 경로 표시u오로지 한 사용자의 프로세스만 보여줌f다른 종류의 통계 자료가 나타나도록 선택?모든 top 명령에 대한 사용법의 개요를 보여준다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"linux","slug":"server/linux","permalink":"https://gracefullight.dev/categories/server/linux/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://gracefullight.dev/tags/linux/"}]},{"title":"Maria DB에서 정규식 치환하기","slug":"Maria-DB에서-정규식-치환","date":"2017-11-16T03:28:08.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/11/16/Maria-DB에서-정규식-치환/","link":"","permalink":"https://gracefullight.dev/2017/11/16/Maria-DB%EC%97%90%EC%84%9C-%EC%A0%95%EA%B7%9C%EC%8B%9D-%EC%B9%98%ED%99%98/","excerpt":"","text":"MySQL에서는 정규식 치환 함수가 없지만 Maria에서는 REGEX_REPLACE 함수로 제공된다. 사용법 구문1REGEXP_REPLACE(subject, pattern, replace) 예제1234SELECT REGEXP_REPLACE('gracefullight.eks012@gmail.com', '(graceful)(light)\\.(.*)', '\\\\1 \\\\3 \\\\2');/* 결과 */'graceful eks012@gmail.com light' 참조자세한 예제는 여기서 확인 가능하다.","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"},{"name":"maria","slug":"database/maria","permalink":"https://gracefullight.dev/categories/database/maria/"}],"tags":[{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"}]},{"title":"/etc/passwd 파일 구조","slug":"etc-passwd-파일-구조","date":"2017-11-14T16:04:12.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/14/etc-passwd-파일-구조/","link":"","permalink":"https://gracefullight.dev/2017/11/14/etc-passwd-%ED%8C%8C%EC%9D%BC-%EA%B5%AC%EC%A1%B0/","excerpt":"","text":"구조로그인명:비빌번호:사용자 ID:그룹 ID:실제 유저명:홈 디렉토리:쉘예시: root❌0:0:superuser:/root:/bin/bash주석이나 공백은 허용되지 않는다. 비밀번호 필드x 표시: 암호화된 비밀번호가 /etc/shadow 파일에 저장되어 있다는 것* 표시: 로그인할 수 없는 사용자공백: 로그인시 비밀번호가 필요 없음 비밀번호 변경passwd 명령어는 누구나 알지만vipw 로 /etc/passwd 파일을 통째로 편집 가능","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"linux","slug":"server/linux","permalink":"https://gracefullight.dev/categories/server/linux/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"linux","slug":"linux","permalink":"https://gracefullight.dev/tags/linux/"},{"name":"centos","slug":"centos","permalink":"https://gracefullight.dev/tags/centos/"}]},{"title":"React에서 jquery, bootstrap 전역으로 사용하기","slug":"React에서-jquery-bootstrap-전역으로-사용하기","date":"2017-11-14T07:55:37.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/14/React에서-jquery-bootstrap-전역으로-사용하기/","link":"","permalink":"https://gracefullight.dev/2017/11/14/React%EC%97%90%EC%84%9C-jquery-bootstrap-%EC%A0%84%EC%97%AD%EC%9C%BC%EB%A1%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/","excerpt":"","text":"create-react-app으로 만들어진 react 앱에서 jquery와 bootstrap을 사용하려면 다음과 같이 설정해주면 된다.index.js123import 'jquery/src/jquery';import 'bootstrap';...","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"react","slug":"javascript/react","permalink":"https://gracefullight.dev/categories/javascript/react/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"react","slug":"react","permalink":"https://gracefullight.dev/tags/react/"},{"name":"bootstrap","slug":"bootstrap","permalink":"https://gracefullight.dev/tags/bootstrap/"},{"name":"jquery","slug":"jquery","permalink":"https://gracefullight.dev/tags/jquery/"}]},{"title":"Redis Flush가 안 될 경우 전체 캐시 비우기","slug":"Redis-Flush가-안-될-경우-전체-캐시-비우기","date":"2017-11-08T01:29:42.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/08/Redis-Flush가-안-될-경우-전체-캐시-비우기/","link":"","permalink":"https://gracefullight.dev/2017/11/08/Redis-Flush%EA%B0%80-%EC%95%88-%EB%90%A0-%EA%B2%BD%EC%9A%B0-%EC%A0%84%EC%B2%B4-%EC%BA%90%EC%8B%9C-%EB%B9%84%EC%9A%B0%EA%B8%B0/","excerpt":"","text":"FLUSH 명령어는 보안상 empty 값으로 대체되어있는 경우가 많은데, 이 경우 전체를 비우는 명령어가 없어서 편법을 써야한다. 해결1$ redis-cli -a '비밀번호' KEYS \"*\" | xargs redis-cli -a '비밀번호' DEL이 명령은 모든 키 리스트를 가져와 하나씩 지워준다.","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"},{"name":"redis","slug":"database/redis","permalink":"https://gracefullight.dev/categories/database/redis/"}],"tags":[{"name":"cache","slug":"cache","permalink":"https://gracefullight.dev/tags/cache/"},{"name":"redis","slug":"redis","permalink":"https://gracefullight.dev/tags/redis/"}]},{"title":"Vue multi page app에서 코드가 미리보이는 현상 제거","slug":"Vue-multi-page-app에서-코드가-미리보이는-현상-제거","date":"2017-11-08T01:28:50.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/11/08/Vue-multi-page-app에서-코드가-미리보이는-현상-제거/","link":"","permalink":"https://gracefullight.dev/2017/11/08/Vue-multi-page-app%EC%97%90%EC%84%9C-%EC%BD%94%EB%93%9C%EA%B0%80-%EB%AF%B8%EB%A6%AC%EB%B3%B4%EC%9D%B4%EB%8A%94-%ED%98%84%EC%83%81-%EC%A0%9C%EA%B1%B0/","excerpt":"","text":"뷰에 데이터가 바인딩 되기전 구문이 보일 때 다음과 같이 하면 된다. 해결v-cloak api에 자세하게 나와있다.12&lt;!-- vue가 바인딩 될 영역에 v-cloak attribute를 추가한다 --&gt;&lt;div id=\"vue_area\" v-cloak&gt;&lt;/div&gt;123[v-cloak] &#123; display: none;&#125; 더 멋진 방법로딩시에 content 영역에 loading…이라는 문구를 찍어주는 방법으로여기에 자세히 설명되어있다.123456[v-cloak] &gt; * &#123; display: none;&#125;[v-cloak]::before &#123; content: \"loading...\";&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"}]},{"title":"Laravel 5.5에 JWT (Json Web Token) Auth 추가하기","slug":"Laravel-5-5-JWT-Auth-Guide","date":"2017-11-02T22:59:40.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/11/02/Laravel-5-5-JWT-Auth-Guide/","link":"","permalink":"https://gracefullight.dev/2017/11/02/Laravel-5-5-JWT-Auth-Guide/","excerpt":"","text":"검색해 나온 포스트들은 5.4버전에 대해서만 나와있어서, 5.5에서는 아무짝에 쓸모가 없었다.라라벨에서 좃인증을 시작해보자. 설치 jwt-auth171103 기준으로 dev-develop 버전의 패키지를 설치해야한다.1$ composer require tymon/jwt-auth:1.0.0-rc.1 service provider 등록config/app.php1234567891011&lt;?php'providers' =&gt; [ ... Tymon\\JWTAuth\\Providers\\LaravelServiceProvider::class,],'alias' =&gt; [ ... 'JWTAuth' =&gt; Tymon\\JWTAuth\\Facades\\JWTAuth::class], 설정파일 publish1$ php artisan vendor:publish --provider=\"Tymon\\JWTAuth\\Providers\\LaravelServiceProvider\" --force secret key 생성1$ php artisan jwt:secret 연동 API Route 설정API 가드와 유저 모델을 설정하다.config/auth.php1234567891011121314151617181920212223&lt;?phpreturn [ 'defaults' =&gt; [ 'guard' =&gt; 'api', // 기본 가드를 api로 변경 'passwords' =&gt; 'users', ], 'guards' =&gt; [ ... 'api' =&gt; [ 'driver' =&gt; 'jwt', // api 가드를 jwt 인증을 사용 'provider' =&gt; 'users', ], ], 'providers' =&gt; [ 'users' =&gt; [ 'driver' =&gt; 'eloquent', 'model' =&gt; App\\Models\\Member::class, // 유저 모델을 해당 모델로 변경 ], ], ...]; Member Model 설정app/Models/Member.php123456789101112131415161718&lt;?php...// jwt를 모델에서 사용하기 위해 추가한다.use Illuminate\\Foundation\\Auth\\User as Authenticatable;use Tymon\\JWTAuth\\Contracts\\JWTSubject;...class Member extends Authenticatable implements JWTSubject&#123; // 아래 두 메소드가 구현되어야 실행된다. public function getJWTIdentifier() &#123; return $this-&gt;getKey(); &#125; public function getJWTCustomClaims() &#123; return []; &#125;&#125; 사용하기 loginapp/Http/MemberController.php12345678910111213141516171819202122232425&lt;?phppublic function login(Request $request) &#123; $credentials = $this-&gt;validate($request, [ 'id' =&gt; 'required|string', 'password' =&gt; 'required|string' ]); if ($token = $this-&gt;guard()-&gt;attempt($credentials)) &#123; return $this-&gt;respondWithToken($token); &#125; return response()-&gt;json(['message' =&gt; 'Unauthorized'], 401);&#125;protected function respondWithToken($token) &#123; return response()-&gt;json([ 'access_token' =&gt; $token, 'token_type' =&gt; 'bearer', 'expires_in' =&gt; $this-&gt;guard()-&gt;factory()-&gt;getTTL() * 60 ]);&#125;public function guard() &#123; return Auth::guard();&#125; Authorized Routes Accept Headerapplication/json 로 설정해야 오류가 예쁘게 반환된다. token 태우기12345# header 이용한 방법Authorization: Bearer yourtokens...# Querystring으로도 인증 가능https://gracefullight.github.io/me?token=yourtokens... routesroutes/api.php1234Route::group(['middleware' =&gt; 'auth:api'], function() &#123; Route::get('member/logout', 'MemberController@logout'); Route::get('member/me', 'MemberController@me');&#125;); logoutapp/Http/MemberController.php12345&lt;?phppublic function logout(Request $request) &#123; $this-&gt;guard()-&gt;logout(); return response(null, 204);&#125; refreshrefresh는 auth:api 미들웨어 없이 처리되어야한다.app/Http/MemberController.php1234&lt;?phppublic function refresh() &#123; return $this-&gt;respondWithToken($this-&gt;guard()-&gt;refresh());&#125; 여담Expired거나 Unauthoriezed경우 status code로 체크하면 된다.5.5버전 메뉴얼이 부족하다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"},{"name":"jwt","slug":"jwt","permalink":"https://gracefullight.dev/tags/jwt/"},{"name":"oauth","slug":"oauth","permalink":"https://gracefullight.dev/tags/oauth/"}]},{"title":"Docker jenkins 설치시 permission 오류","slug":"Docker-jenkins-설치시-permission-오류","date":"2017-10-28T10:43:36.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/10/28/Docker-jenkins-설치시-permission-오류/","link":"","permalink":"https://gracefullight.dev/2017/10/28/Docker-jenkins-%EC%84%A4%EC%B9%98%EC%8B%9C-permission-%EC%98%A4%EB%A5%98/","excerpt":"","text":"run시에 젠킨스가 올라가지 않고 /var/jenkins/home에 파일 퍼미션 오류가 발생할 때 다음과 같이 해결하면 된다. 해결마운트한 볼륨에 1000 유저 권한을 준다. (jenkins의 uid는 1000) docker hub에 나와있는 내용이긴 한다.1$ chown 1000 &#123;볼륨 경로&#125;","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"jenkins","slug":"jenkins","permalink":"https://gracefullight.dev/tags/jenkins/"}]},{"title":"AWS Cli S3 파일 업로드","slug":"AWS-Cli-S3-파일-업로드","date":"2017-10-24T23:16:50.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/10/24/AWS-Cli-S3-파일-업로드/","link":"","permalink":"https://gracefullight.dev/2017/10/24/AWS-Cli-S3-%ED%8C%8C%EC%9D%BC-%EC%97%85%EB%A1%9C%EB%93%9C/","excerpt":"","text":"웹 상에서 파일을 업로드할 때 md5 checksum 오류가 발생해 파일이 전체가 다 안 올라가는 경우도 있고, 세션이 만료되 올라가는 도중에 끊기기도 하는 것 같다. 업로드 방법업로드 할 bucket 의 이름을 조회한다.1$ aws s3 ls앞이 복사할 폴더이고 뒤가 파일이 복사될 s3 bucket 경로이다.1$ aws s3 cp ./ s3://&#123;bucket_name&#125;/&#123;path&#125;/ --recursive --exclude \"*.mp4\" --acl public-readmp4 를 제외한 폴더의 모든 하위 파일들을 public-read 권한으로 업로드했다. 옵션 확인cli docs에서 디테일한 옵션은 확인 가능하다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"aws","slug":"server/aws","permalink":"https://gracefullight.dev/categories/server/aws/"}],"tags":[{"name":"aws","slug":"aws","permalink":"https://gracefullight.dev/tags/aws/"},{"name":"s3","slug":"s3","permalink":"https://gracefullight.dev/tags/s3/"}]},{"title":"운영체제","slug":"운영체제","date":"2017-10-21T04:50:46.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2017/10/21/운영체제/","link":"","permalink":"https://gracefullight.dev/2017/10/21/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C/","excerpt":"","text":"운영체제사용자와 하드웨어 간의 인터페이스 제공 목적하드웨어를 효율적 사용하도록 성능 향상UI 제공성능요소처리율응답시간사용가능도신뢰도 제어프로그램감시 프로그램데이터 관리 프로그램작업 제어 프로그램 처리 프로그램언어번역 프로그램서비스 프로그램문제 프로그램 구성 요소프로세스 관리주기억장치 관리보조기억장치 관리입출력 관리파일 관리 프로세스 기능생성 및 소멸동기화일시중지 및 재실행프로세스 간 통신보호 시스템네트워크 관리명령해석 시스템 종류일괄처리 시스템실시간 시스템시분할 시스템다중 프로그램 시스템: 여러 개의 프로갦이 동시에 실행되는 것처럼 처리하는 방식다중 처리 시스템: 동시에 프로그램을 수행할 수 있는 CPU를 여러 개 두고 각각 분담하여 처리하는 방식분산처리 시스템결함허용 시스템: 시스템 일부가 고장나더라도 전체 시스템은 계속 가동할 수 있는 시스템 발달 과정50년대: 일괄 처리 시스템60년대: 다중 프로그래밍, 멀티 프로그래밍, 시분할, 실시간 처리 시스템70년대: 멀티모드 시분할 시스템80년대: 병렬 프로그램 실행, 펌웨어90년대: GUI00년대: 64bit 입출력장치 발전추세 프로그램에 의한 입출력CPU에서 실행되는 프로그램에 의해 입출력을 직접 제어CPU는 입출력장치에 명령을 보낸 후 동작이 완료될 때까지 대기CPU는 주기적으로 주변장치의 상태를 반복적으로 검사하는 폴링 방식자원낭비가 발생 인터럽트 처리에 의한 입출력입출력 인터페이스가 주변장치의 상태를 검사하여 준비상태가 되면 인터럽트 신호 발생프로그램 상태를 스택에 저장한 후 문맥교환 과정을 통해 인터럽트 서비스 프로그램을 수행주변장치에 명령을 보낸 후 결과가 올 때까지 CPU는 다른 작업을 수행할 수 있어 효율이 높다. DMA직접 메모리 접근 입출력CPU는 상태정보, 제어정보만을 교환하게 하고 데이터 전송은 주변장치와 기억장치 간에 직접 교환하게 하는 방식시스템 버스상에 모듈이 하나 추가되어야 한다.CPU를 통하지 않고 한 번에 한 단어씩 직접 기억장치로부터 모든 데이터 블록을 전송한다.전송이 완료되면 DMA모듈은 CPU에게 인터럽트 신호를 보내고 CPU는 전송의 시작과 끝 부분에만 관여한다.사이클 스틸링: 버스를 사용하기 위해 CPU의 동작을 일시적으로 중단시키는 기법 채널DMA 개념을 확장하여 구현한 입출력만을 위한 전용 처리장치CPU처럼 독자적으로 주기억장치에 저장된 명령어를 처리할 수 있는 프로세스 종류선택 채널: 채널 하나를 하나의 입출력장치가 독점해서 사용하는 방식멀티플렉서 채널: 한 채널에 여러 개의 입출력장치를 연결하여 시분할 공유방식으로 입출력하는 저속 입출력 방식블록 멀티플렉서 채널: 셀렉터 채널과 멀티플렉서 채널 방식을 결합한 방식 기억장치 인터리빙인접한 메모리 위치를 서로 다른 뱅크에 둠으로 동시에 여러 곳에 접근할 수 있게 한다.주기억장치의 구조적 개선으로 접근속도를 개선시키는 방법MAR과 MBR을 연결한 것을 기억모듈이라고 한다.블록단위 전송이 가능하므로 DMA에서 많이 사용한다. 재배치 레지스터수행 중인 프로그램을 다른 곳으로 옮길 수 있도록 하는 레지스터주기억장치 내 프로그램의 기준 주소가 이 레지스터에 기억된다.기준 레지스터 = 재배치 레지스터 폴링CPU가 특정 이벤트를 처리하기 위해 그 이벤트가 발생할 때까지 모든 연산을 모니터링하는데 쓴다.단일 이벤트에 대해서는 유용하지만 프로그램이 길어지게 되면 그만큼 CPU 자원을 낭비하게 된다. 버퍼링속도 차를 줄이기 위해 중간에서 데이터를 일시적으로 기억장소에 축적하는 방법CPU와 저속 입출력장치의 작동속도를 조정한다. 단일 버퍼링주기억장치 일부를 버퍼로 사용한다.버퍼가 채워지거나 비워지는 동안 CPU는 다른 작업을 할 수 없다. 이중 버퍼링2개의 버퍼를 이용해 단일 버퍼링의 단점을 보완하고 입출력과 CPU의 처리성능을 높이는 방법입출력작업과 처리작업을 동시에 처리할 수 있다. 환형 버퍼링여러 개의 버퍼를 원형으로 구성하여 수행하는 방식CPU와 채널은 동시에 버퍼를 채우거나 비우는 일을 독립적으로 수행한다.버퍼의 생산과 소비를 위해 버퍼의 수를 결정하는 게 성능에 매우 중요하다. (환형이기에) 보조기억장치SASD: 순차 기억장치 =&gt; 테이프DASD: 직접 접근 기억장치 =&gt; 나머지 광디스크CD-ROM: 650MBDVD: 4.7~17GBWORM Disk: write once read memory =&gt; CD-R 디스크 용어트랙: 디스크의 회전축을 중심으로 만들어진 동심원섹터: 트랙을 몇 개의 부채꼴 모양으로 나눈 구간실린더: 디스크의 중심축으로부터 동일선상에 위치한 동일 트랙들의 모임클러스터: 여러 개의 섹터를 하나로 묶은 단위, 하드디스크에서 데이터를 저장하기 위한 기본 단위파일할당 테이블: 디스크에 저장되어 있는 각각의 파일들에 대한 정보를 저장한 테이블TPI: Track per Inch, 1인치 당 트랙의 수 보조기억장치 속도레지스터 &gt; 캐시 &gt; 주기억장치 &gt; 보조기억장치자기드럼 &gt; 하드디스크 &gt; 광디스크 &gt; 플로피디스크 &gt; 자기테이프 입출력 채널IOP: Input Output Processor입출력작업이 끝나면 CPU에게 인터럽트로 알려주며 입출력장치와 주기억장치 간의 속도 차이를 해결 채널의 기능입출력 명령 해독각각의 입출력장치에 명령 지시지시된 입출력 명령의 실행을 제어 채널의 종류 셀렉터 채널고속 입출력장치에 적합한 채널입출력장치를 1:1로 전담블록 단위 전송 멀티플렉서 채널저속의 입출력장치 여러 개를 동시에 제어하는 채널바이트 단위의 전송 블록 멀티플렉서 채널여러 대의 고속 입출력장치를 블록단위로 처리 DMA 사이클 스틸링CPU가 메모리에서 명령어를 fetch하여 execute cycle 중에 있을 때 CPU가 메모리를 사용하지 않는 시간을 이용해 DMA를 행한다.상태보존을 하지 않는다.폴링은 주변장치의 상태보존을 하지 않음, 프로그램 제어하의 직접 입출력 방식 주소 지정방식묵시적즉시 주소 지정: 데이터가 명령어에 바로 있음레지스터 주조 지정: 오퍼랜드가 메인 메모리의 주소가 아닌 레지스터를 참조직접 주소 지정: 오퍼랜드에 실제 주소레지스터 간접 주소 지정: 메모리 위치가 기억된 레지스터를 참조인덱스 주소 지정: 오퍼랜드와 인덱스 레지스터의 내용이 더해져 유효번지가 결정베이스 레지스터 주소 지정: 오퍼랜드와 베이스 레지스터 내용이 더해져 유효번지가 결정상대 주소 지정: 오퍼랜드와 프로그램 카운터가 더해져 유효번지 결정간접 주소 지정: 오퍼랜드가 메모리 내의 주소를 참조하여 유효번지를 계산해 메모리에 접근, 2번 메모리 참조 가상 기억장치보조기억장치의 일부분을 주기억장치처럼 사용하는 것매핑이 필요하다. 가상기억장치 구현방법 페이징내부단편화 발생 가능 세그먼테이션논리적 단위기억장치 보호키 필요외부단편화 발생 가능 스풀링입출력할 데이터를 직접 I/O 장치로 보내지 않고 디스크에 모았다가 한꺼번에 입출력을 처리하는 방식CPU와 입출력장치의 처리속도 차이에서 오는 대기 시간을 줄이기 위해 고안버퍼와 비슷한 개념 컴파일러고급 언어 프로그램을 목적프로그램으로 번역한 후 링킹작업을 통해 컴퓨터에서 실행 가능한 실행프로그램을 생성 인터프리터고급 언어 프로그램을 한 줄 단위로 받아들여 번역하고 번역과 동시에 프로그램을 한 줄 단위로 즉시 실행시키는 프로그램컴파일러에 비해 느리다. 절대로더번역된 목적프로그램을 입력으로 받아들인 간단한 로더기억장소 할당이나 연결을 사용자가 직업 지정프로그래머가 절대 주소를 기억해야 한다.다중 프로그래밍 방식에서 사용할 수 없음소규모모듈, 라이브러리 사용 불가 재배치 로더주기억장치의 상태에 따라 재배치 가능한 목적프로그램을 주기억장치의 임의 공간에 적재할 수 있도록 하는 로더 링킹 로더프로그램 적재 시에 필요한 프로그램들을 결합하여 2진 프로그램 이미지를 주기억장치에 적재 객체지향 운영체재OOOS운영체재 개발에 객체지향 프로그래밍 적용객체: 모든 프로시저와 데이터를 묶어놓은 추상적 존재 펌웨어마이크로 명령어로 작성된 프로그램기계어 하부에 프로그래밍층을 형성 에뮬레이션일종의 한 하드웨어 시스템에 부가장치를 부착하여 다른 하드웨어를 모방하는 것하나의 컴퓨터가 다른 컴퓨터와 똑같이 행동하도록 만들어진 마이크로프로그래밍의 소프트웨어를 이용하는 기법 마이크로 다이어그노스틱스시스템의 고장진단을 마이크로 프로그래밍에 의해 수행하는 것 마이크로 커널운영체제의 커널 중에서 가장 기본적이고 핵심적인 기능만을 수행하는 부분만을 따로 구성한 모듈높은 수준의 모듈화 제공바인딩프로그램 내에서 변수 등을 실제 값으로 배정하는 것명령문과 데이터를 주기억장치에 특정 위치로 옮기는 것 기억장치 구성 단일 프로그래밍 시스템주기억장치는 운영체제가 상주할 영역과 현재 수행될 사용자 프로그램이 적재될 영역으로 나뉜다. 다중 프로그래밍 시스템여러 개의 프로세스를 처리주기억장치 관리 기법이 필요하다. 연속 적재 방법연속된 공간에 할당 분산 적재 방법필요한 부분만 주기억장치에 적재하는 방법페이지나 세그먼트로 구성 단일 사용자 연속기억장치 할당주기억장치에 항상 한 프로그램만 적재된 가장 단순한 기법 상주모니터CPU의 유휴시간을 극복하기 위해 작업의 묶음들을 자동으로 처리할 수 있는 운영체제한 프로그램에서 다른 프로그램으로 제어가 자동적으로 넘어가도록 하기 위해 기억장치에 상주입출력 시간동안 CPU는 유휴상태사용자 공간보다 큰 프로그램은 실행이 불가능 오버레이 기법주기억 장치 용량보다 더 큰 프로그램을 분할해 그 분할 된 프로그램을 순차적으로 같은 영역에 적재해 실행하는 방법디스크에 프로그램을 유지하고 운영체제에 의해 기억장치로 교체시키는 방법프로그램을 여러 개의 분할된 조각으로 나누는 일은 프로그래머가 담당 교체 기법swipping충분하지 못한 주기억장치를 가진 시스템에서 여러 개의 프로그램이 하나의 메모리에서 실행될 수 있도록 하기 위해 사용하는 기법swap out: 보조기억장치로 이동swap in: 주기억장치로 이동오버레이 기능이 없으면 기억공간보다 작은 프로그램만 실행 가능 내부 단편화하나의 분할에 작업을 할당하고 남은 공간 외부 단편화대기 중인 작업보다 분할영역이 너무 적어 분할 전체가 빈 공간이 될 때 기억장치 통합인접된 공간을 하나의 공간으로 만드는 것 기억장치 집약여러 개의 기억공간들을 하나의 큰 기억공간으로 만드는 것 기억장치 배치 기법최적 적합최초 적합최악 적합 블록 사상가상기억장치 내의 작업을 블록단위로 사상하는 것 페이징 기법 직접사상페이지 사상테이블의 시작점 레지스터에 페이지 번호를 더해 주기억장치에서 그 페이지 시작주소를 구한 다음 변위를 더함으로 실주소를 계산한다.프로세스의 가상기억장치를 구성하는 모든 페이지에 대한 항목은 페이지 테이블에 존재 연관사상빠른 주소변환을 위해 고속의 연관기억장치를 이용해 페이지 사상표 전체를 넣는 방법 연관/직접사상연관기억장치에는 페이지 사상테이블 중 지역성 있는 페이지를 넣고, 나머지는 직접사상 세그먼테이션 기법가상주소를 분할형태가 일정한 배열이나 함수와 같은 논리적인 다양한 크기의 가변 단위로 주기억장치의 연속적인 공간에 적재하는 방법외부단편화 발생 가능순수 세그먼테이션 기법에서 가상주소 양식: 세그먼테이션 번호, 변위, 가상 주소세그먼 테이블 사상테이블 형식: R, W, E(xecute), A(append) 페이징/세그먼테이션 혼용세그먼트를 페이지화 하는 것가상주소형식이 3차원 요소로 구성: V = (s, p, d)세그먼트 번호, 페이지 번호, 변위세그먼트의 사상테이블의 항이 세그먼트 주소를 가지고 있지 않고 페이지 사상테이블의 기준주소를 가지고 있다.페이지 사상테이블 항목페이지 존재 비트보조 기억장치 주소페이지 프레임 번호 페이지 호출 기법 요구 페이지 호출기법수행 중인 프로세스에 의해 호출된 페이지나 세그먼트를 주기억장치로 옮기는 전략호출된 페이지는 실제로 참조되는 페이지페이지를 할당받기 위해 대기시간이 길다. 예상 페이지 호출기법프로세스에 의해 요청될 페이지나 세그먼트를 미리 예측하여 프로세스가 요구하기 전에 주기억장치로 적재시키는 전략예측 결정이 올바라야 실행시간이 감소한다. 페이지 교체 기법 OPT최적 교체앞으로 가장 오랫동안 사용하지 않을 페이지를 교체하는 기법실현 가능성이 없다. 무작위 페이지 교체무작위로 교체오버헤드가 적다. FIFO LRULeast Recently Used최근에 가장 오랫동안 사용하지 않은 페이지를 교체계수기나 스택을 두어 계산한다.스택 알고리즘 LFULeast Frequently Used사용빈도가 가장 적은 페이지를 교체하는 기법프로그램 실행 초기에 많이 사용된 페이지가 나중에도 프레임을 계속 차지할 수 있다. NURNot Used Recently최근에 사용하지 않은 페이지를 교체하는 기법각 페이지마다 참조 비트와 변형 비트를 사용 클록 페이지 교체원형 리스트를 사용해 페이지를 배열시켜 놓고 리스트의 포인터가 시계바늘이 돌아가는 것처럼 그 원형 리스트로 돌아가게 되는 것 SCR2차 기회 페이지 교체가장 오랫동안 주기억장치에 있던 페이지 중 자주 사용되는 페이지의 교체를 방지하기 위한 것FIFO 기법의 단점을 보완한 기법Second Chance 기법각 페이지마다 참조 비트를 두고 1일 경우 참조 비트를 0으로 바꿔 FIFO 리스트의 맨 마지막으로 이동시킨다. 시간 국부성참조되는 기억장소가 가까운 미래에 계속 참조될 수 있다.반복, 서부루틴, 스택, 계산, 집계 공간 국부성하나의 기억장소가 참조되면 그 근처의 기억장소가 계속 참조될 수 있다.배열 순회, 순차적 실행, 변수 집합 워킹 세트지역성(국부성)을 이용해 페이지 부재율을 감소시키기 위한 개념일정 시간 동안 자주 참조하는 페이지의 집합 스레싱페이지 부재가 비정상적으로 많이 발생하여 프로그램이 처리보다 페이지 교체에 많은 시간을 소비함으로 시스템 처리량이 급격히 저하되는 현상 페이지 부재프로세스 실행 시 참조할 페이지가 주기억장치에 없는 현상 페이지 크기 작을 경우효과적인 워킹세트 확보사상 테이블 크기 증가기억공간 낭비기억장치 효율을 좋다. 클 경우페이지 부재 수 최소화페이지 단편화 현상 초래사상 테이블 크기 감소입출력 효율 증가 요구 페이징 기법페이지의 요구가 있을 때 주기억장치에 적재하는 기법유효 또는 무효를 나타내는 비트가 페이지 사상테이블의 각 항목에 추가된다. 전역 교체프로세스가 교체할 프레임을 그 프레임이 현재 다른 프로세스에 할당되어 있어도 그에 상관없이 전체 프레임 중에서 하나를 선택하여 그 프레임을 사용할 수 있도록 해준다.한 프로세스에 할당된 프레임 수는 증가한다.자신의 페이지 부재율을 조정할 수 없다. 지역 교체각 프로세스가 그 프로세스에 할당된 프레임 중에서 하나를 선택해서 그 프레임을 사용할 수 있도록 해준다.프로세스에 할당된 프레임 수는 변하지 않는다. 프로세스PCB를 가진 프로그램실기억장치에 저장된 프로그램프로시저가 활동 중인 실체비동기적 행위를 일으키는 주체운영체제가 관리하는 실행 단위 프로세스 스케줄러둘 이상의 프로세스가 적절히 실행될 수 있도록 컨트롤 한다. 작업 스케줄러작업의 운선순위, 리소스의 할당 등을 판단해 처리율을 높이는 작업을 한다. 프로세스 상태제출상태: submit보류상태: hold, 스풀러에 의해 디스크에 수록되어 있는 상태준비상태: ready, CPU가 사용가능한 상태, 처리를 기다리고 있는 상태실행상태: running, 프로세스를 수행 중대기상태: blocked, 입출력 처리가 끝날 때 까지 대기 큐에서 대기하는 상태완료상태: complete 프로세스 관리 모듈스풀러: 제출된 작업을 디스크에 수록하여 보류상태로 변환작업스케줄러: 보류 상태 작업들 중 실행될 작업을 선정프로세스 스케줄러: 여러 프로세스 중에서 실행될 프로세스를 선정트래픽 제어기: 모든 프로세스의 상태를 파악하고 프로세스 관리 및 상태변환을 수행하며 프로세스 간의 통신과 동기화를 조정 프로세스 제어 블록PCB프로세스 생성시 만들어지며 모든 프로세스는 각기 고유의 PCB를 가진다.프로세스 식별자프로그램 카운터우선순위처리기 레지스터기억장치 관리정보입출력 정보CPU 사용 시간, 시간 범위, 계정번호, 작업 번호 등 스레드프로세스는 스레드를 담는 공간실행점이 여러개CPU가 하나인 시스템에서 병행실행 가능 스케줄러 장기 스케줄러작업 스케줄러디스크공간에 제출된 프로세스들을 선택하여 주기억장치로 적재하며 실행 빈도수가 적어 장기 스케줄링프로세스가 종료되어 시스템을 떠날 때만 새로운 프로세스를 생성하기 위해 호출 단기 스케줄러CPU 스케줄러, 디스패쳐실행되어 있는 프로세스 중에서 한 프로세스를 선택하여 CPU를 할당 중기 스케줄러CPU를 경쟁하는 프로세스들의 수를 줄여서 다중 프로그래밍의 정도를 완하하는 것 선점 스케줄링우선순위가 높은 다른 프로세스가 현재 프로세스를 중단시키고 자신이 CPU를 차지할 수 있는 기법SRT, RR, 선점 우선순위, 다단계 큐, 다단계 피드백 큐시분할 시스템에 유용 비선점 스케줄링한 프로세스가 CPU를 할당 받으면 다른 프로세스는 CPU를 점유하지 못하는 기법우선순위, FIFO, SJF, HRN, 기한부 알고리즘모든 프로세스에 공정하고 응답시간이 예측 가능 스케줄링 알고리즘 기한부 스케줄링처리기 할당시간을 제한하여 작업 할당시간안에 반드시 종료되도록 하는 기법 우선순위 스케줄링 알고리즘우선순위가 높은 것에 먼저 CPU를 할당하는 방식FIFO 원리기아현상 발생을 방지하기위해 우선순위를 높이는 에이징 기법이 있다. FCFS SJFShortest Job First작업 수행시간이 가장 짧다고 판단되는 것을 먼저 수행 SRT비선점 스케줄링인 SJF를 선점형태로 변경한 기법Short Remaining Time가장 짧은 시간이 소요된다고 판단되는 프로세스를 먼저 수행더 짧다고 판단되는 프로세스가 큐에 들어오면 언제라도 선점된다.시분할 시스템에 유용 RR각 프로세스는 같은 크기의 CPU 시간을 할당받는다.시분할 방식에 효과적이다.할당시간이 크면 FCFS와 같고, 작은면 문맥교환 및 오버헤드가 자주 발생한다. HRNHighest Response Ratio Next실행시간이 긴 프로세스에 불리한 SJF 기법을 보완하기 위한 것대기시간과 서비스 시간을 사용한다.우선순위 = (대기시간 + 서비스시간) / 서비스 시간 FSSFair Share Scheduling프로세스들 집합 간에 프로세스의 스케줄링을 지원하며 UNIX 환경에서 서로 관계있는 사용자들에게 한정된 비용으로 시스템 자원을 사용할 수 있게 개발사용자들은 그룹 짓는데 우선순위 RR 프로세스 스케줄러를 사용한다. 다단계 피드백 큐 스케줄링Multi-level Feedback Queue Scheduling여러 개의 큐를 두고 시간이 지나면 우선순위가 떨어지는 큐로 밀려나게 하는 것과 같이 실행시간이 긴 작업에 벌칙을 주는 방식각 큐의 CPU 할당시간을 정할 수 있어 적응력이 커진다. 병행 프로세스concurrent process두 개 이상의 프로세스들이 동시에 존재하며 실행상태에 있는 것 우선순위 그래프precedence graph각 노드가 개개의 문에 대응하는 방향성 비순환 그래프어떤 연산의 일부분이 가지는 우선순위 제약조건을 정의하는데 유용하다.프로그래밍 언어에서는 사용이 곤란하다. Fork/join최초로 병행 프로그램을 언어적으로 표현Fork: 단일 연산을 2개의 독립적인 연산으로 분할시키는 방법Join: 병행하는 2개의 연산을 하나로 재결합시키는 방법 병행문parbegin/parend 표현방법을 사용하는 기법1개의 프로세스가 여러 가닥의 병렬 프로세스로 분할되었다가 다시 한 가닥의 프로세스로 결합하는 것 Master/SlaveMaster는 연산 + 입출력Slave 연산 약결합 시스템각 프로세스마다 독립된 메로리를 가진 시스템분산 처리 시스템각 시스템마다 독립적인 운영체제프로세스 간의 통신은 메세지 전달이나 원격 프로시저 호출을 통해 이뤄진다. 강결합 시스템여러 개의 프로세스가 하나의 메모리를 공유하여 사용하는 시스템다중처리 시스템하나의 운영체제가 모든 프로세스와 시스템 하드웨어를 제어프로세스 간의 통신은 공유메모리를 통해서 이뤄진다. 대칭 다중처리 구조모든 프로세스가 동등한 입장의 대칭성을 가지고 있으며 구현 및 수해이 매우 복잡한 형태의 가장 강력한 시스템한 운영체제를 동시에 수행할 수 있게 재진입 코드와 상호배제가 필요하다. 비동기 병행 프로세스독립적 프로세스: 시스템에서 실행 중인 다른 프로세스에 영향을 받지 않고 주지도 않는 프로세스유기적 프로세스: 프로세스가 가지는 동일한 입력에 대해 반드시 동일한 결과를 갖지는 않는다. 동기화 기법Synchronization두 개 이상의 프로세스를 한 시점에 동시에 처리할 수 없으므로 각 프로세스에 대한 처리 순서를 결정하는 상호배제의 한 형태세마포어와 모니터 기법이 있다.상호 배제공유자원을 어느 시점에서 단지 한 개의 프로세스만이 사용할 수 있도록 하며 다른 프로세스가 공유자원에 대해 접근하지 못하게 하는 기법 임계구역Critical Section다중 프로그래밍 운영체제에서 여러 개의 프로세스가 공유하는 데이터 및 자원에 대하여 어느 한 시점에서 하나의 프로세스 자원 또는 데이터를 사용하도록 지정된 공유 자원을 의미하며 이를 보호구역이라 한다. Test and set동시성을 제어하기 위한 동기화 명령어 중 하나로 하드웨어의 도움을 받아 수행함수 조건을 비교할 때엔 한 프로세스가 점령을 하면 다른 프로세스가 개입을 할 수 없도록 선점해서 사용하는 개념상호배제를 하는 기법 세마포어semaphore다익스트라가 제안P와 V라는 2개의 연산에 의해 동기화를 유지상호배제 원리 보장 시간종속 오류프로세스들이 임의적으로 변수들을 공유할 때 발생하며 어떤 특정 순서로 실행이 될 때만 발생프로세스가 자원에 대한 접근허가를 얻지 않고 그 자원을 연산하는 경우프로세스가 자원 접근을 허용받고 나서 그 자원을 결코 해제하니 않는 경우프로세스가 요청하지 않은 자원을 해제하는 경우프로세스가 동일한 자원을 반복해서 요청하는 경우 생산자 소비사 문제여러 개의 프로세스를 어떻게 동기화할 것인가에 대한 고전적인 문제한정 버퍼 문제, Bounded-Buffer Problem생산자는 데이터를 인덱스를 통해 배열에 저장하는 식으로 데이터를 생성하며 소비자는 데이터를 증가시키며 배열에 있는 데이터를 인덱스로 접근하여 소비 판독기/기록기 문제다수의 프로세스가 하나의 데이터 객체를 공유하는 경우 한쪽 프로세스는 판독을 하려하고 다른 한쪽 프로세스는 기록을 하려고 할 때 발생하는 문제기록기가 공유객체에 배타적 접근을 하도록 하는 것 병행 프로그래밍 언어Ada: 구조화되고 통계학적 형태를 가지고 명령적, 객체지향적인 고급수준의 컴퓨터 프로그래밍 언어CSP: 처음으로 병행시스템에서 상호작용 패턴을 표현하는 언어 프로세스 간의 통신직접통신간접통신: 메일 박스를 통해 메세지를 보내거나 받는다, 단방향 양방향 모두 가능 교착상태 필수조건상호배제 조건: 자원은 한 번에 한 프로세스만 사용해야 한다.점유와 대기 조건: 각 프로세스가 이미 자신에게 할당된 자원을 갖고 있으면서 다른 자원을 더 요구하고 있다.비중단 조건: 프로세스에 할당된 자원은 스스로 반납하기 전에는 빼앗지 못한다.환형대기 조건: 프로세스 간 환형사슬이 존재하여 각 프로세스는 다음 프로세스가 요구하는 자원을 가지고 있다. 자원할당 그래프프로세스와 자원 간의 관계를 나타내는 그래프를 의미한다. 교착상태 확인방법자원할당 그래프의 사이클이 존재하는지 확인한다.사이클이 지원 유형에 하나라도 있으면 교착상태다. 교착상태 회피프로세스 시작 거부자원할당 거부: 은행원 알고리즘 교착상태 탐지 교착상태 복구 디스크 접근 시간Access Time = Seek Time + Rotational Latency + Transfer time탐색시간: 헤드를 적정 트랙으로 이동하는데 걸리는 시간회전지연시간: 데이터가 현재 위치에서 디스크 헤드까지 회전하는 데 소요되는 시간전송시간: 실제 바이트가 이동하는데 소요되는 시간 디스크 스케줄링 FCFS SSTFShortest Seek Time First탐색거리가 가장 짧은 트랙에 대한 요청을 먼저 서비스하는 기법일괄 처리 시스템에 유용대화형 시스템에는 부적합 SCANSSTF가 갖는 탐색시간의 편차를 해소하기 위한 방법현재 진행 중인 방향으로 가장 짧은 탐색거리에 있는 요청을 먼저 서비스Denning이 개발대부분의 디스크 스케줄링에서 기본 전략진행하면서 들어온 요청도 처리오버헤드가 작을 경우 가장 효율적 N-step SCAN진행하면서 들어온 요청은 따로 모아 반대방향 진행 때 처리 C-SCAN항상 바깥쪽에서 안쪽으로 움직이면서 가장 짧은 탐색거리를 갖는 요청을 서비스안쪽 끝까지 이동하면 가장 바깥쪽 끝으로 이동하고 다시 안쪽으로 들어온다. C-LOOK안쪽 끝까지 이동 후에 가장 바깥쪽 요청 트랙으로 이동한다. SLTFShortest Latency Time First섹터 큐잉회전 시간의 최적화를 위해 디스크 대기 큐에 있는 여러 요청을 섹터 위치에 따라 재정렬하고 가장 가까운 섹터를 먼저 서비스 RAM 디스크빠른 속도로 자료를 처리할 필요가 있을 때 주기억장치인 RAM의 일부를 보조기억장치인 디스크처럼 사용하는 것 블로킹레코드의 입출력 효율을 높이기 위해 여러 개의 논리 레코드를 하나의 블록으로 묶는 것 버퍼링주기억장치의 일부에 큐 방식으로 동작하는 버퍼하나의 프로그램에서 CPU 연산과 I/O 연산을 중첩시켜 처리하는 방식 파일 구조 순차 파일물리적 순서에 따라 저장 인덱스 순차파일레코드를 키에 따라서 논리적 순서대로 저장하고 시스템은 각 레코드의 실제 주소가 저장된 색인을 관리디스크에 적용되는 방식, 테이프 사용 불가 인덱스 순차파일 구성PrimeIndex마스터실린더트랙Overflow 직접 파일물리적 주소를 통해 직접 액세스되는 파일해싱 함수를 이용해 물리적 상대주소를 계산한 후 해당주소에 레코드를 저장DASD의 물리적 주소를 통해 파일의 각 레코드에 직접접근이 가능하여 접근 및 기록의 순서에 제약이 없다. 파일 접근방식queued access method: 레코드 순서를 미리 예상 가능할 때 사용basic access method: 물리적 블록의 RW는 액세스 방식이 담당하고 블로킹 및 해체는 사용자가 담당한다. 디스크 공간할당 연속할당집약 작업이 필요하다.단편화가 발생할 수 있다. 불연속할당 섹터지향 할당동일한 파일에 속하는 섹터들을 연결리스트로 구성하여 할당하는 방식논리적 연결을 탐색하는데 오랜 시간이 필요하고 포인터를 저장할 공간이 필요하다. 블록할당파일에 액세스할 때 해당 블록을 결정한 후 해당 섹터를 결정해야하는 기법블록체인 기법인덱스 블록체인 기법블록지향 파일사상기법: 포인터 대신 FAT(할당 테이블)에 있는 블록번호를 사용하는 기법 파일 서술자file desriptor, FCB파일이름파일구조보조기억장치에서 파일 위치보조기억장치 유형액세스 제어정보파일 유형생성 일시, 제거 일시최종 수정 일시액세스 횟수 접근제어 접근제어 행렬시스템 보호기법으로 행은 사용자 영역, 열은 객체를 나타낸다. 접근제어 리스트ACL각 객체에 댛나 리스트는 영역, 권한, 집합의 순서쌍으로 구성 자격 리스트capability list각 사용자 영역에 대한 자격들로 구성되며 객체와 그 객체에 허용된 연산 리스트 분산파일시스템DFS, Distributed File System여러 대의 서버에 걸쳐 분산되어 저장될 수 있는 계층형 파일시스템 데이터 압축 비손실 압축Run Length: 문자의 반복을 줄임동적 사전법: 출현빈도에 따라 이진트리나 해시테이블 구성 후 포인터로 대체 손실압축이미지 압축오디오 압축비디오 압축 프로세스 테이블 정보프로세스 고유번호, 상위 프로세스 고유번호 (PID, PPID)사용자 이름, 사용자 그룹 이름 (UID, GID)프로세스 현재 상태 장치 드라이버장치드라이버 디렉터리는 /dev시스템의 각종 디바이스들에 접근하기 위한 디바이스 드라이버들이 저장되어 있는 디렉터리하드디스크에 차지하는 공간이 없는 가상 디렉터리 UNIX의 장치 분류블록 지향적: 입출력이 버퍼화되고 물리적인 입출력이 블록단위로 수행문자 지향적: 입출력이 버퍼화되지 않고, 물리적 입출력이 문자 단위로 수행, Raw 인터페이스 UNIX의 파일일반 파일데이터 파일: 텍스트 데이터 파일, 이진 데이터 파일실행가능 프로그램 파일디렉터리 파일특수 파일: 주변장치들을 파일이름을 통해 접근 가능파일이름에 공백이 와서는 안 된다.255자까지 가능하다. 파일접근 자료구조부트 블록슈퍼 블록i-node 블록: 각 파일에 대한 metadata가 기록된 고정된 크기의 구조체 블록파일 소유자 사용번호, 그룹번호파일의 종류데이터 블록의 주소파일의 크기파일이 생성, 사용, 변경된 시간파일의 링크 수데이터 블록: 실제 파일블록을 저장하는 데 이용하는 블록 리디렉션명령어 처리 시 입출력 방향을 지정할 때 사용UNIX 시스템의 3가지 구성요소쉘커널어플리케이션","categories":[],"tags":[{"name":"정보처리","slug":"정보처리","permalink":"https://gracefullight.dev/tags/%EC%A0%95%EB%B3%B4%EC%B2%98%EB%A6%AC/"}]},{"title":"VSCode 추천 패키지","slug":"VSCode-추천-패키지","date":"2017-10-17T15:24:05.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/10/17/VSCode-추천-패키지/","link":"","permalink":"https://gracefullight.dev/2017/10/17/VSCode-%EC%B6%94%EC%B2%9C-%ED%8C%A8%ED%82%A4%EC%A7%80/","excerpt":"","text":"필수 패키지Auto Close Tag: 자동으로 태그를 닫아준다.Auto Rename Tag: 자동으로 짝 태그의 이름을 바꿔준다.Beautify: 선택 영역 및 파일을 beautifyBookmarks: 라인을 북마크해 shift + alt + L 키로 넘어다닐 수 있다.Bracket Pair Colorizer: 괄호를 짝을 맞춰 색상을 입혀준다.Code Runner: 해당 영역을 간단히 실행시켜볼 수 있다.Color Highlight: 색상 코드가 색으로 표시된다.Code Spell Checker: 오타를 잡아준다. (영문만)Debugger for Chrome: 크롬 디버그 툴로 front 디버깅이 가능하다.DotEnv: .env syntax 를 잡아준다.EditorConfig for VS Code: .editorconfig 파일 설정을 불러와준다.ESLint: JS LintingGit History: Git commit log 를 예쁘게 볼 수 있다. (Git Lens 에서 모두 확인 가능)Git Lens: 라인별로 commit log 를 확인할 수 있다. 파일 비교도 가능하다.Guides: 가이드라인이 진해진다.Log File Highlighter: 이제 없으면 로그파일 못 보겠다.Path Intellisense: 경로를 자동으로 잡아준다.Prettier - Code formatter: Beautify 보다 더 좋다.Project Manager: ctrl + shift + p 로 프로젝트를 빠르게 바꿀 수 있다.REST Client: postman 과 같은 기능을 간단한 코드로 구현할 수 있다.Trailing Space: 비어있는 부분을 하이라이트하고 저장시 자동으로 삭제해준다.VS Live Share: Code 환경 간 세션 공유 가능XML tools: xml 하이라이터 개발환경별 취향 cssSass javaDebugger for JavaJava Extension PackJava Test RunnerMaven for JavaSprint Initialzr Java Support javascriptEJS language support: EJS syntax highlighter 중 제일 낫다.JavaScript (ES6) code snippetsVeltur: Vue 매니아라면 phpLaravel 5 Snippets: 라라벨 backendlaravel Blade Snippets: 라라벨 frontendPHP DebugPHP DocBlocker: 빠르게 주석을 만들 수 있다.PHP Intellisense - Crane: PHP intellisense 모듈 중에 가장 똑똑하다.PHP Namespace Resolver - 타입힌팅에 쓰이는 클래스를 바로 import 가능 pythonPython: Python 이 필요하다면Anaconda Extension Pack serverApache Conf: 아파치 속성을 많이 열어봐야 한다면Docker: 도커를 쓴다면ftp-kr: FTP 환경에서 작업할 일이 있다면sftp: ftp-kr 보다 적응되면 나은 것 같다. 기타Markdown Shortcuts: markdown 의 폰트, 표 기능들을 쉽게 이용 가능하다.vscode-pdf: PDF 파일도 열어보고 싶다면Rainbow CSV: CSV 파일의 색깔을 입혀준다. 테마 및 아이콘 테마Dracula Official: 드라큘라 테마Shades of Purple: 보라색 테마 아이콘vscode-icons: 주관적으로 제일 예쁘다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"vscode","slug":"vscode","permalink":"https://gracefullight.dev/tags/vscode/"}]},{"title":"자료구조","slug":"자료구조","date":"2017-10-15T10:00:30.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2017/10/15/자료구조/","link":"","permalink":"https://gracefullight.dev/2017/10/15/%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/","excerpt":"","text":"자료현실세계로부터 관찰이나 측정을 통해서 수집된 사실이나 값자료형태는 숫자로 표현되는 수치값이나 문자들로 구성되는 스트링을 포함 정보어떤 상황에 대한 적절한 의사결정을 할 수 있게 하는 데이터의 유효한 해석이 나 상호 관계자료가 처리되어 발생하는 결과한시성비소모성공공성독점성 자료구조데이터를 효율적으로 사용할 수 있도록 자료의 특성에 따라 분류하여 구조를 만들어서 저장해 둔 것단순 자료구조: integer, float, char 등 단일자료선형 자료구조: 리스트, 스택, 큐비선형 자료구조: 트리, 그래프파일구조: 보조기억장치에 저장되는 대용량의 자료구조 알고리즘유한한 단계를 통해 문제를 해결하기 위한 절차나 방법입력, 출력, 명확성, 정확성, 유한성, 효율성, 일반성 순서도사다리꼴 입출력타원 터미널마름모 비교, 판단육각형 준비 추상자세한 정보는 감추고 사용자가 자료를 사용하는 데 필요한 정보만 인터페이스를 통해 외부로 노출하는 것 프로시져추상화 제공재사용 가능여러 프로그래머가 같은 문제를 해결할 수 있게 도와줌구조 파악이 쉽다 프로시져 간 자료 전달 방법Call By Value: 값에 의한 호출, 프로시저를 호출하기 전에 실인수의 값을 계산하고 값을 호출시에 대응되는 국소적 변수인 가인수에 대입함으로써 전달하는 방식Call By Reference: 참조에 의한 호출, 주소와 포인터 등 실인수를 참조하기 위한 정보가 가인수에 전달되어 동일한 데이터를 참조하게 되어 호출된 프로시저에서 참조하는 값이 변경되면 실인수의 값도 동일하게 변경된다. 재귀함수가 직접 자신을 호출하는 방식 공간 복잡도Space Complexity, 프로그램을 실행시켜 완료하는 데 필요로 하는 공간의 양 고정 공간프로그램 입출력의 횟수나 크기와 관계없는 공간 요구 가변 공간특정 인스턴스에 의존하는 크기를 가진 구조화 변수들이 필요로 하는 공간 시간 복잡도프로그램의 기능을 수행하기 위해 프로그램이 취한 단계수로 표현하는 것 빅오f(n) = O(g(n))은 모든 n, n &gt;= n0에 대해 f(n) &lt;= cg(n)인 조건을 만족하는 두 양의 정수 c와 n0이 존재하기만 하면 f(n) = O(g(n))이다. 배열같은 자료형과 같은 크기를 가진 원소가 순서를 가지고 만들어진 집합인덱스에 의해 참조 순서 리스트나열한 원소들 간에 순서를 가지고 있는 리스트평균 이동 횟수 (n+1)/2, 삭제 시 (n-1)/2삽입 삭제시 전체를 밀어야되지만, 기억장소 효율은 가장 좋다. 연결 리스트공간 제약이 없다.삽입 삭제가 효율적이다. 주소 저장행 우선: 시작주소 + (행 _ 전체 열 크기 + 열) _ 원소 크기열 우선: 시작주소 + (열 _ 전체 행 크기 + 행) _ 원소 크기 희소행렬행렬의 대부분 원소가 0일 경우 기억공간의 낭비가 발생하므로 0이 아닌 원소만 추출하여 [행 번호, 열 번호, 원소] 쌍으로 2차원 배열에 저장하는 방식연산 측면에선 반복적인 패턴을 찾을 수 없어 비효율적 전치행렬행과 열을 바꾼 것, B = A^T로 표현A^T = A면 대칭행렬 스택한 끝에서 삽입과 삭제가 일어나는 순서 리스트LIFO 시스템 스택함수가 호출될 때마다 프로그램은 활성 레코드 또는 스택이라는 구조를 생성하고 시스템 스택의 top pointer에 적재한다. 스택의 적용부프로그램 호출 시 복귀 주소 저장함수 호출의 순서 제어인터럽트 복귀 주소 저장중위 표기식을 후위 표기식으로 변환후위 표기법으로 표현된 산술식 연산0-주소 지정방식의 명령어 자료 저장소재귀 프로그램의 순서 제어컴파일러를 이용한 언어 번역 큐리스트의 한 쪽에선 원소를 삽입하고 다른 쪽에서는 삭제만 하는 구조FIFOfront pointer: 가장 먼저 삽입된 자료의 포인터rear pointer: 가장 나중에 삽입된 자료의 포인터초기 조건: front == rear = -1공백: front == rear = 1 &amp;&amp; front == rear가득참: rear = n - 1 원형큐큐가 가득 찬 후에 첫 번째 큐를 Q[0]에 위치하게 조정하는 배열 이동은 시간이 많이 걸려 원형으로 만듦초기 조건: front == rear == 0삽입 위치: rear = (rear + 1) % n삭제 위치: front = (front + 1) % n공백: front == rear가득참: front == (rear + 1) % n 큐의 적용작업 버퍼 큐프로세스 스케줄링큐잉 시뮬레이션 데크원소의 삽입과 삭제가 리스트의 양쪽 끝에서 이뤄지는 자료구조스택과 큐의 결합Double Ended Queue 스크롤입력 제한 테크한 쪽에선 삭제만 가능 셀프출력 제한 데크한 쪽에선 삽입만 가능 스택 수식 계산우선순위: 승제 &gt; 가감 &gt; 시프트 &gt; 비교 &gt; 등가 &gt; 비트 &gt; 논리 연결 리스트순서 리스트의 문제점삽입 삭제시 많은 이동할당 공간 부족시 재할당표현방법과 기억 공간의 크기가 달라지면 컴파일부터 다시 실행 비사용 기억공간기억 공간이 필요하여 요청하는 경우 할당해 줄 수 있는 공간 연결 리스트의 응용다항식 표현 이중 연결 리스트링크의 방향을 양방향으로 이동할 수 있어 검색 효율성이 좋다.원형 연결 리스트에서 헤드 노드를 사용하는 이유모든 원소가 환형으로 연결되어 있기 때문에 무한 루프에 빠질 수 있어 헤드 노드를 두어 리스트의 시작을 알린다. 트리정보의 검색 및 자료 보관을 위해 널리 사용되고 있는 자료구조사이클을 포함하지 않는 연결 그래프의 일종계층적 자료구조노드와 각 노드를 연결하는 간선으로 구성임의의 노드에서 다른 노드로의 연결은 하나만 가능하다.루트 노드는 하나만 존재트리의 부분 집합은 하나의 트리, 이 것을 서브 트리라고 한다.노드 연결에 순환이 존재하지 않는다. 균형트리B-tree, AVL tree, Red-black tree 용어노드: 자료를 담는 영역간선: 노드 간의 연결 선차수: 하위 노드의 개수레벨: 계층 구조의 노드의 위치 값높이 또는 깊이: 루트에서 터미널 노드까지의 레벨의 개수터미널 노드: 최하위 노드포리스트: 루트 노드를 제거하고 생기는 서브 트리들 이진 트리모든 노드의 차수가 2 이하인 특수한 형태의 트리순서트리의 특성을 가지므로 노드의 위치 또는 순서가 중요한 의미를 가진다.편향 이진 트리: 단말노드를 제외한 트리의 구성 노드들이 왼쪽 또는 오른쪽 자식 노드만을 가지는 형태의 트리전 이진 트리: 단말노드를 제외한 노드들이 왼쪽 자식과 오른쪽 자식 노드를 모두 가지고 있는 형태의 트리포화 이진 트리: 단말노드를 제외한 모든 노드의 차수가 2이면서 최하위 자식 노드들이 모두 차여 있는 형태의 트리완전 이진 트리: 루트 노드에서부터 하위 레벨로 순차적으로 왼쪽 자식, 오른쪽 자식 노드 순으로 추가된 트리의 형태균형 이진 트리: 단말 노드의 레벨 값의 차이가 1 이하인 형태 (완전 이진 트리와 포화 이진 트리를 포함)일차원 배열(완전 이진트리로 가정)과 연결 리스트로 표현하는 방법 이진 트리 순회중위 순회: 좌 루트 우후위 순회: 좌 우 루트전위 순회: 루트 좌 우 이진 트리 정렬루트부터 비교하면서 작으면 왼쪽 자식, 크면 오른쪽 자식완성되면 중위 순회 스레드 이진 트리터미널 노드의 null 값의 링크를 조상 노드에 연결해 알고리즘 성능을 향상시키는 방식 히프완전 이진 트리의 자료구조가장 큰 값이나 가장 작은 값이 완전 이진 트리의 루트에 항상 존재하는 자료구조데이터 목록에서 가장 작은 값이나 가장 큰 값을 빠르게 찾을 수 있도록 구성된 자료구조 우선순위 큐FIFO를 지키면서 우선순위가 부여된 원소는 큐에서 위치와 상관 없이 먼저 출력되는 구조배열, 연결리스트, 히프로 표현이 가능하다.히프 사용시 O(logn)의 복잡도 이진 탐색 트리이진 트리의 구조로 자료 검색 삭제 및 삽입에 효율적인 자료구조원소들은 유일한 키 값을 가지며 좌측 서브 트리는 루트 값보다 작은 값들로 구성된 이진 탐색트리고 우측 서브 트리는 루트의 값보다 큰 값들로 구성된 이진 탐색 트리로 구성중간 노드 삭제시 왼쪽 서브트리의 최대 원소와 오른쪽 서브트리의 최소 원소를 비교하여 중간 노드 값으로 올린다.최대 높이는 n, 최소 높이는 log₂(n) 선택 트리N개의 원소를 임의의 개수로 나눈 원소를 가진 K개의 목록을 합병 정렬할 목적으로 구성 승자 트리2개의 자식 노드 중 값이 작은 노드가 승자가 되어 상위 부모 노드로 올라가는 트리 패자 트리승자 대신 패자 원소를 나타내고 승자는 상위 부모 노드에 올린다. 포리스트서로 연결되지 않은 여러 개의 서브 트리로 구성된 구조자료 접근에 어려움이 있어 이진 트리로 변환해야 한다.이진트리에서 루트 레벨이 1로 시작할 때 레벨 i에서 최대 노드의 수는 2^(i-1) 개 이다.이진트리에서 깊이가 i라면 최대 노드 수는 2^i-1개다. 그래프공집합이 아닌 정점들의 유한집합과 공집합도 허용하는 간선들의 유한집합으로 구성완전 그래프: 최대 수의 간선을 가지는 그래프가중 그래프: 간선에 가중치가 할당된 그래프 그래프의 표현인접 행렬: 간선이 있으면 1 없으면 0인접 리스트: vertex와 link로 표현 그래프 순회깊이 우선 탐색: 스택너비 우선 탐색: 큐신장 트리: 그래프의 간선들로만 구성되고 그래프의 모든 정점을 포함하는 트리, 사이클이 포함되면 안된다. 최소 비용 신장 트리모든 정점들을 가장 적은 수의 간선과 비용으로 연결하는 트리비용은 거리 및 시간을 의미한다.Prim, Kruskal, Sollin 알고리즘이 있다. Prim가중치가 적은 간선을 선택해 가는 방식 Kruskal탐욕적 방법매번 선택마다 전체에서 가장 좋다고 생각하는 간선을 선택 그래프의 응용 PERT/CPMProgram Evaluation and Review Technique / Critical Path MethodPERT: 프로젝트에 필요한 전체 작업의 상호관계를 표현하는 방법CPM: 프로젝트 완성에 필요한 작업을 나열하고 작업에 필요한 소요 기간을 예측하는 데 사용하는 기법상세 계획을 수립하기 쉽고 변화나 변경에 대해 바로 대처할 수 있고 네트워크상 문제점을 파악할 수 있고 중점관리가 가능하나 작성에 많은 시간이 든다. 최단 경로Dijkstra 알고리즘: 첫 번째 정점 a에서 최단 경로의 길이인 두 번째 정점을 찾는 알고리즘 탐색주어진 리스트에서 원하는 키를 찾는 것비교 탐색방법: 탐색 대상의 키를 비교하여 탐색하는 방법, 순차 탐색, 이진 탐색, 이진 트리 탐색계산 탐색방법: 계수적인 성질을 이용하여 계산으로 탐색을 하는 방법, 해싱 순차 탐색주어진 리스트에서 탐색키와 같은 레코드를 검색하는 방법O(n) 이진 탐색이미 정렬되어 있는 리스트에서 절반을 쪼개가며 값을 찾는 방식O(logn) 피보나치 탐색피보나치 수열을 이용해 중간 값을 계산해 속도가 빠르다. 정렬내부 정렬: 리스트가 작아 주기억장치에서 모두 정렬이 가능외부 정렬: 외부 기억장치를 이용해 정렬비교식 정렬: 비교하고자 하는 각 키 값들을 한 번에 2개씩 비교하여 교환하는 방식분산식 정렬: 키 값을 기준으로 하여 자료를 여러 개의 부분 집합으로 분해하여 각 부분집합을 정렬함으로써 전체를 정렬하는 방식 삽입 정렬정렬되어 있는 값들을 삽입하고자 하는 값과 비교하여 큰 값들은 뒤로 이동한 후 삽입하는 방법O(n^2)두번 째 원소를 기준으로 이전의 레코드들과 비교하여 적절한 위치를 찾아 삽입하는 방식 쉘 정렬매개변수 값을 정하여 매개변수의 값만큼 간격을 가지는 레코드들을 여러 개의 서브 파일로 구성하면서 각 서브 파일을 삽입 정렬방식으로 배열하는 과정을 반복하는 것interval은 전체 레코드의 개수의 절반인 interval = n/2에서 시작해 매번 interval = interval / 2로 interval 값이 0보다 큰 경우에 반복 수행한다.O(n^1.25) 퀵 정렬기준값인 피벗을 중심으로 큰 원소들은 오른쪽 부분집합으로 분할하여 정렬하는 방법분할 정복기법정렬할 자료들을 기준값을 중심으로 2개의 부분집합으로 분할하는 작업과 기준값보다 작으면 왼쪽 부분집합으로 크면 오른쪽 부분집합으로 정렬하는 정복 작업을 부분 집합의 크기가 1 이하가 될 때까지 반복한다.O(nlog₂n), 최악 O(n^2) 버블 정렬인접한 2개의 레코드를 비교하여 위치를 서로 교환하는 방식한 회전을 거치면 리스트의 마지막의 가장 큰 레코드가 남게 된다.O(n^2) 2원 합병 정렬이미 정렬된 2개 이상의 배열이 있을 때 이들을 합쳐서 하나의 정렬된 배열을 만드는 것O(nlogn) 히프 정렬O(nlogn)히프 트리를 이용해 정렬하는 방식으로 항상 가장 큰 원소가 루트 노드가 되고 삭제 연산을 수행하면 항상 루트 노드의 원소를 삭제하여 반환하게 된다. 선택 정렬단순한 정렬방법이동하면서 가장 작은 값을 앞으로 보낸다.O(n^2)데이터 양이 적을 때 아주 좋은 성능을 낼 수 있다. 기수 정렬큐를 이용하여 자릿수 (digit) 별로 정렬하는 방식부동소숫점 정렬 불가능O(dn)","categories":[],"tags":[{"name":"정보처리","slug":"정보처리","permalink":"https://gracefullight.dev/tags/%EC%A0%95%EB%B3%B4%EC%B2%98%EB%A6%AC/"}]},{"title":"Vee-Validate Custom Validation","slug":"Vee-Validate-Custom-Validation","date":"2017-10-15T04:57:29.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/10/15/Vee-Validate-Custom-Validation/","link":"","permalink":"https://gracefullight.dev/2017/10/15/Vee-Validate-Custom-Validation/","excerpt":"","text":"커스텀 validation을 추가해야할 때가 있다.created에 $validator 인스턴스를 확장해주면 된다. 소스123456789101112created: function() &#123; this.$validator.extend('customRule', &#123; getMessage: function(field, args) &#123; return '오류 메세지'; &#125;, validate: function(value, args) &#123; // 체크 로직 return true; &#125; &#125;);&#125;모듈형태거나 전역설정이면 import { Validator } from 'vee-validate'; 후에 Validator.extend로 접근하면 된다. 사용법추가한 룰 이름으로 v-validate 속성에 넣어주면 끝이다.1&lt;input type=\"text\" name=\"help\" v-validate=\"'required|customeRule'\" /&gt; 스크립트 상에서 추가attach 메소드로 붙히면 된다.1this.$validator.attach(\"help\", \"customRule\");다른 사용법은 공식문서를 참조하자","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"}]},{"title":"Laravel - Migration으로 FK 생성이 안될 때","slug":"Laravel-Migration으로-FK-생성이-안될-때","date":"2017-10-11T23:19:21.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/10/11/Laravel-Migration으로-FK-생성이-안될-때/","link":"","permalink":"https://gracefullight.dev/2017/10/11/Laravel-Migration%EC%9C%BC%EB%A1%9C-FK-%EC%83%9D%EC%84%B1%EC%9D%B4-%EC%95%88%EB%90%A0-%EB%95%8C/","excerpt":"","text":"참조할 테이블의 PK가 increment로 정의되어 있고, 연결할 테이블의 FK가 integer로 되어있는데, SQL Syntax ERROR가 날 경우에 다음과 같이 처리하면 된다. 해결increment가 기본적으로 unsigned이기 때문에 외래키를 걸 컬럼이 unsigned인지 확인해보자.(컬럼 타입이 완전히 같은지 확인해보자.)12345678&lt;?php...// FK$table-&gt;integer('pk_id')-&gt;unsigned();// PK$table-&gt;increment('id');... 여담ALTER TABLE CONSTRAINT FORIEN KEY 구문에 문제가 있는 줄 알고 한참 삽질","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"컴퓨터네트워크","slug":"컴퓨터네트워크","date":"2017-10-05T02:03:25.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2017/10/05/컴퓨터네트워크/","link":"","permalink":"https://gracefullight.dev/2017/10/05/%EC%BB%B4%ED%93%A8%ED%84%B0%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/","excerpt":"","text":"컴퓨터 통신망단말기와 단말기 사이를 전송매체가 연결하여 데이터를 주고받는 행위 컴퓨터 통신망의 역사1958 - SAGE: 최초의 컴퓨터 통신 시스템, 대공방어장치1961 - TSS: 최초의 시분할 통신시스템, Time Sharing System1968 - ARPA: 최초의 패킷 교환방식1968 - ALOHA: 하와이 대학 최초의 무선 패킷 교환 통신망1974 - SNA: 체계화된 컴퓨터 통신망, System Network Architecture 컴퓨터 통신망의 목적자원의 공유와 신뢰도 향상처리 기능의 부산과 프로세스 간 통신제공시스템 간 호환성 확대최소의 비용으로 최대의 성능 제공통신망의 목적자원의 공유와 신뢰도 향상 및 처리기능의 분산과 프로세스 간의 통신 제공 컴퓨터 통신망의 서비스데이터음성이미지영상멀티미디어 데이터 통신 시스템데이터 처리계: 컴퓨터데이터 전송계: 단말, 데이터 전송장치, 통신제어장치 등 데이터 단말장치DTE: Data Terminal Equipment전송할 데이터를 부호로 변환하거나 처리하는 장치컴퓨터, 프린터, 터미널 데이터 단말장치 기능입출력 기능데이터 수집과 저장데이터 처리통신, 통신제어 데이터 회선종단장치DCE: Data Circuit terminating Equipment신호변환장치DTE에서 처리된 신호를 변환하거나 통신회선상에 놓여 있는 신호를 변환하는 장치모뎀, 랜 어댑터, DSU 등이 해당 데이터 회선종단장치 기능신호변환전송신호의 동기제어송수신 확인 기능전송오류검출 및 정정 기능 통신 소프트웨어컴퓨터 상호 간에 접속하여 정보를 교환할 수 있게 하는 소프트웨어 응용 소프트웨어특정 분야에 대해 망의 접근을 가능케 하는 소프트웨어메세지 핸들링 시스템 상호접속 소프트웨어망내의 각 지점을 서로 연계하여 작동하도록 기능하는 소프트웨어프로토콜X.25, TCP/IP 컴퓨터 통신망 프로토콜특정 단말기 사이의 상호통신을 위한 규약 프로토콜 3요소문법: syntax타이밍의미: semantic 프로토콜 주요 기능흐름제어오류제어순서화 전달주소지정다중화전송분할과 병합캡슐화연결 계층 물리 계층회선구성, 데이터 전송방식, 접속형태, 물리적인 링크 설정 유지 해제 의 기능V.24, V.28(RS-232C)X.21, X.21bisI.430, I.431 ISDN 데이터링크 계층노드 대 노드 전달, 주소 지정, 전송되는 데이터 동기 확인, 흐름제어, 오류 제어HDLCLAN의 LCC, MACLAPB 네트워크 계층발신지 대 목적지 전달, 논리주소 지정, 주소 변환, 논리적 링크 구성, 라우팅, 다중화IPICMP, ARP, RARP 전송 계층데이터 전송 종단 간의 신뢰성 제어, 포트 주소 지정, 분할과 병합, 연결제어TCP, UDP 세션 계층송수신 프로세스 간의 연결 확립, 연결 해제, 송신권 제어, 동기점 표시 표현 계층통신을 위한 데이터 포맷 형태의 변환기능, 데이터 암호화, 데이터 압축, 네트워크 안전성 보장 응용계층사용자가 직접 접하는 부분 전송 코드 보도 코드Baudot code이진수로 만들어진 코드화된 최초의 문자표국제 전신인쇄기에서 사용 ASCII 코드American Standard Code for Information Interchange미국 표준기구에 정한 표준 부호7개의 정보 비트와 1개의 패리티 비트로 구성7개의 정보비트로 128개 조합 가능숫자와 영문자 모두 사용짝, 홀 패리티에 의해 오류 발생 여부를 알 수 있음 EBCDIC 코드확장 이진화 10진 코드Extended Binary Coded decimal Interchange CodeBCD 코드를 확장256개의 비트패턴이나 문자로 표현 전송방식 단방향Simplex라디오, TV, 전광판 반이중Half-duplex양방향 전송이 가능하지만 동시에는 불가능무전기, 팩스 전이중Full-duplex양방향 전송가능, 두 개의 전송 채널이 필요전송 효율이 높으나 비용이 많이 듦전화 직렬 전송serial transmission전송하고자 하는 각 데이터 비트를 직렬화한 뒤 하나의 통신회선을 이용해 한 비트씩 순차적으로 전송하는 방식원거리 전송에 적합저속 통신 방식이 사용 병렬 전송perallel transmission전송하고자 하는 데이터를 비트별로 통신회선을 따로 두고 동시에 복수 비트를 한꺼번에 전송근거리 데이터 전송에 이용고속 전송에 적합 베이스밴드 전송디지털 데이터를 그대로 보내거나 전송부호로 변환시켜 전송하는 방식RZ, NRZ, AMI, Manchester, CMI 등이 전송부호로 사용주로 LAN에 사용가까운 거리 브로드밴드 전송하나의 전송매체에 여러 채널의 데이터를 실어서 동시에 전송하는 방식데이터 신호보다 높은 반송파에 실어서 변조를 거친 후 전송하기 때문에 원거리 전송에 유리하나의 전송매체로 멀티미디어 서비스 제공 가능주파수 분할 다중화에 적합홈 네트워크와 케이블 TV 전송모드 동기식 전송전송된 데이터를 정확히 수신하기 위해 송수신 측 간의 타임이을 일치시켜 전송하는 방식데이터를 한 묶음의 문자열로 전송할 수 있음비트마다 동기를 취해 긴 데이터를 송신할 수 있다.전송효율과 전송속도가 높음 비동기식 전송전송하고자 하는 문자 앞 뒤에 시작 비트와 정지 비트를 첨부하여 전송하는 방식동기는 바이트 단위로 이뤄지며 저속용 데이터 전송에 사용 전송효율 코드효율코드효율 = 실제정보 비트 수 / 전체 정보 비트 수 전송효율전송효율 = 정보 비트 수 / 전체 비트 수 전체효율전체효율 = 코드효율 X 전송효율실제 전송되는 전체 비트 중에서 실제 데이터가 차지하는 비율위상변조잡음에 강하고, 레벨 변화의 영향을 적게 받으며, 일정한 크기의 대역폭을 필요로 한다.간단한 회로 구성동기화송신 측과 수신 측 사이에 정보를 보내는 시점을 합의하는 절차PCM신호를 양자화, 표본화, 부호화하여 펄스 변조하는 불연속 펄스 변조펄스코드변조 전송매체 꼬임선 케이블두 가닥의 절연된 구리선이 균일하게 서로 감겨 있는 형태 UTPUnshielded Twisted Pair, 비 차폐 이중 꼬임선가격 저렴, 설치가 쉽고 유연하다랜선최대 100mRJ-45 커넥터 STPShielded Twisted Pair, 차폐 이중 꼬임선UTP에 비해 비쌈외부전류로부터 보호를 위해 금속박막을 접지하는 특별한 커넥터를 사용해 설치가 복잡백본의 최대 사용길이는 100m로 제한 동축 케이블내부 단일 전선과 외부 도체로 구성이중 나선보다 처리율이 좋다베이스밴드와 브로드밴드 전송 방법을 사용할 수 있다.수백 Mbps의 고속전송이 가능바다나 땅에 묻어도 성능에 큰 지장이 없음전력 손실이 적고 높은 주파수에서 빠른 데이터 전송 가능차폐성이 좋아 간섭이 적음1km 마다 리피터를 필요로 한다. 종류RG-8, 9, 11: 굵은 이더넷RG-58: 얇은 이더넷RG-75: TV 얇은 동축 케이블Thin 이더넷 또는 10BASE-2반드시 같은 케이블로만 연결해야한다.최대 사용 길이는 185m 굵은 동축 케이블Thick 이더넷 또는 10BASE-5네트워크 백본으로 사용최대 사용길이는 500m설치와 취급이 어렵다. 광섬유유리 세관이나 다른 투명한 재료를 섬유로 하여 그 내부에 적당한 굴절률을 분포시켜 부호화된 신호의 빛이 전송될 수 있도록 한 전송매체넓은 대역폭케이블 다발이 아주 작고 무게가 가벼움감쇠도가 현저히 낮다, 간섭에 강하다.오류 발생이 적으나 탭을 이용해 분기선을 내기가 힘들다.넓은 리피터 설치 간격multi mode, single mode광송신기는 전기신호를 광신호로, 광수신기는 반대로설치시에 기술력이 필요 단일 모드단계 지수 광섬유를 사용광선을 수평에 가까운 작은 영역의 각도로만 제한광원을 고도로 집중 다중 모드광원으로 나온 여러 개의 광선이 중심부에서 서로 다른 경로를 가지고 이동 무선통신매체 지상 마이크로파Terrestrial microwave접시형 파라볼라 안테나안테나의 직경은 10ft 내외로 안테나를 고정하고 수신 안테나 방향으로 가느다란 빔을 발사장애물이 없는 고지대에 위치 위상 마이크로파통신위성은 마이크로파 중계국으로 2개 또는 그 이상의 지상 송신국을 서로 연결어떤 주파수 대역을 수신해 이를 증폭해서 아날로그 전송ㅇ르 하거나, 재생해 디지털 전송으로 다른 주파수로 송신사용 빈도수가 높은 국제간의 통신용으로서 가장 좋은 매체위성전송의 주파수 범위는 1~10GHz 라디오파다방향성AM, FM, 초단파(VHF), 극초단파(UHF)감쇠 정도가 낮고 대역 확산의 경우 여러 주파수를 동시에 사용 가능특정 주파수를 사용하고 있는 네트워크와 인접하지 않은 곳에서 주파수 대역을 재사용 가능30MHz ~ 10GHz대기 반사에 기인한 상호 간의 간섭을 일으키지 않음주요한 손상 요인은 다중경로 간섭이다. 통신선로 점대점 선로point to point연결 개수가 많아질수록 성능이 좋지만, 전송 매체의 길이가 증가해 비용이 많이 든다.네트워크 트래픽이 많은 구간에는 전송매체의 수를 늘리고 않은 구간은 줄이는 게 해결책 멀티드롭 선로브로드캐스팅 방식전송매체 하나에 여러 단말기를 공유하여 연결분기장치를 설치하고 3개소 이상의 지점을 연결하는 방식사용률이 낮은 여러 단말기들을 하나의 회선에 여러 개 접속해서 회선사용효율을 높이는 것이 가능해진다.버스 방식 네트워크 형태 스타형중앙의 제어 스테이션으로부터 모든 장치는 점대점 방식 연결고장 발견이 쉽다 버스형버스에 모든 노드가 연결버스의 끝에는 terminator를 둔다.노드의 고장이 망 다른부분에 전혀 영향을 미치지 않는다.보통 CSMA/CD 방식 사용 링형단방향 점대점 형태분산 제어와 checking, recovery가 간으하나 노드의 변경이나 추가가 비교적 어렵다.노드의 고장에 대처하기 어렵다.광섬유에 잘 맞음 허브/트리형허브에 연결된 스타형 메시형단말기들이 모두 연결된 형태 데이터 교환 회선교환 축적교환데이터를 송신 측의 교환기에 임시 저장시켰다가 수신 측 터미널에 전송하는 방식 메세지 교환 방식각 메세지마다 전송경로를 결정하고 수신측 주소를 붙여 전송전송 메세지는 추후 검색이 가능응답시간이 느려 대화형 데이터 전송에는 부적합 패킷 교환 방식메세지를 일정한 길이의 패킷으로 분할하여 전송하는 방식네트워크 계층회선 이용률이 매우 높다송신 측으로 분할되어 전송된 데이터를 수신 측에서 재결합응답시간이 빨라 대화형 데이터 전송에 적합 교환 방식 회선 교환 방식데이터를 전송할 때마다 통신경로를 설정하여 데이터를 교환하는 방식회선의 설정, 데이터의 이도으, 회선의 단절매번 통신경로를 설정통신경로 접속시간이 1초 이내길이가 길고 통신 밀도가 높은 데이터 통신에 유리접속된 동안엔 두 시스템 간의 통신회선이 독점 메세지 교환 방식축적 교환 방식으로 데이터의 논리적 단위인 메세지를 교환교환기가 메세지를 받았다가 보내주는 방식회선 효율이 증대비동기 전송이 가능연결 설정이 불필요다중 전달이 쉽다실시간이나 빠른 응답시간에는 부적합지연이 상적으로 길다음성 신호 전송에는 불가능 패킷 교환 방식수신 측 주소에 따라 적당한 통신경로를 선택해 전송하는 교환 방식전송하고자 하는 정보를 일정한 크기의 데이터로 분할하여 송수신 주소인 헤더를 각각 부가한 패킷 단위로 전송데이터그램과 가상회선 방식경로 설정, 트래픽 제어, 오류 제어오류 발생시 해당 패킷만 복구하면 됨회선 다중화로 효율 증대교환기에 축적 전송 가능부가서비스 제공패킷이 파일화 되진 않는다. 다중화기하나의 전송로에 여러 개의 데이터 신호를 혼합시켜 전송하는 방법다수의 저속회선 사용자를 하나의 고속전용선에 접속시켜 통신망을 이용가능하게 한다.시분할 다중화, 주파수분할 다중화 방식이 있다. 집중화기수신 단말기로의 데이터 전송을 위해 여러 단말기로부터 데이터를 고속전용선에서 조합하거나 형태를 변경시킬 수 있는 장치N개의 선을 M개의 선으로 출력실제 전송할 데이터가 있는 단말에만 회선을 동적 할당 단말기터미널컴퓨터나 컴퓨팅 시스템에 데이터를 입력하거나 표시하는데 쓰이는 하드웨어적인 기기 종류텍스트 터미널: 테긋트 입력 및 표시를 위한 직렬 컴퓨터 인터페이스단순 단말기: 덤 터미널, 기계식 타자기가 하는 것처럼 똑같은 제한된 기능그래픽 단말기: 씬 클라이언트, RDP, X11과 같은 프로토콜 사용 베이스밴드 신호단말에서 출력되는 디지털 정보를 부호화하여 변조과정을 거치지 않고 전송하는 방식고주파 영역이 차단될 수 있어 베이스밴드 신호를 전송로에 적합하게만 변환한다.단극, 복류, 단류 RZ, 복류 RZ, NRZ, 바이폴라, 맨체스터, 차분적 맨체스터, CMI 등의 전송방식 변복조기모뎀 단말장치 주요기능입출력 기능전송제어 기능기억 기능: 일시적 데이터 저장 신호변환장치의 주요기능신호 변환 기능전송신호의 동기 제어기능송수신 확인 기능전송오류의 검출 및 정정 기능 변복조아날로그 신호를 디지털 신호로 변환하거나 그 반대 디지털 데이터 네트워크 인터페이스DCE와 DTE 사이의 경계조건의 규정X.20, X.21, X.25, X.28, X.29 음향 결합기공중전화교환망 (PSTN)수화기를 모뎀 위에 얹어 놓으면 송화기에서 들리는 소리를 매개로 데이터를 주고 받게되는 원리주파수 편이변조 방식을 사용(FSK)저속 데이터 전송(600bps, 1200bps) 전처리장치전방처리기, FEP, Front-End Processor호스트 컴퓨터와 단말기 사이에 설치되어 입출력 작업을 전담하도록 개발된 특수용도의 컴퓨터데이터 교환 기능, 프로토콜 변환기능, 통신 회선 및 터미널의 제어, 전송 메세지 검사 기능 등 폴링/셀렉팅 방식polling / selecting폴링과 선택에서 송수신을 권유하는 것하나의 통신회선상에 3개 이상의 단말이 있는 분기회선에 있어 단말기 상호간 데이터링크를 확립하는 방식 라운드 로빈 방식시분할 시스템다중화정적인 채널의 공유 방안, 채널에서 주파수 대역이나 타임슬롯을 사전에 할당, 입출력의 비트율(용량)이 일치한다. 통신제어 임의접근제어discretionary access control시스템상의 객체에 대한 접근을 개인 또는 그룹의 식별자를 기반으로 한다. 부 네트워크대규모 네트워크를 구성하는 데 있어 개별적인 소규모 네트워크를 의미 통신제어 구조회선접속부, 전송제어부, 연산부 원격처리장치RP, Remote Processor단말기와 접속해 복수단말회선의 집선 역할과 동시에 단말기 제어, 정보량의 제어 등의 기능을 수행한 후 한 가닥의 고속통신회선에 의해 주 컴퓨터로 송신 전처리장치통신회선 및 단말기 제어의 지능, 다중화기능, 데이터의 형식변환 및 메세지 통신제어마이크로 프로세서 내장 후처리장치주 컴퓨터 후단에 설치되어 주 컴퓨터가 수신한 데이터 중 별도로 처리할 필요가 있을 때 사용하는 장치 통신 기능통신망 운영 및 관리전송상 오류검출과 정정통신회선의 효율적인 활용통신회선의 접속과 데이터링크 확립링크의 개방, 상태 감시통신회선 차단최적의 경로선택 및 제어보안 통신 기능의 종류온라인 처리 방식오프라인 처리 방식실시간 처리 방식일괄 처리 방식: Batch Processing 네트워크 아키텍쳐컴퓨터와 단말기 또는 망의 기능이 서로 알맞게 나눠 최적의 상태로 통신망이 구축되게하는 기본 구조나 기술 OSI 7 레이어네트워크 의존계층: 물 데 네전송계층: 전응용지향계층: 세 표 응상위 계층에서 하위계층으로 데이터가 전달되면서 헤더정보가 추가 전달하위 계층에서 상위계층으로 데이터가 전달되면서 헤더정보가 삭제헤더가 삭제되는 과정을 decapsulation 이진동기통신BSC, Binary Synchronous Communication1964년 IBM에서 개발되어 사용되고 있는 데이터링크 프로토콜점대점 방식과 다중점 구성에 쓰인다.정지-대기 ARQ, 흐름제어, 오류 정정 등을 사용하는 반이중 전송방식 지원 이진동기통신 프레임프레임은 2개 이상의 동기 문자로 시작SYN SYN STX data ETX BCC(블록검사 계산 LRC CRC)다중 블록 프레임의 경우 STX data ITX BCC STX data ETX BCC HDLC고급 데이털이크 제어, High level DataLink Control비트중심 프로토콜불균형 구성: 하나의 장치가 주국이며 기타 다른 모든 장치는 종국대칭 구성균형 구성 통신모드정규응답모드: NRM, 종국은 전송 전 반드시 주국의 허가가 필요비동기응답모드: ARM, 채널이 사용되지 않으면 주국 허가 없이 전송 가능비동기균형모드: ABM, 모든 지국이 동등하며 점대점으로 연결된 조합국만 사용 프레임정보 프레임: I프레임, 사용자 데이터와 그에 관련된 제어정보 전송감시 프레임: S프레임, 제어정보 전송 및 데이터링크 계층의 흐름제어와 오류제어무번호 프레임: U프레임, 시스템 관리를 위해 예약, 링크 자체를 관리할 목적시작 플래그, 주소, 제어, 정보, FCS, 종료 플래그로 구성 표준화 ITU-TITU 산하의 표준화 기구로 전화, 팩스, 패킷 교환 데이터 통신 등의 공중 통신망에 대한 국제 표준화를 담당 ISO1946년 창설되어 다양한 분야의 표준을 개발하기 위한 국제 표준화 기구 ISOC인터넷 설계 및 운영을 위한 조정 위원회 IEEE미국전기전자학회 LAN 표준화 FCC미국연방통신위원회클록 드리프트클록 속도가 달라 비트 간 발생시간이 다르거나, 송수신단의 독립적인 두 개의 클록이 정확하게 일치되지 않는 클록의 어긋남 비트 동기각 비트마다 타이밍을 맞추는 것7~8비트로 구성된 비트열을 하나의 단위로서 타이밍을 취한다.동기 방식: 비트 위치를 알려주는 동기신호를 사용하는 방식비동기 방식: 정보 처음에 정보의 시작을 상대에게 알려주는 비트를 첨가동기 신호를 보낸 송수신 측에서 동기를 취한 다음 일정한 주기로 신호를 구분하는 방법 주소 지정 물리 주소컴퓨터의 메인 메모리를 접근할 때 사용하는 주소기억장치의 주소 레지스터에 적재 논리 주소실제 주소와 구분하여 사용자 관점에서 본 논리적인 프로그램의 주소mapping 하드웨어에 의해 실제주소로 변경 포트 주소물리적인 전용선은 하나이지만 여러 응용 프로그램이 서로 나눠 사용하기 위해 도출된 개념MAC 주소: 데이터 링크 계층 주소 (노드 대 노드)IP 주소: 네트워크 계층 주소(호스트 대 호스트)PORT 주소: 전송계층 주소(프로세스 대 프로세스) 기호 주소Symbolic Address정보의 위치와 무관하게 특정 언어, 함수 또는 다른 정보를 지정하는데 쓰이는 레이블프로그램에서 기억 장소를 지정하는데 사용하는 영숫자 레이블프로그램을 작성할 때 사람이 알기 쉽게 적당한 명칭을 붙혀 표시한 주소 오류 제어 오류 제어 방식오류에 중복성을 부가하는 방식: 패리티 비트, 해밍 코드, 순환 중복 검사전송 방법에 중복성을 부가하는 방식: 반송대조 방식(에코 검사), 3연속 전송방식 오류 정정 방식자동반복요청 방식(ARQ)순방향 오류정정 방식(FEC) 패리티 비트 검사 블록합 검사패리티 비트가 각 문자에 대해 짝수의 배수만큼 비트에 오류가 발생하면 오류를 검출하지 못하는 단점을 보완수직 수평 패리티 비트 검사를 통해 오류 검출 순환 중복 검사CRC, 귀환 오류 제어다항식을 이용CRC는 나머지로 작용 전진 오류 수정FEC, Forward Error Correction문자나 프레임에 부가적인 정보를 추가해 오류가 존재하는 경우 수신 측이 오류검출뿐 아니라 정확한 정보가 어떤 것인지 수신한 비트열로부터 유추할 수 있는 방식데이터 비트 프레임에 잉여 비트를 추가해 오류를 검출, 수정한다. 넘버링 방법해밍 코드 방식에 준한 방법 흐름 제어송수신 양측 간 처리속도가 다른 경우에 데이터 양이나 통신속도가 수신 측의 처리 능력을 초과하지 않도록 조정하는 기능 정지-대기 방식각 프레임을 보낸 후 확인 응답을 기다리고 다음 프레임을 전송ACK, NAK가장 간단한 형태며 한 번에 1개의 프레임만 전송 가능거리가 멀 수록 전송 효율이 떨어짐 슬라이딩 윈도우여러 개의 프레임을 전송함으로써 효율을 높인 방식송신 측은 수신 측으로부터 확인 메세지를 받지 않더라도 윈도우의 한도까지 계속 프레임을 전송할 수 있으므로 전송 효율이 높다. 혼잡 제어체증제어통신 네트워크로 유입되어 전송되는 정보량을 조절하여 네트워크가 혼잡해지지 않게 조절하는 것 TCP 혼잡제어셀프 클록 방식 AIMDAdditive Increase/Multiplicative Decrease패킷을 하나씩 보내고 문제없으면 윈도우의 크기를 1씩 증가시키면서 전송하는 방법실패 또는 타임아웃시 크기를 절반으로 감소네트워크가 혼잡해진 다음에야 대역폭을 줄이는 방법 느린 시작slow start패킷이 문제 없이 도착하면 ACK 패킷마다 윈도우의 크기를 1씩 늘린다.한 주기가 지나면 창 크기가 2배가 된다.혼잡 시에 윈도우의 크기를 1로 감소시킨다. 빠른 재전송잘 도착한 마지막 패킷의 순번을 ACK에 실어서 보낸다.순번이 3번 중복되면 재전송을 하고, 윈도우 크기를 줄인다. 빠른 회복혼잡해지면 윈도우 크기를 반으로 줄여 선형 증가시키는 방법 주파수분할 다중화FDM주파수 대역을 여러 개의 작은 주파수 대역으로 분할하여 데이터를 동시에 전달하는 방식TV 방송간섭이 발생하지 않게 채널과 채널 사이에 보호대역(Guard Band)가 있다. 시분할 다중화TDM하나의 회선 전체를 일정한 시간 간격을 두고 반복해서 각각의 단말에 데이터를 할당하는 방식 동기식기존 시분할 다중화 방식실제로 데이터가 없어도 타임슬롯이 할당되어 낭비될 수 있음 비동기식실제로 보낼 데이터가 있는 단말에만 동적으로 각 채널에 타임슬롯을 할당하는 방식대역폭에 낭비를 줄이고 전송 효율 증가주소 정보가 데이터에 첨가 시간 홈 예약 방법전송 데이터가 있는 경우에만 타임 슬롯을 배정하여 전송하는 방법고정길이의 데이터와 함께 주소 정보로 구성되는 셀을 챈러에 차례로 할당해 효율적으로 타임슬롯을 배정ARQ자동 반복 요구, Automatic Repeat reQuestChecksum데이터의 정확성을 검사하기 위한 용도로 사용되는 오류 검출 방식1의 보수 연산을 사용 OSI 응용 계층FTP, Telnet, SMTP, DB 등 표현 계층표준 방식으로 데이터를 코딩하는 문제를 다룬다.단말기의 데이터 표현 방법이 서로 다르면 상대방의 데이터를 이해할 수 있도록 적절하게 변환하는 과정이 필요데이터 암호화, 압축, 코드 변환 세션 계층사용자에게 원격 파일 전송이나 원격 접속 등 세션 기능을 제공대화 제어, 토큰 제어, 동기 기능 제공세션 연결의 설정과 종료, 반이중, 동기, 예외보고T.62, ISO 8327 전송계층송신 프로세스와 수신 프로세스를 직접 연결하는 end-to-end 통신 기능 제공전송오류율, 전송속도, 흐름제어, 목적지 주소 지정, 메세지 우선권, 무결성 보장, 다중화 네트워크 계층라우팅 문제를 처리전송 데이터를 패킷이라고 부른다.경로 배정 및 중계, 통신망 연결 접속, 흐름제어, 순서제어X.25 데이터링크 계층물리계층을 통해 전송되는 데이터의 물리적 전송오류를 해결전송 데이터를 프레임이라고 부른다.두 단말기가 1:1로 직접 연결된 환경에서 데이터 전송기능을 지원흐름제어, 노드 대 노드의 주소지정, 전송제어, 오류제어 물리 계층물리적 인터페이스비트열의 데이터를 받아 전기적 신호로 변환 후 전송매체를 통해 수신측에 전송DTE, DCE 간의 인터페이스RS-232C하위 계층에서 상위 계층으로 데이터가 이동할 때 헤더는 삭제되고상위 계층에서 하위 계층으로 데이터가 이동할 때 헤더는 추가된다. TCP/IPARPA에서 갭라한 네트워크를 통해 컴퓨터가 통신하는 방법을 규정물리, 데이터링크, 네트워크, 전송, 응용 계층으로 구성TCP/IP의 응용계층은 OSI의 세션, 표현, 응용을 합친 계층PDU프로토콜 데이터 단위계층 구성의 프로토콜에서 상위 프로토콜 계층으로부터 송신을 위해 주어지는 데이터 단위LLC의 부계층에서 만들어 진다.응용계층: 메세지, 전송계층: 세그먼트, 네트워크계층: 데이터그램, 데이터링크계층: 프레임 IP인터넷 프로토콜신뢰성을 제공하지 않는 비연결형 데이터그램 프로토콜패킷을 분할, 병합하는 기능 수행헤더 체크섬만 제공클래스 A~C는 유니캐스팅에서 사용하고 클래스 D는 멀티캐스팅에 사용, 클래스 E는 예비주소체계A에서 C로 갈수록 규모가 작은 네트워크 UDP사용자 데이터그램 프로토콜, User Datagram Protocol상위계층에서 받은 데이터를 IP 프로토콜에 전달하지만 데이터그램이 목적지까지 제대로 도착했는지 확인하지 않음포로토콜을 처리하는 기능이 작아 TCP보다 처리가 빠르다.헤더, 데이터 모두 체크섬 기능 제공헤더는 송신포트, 수신포트, 길이, 체크섬으로 구성 TCP분할 단위는 세그먼트연결형 서비스 제공신뢰성 있는 데이터 전송 보장전이중 방식헤더는 송신, 수신포트, 순서번호, 응답번호, 데이터 오프셋, 예약, 윈도우, 체크섬, 긴급 포인터로 구성피기백킹piggybacking, 수신한 패킷에 대한 확인 응답을 전송하는 패킷에 포함하여 같이 전송 TCP 헤더 플래그 비트URG: 긴급 포인터 필드가 유효한지ACK: 응답번호 필드가 유효한지PSH: 현제 세그먼트의 데이터를 상위 계층에 즉시 전달하도록 지시RST: 연결의 리셋이나 유효하지 않은 세그먼트에 대한 응답SYN: 연결 설정 요구FIN: 연결 종료 의사 주소변환 ARP주소 결정 프로토콜, Address Resolution ProtocolIP 주소를 MAC 주소로 변환 RARP역순 주소 결정 프로토콜, Reverse Address Resolution ProtocolMAC 주소를 IP 주소로 변환 ICMPEcho request, Echo reply: 반향 요청, 반향 응답, 네트워크의 신뢰성을 검증Destination unreachable: 목적지 도착 불가능Source quench: 소스 억제Time Exceeded: 실행시간 초과인터넷 환경에서 오류 처리를 지원하는용도로 사용IP 패킷의 데이터 부분에 캡슐화되어 송신 호스트로 전달 IGMP임의의 호스트가 멀티캐스트 그룹에 가입하거나 탈퇴할 때 사용하는 프로토콜자신이 IGMP 메세지에 표시된 멀티캐스트 주소의 멤버임을 다른 호스트와 라우터에 알리는 용도 DHCPDynamic Host Configuration Protocol, 동적 호스트 설정 통신규약TCP/IP 통신을 실행하기 위해 필요한 설정 정보를 자동적으로 할당, 관리하기 위한 통신규약RFC 1541에 규정DHCP를 사용하지 않는 경우에는 각 컴퓨터마다 IP 주소가 수작업으로 입력되어야 한다.네트워크 관리자가 중앙에서 IP 주소를 관리하고 할당하며, 컴퓨터가 네트워크의 다른 장소에 접속되었을 때 자동으로 새롱누 IP 주소를 전송IP 주소가 일정 시간 동안만 컴퓨터에서 유효하도록 하는 임대 개념 IPv6128 비트 LAN단일 기관 소유연결성경로 선택이 필요 없음광대역 전송매체 사용으로 고속통신 가능높은 신뢰도자원 공유분산 처리분산 제어정보 교환 스타형 / 별형 LAN 버스형 LAN보통 CSMA/CD 방식 이용, 토큰 버스 방식도 이용베이스 밴드특정 반송파를 변조하기 위해 사용되는 모든 신호에 의해 얻어지는 주파수 대역기저대역 CSMA/CDCarrier Sense Multiple Access with Collision Detection반송파 감지 다중 접속 및 충돌탐지호스트가 회선의 상태를 감시하여 충돌을 피하는 방식충돌이 확인되면 일정시간 대기 후 다시 충돌을 확인하고 충돌이 감지되지 않을 경우 데이터를 전송IEEE 802.3버스형 네트워크 토큰 버스IEEE 802.4물리적으로는 버스구조, 논맂거으로는 링형태의 구성부하 증가에 딸느 영향이 적다.부하가 적어도 기본적인 오버헤드 링형 LAN광섬유의 특성에 잘 맞는 형태 토큰 링IEEE 802.5부하의 증가에 따른 영향을 적게 받음부하가 적어도 기본적인 오버헤드가 있다. 트리형 / 허브형 LAN 메시형 LAN 전송 매체에 따른 분류이중 꼬임선 LAN동축 케이블 LAN광섬유 LAN무선 LAN: RF, Microwave, 적외선, 위성파 전송 방식에 따른 분류베이스밴드 LAN: 신호 변조 없이 송신하는 방식, 중소규모 형태브로드밴드 LAN: 모뎀 등에 의해 변조시켜 송신하는 방법, 주파수 변조와 위상 변조, 대규모 매체접근 방법에 의한 분류고정할당방식: FDM, TDM랜덤할당방식: ALOHA, CSMA, CSMA/CD요구할당방식: token passing, register, insertion, slotted 근거리 통신망의 구성요소 하드웨어서버 컴퓨터리피터: 케이블에 전송되는 전기적인 데이터 신호를 재생하고 중계하는 장치, 물리계층허브: 클라이언트들을 네트워크에 연결하는 가장 기본적인 공유연결장치, 물리계층브리지: 서로 다른 두 네트워크를 연결할 때 사용하는 가장 기본적인 장치, 물리 데이터링크 계층라우터: 서로 다른 세그먼트 간에 브로드캐스트 패킷이 전달되지 않도록 트래픽을 분리하는 역할 및 원격지에 있는 랜과 랜을 연결해주는 역할, 물리 데이터링크, 네트워크 계층LAN 스위치: 데이터 전송 시 멀티미디어 데이터가 많은 경우 각 노드 간에 패킷 재전송 작업이 많이 발생하여 네트워크 성능이 떨어지고 대역폭 부족이 발생하는데 이런 문제점을 해결하기 위한 장비게이트웨이: 사용하는 매체나 각종 프로토콜이 일치하지 않는 서로 다른 네트워크 구조의 네트워크 사용자끼리도 통신이 가능하도록 해주는 장치 CIUComputer Interface Unit컴퓨터 접속장치 및 네트워크 연결장비랜 카드, 허브, 브리지, 라우터, 스위치, 게이트웨이 장비 등 BIUBasic Information Unit네트워크에서 데이터 전송 시 사용되는 기본 정보 단위 통신망 노드컴퓨터 네트워크는 컴퓨터, 데이터 통신망, 단말장치 등으로 구성 LAN의 논리 링크 제어 LLC 계층논리링크제어, Logical Link Control슬라이딩 윈도우 프로토콜 사용 MAC 계층공유 버스 방식의 이더넷토큰 링 방식 IEEE 802 프레임 형식IEEE 802.3에서 제정한 1-persistent CSMA/CD 방식의 근거리 통신망 환경에 관해 규정한 표준안 802.3 이더넷 프레임 구조필드 크기는 바이트Preamble, Start delimiter, destination addr, source addr, length, data, pad, checksumMAUMedia Attachment Unit호스트 컴퓨터상의 부착 유닛 인터페이스 포트를 UTP 또는 동축 케이블 등과 같은 이더넷 네트워크 매체에 접속하기 위한 장치 공통키 암호 방식관용암호 방식, Conventional Encryption System환자 암호: Substitution Cipher 평문 문자를 암호문 문자로 일대일 대응시켜 암호화하는 방식전치 암호: Transpose Cipher 평문 문자의 순서를 어떤 특별한 절차에 따라 재배치하여 평문을 암호화 하는 방식, 순열 암호적 암호: Product Cipher 암호 강도를 향상시키기 위해 전치와 환자를 혼합한 암호 방식 공개키 암호 방식 키 분배 프로토콜키 분배: 키가 생성된 위치로부터 암호 알고리즘에서 사용된 위치로 암호화 키를 전송하는 과정키 사전분배: key predistribution 한 가입자가 키를 만들어 상대 가입자 또는 양측 가입자에게 전달하는 방식키 동의: key agreement 암호 방식을 이용하려는 상대자가 서로 키를 설정하는데 공동으로 참여하는 방식DESCBC, CFB, OFD, ECB 모드베스천 호스트철저한 방어정책이 구현된 방화벽외부로부터의 일차적인 연결을 받아들이는 시스템","categories":[],"tags":[{"name":"정보처리","slug":"정보처리","permalink":"https://gracefullight.dev/tags/%EC%A0%95%EB%B3%B4%EC%B2%98%EB%A6%AC/"}]},{"title":"Laravel - Migration 특정 파일만 실행하기","slug":"Laravel-Migration-특정-파일만-실행하기","date":"2017-09-26T13:31:31.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/09/26/Laravel-Migration-특정-파일만-실행하기/","link":"","permalink":"https://gracefullight.dev/2017/09/26/Laravel-Migration-%ED%8A%B9%EC%A0%95-%ED%8C%8C%EC%9D%BC%EB%A7%8C-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0/","excerpt":"","text":"전체를 migration 하지 않고 부분만 migration하고 싶을 때 다음과 같이 하면 된다. 실행database/migrations 아래에 selected 폴더를 생성하고 옮기고 싶은 마이그레이션 파일을 넣는다.path 옵션을 주어 selected 폴더만 migrate한다.1$ php artisan migrate --path=\"database/migrations/selected\" 여담파일을 직접지정해서 실행하는 방법은 없나보다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Alpine Linux AWS Cli 설치","slug":"Alpine-Linux-AWS-Cli-설치","date":"2017-09-21T22:51:15.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/09/21/Alpine-Linux-AWS-Cli-설치/","link":"","permalink":"https://gracefullight.dev/2017/09/21/Alpine-Linux-AWS-Cli-%EC%84%A4%EC%B9%98/","excerpt":"","text":"설치차례대로 실행만 해주면 된다.12345678910111213# python 설치 안 된 경우# $ apt install python# pip 설치$ curl -O https://bootstrap.pypa.io/get-pip.py$ python get-pip.py --user# PATH 등록$ export PATH=~/.local/bin:$PATH# aws cli 설치$ pip install awscli --upgrade --user$ aws --version","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"aws","slug":"aws","permalink":"https://gracefullight.dev/tags/aws/"},{"name":"alpine","slug":"alpine","permalink":"https://gracefullight.dev/tags/alpine/"}]},{"title":"SSHD 보안 - fail2ban, port 변경","slug":"SSHD-보안-fail2ban-port-변경","date":"2017-09-21T22:50:15.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/09/21/SSHD-보안-fail2ban-port-변경/","link":"","permalink":"https://gracefullight.dev/2017/09/21/SSHD-%EB%B3%B4%EC%95%88-fail2ban-port-%EB%B3%80%EA%B2%BD/","excerpt":"","text":"실패한 로그인 IP 확인123456$ cat /var/log/secure | grep 'sshd.*Failed' | grep -Po \"[0-9]+\\.[0-9]+\\.[0-9]+\\.[0-9]+\" | sort | uniq -c# 실패 카운트와 IP6 100.34.214.246 101.109.152.2196 101.164.141.36기본 포트를 사용 중이라면 어마어마한 IP 목록이 나올 것이다. SSH 포트 변경 SSH 설정 변경/etc/ssh/sshd_config 에 포트 설정을 변경한다./etc/ssh/sshd_config1Port 2020 SElinux 포트 추가1$ semanage port -a -t ssh_port_t -p tcp 2020 방화벽 포트 추가12$ firewall-cmd --permanent --zone=public --add-port=2020/tcp$ firewall-cmd --reload SSH 재시작1$ systemctl restart sshd Fail2ban일정 시도 이상을 실패하면 해당 IP 를 차단시키는 Fail2ban 을 설치하자 설치1234# repo가 없다면# $ yum install -y epel-release$ yum install -y fail2ban SSH 설정 추가/etc/fail2ban/jail.local 또는 jail.conf 를 열어 [sshd] 의 enabled 속성을 true 로 변경한다. 서비스 시작12$ systemctl enable fail2ban$ systemctl start fail2ban 더 쉬운 방법쉘스크립트로 포트변경, 방화벽 룰 추가, Fail2ban 까지 한 방에 끝내버리자.1$ wget https://raw.githubusercontent.com/FunctionClub/Fail2ban/master/fail2ban.sh &amp;&amp; bash fail2ban.sh 2&gt;&amp;1 | tee fail2ban.log명령문에 따라 입력만 해주면 된다. 자세한 설명은 FunctionClub/Fail2ban 참고하자.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"centos","slug":"centos","permalink":"https://gracefullight.dev/tags/centos/"},{"name":"fail2ban","slug":"fail2ban","permalink":"https://gracefullight.dev/tags/fail2ban/"}]},{"title":"컴퓨터시스템구조","slug":"컴퓨터시스템구조","date":"2017-09-19T14:11:40.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2017/09/19/컴퓨터시스템구조/","link":"","permalink":"https://gracefullight.dev/2017/09/19/%EC%BB%B4%ED%93%A8%ED%84%B0%EC%8B%9C%EC%8A%A4%ED%85%9C%EA%B5%AC%EC%A1%B0/","excerpt":"","text":"컴퓨터의 역사 세대별 구분 1세대진공관프로그램 내장방식전력소모 크고 발열 심함기계어, 어셈블리어 2세대트랜지스터진공관 컴퓨터에서 1/100 축소고급언어 (COBOL) 3세대집적회로 (IC: Integrated Circuit)고급언어 (베이직) 4세대고밀도 집적회로 (LSI: Large Scale Integrated circuit)초고밀도 집적회로 (VLSI: Very Large Scale Integrated Circuit)PC고급언어, 문제지향적 언어 컴퓨터 시스템의 전체적 구성 시스템 버스CPU, 기억장치, I/O 장치들을 상호 연결해주는 중심 통로단방향 어드레스 버스, 양방향 데이터 버스, 양방향 제어버스로 구성 입력장치 출력장치 기억장치 중앙처리장치연산장치, 제어장치, 레지스터로 구성사람컴퓨터감각입력장치뇌세포기억장치신경망중앙처리장치움직임출력장치 운영체제HW와 SW 자원을 관리하고 제어편리한 인터페이스 제공입출력의 보조적 기능 수행오류 처리 자원관리프로세스 관리주기억장치 관리보조기억장치 관리입출력장치 관리파일 관리컴파일러, 인트프리터: 고급언어를 기계어로 변환하기 위한 번역기 분류 성능과 규모마이크로 컴퓨터: 현재 범용컴퓨터미니컴퓨터: 멀티유저 시스템메인프레임: 범용목적의 대형컴퓨터, 다수의 터미널 사용슈퍼컴퓨터 구조병렬컴퓨터: 동시에 여러 개의 마이크로프로세서 사용분산컴퓨터: 데이터가 네트워크 상에 분산되어 있을 때클라우드컴퓨터 사용목적전용컴퓨터: 군사용, 기상예보용, 천문학 등범용컴퓨터: 여러 분야의 다양한 업무 처리할 목적으로 설계된 컴퓨터 (과학계산, 통계 등) 처리방법일괄처리 컴퓨터: 일정 시점 단위로 한꺼번에 처리실시간 처리 컴퓨터: real-time, 온라인 처리 시스템, 즉시처리 시스템 자료표현디지털 컴퓨터아날로그 컴퓨터: 자료를 입력받아 곡선이나 그래프로 출력하는 컴퓨터하이브리드 컴퓨터: 아날로그, 디지털 데이터 모두 처리, A/D (Analog-Digital conveter) 변환기, D/A(Digital-Analog converter)로 데이터 변형 출력 가능 발달과정특징컴퓨터최초 기계식마크원최초 전자식ENIAC최초 프로그램내장EDSAC최초 상업용UNIVAC-I진공관 &gt; TR &gt; IC &gt; LSI &gt; VLSI폰노이만 모델: 기억장치에 프로그램과 데이터를 넣고 순서대로 처리하는 방식 (프로그램 내장방식)시스템버스: 어드레스 버스, 데이터 버스, 제어 버스 컴퓨터 명령어 주소필드mode, operation code, address 필드로 구성mode = 0 =&gt; 주소가 직접번지, mode = 1 =&gt; 주소가 간접번지주소필드는 주소 || 레지스터 || 데이터를 나타냄16bit 명령어의 경우: 1bit, 3bit, 12bit 3주소 명령어범용 레지스터 구조의 컴퓨터에서 사용연산코드와 3개의 주소필드로 구성프로그램은 간단하나 명령어의 길이가 너무 길다 2주소 명령어범용 레지스터 구조의 컴퓨터에서 사용연산코드와 2개의 주소필드로 구성연산시에 주소1의 내용은 실행 후에 출력값으로 저장되므로 원래 주소1의 내용은 없어진다. 1주소 명령어단일 누산기 방식의 컴퓨터에서 사용ACC와 Operand의 연산결과는 다시 ACC에 저장되는 형식입력으로 사용된 누산기는 결과값이 저장되어 원래 값은 없어진다. 0주소 명령어STACK 주소지정방식 의미주소지정Implied Addressing Mode묵시적 주소지정방식데이터의 위치를 지정하지 않아도 묵시적으로 정해져 있음PUSH, POP: Stack Pointer 사용SHL, SHR: ACC의 내용을 시프트명령어가 짧다 즉치주소지정Immediated Addressing ModeOperand의 내용이 연산에 사용될 실제 데이터프로그램상에서 레지스터나 변수의 초기값을 설정하는데 사용 레지스터 주소지정Register Addressing Mode레지스터에 데이터가 존재레지스터를 지정하는 오퍼랜드가 4bit라면 16개의 레지스터를 지정할 수 있음메모리를 액세스하지 않아 실행시간 단축데이터를 저장하는 공간이 레지스터로 한정 레지스터 간접주소지정Register Indirect Addressing Mode레지스터의 내용이 유효주소가 되기 때문에 지정된 레지스터의 내용이 메모리 주소가 되어 유효 데이터를 가져옴레지스터가 10bit면 2^10B, 20bit면 1MB의 메모리 영역을 지정 가능데이터 인출을 위해 한 번만 메모리를 액세스하면 된다. 직접주소지정Direct Addressing Mode오퍼랜드가 데이터의 유효주소데이터 인출을 위해 한 번만 메모리 액세스 간접주소지정Indirect Addressing Mode오퍼랜드의 데이터가 가리키는 기억장소의 데이터가 유효주소 (2번)오퍼랜드가 nbit면 최대 2^n개의 주소공간명령어의 I비트가 0이면 직접주소, 1이면 간접주소 상대주소지정Relative Addressing Mode명령어의 주소필드에 PC(Program Counter) 값이 더해져서 유효주소가 결정되는 방식기준 주소는 명령어의 주소, 변위는 PC주로 분기명령어에서 사용 인덱스된 주소지정Indexed Addressing Mode인덱스 레지스터의 내용과 주소필드의 내용이 더해져서 유효주소가 결정기준 주소는 명령어의 주소, 변위는 인덱스 레지스터 베이스 레지스터 주소지정Base Register Addressing Mode베이스 레지스터의 내용과 주소필드의 내용이 더해져서 유효주소가 결정기준 주소가 베이스 레지스터, 변위는 명령어의 주소필드 명령어의 종류 데이터 전송명령데이터가 변경되지 않고 위치만 옮기는 명령명령어부호기능loadLDmem =&gt; regstoreSTreg =&gt; memmoveMOVreg 간 전송inputIN입력장치 =&gt; regoutputOUTreg =&gt; 출력장치pushPUSHreg =&gt; stackpopPOPstack =&gt; reg 데이터 처리 명령실제로 연산이 이뤄지는 명령산술연산명령어, 논리연산명령어, 비트처리명령어, 시프트명령어로 구분산술연산명령어부호기능addADD덧셈subtractSUB뺄셈multiplyMUL곱셈incrementINCmem, reg 1 증가decrementDECmem, reg 1 감소negateNEG2의 보수add with carryADDC올림수와 함께 덧셈논리연산명령어부호기능ANDAND특정부분 0으로 셋clearCLR모든 비트 0으로 셋clear carryCLRC캐리비트를 0으로 셋enable interruptEI인터럽트 가능disable interruptDI인터럽트 불가능시프트명령어부호기능logical shift rightSHR오른쪽 논리 시프트logical shift leftSHL왼쪽 논리 시프트rotate rightROR현재값 유지하면서 오른쪽 자리이동rotate lestROL현재값 유지하면서 왼쪽 자리이동 프로그램 제어명령조건에 따라 PC가 변경되어 수행순서가 달라진다명령어부호기능branchBR지정된 주소로 분기jumpJMP지정된 주소로 점프skipSKPPC값 증가 후 다음 명령으로 skipcallCALLPC값 저장, 서브루틴 콜returnRET리턴 주소를 PC에 저장compareCMP두 수 크기 비교 프로그램 인터럽트 외부 인터럽트입출력장치, 전원 등 외부 요인으로 발생입출력장치의 데이터 전송 요구, 정보전송의 마감, timeout, 전원공급이 끊어질 때 발생프로그램 외적인 상황에서 발생 내부 인터럽트올바르지 않은 명령어나 데이터 사용시 발생overflow, div 0, stack overflow, 메모리 보호영역 침범 등프로그램 자체에서 주로 발생 소프트웨어 인터럽트특수한 CALL 명령어로 프로그래머가 원하는 위치에서 인터럽트 발생supervisor call instruction사용자 모드엥서 supervisor 모드로 CPU 상태를 변환 외부 인터럽트 처리외부 인터럽트 발생CPU는 현재 수행하는 명령어의 실행 사이클 종료다음 실행할 PC의 내용을 스택에 저장인터럽트 서비스 루틴의 시작주소를 PC에 저장인터럽트 처리 후 스택영역에 저장된 PC를 복구프로그램 복귀 후 계속 실행 복합, 단축 명령어 컴퓨터 CISCComplex Instruction Set Computer다양한 데이터와 주소방식 제공많은 명령어와 주소지정방식을 구현하기 위해 많은 하드웨어 필요실행속도가 느림 RISCReduced Instruction Set ComputerLoad와 Store를 제외하고는 레지스터 간의 연산으로 구성고정된 명령어 형식 사용복잡한 간접주소지정방식은 사용하지 않음 시스템 버스컴퓨터 시스템의 각각의 장치를 연결하여 정보를 전송하는 공유전송매체CPU를 중심으로 주기억장치, 보조기억장치, 입력장치, 출력장치가 데이터를 주고받는 통로 주소버스Address Bus주기억장치에 데이터를 읽기/쓰기 위해서 주소를 지정하기 위한 선들의 집합단방향 전송주소 버스가 16bit이면 2^16 =&gt; 65536개의 주소 지정 데이터버스각각의 장치들 사이의 데이터를 전송하는 선들의 집합양방향 전송버스의 폭은 주소를 지정하고 한 번에 R/W하는 비트의 수주소당 32bit 씩 데이터를 전송한다면 데이터 버스의 수는 32개 제어버스CPU, I/O장치, Memory 장치를 제어하는 신호선들의 집합인터럽트 요구 신호인터럽트 승인 신호버스요구 신호버스승인 신호기억장치 읽기 신호기억장치 쓰기 신호입출력장치 읽기 신호입출력장치 쓰기 신호리셋 신호버스 클록전송 확인 (transfer acknowledge) 동기식버스클록 펄스에 의해 데이터 전송이 발생마스터와 슬레이브는 모두 같은 클록 펄스에 동기인터페이스 회로가 간단클록의 주기보다 짧은 동작은 다음 주기까지 기다려야하는 단덤 비동기식버스핸드셰이킹 프로토콜 사용속도의 차이가 많은 장치에서 사용복잡소규모에선 비동기, 중형이상에선 동기방식을 주로 사용 버스중재동시에 여러 장치에서 버스를 요구할 때 필요 = 버스 경합 중앙집중식 중재방식centralized arbitration scheme시스템 내에 중재기가 1개 분산식 중재방식decentralized arbitration scheme여러 개의 버스중재기가 존재대표적 버스 중재기: 데이지 체인, 폴링 방식 내부버스칩들 사이에 신호를 전달 외부버스내부 버스를 경유해 CPU와 상호간을 연결하는 버스 VMEVMEbus 컴퓨터 버스 표준모토로라, 톰슨 사 등이 개발한 32bit, 64bit 버스 규격 멀티 버스인텔에서 개발한 범용 버스 시스템현재 산업용으로 사용멀티플렉서를 통해 다른 소자와 데이터를 송수신다중처리 가능마스터나 슬레이브로 동작마스터는 버스사용권을 얻어 데이터 전송 가능슬레이브는 스스로 버스를 제어할 수 없음 ISA 버스Industry Standard Architecture busCPU와 각종 주변장치를 연결하여 정보를 전달하는 버스 설계 규격AT 버스라고도 한다.16bit 버스 구조, 현재는 PCI 버스로 대체 EISA 버스Extended Industry Standard Architecture bus32bit ISA 버스비싸서 사용 안함 VESA 로컬 버스Video Electronics Standards Association local bus버스 제어기를 통하지 않고 직접 CPU와 데이터를 송수신하는 방식 PCI 버스ISA, EISA, VESA의 후속32bit, 64bit 사용 가능CPU의 종류가 달라도 CPU와 버스 사이의 브릿지 회로만 있으면 사용 가능독자적으로 작업을 처리할 수 있음 GPIB 버스General Purpose Interface bus병렬 데이터를 전송하고 제어할 수 있는 버스테스트 및 측정장치를 컴퓨터와 연결하여 자동 테스트 시스템을 만든다. 마이크로 연산레지스터 사이의 전송정보 동작Micro Operation 레지스터 종류소자는 플립플롭고유의 주소값을 가진다.MAR, PC, SP, R0 등데이터 레지스터, 주소 레지스터, 상태 레지스터로 구분범용 레지스터 (GPR), 특수레지스터 (SPR)로 구분 주소 레지스터Address Register MAR메모리 주소 레지스터주소를 먼저 지정 PC프로그램 카운터다음 명령어의 주소를 지정PC의 내용은 MAR로 전송되고 MAR의 내용이 주소 버스를 통해 메모리 주소를 지정 SP스택 포인터서브루틴 또는 인터럽트가 발생시 현재 레지스터의 내용을 저장하는데 레지스터를 저장하기 위한 스택 영역 메모리의 주소를 기억 CMARControl Memory Address Register마이크로프로그램이 있는 메모리의 주소를 기억 XR인덱스 레지스터기준 되는 주소에 XR의 변위값을 더해서 유효 주소를 발생데이터 블록 전송에 사용 BR베이스 레지스터베이스 레지스터에 기준이 되는 주소가 있고 여기에 변위값이 더해져 유효주소를 발생 데이터 레지스터 MBRMemory Buffer Register주기억장치에서 데이터를 읽거나 데이터를 주기억장치에 기록할 때 사용되는 레지스터 ACCACCucmulator연산장치의 입력값을 저장하거나 연산이 끝난 후의 결과값을 저장ACC =&gt; MBR =&gt; 데이터 버스 =&gt; 주기억장치 저장 TRT buffer = Temporary Register연산 중에 중간값을 임시 저장 PSRProgram Status RegisterCPU에서 수행되고 있는 프로그램의 상태정보를 기억하고 있는 레지스터Carry, Negative, oVerflow, Zero, Interrupt 플래그의 내용 표시 레지스터 전송 직렬전송한 클록에 1bit씩 전송워드 타임 (Word time): 4bit 모두 전송하는데 걸리는 시간 병렬전송데이터 전송이 한 클록 펄스 동안 이루어지는 전송 산술 마이크로 연산덧셈, 뺄셈, 1 증가, 1 감소, 보수 논리 마이크로 연산 SET특정 비트를 강제로 1로 만들 때 사용OR 연산 MASK특정 비트를 강제로 0으로 만들 때 사용AND 연산 Selective Complement특정 비트를 강제로 보수로 만들 때 사용XOR 연산 시프트 마이크로 연산 논리 시프트Logical Shift버리고 0 삽입 순환 시프트Circular Shift = Rotate버린걸 반대편 끝으로 삽입 산술 시프트Arithmatic Shift부호 비트를 고려하여 수행되는 시프트부호 비트는 남기고 데이터 비트만 시프트 처리장치의 구성요소ALU: 제어장치에서 명령어를 해독한 다음 실질적으로 연산을 수행하는 장치연산장치는 산술연산장치와 논리연산장치로 구성 단일 누산기 CPU의 내부 버스 3개의 레지스터 간 병렬전송레지스터가 n비트면 6n개의 신호선 단일 버스에 연결된 레지스터 선택회로4개의 레지스터 선택시 2X4 디코더 필요 ALU산술/논리 연산장치 = Arithmatic and Logical Unit산술, 논리, 시프트 등을 수행하는 장치가산기(산술연산장치), 시프트, 논리연산회로, 보수기(complementer), 상태레지스터(PSR)로 구성 산술연산장치전가산기를 이용한 병렬 가산기n비트의 2진 병렬가산기는 n개의 전가산기로 구성 상태 레지스터와 flagC: Carry bitS: Sign bitZ: Zero bit, 값이 0일시 1로 셋V: oVerflow bit연산 결과에 따라 1 또는 0 논리연산장치AND, OR, NOT, XOR멀티플렉서와 조합논리회로 (&amp; | ! ^) 게이트를 이용하여 구성 가능 시프터 제어단어Control word하드와이어드 제어방식과 마이크로프로그램 제어방식 (제어장치 구현방법)마이크로 프로그램 제어방식은 제어장치 내의 기억장치에 마이크로 명령어를 저장하여 마이크로 연산을 순차적으로 수행시키는데 이 마이크로 명령어를 제어단어라고 한다. 파이프라인 처리구조명령어 파이프라인: CPU에서 명령어를 읽어 순차적으로 실행, 하나의 명령어가 실행되는 도중에 다른 명령어 실행을 시작하는 식으로 동시에 여러 개의 명령어를 실행하는 기법 실행과정명령어 인출: Instruction Fetch명령어 해독: Instruction Decode오퍼랜드 인출: Operand Fetch실행: Excute 마이크로프로그램 제어마이크로 명령어들의 집합 제어장치주기억장치에 있는 프로그램, 명령어를 순서대로 읽어옴명령어를 해독각 장치에 신호를 보내 프로그램 처리 제어장치 제어기능오퍼레이션 부분과 오퍼랜드로 구성 (Op Code와 Address)명령어 수행단계는 인출단계와 실행단계로 나뉨 제어장치 구성IR (Instruction Register): 명령 레지스터, 주기억 장치에서 인출된 명령어를 기억하는 레지스터Instruction Decoder: 명령 해독기, 명령 레지스터로부터 명령코드를 받아서 해독하고 결과는 제어신호 발생기에 전송제어신호 발생기: 타이밍 발생회로와 제어회로로 구성Program Counter: 프로그램 계수기, 다음 실행될 명령어를 가진 주기억장치의 주소를 기억하는 레지스터 명령어 수행 과정PC의 주소를 MAR로 전송MAR 번지에 있는 명령어를 읽어 MBR로 전송, PC 1 증가MBR에서 IR로 전송, OP Code와 주소필드를 각각 해독기와 주소 레지스터로 전송MAR에서 데이터와 Operand 주소를 계산하고 주기억장치에 접근제어신호 발생기에서는 연산자를 해독하여 명령수행을 위한 제어신호 발생반복 명령어 사이클상태기능Fetch1. 명령어를 주기억장치에서 읽음2. 명령어 해독3. 1사이클이면 실행 후 fetch로 이동4. 아니면 유효주소를 계산해 간접주소면 indirect, 직접이면 executeIndirect1. 주소를 주기억장치에서 읽음2. 간접주소이면 다시 indirect3. 분기명령이면 실행 후 fetch4. 아니면 executeExecute1. 데이터를 주기억장치에서 읽음2. 실행 후 fetchInterrupt1. PC 내용을 스택에 저장2. PC는 인터럽트 시작주소로 변경3. PSR I bit에 1 처리4. 인터럽트 처리루틴의 fetch로 이동플리플롭메이저 상태0 0Fetch0 1Indirect1 0Execute1 1Interrupt Fetch CycleMAR &lt;= PCMBR &lt;= M[MAR], PC &lt;= PC + 1IR &lt;= MBR Indirect CycleMAR &lt;= IR(addr)MBR &lt;= M[MAR]IR(addr) &lt;= MBR Execute CycleADD XMBR &lt;= M[MAR]AC &lt;= AC + MBRLDA X: X번지에서 데이터를 읽어 누산기에 저장하는 명령어 (LOAD)MBR &lt;= M[MAR]AC &lt;= MBRSTA X: 누산기의 내용을 X번지에 저장하는 명령어 (STORE)M[MAR] &lt;= ACISZ X: X번지의 내용을 1증가 시키고 결과값이 0이면 다음 명령어를 실행하지 않고 건너뛰는 명령 (Increment &amp; Skip if Zero)MBR &lt;= M[MAR]MBR &lt;= MBR + 1M[MAR] &lt;= MBR, if( MBR = 0 ) then ( PC &lt;= PC + 1 )AND X: 누산기와 X번지 내용을 AND 연산해 결과값을 누산기에 저장하는 명령어MBR &lt;= M[MAR]AC &lt;= AC &amp; MBR Interrupt CycleMBR &lt;= PCMAR &lt;= SP, PC &lt;= ISR (Inturrupt Service Routine)M[MAR] &lt;= MBR 마이크로 연산한 개의 클록펄스 동안 레지스터의 데이터가 실행하는 기본 동작 수평 마이크로 명령어제어신호필드, 조건분기필드, 주소필드마이크로 명령어는 0, 1로 제어신호 출력한 개의 비트가 하나의 마이크로 연산을 지정조건분기필드는 branch에 사용주소필드는 다음에 실행될 마이크로 명령어의 주소 지정동작속도가 빠르고 하드웨어를 효율적으로 사용하는 장점긴 제어단어가 필요해 비용이 많이 드는 단점 수직 마이크로 명령어디코딩을 통해 제어신호 발생제어단어의 비트 수가 줄어든다nbit로 2^n개의 마이크로 연산 표시 가능디코더 필요 단일 사이클 제어모든 레지스터의 이동은 클록 펄스에 의해 제어마이크로 사이클: 하나의 마이크로 연산이 수행되는 과정마이크로 사이클 타임마이크로 오퍼레이션: 마이크로 사이클 동작동기식과 비동기식으로 구분하드웨어 제어방식1개의 클록 사이클에 1개의 명령어를 실행 동기 고정식가장 수행시간이 긴 것을 사이클 타임으로 설정모든 마이크로 연산의 시간이 유사한 경우 사용구현 간단CPU 처리시간 낭비 발생 동기 가변식유사한 것끼리 몇 개의 군으로 모아서 마이크로 사이클 타임을 설정CPU의 성능을 높이고 전체적으로 속도 향상제어 복잡 비동기식각각의 마이크로 연산에 대해 서로 다른 마이크로 사이클 타임을 설정하나의 마이크로 연산이 끝나면 다음 마이크로 연산 타임이 신호가 발생복잡해서 안 사용함 하드웨어 제어2X2bit 인 경우 4개의 AND 게이트와 2개의 반가산기 필요 파이프라인 제어하나의 프로세서를 서로 다른 기능을 가진 여러 개의 서브 프로세서로 나누어 각 프로세서가 동시에 서로 다른 데이터를 처리하도록 하는 기법 명령어 집합 마이크로 명령어의 형식연산 필드조건 필드: 상태 비트 조건 선택 필드분기 필드주소 필드: 다음 주소 지정 처리장치 명령어 해독기instruction decoderop code를 해독하고 연산의 시작주소를 결정 제어주소 레지스터CAR = Control Address Register제어 메모리의 주소를 지정하는 레지스터다음 실행할 마이크로 명령어의 주소를 저장 제어기억장치Control Memory마이크로프로그램이 저장된 내부기억장치 제어 버퍼 레지스터CBR = Control Buffer Register제어 메모리에서 읽은 마이크로 명령어를 일시적으로 저장하는 레지스터 서브루틴 레지스터SBR = Subroutine Register서브루틴이 발생한 경우 현재 제어주소 레지스터(CAR)의 내용을 일시적으로 저장하는 레지스터 순서제어 모듈Sequencing Module마이크로 명령어의 실행순서를 결정하는 모듈 명령어 주소 결정제어주소 레지스터 1 증가무조건 분기와 상태 비트 조건에 따른 조건부 분기명령어의 op code로부터 제어기억장치의 주소로 매핑서브루틴 call, return 제어기 순서 레지스터와 디코더를 이용한 방식각 상태마다 하나의 출력신호가 발생하도록 디코더를 사용nbit의 순서 레지스터는 n개의 플리플롭과 게이트로 구성2bit의 경우 2^2 = 4개의 상태 표시, 2X4 디코더 필요 상태 플리플롭을 이용한 제어방식각 상태에 한 개의 플립플롭이 필요한 순간에 여러 개의 플립플롭 중에 단 한 개만 1이 된다.다수의 플립플롭이 필요상태 수가 증가하면 상당히 복잡해진다설계는 간편 CISCComplex Instruction Set Computer다양한 어드레싱 기능명령어 길이와 실행시간이 가변적명령어 복잡 RISCCPU의 명령어 개수를 줄여 하드웨어 구조를 좀 더 간단하게 만드는 방식높은 처리속도단순 구조주기억장치 액세스 명령어의 제한주소지정방식의 단순화사상(Mapping): 각 명령어의 실행 전용 루틴을 찾는 것 기억장치 참조 지역성 공간적 지역성Spatial locality특정 데이터가 참조되면 그 부근의 데이터가 참조될 확률이 높아짐 시간적 지역성특정 데이터를 액세스하면 빠른 시간 내에 그 데이터를 다시 참조하는 확률이 높음캐시의 이유 기억장치 성능평가 요인기억용량: capacity접근시간: access time사이클타임: 하나의 액세스 시작부터 다음 액세스를 시작할 때까지의 시간기억장치 대역폭: bandwidth 1초동안 송수신할 수 있는 비트 수가격속도 순서: 레지스터 &gt; 캐시 &gt; 주기억장치 &gt; 보조기억장치 (디스크 &gt; 테이프) 주기억장치폰 노이만 병목현상: 주기억장치를 이용하는데 CPU와 입출력장치가 경쟁해 주기억장치에 병목 현상이 발생하는 것 복수모듈기억장치독자적으로 데이터를 저장할 수 있는 기억장치 모듈을 여러 개 가진 기억장치기억장치 버스를 시분할하여 사용 메모리 인터리빙CPU가 각 모듈로 전송할 주소를 교대로 배치한 후 차례대로 전송하여 여러 모듈을 병행 접근하는 기법기억장치 접근시간을 효율적으로 높임캐시, 고속 DMA 전송에 사용각 모듈을 번갈아가며 접근 가능 연관기억장치CAM = Content Addressable Memory)워드에 접근하여 원하는 정보를 찾는 기억장치bit serial, bit parallel 구조내용에 의한 검색캐시 내부에서 사용외부 인자와 내용을 비교하기 위해 병렬판독논리회로, 하드웨어 장치가 필요 캐시기억장치주기억장치보다 빠른 기억소자로 구성해 CPU와 주기억장치 속도차를 줄임주기억장치에서 캐시로 워드를 전송할 때 그 주위 워드도 같이 전송됨 =&gt; 그 블록을 캐시로 이동히트: 액세스하려는 단어가 캐시에 있을 경우미스: 액세스하려는 단어가 캐시에 없을 경우캐시에 공간이 없으면 희생 블록을 선택해야한다.적중률 = 히트 수 / 전체 메모리 참조 수교체알고리즘: FIFO, random, LRU (미사용 중 가장 오래된 것부터), LFU (최소 사용부터) 캐시 사상방식직접사상: tag와 index 필요, 캐시와 주기억장치 인덱스 부분이 같은 경우에만 데이터가 저장연관사상: 데이터와 주기억장치의 주소도 함께 저장집합연관사상: 캐시 인덱스에 서로 다른 2개 이상의 데이터 블록을 저장 가상기억장치대용량 보조기억장치 일부를 주기억장치로 사용프로그램 명령어가 사용하는 주소를 가상주소, 주기억장치에 접근하기 위한 주소를 물리적 주소CPU에서 참조하는 가상주소는 주기억장치의 실제 주소로 변환되어야 하며 이 것을 사상(mapping) 이라고 함사상방식에는 페이징 기법과 세그먼트 기법이 있다. 페이징 기법가상기억공간과 실제기억공간의 프로그램 블록의 크기가 같고 각 블록의 크기도 모두 동일할 때 이 블록을 페이지라고 한다.주기억장치에서 페이지를 찾지 못하는 경우를 page fault 세그먼트 기법프로그램의 논리적 구조에 따라 세그먼트를 다양하게 나누는 방법 보조기억장치 자기디스크블록: 자기디스크에서 주소에 의해 지정될 수 있는 정보의 단위트랙: 디스크 표면의 동심원헤드가 트랙을 지나가며 R/W액세스 암: 금속 끝에 헤드가 달려 있음이동 헤드 디스크: 플로피고정 헤드 디스크: 하드탐색시간: 헤드를 트랙까지 이동하는데 걸리는 시간회전지연시간: 섹터의 시작주소에 헤더가 도달하는데 걸리는 시간전송시간: 섹터에서 데이터를 읽어 주기억장치로 옮기는 데 걸리는 시간디스크 access time = seek time + rotational delay + transfer time 자기테이프순차접근방식용량이 커 장시간 보관 용도로 사용DEBDIC 코드는 9트랙, BCD 코드는 7트랙BPI: Byte Per Inch 1인치당 저장하는 바이트 수시작점은 BOT 끝점은 EOTIRG: Inter Record Gap 레코드 사이의 갭IBG: Inter Block Gap 블록 사이의 갭 RAIDRedundant Array of Inexpensive Disks여러 개의 하드를 하나듸 하드로 다루는 방법하드웨어 RAID: 안정적이지만 고가소프트웨어 RAID: 운영체제에서 레이드 구성, 신뢰성은 떨어져도 저렴하게 데이터 저장 가능디스크 인터리빙: 데이터를 여러 개의 디스크에 분산 저장하는 기술 RAID-0빠른 입출력을 목적으로 하는 데이터를 여러 개의 하드에 분산 저장하는 스트라이핑 방법 사용하나의 디스크에 저장하는데 걸리는 시간을 여러 개의 디스크에 동시적으로 분산하여 저장하는 방식동영상 편집과 출판에 적합장애 발생시 뻑남 RAID-1미러링 기법한 드라이브에 기록되는 모든 데이터를 다른 드라이브로 복사하드 용량을 50%만 사용가능 RAID-2에러 검출 능력이 없는 드라이브를 위해 검사 디스크를 추가하고 해밍코드로 에러 검출 및 정정요즘은 오류 검출기능을 달고 나와서 거의 안씀 RAID-3RAID-0의 빠른 I/O에 에러 보정 기술이 추가별도의 패리티 드라이브를 사용장애시 패리티 정보를 이용한 복구 가능 RAID-4RAID-3에다가 각 드라이브에 데이터를 블록 단위로 분산 저장데이터 출력시 빠른 성능이지만 저장시 패리티 블록도 변경해야하는 단점최소 3개의 드라이브 RAID-5RAID-3과 4의 단점 보완패리티 갱신을 위한 디스크 액세스가 분산되어 패리티 디스크에 대한 병목현상이 사라져 쓰기를 병렬로 수행 가능 RAID-6RIAD-5에 다차원 패리티 체계를 구축한 시스템2개의 패리티 블록을 저장쓰기시 2개의 패리티를 갱신해야함 광기억장치 CD-ROMCompact Disk Read Only Memory데이터는 트랙에 따라 순차적 저장액세스는 순차적이 아닌 직접 액세스 방식 DVD용량은 4.7~8.5GB2장의 얇은 디스크가 겹쳐져 있는 형태1ns = 10^-9 s 입출력 제어기 입출력장치데이터를 저장하고 시스템에서 처리한 결과를 출력 입출력장치 제어기입출력장치를 움직이는 구동장치보통 입출력 장치에 포함 입출력장치 인터페이스입출력 포트 = I/O portCPU 내부 레지스터와 입출력장치 간의 정보전송을 제어 입출력 버스데이터 전달 경로고성능 시스템에서는 입출력 제어기를 통해 주기억장치 버스에 연결 주기억장치 버스주소 버스데이터 버스제어 버스CPU에 의한 입출력 =&gt; DMA에 의한 입출력 =&gt; 채널에 의한 입출력 버스버스에 연결된 장치는 master와 slave로 나뉨master는 데이터 전달회선의 사용권 획득 및 실제 데이터 전송에 필요한 데이터를 제어slave는 데이터 전달에 필요한 작업을 하는 장치 주기억장치버스주기억장치의 데이터 버스 비트 수는 주기억장치 워드의 비트수와 같다R/W 입출력 버스입출력에만 이용한 쪽에는 입출력 인터페이스, 다른 쪽에는 입출력 제어기입출력 데이터 버스의 비트 수는 1Byte양방향주소버스의 bit는 장치번호의 bit 수와 같다. 버스 중재 방식 중앙집중식 병렬중재centralized parallel arbitration하나의 버스에 하나의 중재기를 사용하는 방식모든 장치는 각각 버스 요청과 버스 허용회선에 의해 중재기에 연결됨중재기 내의 장치들의 우선순위를 정해주는 논리회로가 있어야한다. 데이지 체인직렬중재 = daisy chain중재기 버스 사용의 우선순위는 외부 데이지 체인 하드웨어에서 결정우선순위 높은 장치가 버스를 독점할 수 있다.직렬연결이라 한 장치가 고장나면 다음 장치는 버스허용신호를 못 받는다. 폴링polling = 주기적 검사방식버스중재기가 각 master에게 버스 사용 여부를 체크하는 방식하드웨어 폴링: 버스 중재를 위해 폴링 회선이 따로 중재기와 각 장치에 연결, 중재기가 각 장치의 고유번호를 순차적으로 발생시키므로 버스 사용권을 받기까지 시간이 길다.소프트웨어 폴링: 폴링의 순서를 CPU가 관리하는 방식으로 우선 순위 또는 융통성이 좋다. 하드웨어보다 느리다. 전송 제어 방식 스트로브 제어데이터 전송시간을 맞추기 위해 제어회선이 추가제어회선을 통해 송수신측에 데이터를 전송할 때 제어신호를 보낸다.수신쪽에서 데이터를 받았는지, 송신쪽에서 데이터를 보냈는지 확인 불가 핸드쉐이킹 입출력장치 인터페이스Busy Done입출력 데이터 버퍼 상태0 0입출력장치 휴지 상태0 1금지 상태1 0입출력 작업 중 상태1 1입력 데이터 버퍼에서 데이터를 읽거나 출력 데이터 버퍼에서 데이터를 기억시킬 수 있는 상태 데이터 전달방법 직렬전송방식입출력장치 인터페이스 내에 있는 입출력 데이터 버퍼는 시프트 레지스터 병렬전송방식CPU 내의 레지스터 사이 데이터 전송방법과 같다. 에러 체크패리티 비트: 데이터를 첨가하는 비트가 1bit되울림: echo back 키보드에 입력한 문자를 화면에 나타내어 확인입출력 반복: retry 한 바이트가 잘못 읽어지면 반복해서 읽어오는 방식오류검사/수정코드: 오류가 검출될 때 수정할 수 있는 기능이 있음 입출력 제어기 주기억장치 사상 입출력하나의 공통된 버스를 공유하는 입출력 시스템에서 주소를 지정하는 방식으로는 기억장치사상 입출력 방식과 고립형 입출력 방식이 있다. 기억장치 사상 입출력하나의 주소공간공통의 버스와 제어선 고립형 입출력입출력장치의 주소영역은 주기억장치의 주소영역과는 별도로 지정분리된 제어신호2개의 제어선으로 지정된 주소가 주기억장치 워드에 해당되는지 입출력을 위한 인터페이스 레지스터를 지정하는 것인지 구분 CPU에 의한 입출력 프로그램에 의한 입출력 방식CPU가 입출력장치의 처음부터 끝까지 제어저속 컴퓨터에 적합매번 플래그 검사를 해야하기 때문에 가장 비효율적 인터럽트 처리에 의한 입출력 방식전송할 데이터가 준비되면 인터페이스가 CPU에 입출력을 요청하는 인터럽트 발생 DMA를 사용한 입출력CPU의 개입 없이 입출력장치와 주기억장치 사이에 데이터를 직접 전송시키는 방법Direct Memory AccessDMA에 의한 입출력이 수행되면 CPU는 주기억장치 버스를 제어하지 못함DMA 제어기 신호: 버스 요청, 버스 승인, 인터럽트 신호DMA 전송 방식DMA burst transfer: DMA 대량전송 방식, DMA가 주기억장치 제어권을 가지고 있을 때 여러 개의 워드로 구성된 블록이 연속으로 전송사이클 스틸 방식: 한 번에 하나의 데이터 원드를 전송하고 주기억장치의 버스 제어를 CPU에 돌려줌 채널에 의한 입출력DMA는 초기화 데이터가 필요하며, 여러 입출력장치가 있을 때 많은 DMA 제어기가 필요입출력 장치와 직접 통신하는 전용 프로세서CPU와 동급의 성능고유의 입출력 명령어를 인출하고 실행산술, 논리, 연산작업 수행 가능 selector channel선택된 입출력장치의 모든 동작이 완료될 때까지 어느 한 입출력장치의 전용인 것처럼 운용되는 채널고속 입출력 장치와 입출력을 위해 사용burst 방식으로 블록 데이터 전송 바이트 멀티플렉서 채널하나의 채널에 저속에 많은 입출력장치를 구동시키는데 알맞은 방식채널을 시분할 공유 블록 멀티플렉서 채널동시에 여러 고속 입출력장치를 공유하여 데이터를 고속으로 전송대형 컴퓨터채널 제어기의 연결형태: 고정 채널 제어기, 가변 채널 제어기CPU가 DMA제어에 보내는 초기화정보: R/W를 수행할 주기억장치의 시작주소, 전송할 데이터 워드 카운트, R/W 전송모드 지정, 입출력 수행할 장치주소 컴퓨터 시스템의 성능처리능력: Throughput 작업량처리속도: response time신뢰도: reliability 정확하게 해결하는지사용 가능도: usability 신속하게 사용 가능한지 처리속도 MIPSMillions of Instruction Per Second1초에 처리되는 총 명령어의 수1MIPS는 1초에 106개 명령어 MFLOPSMillions of Floating-Point Operation Per Second메가플롭스부동 소숫점 처리 속도를 나타내는 단위1MFLOPS는 초당 10^6개 부동소수점 연산 가능 병렬컴퓨터 플린의 분류 SISDSingle Instruction stream, Single Data stream명령어가 하나씩 순차로 실행현재 많이 쓰는 컴퓨터 구조 SIMDSingle Instruction stream, Multiple Data stream배열처리기 = array processor모든 처리기들의 동작은 모두 하나의 제어장치의 지시를 받음 MISD여러 개의 처리기에서 수행되는 명령어는 다르지만 전체적으로 하나의 데이터 스트림을 갖고 있는 형태사용하지 않음 MIMD대부분의 다중 프로세서 시스템과 다중 컴퓨터시스템처리기들간의 상호작용 정도에 따라 밀결합 시스템, 소결합 시스템으로 나뉨밀결합 시스템: tightly coupled system, 공유기억장치구조, 다중 프로세서 시스템소결합 시스템: loosely coupled system, 지역기억장치를 가진 독립적인 컴퓨터 모듈, 프로세서 간 메세지 방식 통신, 다중 컴퓨터 시스템 팽의 분류병렬 수행정도에 따라 분류WSBS: Word-Serial, Bit-SerialWPBS: Word-Parallel, Bit-SerialWSBP: Word-Serial, Bit-ParallelWPBP: Word-Parallel, Bit-ParallelWBSP는 가장 많이 사용하는 방식으로 한 번에 한 워드씩 처리 구조에 의한 분류분산처리: 하드웨어 자원이 프로세스 작업에 대해 상대적으로 약하게 결합하여 동작하는 것, 컴퓨터 네트워크 등병렬처리: 프로세스 작업에 대해 강하게 결합되어 동작하는 것, 다중컴퓨터, 다중처리기로 구분됨 공유기억장치 시스템공유기억장치를 갖는 다중처리기구조는 처리기와 기억장치 모듈사이에 완전한 연결성이 있는 강결합 시스템기억장치 요청이 지역적인지 비지역적인지를 판단하기 위해 기억장치 대응장치(MMU: Memory Mapping Unit)이 필요 메세지 전달 시스템데이터 통신이 메세지를 통해 이뤄짐메세지는 여러 개의 고정된 길이를 갖는 패킷으로 구성단순성과 확장성의 성질을 포함해 대규모에서 좋은 성능 다중 프로세서의 고려사항병렬성기억장치 (충돌, 접근 효율성, 캐시 일관성)스케줄링동기화시스템 균형 병렬처리기 파이프라인 처리기시간적 병렬성 활용파이프라인: 하나의 프로세스를 서로 다른 기능을 가진 여러 개의 서브프로세스로 나ㅜ너 각 서브프로세스가 서로 다른 데이터를 취급하도록 하는 방식 배열 처리기처리장치(PE)를 배열 형태로 갖고 있음PE는 레지스터, 연산장치, 지역기억장치로 구성PE는 상호연결망에 의해 데이터 교환 가능벡터, 행렬 계산에 사용 다중처리기multiple processor시스템상의 여러 처리기들에 여러 개의 독립적인 작업을 각각 배정하여 2개 이상의 처리기를 동시에 수행할 수 있는 기능을 갖춘 시스템하드웨어 시스템 구성은 주로 기억장치와 처리기, 기억장치와 입출력 채널 간 상호연결구조에 의해 결정 데이터 흐름 컴퓨터프로그램 내의 모든 명령어를 수행에 필요한 피연산자들이 모두 준비될 때 명령어의 순서와 관계없이 수행시키는 것Data Driven 방식 VLSI 처리기병렬 알고리즘을 직접 하드웨어로 구현하는 처리기파이프라인 기법을 이용한 다중처리 기법systolic array 구조가 있는데 영상이나 신호처리를 위한 특수분야에 사용 상호연결망 구조처리요소를 가진 병렬시스템에서 처리요소와 기억장치 사이를 연결해주는 네트워크대역폭: bandwidth 네트워크를 통해 전송될 수 있는 최대 데이터 전송률, 단위는 MB/s네트워크 지연: 네트워크를 통해 메세지 전송시 소요되는 지연시간기능성: functionality 네트워크 데이터 경로설정, 동기화, 인터럽트 처리 및 메세지 송수신과 같은 동작을 어느정도 지원해 주는지확장가능성: scalability 새로운 하드웨어 추가시 네트워크 확장이 가능한지하드웨어 복잡성: hardware complexity 네트워크 구현시 필요한 하드웨어, 부품의 수와 복잡성 정적 상호연결망 성형허브에 모두 연결됨 선형노드가 차례대로 연결 링형선형의 끝이 연결된 원형 2진 트리완전한 트리형태, 통신거리가 상대적으로 김 펫 트리채널의 크기가 상위계층으로 올라갈 수록 커져서 상위 수준에서의 병목현상 해결 메시, 토러스노드가 2차원 사방으로 연결, 배열처리기에 적합 하이퍼큐브처리기의 수가 증가하면 연결점 및 하드웨어가 급증하므로 많은 처리기를 연결할 때 좋은 효율높은 확장성모든 노드가 같은 경로배정방법 사용 가능 동적 상호연결망 버스단일 버스 구조: 미니컴퓨터나 마이크로 컴퓨터에서 사용다중 버스 구조: 고성능 시스템 크로스바네트워크 규모가 커지면 비용이 크지만 지역적인 기반구조로 유용P개의 처리기와 M개의 기억장치 모듈을 동시에 연결 다단계 네트워크multistage network근원지와 목적지 사이에 여러 개의 스위치 요소가 있는 상호연결망 파이프라이닝어떤 일을 실행하는 데 있어서 하나의 일을 여러 단계로 나눠 중첩하여 실행함으로써 선능을 높이는 방법수행 단계별로 2단계, 4단계, 6단계가 있다.","categories":[],"tags":[{"name":"정보처리","slug":"정보처리","permalink":"https://gracefullight.dev/tags/%EC%A0%95%EB%B3%B4%EC%B2%98%EB%A6%AC/"}]},{"title":"Vue Developer Tools 켜기","slug":"Vue-Developer-Tools-켜기","date":"2017-09-13T14:02:02.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/09/13/Vue-Developer-Tools-켜기/","link":"","permalink":"https://gracefullight.dev/2017/09/13/Vue-Developer-Tools-%EC%BC%9C%EA%B8%B0/","excerpt":"","text":"Devtools inspection is not available because it’s in production mode 란 메세지와 함께Vue 개발자 도구가 표시되지 않을 경우에 script 상단에 아래 구문을 추가한다. 해결1Vue.config.devtools = true; 개발자 도구에 Vue 탭이 없을 때ctrl+shift+i 키를 Vue 탭이 보일 때 까지 반복해서 눌러준다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"vue","slug":"javascript/vue","permalink":"https://gracefullight.dev/categories/javascript/vue/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"},{"name":"vue","slug":"vue","permalink":"https://gracefullight.dev/tags/vue/"}]},{"title":"Laravel 5.5로 업그레이드","slug":"Laravel-upgrade-5-4-to-5-5","date":"2017-09-12T13:46:10.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/09/12/Laravel-upgrade-5-4-to-5-5/","link":"","permalink":"https://gracefullight.dev/2017/09/12/Laravel-upgrade-5-4-to-5-5/","excerpt":"","text":"Laravel 5.4 에서 5.5 로 업그레이드 후기 업그레이드공홈을 참조해도 된다.composer.json에서 아래 패키지의 버전을 바꿔준다. dependencieslaravel/framework: 5.5.*phpunit/phpunit: ~6.0 dev-dependenciesfilp/whoops: ~2.012$ composer clearcache$ composer update 이슈 Session, DB 문제1$ php artisan cache:clear const UPDATE_AT 문제const UPDATED_AT = null;처럼 timestamps 필드 중 하나를 disable 했을 때 5.5 버전에선 오류가 발생한다.아래 처럼 모델에 setUpdatedAt 함수를 추가해주면 된다.1234&lt;?phppublic function setUpdatedAt($value) &#123; return $this;&#125; request has 문제request-&gt;has와 같은 기능으로 동작하려면 request-&gt;filled로 바꿔줘야한다.1234567891011&lt;?php// 5.5에서는 name 값이 비던 안 비던 trueif ($request-&gt;has('name')) &#123;&#125;// 이게 구버전 has의 기능과 동일하다.// name 값이 있을 경우만 trueif ($request-&gt;filled('name')) &#123;&#125;","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Laravel - Socialite InvalidStateException","slug":"Laravel-Socialite-InvalidStateException","date":"2017-09-12T13:24:25.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/09/12/Laravel-Socialite-InvalidStateException/","link":"","permalink":"https://gracefullight.dev/2017/09/12/Laravel-Socialite-InvalidStateException/","excerpt":"","text":"가끔 가다가 인증이 안 되는 경우가 있다. 해결법 statelessSocialite::driver('인증 타입')-&gt;stateless()-&gt;user(); 로 가져오자. session 명 변경config/session.php의 cookie 값을 변경해준다. session domain 변경config/session.php의 domain 값을 null 에서 내 도메인으로 변경한다.그리고 아래 두 명령어를 실행해주자.12$ php artisan cache:clear$ composer dump-autoload 여담socialite 설명에선 나오지 않았지만, Socialite 구문을 try/catch로 감싸주는게 좋았다.123456&lt;?phptry &#123; $user = Socialite::driver('facebook')-&gt;stateless()-&gt;user();&#125; catch (\\Exception $e) &#123; return redirect()-&gt;route('login');&#125;","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Laravel Query Logging, 쿼리 로그","slug":"Laravel-Query-Logging","date":"2017-09-06T12:38:37.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/09/06/Laravel-Query-Logging/","link":"","permalink":"https://gracefullight.dev/2017/09/06/Laravel-Query-Logging/","excerpt":"","text":"Laravel DebugBar 를 이용하는게 편하지만 dump 나 json 리턴시에 DebugBar 가 보이지 않으므로 직접 찍어줘야하는 경우가 많다. 소스12345678910111213141516&lt;?php# DB 파사드를 추가한다.use DB;...public function your_func(Request $request) &#123; // 로그를 enable 시키고 DB::enableQueryLog(); // 쿼리를 여기에 실행한다. Member::where('조건', '값')-&gt;get(); Product::find(1); // 쿼리 로그를 찍는다. $queryLogs = DB::getQueryLog(); dump($queryLogs);&#125; 결과배열에 query, bindings (preparedStatement 를 위한 것), time 이 상세하게 나온다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Laravel 5.5 - Debugbar와 BrowserSync의 충돌 해결","slug":"Laravel-5-4-Debugbar와-BrowserSync의-충돌-해결","date":"2017-08-24T13:06:11.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/08/24/Laravel-5-4-Debugbar와-BrowserSync의-충돌-해결/","link":"","permalink":"https://gracefullight.dev/2017/08/24/Laravel-5-4-Debugbar%EC%99%80-BrowserSync%EC%9D%98-%EC%B6%A9%EB%8F%8C-%ED%95%B4%EA%B2%B0/","excerpt":"","text":"Laravel Mix로 browserSync 옵션을 활성화 시에 Debugbar가 생기지 않는 오류가 발생할 경우 (스크립트 단에서 JSON parse 오류가 발생한다)다음과 같이 설정해주면 된다. 해결webpack.mix.js123456789101112mix.browserSync(&#123; proxy: &#123; // artisan serve시의 주소 target: \"localhost:8000\", reqHeaders: function() &#123; // host를 직접 지정해준다. return &#123; host: \"localhost:3000\" &#125; &#125; &#125;&#125;)","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Cannot start container iptables failed","slug":"Cannot-start-container-iptables-failed","date":"2017-08-19T07:32:08.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/08/19/Cannot-start-container-iptables-failed/","link":"","permalink":"https://gracefullight.dev/2017/08/19/Cannot-start-container-iptables-failed/","excerpt":"","text":"오류Container를 다시 올릴 때 다음과 같은 오류로 올라가지 않는 경우가 있다.docker kill이 아닌 stop, rm으로 container를 지웠을 때 뭔가 충돌이 나는 것 같다.12Error response from daemon: Cannot start container aca936f2822fce32235e627ff539c58b74b2f4e66cfa701de47ce609e2590d13: iptables failed: iptables -t nat -A DOCKER -p tcp -d 0/0 --dport 50000 -j DNAT --to-destination 172.17.0.10:50000 ! -i docker0: iptables: No chain/target/match by that name. (exit status 1) 해결이 중 마음에 드는 방법으로 해결하면 된다. 서비스 restartdocker 서비스를 restart 한다. iptables rule 추가오류 메세지에 필요한 rule을 추가한다.12$ iptables -t filter -N DOCKER$ iptables -t nat -N DOCKER","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"}]},{"title":"AWS CodeCommit 사용하기","slug":"AWS-CodeCommit-사용하기","date":"2017-08-18T13:34:22.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/08/18/AWS-CodeCommit-사용하기/","link":"","permalink":"https://gracefullight.dev/2017/08/18/AWS-CodeCommit-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0/","excerpt":"","text":"AWS 에서 제공하는 Cloud Git Repository 인 CodeCommit 으로 소스코드를 관리해보자. 설정공식 문서가 아주 잘 되어있다. 문서를 보고 시작해도 된다.MacWindows IAM 유저 생성IAM 에서 유저를 만든 뒤에 AWSCodeCommitFullAccess 권한을 추가한다. 키 파일 업로드ssh 키를 생성하고 Public Key 파일(id_rsa.pub)을 해당 유저의 Security credentials 메뉴에서 업로드한다.키가 등록되면 SSH key ID가 보이는데 메모해 놓자. config사용할 유저의 ssh config 를 설정해줘야한다.User 에 들어가는 값은 위에서 적어놓은 SSH key ID 값이다.123456789$ vi ~/.ssh/config# 아래 내용을 맨 위에 넣어주자.Host git-codecommit.*.amazonaws.com User EXAMPLEEXAMPLEEXAMPLE IdentityFile ~/.ssh/id_rsa# 저장한 뒤 권한을 바꿔준다.chmod 600 ~/.ssh/config 테스트설정이 완료된 후에 서울리젼으로 ssh 연결을 시도해보자.123456$ ssh git-codecommit.ap-northeast-2.amazonaws.com# 다음과 같은 메세지가 리턴되면 성공이다.You have successfully authenticated over SSH. You can use Git to interact with AWS CodeCommit. Interactive shells are not supported.Connection to git-codecommit.ap-northeast-2.amazonaws.com closed by remote host.Connection to git-codecommit.ap-northeast-2.amazonaws.com closed. 연동이제 AWS CodeCommit 과 내 소스를 연결시켜보자.12345678910# 이미 존재하는 프로젝트의 경우$ git remote remove origin$ git remote add origin ssh://git-codecommit.ap-northeast-2.amazonaws.com/v1/repos/레파지토리명# 처음 시작하는 경우$ git clone ssh://git-codecommit.ap-northeast-2.amazonaws.com/v1/repos/레파지토리명# 권한이 없거나 ssh 계정을 물어볼 때# origin의 path 앞에 SSH key ID를 추가하자$ git remote add origin ssh://EXAMPLEEXAMPLEEXAMPLE@git-codecommit.ap-northeast-2.amazonaws.com/v1/repos/레파지토리명git pull origin master시에 정상적으로 가져오는 걸 확인할 수 있다. ssh 연동이 잘 되지 않을시메뉴얼대로 따라해도 연동이 안될 때는 당황하지 말고 IAM &gt; Users &gt; Security credentials에서 HTTPS Git credentials for AWS CodeCommit를 만들어주고 CodeCommit Repository 연결을 http로 하면 된다. WebhookGithub, Bitbucket 와 달리 Webhook 설정하는 법이 조금은 복잡하다. (GCP 의 Pub/Sub 와 비슷한 느낌)CodeDeploy 서비스를 사용하면 쉬워질 것 같은데, 그럼 CodePipeline 도 쓰고 싶을 것 같고 CI 세팅을 해야되고 다음 기회에 Lambda람다는 웹(URL)으로 호출할 수 있는 Javascript function 이다. 설정먼저 Lambda &gt; 함수 &gt; 함수생성 &gt; 새로 작성 메뉴에서 webhook 이란 이름의 함수를 생성한다.트리거 구성 메뉴에서 CodeCommit 을 선택하고 입력 폼을 잘 채워주자.기존 브랜치로 푸시, master 브랜치를 선택했다.사용자 지정데이터에는 webhook 을 걸 URL 경로를 넣어준다. (예: https://yourdomain.com/webhook) 소스이미 세팅된 함수를 사용하자.12345678910111213141516171819202122232425262728293031323334353637\"use strict\"const url = require(\"url\")const https = require(\"https\")exports.handler = (event, context, callback) =&gt; &#123; let webhook_url = event.Records[0].customData if (!webhook_url) &#123; let error = new Error(\"Web-hook URL not provided as custom data.\") callback(error) &#125; else &#123; console.log(\"POST web-hook to \" + webhook_url) let options = url.parse(webhook_url) options[\"method\"] = \"POST\" const req = https.request(options, res =&gt; &#123; let body = \"\" console.log(\"Status:\", res.statusCode) console.log(\"Headers:\", JSON.stringify(res.headers)) res.setEncoding(\"utf8\") res.on(\"data\", chunk =&gt; (body += chunk)) res.on(\"end\", () =&gt; &#123; console.log(\"Successfully triggered web-hook.\") // If we know it's JSON, parse it. if (res.headers[\"content-type\"] === \"application/json\") &#123; body = JSON.parse(body) &#125; callback(null, body) &#125;) &#125;) req.on(\"error\", callback) req.end() &#125;&#125;https 커넥션이 아닌 경우 http 모듈을 사용해서 request 를 보내면 될 것 같다.등록 후엔 CodeCommit &gt; 트리거 &gt; webhook &gt; 트리거 테스트를 진행하면 정상적으로 호출이 된다. 로그호출 로그는 CloudWatch &gt; 로그에서 생성한 Lambda 명으로 확인할 수 있다.로그 스트림이 설정되지 않았을 경우엔 Lambda &gt; 구성 &gt; 기존 역할에 표시된 역할(Rule)이 해당 Lambda 함수를 잡고 있는지 확인해야한다.IAM &gt; Rules &gt; 해당 룰 &gt; Permissions에서 Show policy를 누르면 Resource 속성에서 확인할 수 있고 다르다면 제대로 연결시켜주면 된다. 여담AWS Korea week in review에 소개되었다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"aws","slug":"server/aws","permalink":"https://gracefullight.dev/categories/server/aws/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"aws","slug":"aws","permalink":"https://gracefullight.dev/tags/aws/"},{"name":"codecommit","slug":"codecommit","permalink":"https://gracefullight.dev/tags/codecommit/"},{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"}]},{"title":"Laravel 5.5 - Log Permission 문제","slug":"Laravel-5-4-Log-Permission-Denied","date":"2017-08-18T13:11:35.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/08/18/Laravel-5-4-Log-Permission-Denied/","link":"","permalink":"https://gracefullight.dev/2017/08/18/Laravel-5-4-Log-Permission-Denied/","excerpt":"","text":"웹 서버의 유저로 로그 파일이 생성되어야 하는데, 어느 순간부터 root:root 권한을 달고 daliy log 가 생성되는 경우가 있다.여러가지 경우의 수가 있는데, 맞는 조건을 찾아서 Permission 오류가 발생하지 않게 처리해보자. selinuxstorage 에는 쓰기권한이 있어야한다.1$ chcon -R -t httpd_sys_rw_content_t storage WebServer user웹 서버의 유저가 다르게 설정 되어있을 때 권한이 바뀔 수 있다.서버 설정을 열어서 유저가 제대로 설정되어 있는지 확인해보자.nginx.conf1user nginx; php-fpm userphp-fpm 에서 설정하는 user 와 group 이 다르게 설정 되어 있을 때 권한이 바뀔 수 있다.php-fpm 설정을 열어 유저가 제대로 설정되어 있는지 확인해보자.php-fpm.d/www.conf12345user &#x3D; nginxgroup &#x3D; nginxlisten.owner &#x3D; nginxlisten.group &#x3D; nginx log rotate로그 파일이 너무 커지는 걸 막기위해 log rotate 설정이 되어있다면 권한이 바뀔 수 있다.logrotate 가 cron 에 물려 있는지 설정을 확인해보자./etc/logroate.d/*12345$ pwd/etc/logroate.d$ vi nginx$ vi php-fpm cron 사용시crontab 의 경우 root 유저로 실행이 되면 cron 에서 Laravel 을 호출할 때 log 가 root 권한으로 생성될 수 있다. 로그 분기log 파일을 생성하는 프로세스별로 분기해서 해결할 수 있다. Stackoverflow 참조bootstrap/app.php12345$app-&gt;configureMonologUsing(function(Monolog\\Logger $monolog) &#123; $filename = storage_path('logs/laravel-'.php_sapi_name().'.log'); $handler = new Monolog\\Handler\\RotatingFileHandler($filename); $monolog-&gt;pushHandler($handler);&#125;);설정을 추가해 놓으면 logs 폴더 하위에 다음과 같이 로그가 분기되어 생성된다.storage/logs12$ ls -al .-rw-r--r-- 1 nginx nginx 718 Aug 18 10:56 laravel-fpm-fcgi-2017-08-18.logcron 은 root 에서 실행되나 user shell 에서 Laravel 프로세스를 실행하는 경우 root 에 의해 log 가 생성되었다면 다음과 같이 permission 을 변경해서 생성해야한다. Post 참조bootstrap/app.php123456$app-&gt;configureMonologUsing(function(Monolog\\Logger $monolog) &#123; $filename = storage_path('/logs/laravel-' . php_sapi_name() . '.log'); // 5번째 파라미터로 666 권한을 넘긴다. $handler = new Monolog\\Handler\\RotatingFileHandler($filename, 0, \\Monolog\\Logger::DEBUG, true, 0666); $monolog-&gt;pushHandler($handler);&#125;);RotatingFileHandler 의 Parameter 는 여기를 참조하자.666 으로 생성 시엔 굳이 php_sapi_name()을 사용하지 않아도 된다. (rw 권한이 모두에게 있으니까) setfacl다른 해결 방법으로는 ACL 을 수정해 logs 폴더 자체를 해당 user:group 이 편집할 수 있게 처리하면 된다.12345678910$ pwd/public_html/storage/logs$ setfacl -d -m u:nginx:rwx .$ getfacl .default:user:nginx:rwx# 삭제$ setfacl -d -x u:nginx . 여담Laravel 프로젝트 시작시 bootstrap/app.php 안에 로그를 분기 로직을 넣고 개발하는 게 좋아보인다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Docker로 LEMP Stack 구축하기","slug":"LEMP-with-Docker","date":"2017-08-14T14:41:38.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/08/14/LEMP-with-Docker/","link":"","permalink":"https://gracefullight.dev/2017/08/14/LEMP-with-Docker/","excerpt":"","text":"이 포스트 전에 웹서버 세팅을 하나씩 설치해서 띄워보는 걸 권장하고Docker, SSH Login, LetsEncrypt, sed 명령어의 사용법을 알고 있어야 한다.구성할 서버 스택은 다음과 같다.DockerDocker-composeHost 에 사용될 Linux (Centos7)Alpain LinuxNginx ^1.13MariaDB ^10.2PHP ^7.1Laravel =5.4LetsEncryptHTTP2Redis Docker 설치이전 포스트를 참조하자. Container 쇼핑Docker Hub에서 마음에 드는 Container 를 사용해도 되지만, 생각처럼 돌아가는 Container 는 다음과 같았다.nginx-php-fpm (2M)official mariadb (10M)bitnami redis (500K)왜 Laradock을 안 썼죠?Laradock 에서 caddy 를 사용하지 않고 nginx 와 certbot 만을 이용해 http2 환경을 구성하는 예제가 없었다.그래도 시도해봤으나 certbot 인증시에 DocumentRoot 를 잡지 못하는 현상을 삽질로 매꿀 시간이 없었다.Git repo 를 Clone 받아서 Docker-compose 로 Container 를 구동하기 때문에 추후 ECS 에 적용할 수가 없는 구조였다.직접 구축해보고 싶었다. 세팅 nginx-php-fpmLaravel 용 및 튜닝을 위해 Docker hub 의 이미지 대신 Git repo 의 이미지를 Clone 해서 세팅을 해보자.내용 추가 중…","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"linux","slug":"linux","permalink":"https://gracefullight.dev/tags/linux/"},{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"}]},{"title":"AWS ECS 부수기","slug":"AWS-ECS-부수기","date":"2017-08-11T15:39:25.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/08/11/AWS-ECS-부수기/","link":"","permalink":"https://gracefullight.dev/2017/08/11/AWS-ECS-%EB%B6%80%EC%88%98%EA%B8%B0/","excerpt":"","text":"ECS 는 서울 리젼이 아직 없어서 그런가, 구글링해도 사용할만한 데이터가 너무 적었다.(기초 설명은 잘 되있다. 하지만 Hello World Application 을 올리려고 ECS 를 쓰는 건 아니니까…) 용어 ClusterAmazon ECS 클러스터는 작업을 배치할 수 있는 컨테이너 인스턴스의 논리적 그룹화입니다.이 공식 설명을 보고 Cluster 에 대한 감을 잡기가 쉽지 않았다.간단히하면 Docker Container 를 올리는 EC2 Instance 이다.K8S 의 그 클러스터이다. TaskTask 는 작업이라고 번역되며, 하나의 Task Definition JSON 은 하나의 Docker-compose YAML 이라고 보자. Container Definition배포되는 각 컨테이너의 정의파드의 개념 Task Definition컨테이너의 집합인 Task의 정의파드의 개념 ServiceAmazon ECS 는 단일 ECS 클러스터에서 작업 정의에 지정된 수(“원하는 개수”)의 인스턴스를 동시에 실행 및 관리할 수 있게 해줍니다.어떤 이유로 작업이 실패 또는 중지되는 경우 Amazon ECS 서비스 스케줄러가 작업 정의의 다른 인스턴스를 시작하여 이를 대체하고 서비스의 원하는 작업 수를 유지합니다.Task 를 자동으로 관리할 수 있게 하는 기능, LB 나 Auto Scaling 모두 여기서 적용이 된다.롤링 업데이트 시에 배포 및 오토 스케일링을 담당한다.K8S의 서비스, 디플로이먼트, 레플리카세트의 역할 RepositoryAWS Docker 레지스트리 서비스로 AWS Private DockerHub 라고 보자. 네트워크 모드모드내용default네트워크 모드 기본값으로 bridge와 같음awsvpcAWS에서만 제공되는 네트워크 모드 (ENI가 Task 자체 VPC의 IP 주소할당)bridgeDockerContainer를 호스트와 같은 네트워크에 배치해 라우팅 없이 컨테이너 접근 가능hostTask가 배치되는 호스트의 네트워크를 공유하는 모드 (Fargate 사용 불가)noneTask에 속한 컨테이너의 외부 접근이 불가능하고 포트 매핑 사용불가 볼륨 생성-v 또는 --volume 으로 Host 의 폴더를 Mount 하는 기능이 꼭 필요한데, 설정 창에선 찾기가 너무 힘들었다.ECS 에서는 작업 정의 생성 시에 하단에 볼륨 추가 를 꼭 먼저 클릭해 볼륨부터 추가해야한다.이름엔 --name 옵션 사용하듯이 닉네임을 넣고소스 경로엔 Host directory 경로를 넣자.추가가 되면 컨테이너 추가 시에 탑재 지점 메뉴의 소스 볼륨 select box 에서 선택할 수 있다.이 짓을 하는 것보단 공식 문서의 Task Definition JSON Parameter 를 보고 JSON 으로 때려박는게 편하다.예시 JSON 은 아래와 같다.(3306 과 3307 을 열고 Host 의 Data 폴더를 Mount 하는 기본 구성의 MariaDB Image)mariadb123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293&#123; \"requiresAttributes\": [ &#123; \"value\": null, \"name\": \"com.amazonaws.ecs.capability.docker-remote-api.1.21\", \"targetId\": null, \"targetType\": null &#125; ], \"taskDefinitionArn\": \"your task definition arn\", \"networkMode\": \"bridge\", \"status\": \"ACTIVE\", \"revision\": 3, \"taskRoleArn\": null, \"containerDefinitions\": [ &#123; \"volumesFrom\": [], \"memory\": null, \"extraHosts\": null, \"dnsServers\": null, \"disableNetworking\": null, \"dnsSearchDomains\": null, \"portMappings\": [ &#123; \"hostPort\": 3306, \"containerPort\": 3306, \"protocol\": \"tcp\" &#125;, &#123; \"hostPort\": 3307, \"containerPort\": 3307, \"protocol\": \"tcp\" &#125; ], \"hostname\": null, \"essential\": true, \"entryPoint\": null, \"mountPoints\": [ &#123; \"containerPath\": \"/var/lib/mysql\", \"sourceVolume\": \"dbdata\", \"readOnly\": null &#125; ], \"name\": \"maria\", \"ulimits\": null, \"dockerSecurityOptions\": null, \"environment\": [ &#123; \"name\": \"MYSQL_DATABASE\", \"value\": \"db\" &#125;, &#123; \"name\": \"MYSQL_PASSWORD\", \"value\": \"db_pw\" &#125;, &#123; \"name\": \"MYSQL_ROOT_PASSWORD\", \"value\": \"root_pw\" &#125;, &#123; \"name\": \"MYSQL_USER\", \"value\": \"db_user\" &#125; ], \"links\": null, \"workingDirectory\": null, \"readonlyRootFilesystem\": false, \"image\": \"mariadb:latest\", \"command\": [ \"mysqld\", \"--character-set-server=utf8\", \"--collation-server=utf8_general_ci\" ], \"user\": null, \"dockerLabels\": null, \"logConfiguration\": null, \"cpu\": 0, \"privileged\": null, \"memoryReservation\": 500 &#125; ], \"placementConstraints\": [], \"volumes\": [ &#123; \"host\": &#123; \"sourcePath\": \"/ecs/dbdata\" &#125;, \"name\": \"dbdata\" &#125; ], \"family\": \"mariadb\"&#125; 고민Container 를 Task 별로 생성해야하는데, 그럼 Task JSON 에서 link 옵션을 연결할 수가 없다. 이 경우엔 어떻게 Task Definition 을 짜야되나?EC2 에 접근해서 매번 link 를 생성해서 다시 올려야되나?이 부분을 해결하기 위해선 ecs-task-kite를 사용하거나 VPC 를 구성해 수동으로 연결해 주는 방법 밖에 없다.쉬운 방법으로 가자면 DB 는 (모든 컨테이너가 하나의 데이터를 바라봐야하는) RDS나 ElastiCache처럼 AWS 의 서비스 사용하고 VPC 를 구성해 Backend, Frontend 단의 서버만 ECS Task 를 만들어서 가변적으로 돌리는 게 좋아보인다.물론 동기화를 할 수도 있는데… 삽질할 시간에 더 잘 나온 포스팅을 기다려본다. 여담그냥 모니터링 컨테이너 하나 더 띄우고, HAProxy 컨테이너 올리고 EC2 에 다 때려박고 싶다.AWS Korea week in review에 소개되었다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"aws","slug":"server/aws","permalink":"https://gracefullight.dev/categories/server/aws/"}],"tags":[{"name":"aws","slug":"aws","permalink":"https://gracefullight.dev/tags/aws/"},{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"ecs","slug":"ecs","permalink":"https://gracefullight.dev/tags/ecs/"},{"name":"linux","slug":"linux","permalink":"https://gracefullight.dev/tags/linux/"},{"name":"k8s","slug":"k8s","permalink":"https://gracefullight.dev/tags/k8s/"}]},{"title":"일본 우편번호(주소) 검색 API","slug":"일본-우편번호-주소-검색-API","date":"2017-08-11T15:28:55.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2017/08/11/일본-우편번호-주소-검색-API/","link":"","permalink":"https://gracefullight.dev/2017/08/11/%EC%9D%BC%EB%B3%B8-%EC%9A%B0%ED%8E%B8%EB%B2%88%ED%98%B8-%EC%A3%BC%EC%86%8C-%EA%B2%80%EC%83%89-API/","excerpt":"","text":"다음 우편번호 검색 API 처럼 일본 우편번호 검색도 간단히 구현할 수 있다.여기에서 내용을 확인할 수 있지만, 더 쉽게 써보자. 소스123456789101112131415161718192021222324252627282930&lt;input type=\"number\" id=\"zip\" /&gt;&lt;button type=\"button\" onClick=\"search_addr();\"&gt;住所検索&lt;/button&gt;&lt;input type=\"text\" id=\"address\" /&gt;&lt;!-- 스크립트를 로드 --&gt;&lt;script src=\"//api.zipaddress.net/sdk/zipaddr.min.js\" async&gt;&lt;/script&gt;&lt;script&gt; var searchAddr = function() &#123; var $zip = $(\"#zip\") var zip = $zip.val() // 일본 우편번호는 7자리로 고정되어있다. // sample 6800001 if (zip &amp;&amp; zip.length === 7) &#123; ZA.request(zip, function(data, err) &#123; var $address = $(\"#address\") if (err) &#123; $address.val(\"\") $zip.focus() return alert(data.message) &#125; $address.val(data.fullAddress) $address.focus() &#125;) &#125; else &#123; alert(\"郵便番号に誤りがあります。\") $zip.focus() &#125; &#125;&lt;/script&gt; 여담주소지명으로 검색하는 API 는 찾아볼 수 없었다.역시 주소검색은 다음","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"Centos7 Timezone 변경하기","slug":"CentOS7-Timezone-변경하기","date":"2017-08-09T12:37:34.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/08/09/CentOS7-Timezone-변경하기/","link":"","permalink":"https://gracefullight.dev/2017/08/09/CentOS7-Timezone-%EB%B3%80%EA%B2%BD%ED%95%98%EA%B8%B0/","excerpt":"","text":"기존 방식12345678# 기존 설정 백업$ mv /etc/localtime /etc/localtime.bak# 타임존 연결$ ln -s /usr/share/zoneinfo/Asia/Seoul /etc/localtime# 백업을 안하고 바로 연결시$ ln -sf /usr/share/zoneinfo/Asia/Seoul /etc/localtime timedatectltimedatectl 명령어를 사용해 쉽게 바꿀 수 있다.12# 한줄로 깔끔하게$ timedatectl set-timezone Asia/Seoul 여담시간날 때 세팅용 쉘을 만들어야겠다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"centos","slug":"centos","permalink":"https://gracefullight.dev/tags/centos/"}]},{"title":"Laravel 5.5 - 다형성 관계","slug":"Laravel-5-4-Polymorphic-Relations","date":"2017-08-02T14:29:36.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/08/02/Laravel-5-4-Polymorphic-Relations/","link":"","permalink":"https://gracefullight.dev/2017/08/02/Laravel-5-4-Polymorphic-Relations/","excerpt":"","text":"댓글 테이블이 있고 이 댓글은 여러 테이블에서 사용된다고 치자.그럼 댓글 테이블에 type과 type_id를 가져가야할 것이다.이 때 사용할 수 있는 관계가 다형성 관계(릴레이션)인데, 공식 문서의 설명이 조금은 부족하다고 느꼈다. 파헤쳐보자. morphTomorphTo는 type과 type_id를 가진, 여러 테이블로 연결되어야할 테이블에서 사용하는 릴레이션 메소드이다.공식 문서에는 데이터를 가져온 뒤 릴레이션을 연결하는 예시만 있고, Eager 로딩 (With 구문을 사용하는 방법) 후 specific한 필드를 사용하게 변경하는 경우에 대한 정보는 없다. 기본 문법YourModel.php12345678910&lt;?phpclass YourModel extends Model &#123; ... // 다형성 관계를 가질 함수를 data로 정의했다 public function data() &#123; return $this-&gt;morphTo(); &#125;&#125;이렇게 정의시에 YourModel::with('data')-&gt;get() 으로 호출하면 불러와져야되지만, 필드명, 모델명이 정확하지 않으면 쿼리 호출조차 되지 않는다.(심지어 에러도 발생하지 않는다) 필드명 정의먼저 morphTo의 소스코드를 를 살펴보자.morphTo12345678910&lt;?php/** * Define a polymorphic, inverse one-to-one or many relationship. * * @param string $name * @param string $type * @param string $id * @return \\Illuminate\\Database\\Eloquent\\Relations\\MorphTo */public function morphTo($name = null, $type = null, $id = null)name, type, id를 파라미터로 받는다. 그럼 파라미터를 넘겨보자.YourModel.php12345678910&lt;?phpclass YourModel extends Model &#123; ... public function data() &#123; // morphTo의 paremeter로 null, 타입필드명, 타입인덱스 필드명을 넘긴다. return $this-&gt;morphTo(null, 'type', 'type_idx'); &#125;&#125;여기서 name엔 도대체 뭘 넣어야 되는거야? 라고 의문이 생길 수가 있다.함수 내에서 name 변수는 $this-&gt;getMorphs(Str::snake($name), $type, $id); 에만 딱 한 번 사용된다.getMorphs 함수를 따라가보자.getMorphs12345&lt;?phpprotected function getMorphs($name, $type, $id) &#123; // $type과 $id가 명시되면 그 값을 먼저 반환한다. return [$type ?: $name.'_type', $id ?: $name.'_id'];&#125;주석처럼 type과 id가 명시되면 name값은 사용되지 않는 쓰레기 값이 되어버린다.따라서 null로 넘겨주면 된다. 타입-모델 바인딩타입과 인덱스를 명시하면 드디어 오류메세지가 노출된다.내가 정의한 type명을 가진 Class가 없다 라는 내용인데, 이제 타입과 모델을 연결시켜보자.이 때 사용할 수 있는 메소드가 공식 문서에서 조금 스크롤을 내리면 있는 Custom Polymorphic Types에 잘 설명되어 있다.하지만 등록하는 부분에 대한 설명이 **You may register the morphMap in the boot function of your AppServiceProvider or create a separate service provider if you wish.**라고 되어있다. 즉 AppServiceProvider에 넣던지 Service Provider로 생성이다.한 모델에만 쓸 건데 전체에 등록을 할 필요가 없으니, 사용할 모델에 기능을 넣어보자.YourModel.php1234567891011121314151617181920212223// Relation을 사용해야한다.use Illuminate\\Database\\Eloquent\\Relations\\Relation;&lt;?phpclass YourModel extends Model &#123; // 이 메소드는 모델이 initialize될 때 실행된다. protected static function boot() &#123; parent::boot(); // 여기에 타입 별로 모델을 바인딩한다. Relation::morphMap([ // type이 product일 경우 id는 product_id를 가리킨다. 'product' =&gt; 'App\\Models\\Product', // type이 order일 경우 id는 order_id를 가리킨다. 'order' =&gt; 'App\\Models\\Order' ]); &#125; public function data() &#123; // morphTo의 paremeter로 null, 타입필드명, 타입인덱스 필드명을 넘긴다. return $this-&gt;morphTo(null, 'type', 'type_idx'); &#125;&#125;완벽해졌다. 이제 오류 없이 실행되는 것을 확인할 수 있다. morphOne문서 상에는 설명 되지 않은 morphOne 이란 메소드도 있다.morphMany는 관계가 설정된 값을 배열로 반환하지만 morphOne은 하나의 데이터로 반환한다. (hasOne과 hasMany처럼)구조는 다음과 같다.12&lt;?phppublic function morphOne($related, $name, $type = null, $id = null, $localKey = null) morphToMany morphedByMany 여담다대다 다형성 관계 메소드 (morphToMany, morphedByMany)의 경우는 나중에 사용하게 되면 정리해야겠다.Relation 메소드들은 문서를 대충 훑고 API Docs를 직접 까보는게, 효율적인 것 같다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Laravel 5.5 - Multi DB Connection","slug":"Laravel-5-4-Multi-Database-Connection","date":"2017-07-31T13:54:58.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/07/31/Laravel-5-4-Multi-Database-Connection/","link":"","permalink":"https://gracefullight.dev/2017/07/31/Laravel-5-4-Multi-Database-Connection/","excerpt":"","text":"여러 데이터베이스에서 데이터를 가져와야되는 경우가 있다. (마이그레이션 또는 발송 모듈 DB의 분기 등등)라라벨에선 아주 쉽게 설정이 가능하다. 설정config/database.php에 새로운 커넥션 정보를 넣어주자.새 커낵션은 mysql_new 라고 이름지었다.config/database.php123456789101112131415161718192021222324&lt;?phpreturn [ ... 'connections' =&gt; [ // 기본 커넥션 'mysql' =&gt; [ ... ], // 새 친구 'mysql_new' =&gt; [ 'driver' =&gt; 'mysql', 'host' =&gt; '111.111.111.111', 'port' =&gt; '3306', 'database' =&gt; 'test', 'username' =&gt; 'test', 'password' =&gt; 'test1234', 'unix_socket' =&gt; '', 'charset' =&gt; 'utf8', 'collation' =&gt; 'utf8_general_ci', 'prefix' =&gt; null, 'engine' =&gt; null ], ],]; 모델새 커넥션에 사용할 모델을 만들어주고, 모델에서 연결할 커넥션을 설정해주자.model.php123456789&lt;?php...class OldMember extends Model&#123; // 커넥션 변수를 다시 설정해주면 끝 protected $connection = 'mysql_new'; protected $table = 'test'; ...&#125; 사용기존 모델 사용법과 똑같다. 아주 간단하다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"쉘 스크립트 if 조건변수","slug":"shell-script-if-condition","date":"2017-07-30T12:48:42.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/07/30/shell-script-if-condition/","link":"","permalink":"https://gracefullight.dev/2017/07/30/shell-script-if-condition/","excerpt":"","text":"쉘 스크립트의 비교 변수 몇 가지를 알아보자. 파일 상태 비교연산자기능예시-afile_exists[ -a /etc/passwd ]-dfile_exists &amp;&amp; is_dir[ -d /etc ]-ffile_exists &amp;&amp; is_file[ -f /etc/passwd ]-sfile_exists &amp;&amp; not empty[ -s /etc/passwd ]-w해당 유저로 쓰기 가능[ -w test.txt ]-x해당 유저로 실행 가능[ -x test.sh ]-N마지막 파일 읽은 시점부터 변경점이 있는지[ -N test.txt ]-O해당 유저의 파일인지[ -O test.txt ]-G해당 그룹의 파일인지[ -G test.txt ]-ntB파일보다 A파일이 새로운지[ A_file -nt B_file ]-otB파일보다 A파일이 오래됬는지[ A_file -ot B_file ] 숫자 비교연산자기능예시-ltLess than[ 0 -lt 1 ]-leLess than or Equal[ 1 -le 1 ]-eqEqual[ 1 -eq 1 ]-gtGreater than[ 1 -gt 0 ]-geGreater than or Equal[ 1 -ge 1 ]-neNot Equal to[ 1 -ne 0 ]","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"shell","slug":"server/shell","permalink":"https://gracefullight.dev/categories/server/shell/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"shell","slug":"shell","permalink":"https://gracefullight.dev/tags/shell/"}]},{"title":"number_format의 반대 함수","slug":"php-opposite-of-number-format","date":"2017-07-29T02:17:47.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/07/29/php-opposite-of-number-format/","link":"","permalink":"https://gracefullight.dev/2017/07/29/php-opposite-of-number-format/","excerpt":"","text":"number_format 으로 쉽게 comma 가 들어간 숫자를 만들 수 있는데,이 반대 방법은 preg_replace 를 통해 comma 를 제거한 뒤에 다시 int 로 형변환을 해야한다.더 간단하게 변경할 수 있는 방법은 바로 filter_var를 사용하는 것이다. 소스123456789101112&lt;?php$formatted_nubmer = number_format(10000);echo $formatted_number; // 10,000;$number = filter_var($formatted_nubmer, FILTER_SANITIZE_NUMBER_INT);// FILTER_SANITIZE_NUMBER_INT 상수가 너무 길어서 외우기가 힘들다면 519$number2 = filter_var($formatted_nubmer, 519);echo $number; // 10000;echo $number2; // 10000; 필터 옵션필터 상수에 대해 궁금해졌다면 공홈을 참조하자.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"Docker와 Docker-compose 제대로 설치하기","slug":"Install-docker-docker-compose-to-centos","date":"2017-07-23T11:57:07.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/07/23/Install-docker-docker-compose-to-centos/","link":"","permalink":"https://gracefullight.dev/2017/07/23/Install-docker-docker-compose-to-centos/","excerpt":"","text":"구글링하면 너무 예전 버전 (1버전 대)의 설치방법만 나와있다.영문을 따라할 수 있으면 공홈을 보고하면 된다. Docker 설치 옛 버전 삭제1234$ sudo yum remove docker \\ docker-common \\ docker-selinux \\ docker-engine서비스를 내리고 docker를 삭제해도 /var/lib/docker/ 폴더는 지워지지 않고 여기에 기존 데이터가 모두 남아있다. 필수 패키지 설치1234567$ sudo yum install -y yum-utils device-mapper-persistent-data lvm2# docker repo를 등록한다.$ sudo yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo# yum package를 업데이트$ sudo yum makecache fast 다운로드1$ sudo yum install docker-ce 실행12345$ sudo systemctl start docker$ sudo systemctl enable docker$ sudo docker --versionDocker version 17.06.0-ce, build 02c1d87 Docker-compose 설치 다운로드12# root로 로그인해야한다.$ curl -L https://github.com/docker/compose/releases/download/1.14.0/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose 실행 권한 부여12345$ chmod +x /usr/local/bin/docker-compose# 설치 확인$ docker-compose --versiondocker-compose version 1.14.0, build 1719ceb설치가 완료되었다. Centos6에서 설치하기centos6 버전에서는 위의 설치방법으로 Docker를 설치할 수 없다. (RHEL7 버전 전용이기에)다음과 같이 설치하자.1234567$ yum install http://mirrors.yun-idc.com/epel/6/i386/epel-release-6-8.noarch.rpm$ yum install -y docker-io$ service docker start$ chkconfig docker on","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"linux","slug":"linux","permalink":"https://gracefullight.dev/tags/linux/"}]},{"title":"Docker Error response from daemon: reference does not exist","slug":"Docker-Error-response-from-daemon-reference-does-not-exist","date":"2017-07-23T11:52:51.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/07/23/Docker-Error-response-from-daemon-reference-does-not-exist/","link":"","permalink":"https://gracefullight.dev/2017/07/23/Docker-Error-response-from-daemon-reference-does-not-exist/","excerpt":"","text":"Docker rmi명령어로 이미지를 삭제하는데 Error response from daemon: reference does not exist 오류가 나면서 이미지 삭제가 안 되는 경우 다음과 같이 하면된다. 해결구글링하면 다시 설치하거나 cache를 비우거나 하라는데 해결되진 않았고 쉽게 접근하면 된다.그냥 이미지 폴더를 날리자123$ sudo systemctl stop docker$ sudo rm -rf /var/lib/docker$ sudo systemctl start docker","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"docker","slug":"server/docker","permalink":"https://gracefullight.dev/categories/server/docker/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"docker","slug":"docker","permalink":"https://gracefullight.dev/tags/docker/"},{"name":"linux","slug":"linux","permalink":"https://gracefullight.dev/tags/linux/"}]},{"title":"Linux 폴더 구조","slug":"Linux-Directory-Structure","date":"2017-07-23T11:37:34.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/07/23/Linux-Directory-Structure/","link":"","permalink":"https://gracefullight.dev/2017/07/23/Linux-Directory-Structure/","excerpt":"","text":"윈도우도 Program Files 가 무슨 폴더인지 보자마자 알듯 리눅스도 폴더명이 친숙해지면 더 쉬워지지 않을까 했다. (보통 /home, /etc, /var, /tmp 정도만 왔다 갔다 하니까)이 정도만 정리해 놓으면 CPU 정보를 볼때 왜 /proc/cpuinfo를 까야되는지 한 번에 감이 올 것 같다. Directory Structure경로설명/Root/bin기본 명령어 프로그램 (ex. ls, cp)/dev장치 파일/etc시스템 설정 및 사용자 정보, 네트워킹 설정 파일/home유저 폴더/lib실행파일이 사용할 수 있는 공유 라이브러리 코드 파일/proc시스템 통계/sys장치와 시스템 인터페이스 제공/sbin시스템 실행 파일/tmp임시 파일/usr리눅스 시스템 파일 (사용자 파일이 아님)/var변수 서브디렉토리로 프로그램 런타임 정보 기록/boot커널 부트 로더 파일/media제거 가능한 미디어를 위한 마운트 포인트/opt제3자 소프트웨어 파일/usr/includeC컴파일러 헤더파일/usr/infoGNU 정보 매뉴얼/usr/local관리자 소프트웨어 설치 파일/usr/man매뉴얼 페이지/usr/share다른 유닉스 머신과 작업해야 할 파일/vmlinuz 또는 /boot/vmlinuz리눅스 커널 여담Linux Kernel을 이해하는 그 날까지","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"linux","slug":"server/linux","permalink":"https://gracefullight.dev/categories/server/linux/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"linux","slug":"linux","permalink":"https://gracefullight.dev/tags/linux/"}]},{"title":"Laravel - Log::debug vs logger","slug":"Laravel-Log-debug-vs-logger","date":"2017-07-20T15:46:35.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/07/20/Laravel-Log-debug-vs-logger/","link":"","permalink":"https://gracefullight.dev/2017/07/20/Laravel-Log-debug-vs-logger/","excerpt":"","text":"로그를 찍기 위해서 Log 파사드 또는 logger 헬퍼 함수를 사용할 수 있다.두 함수의 차이점은 무엇일까? Log::debugLog 파사드가 정의되어있어야 한다. use Log;NULL 값이 들어올시 NULL이 로그에 출력된다. logger헬퍼함수라 Log 파사드 없이 사용 가능하다.NULL 값이 들어올시 아무 내용도 찍히지 않는다.debug 레벨이 기본이라, 다른 레벨의 로그를 찍으려면 logger()-&gt;error('에러 로그'); 처럼 함수를 하나 더 호출해야한다.단, info 레벨 로그는 info(); 헬퍼 함수를 사용할 수 있다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Laravel 5.5 - 일본으로 메일 보내기","slug":"Laravel-5-4-Mail-to-Japan","date":"2017-07-18T15:11:01.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/07/18/Laravel-5-4-Mail-to-Japan/","link":"","permalink":"https://gracefullight.dev/2017/07/18/Laravel-5-4-Mail-to-Japan/","excerpt":"","text":"일본 통신사 중 소프트뱅크와 AU는 UTF8 메일이 깨져서 들어간다. (도코모는 정상적)Laravel 뿐아니라 일본으로 메일을 보내고 싶다면, 이 포스팅의 방식대로 접근하면 된다. iso-2022-jp먼저 인코딩을 iso-2022-jp로 바꿔줘야한다.테스트 결과 JIS 인코딩과 같다.SJIS 인코딩도 있는데 위 인코딩에 몇가지 특수문자가 추가된 형태이다.AppServiceProvider에 메일 인코딩을 전역으로 설정하자.app/Providers/AppServiceProvider.php123456789101112131415161718192021&lt;?php...use Swift;use Swift_DependencyContainer;use Swift_Preferences;class AppServiceProvider extends ServiceProvider&#123; ... public function register() &#123; // laravel의 메일 패키지는 Swift이므로 당황하지말자 Swift::init(function() &#123; // 헤더를 추가하고 Swift_DependencyContainer::getInstance() -&gt;register('mime.qpheaderencoder') -&gt;asAliasOf('mime.base64headerencoder'); // 인코딩을 변경한다. Swift_Preferences::getInstance()-&gt;setCharset('iso-2022-jp'); &#125;); &#125;&#125; 7bit위키를 참조해보면 iso-2022는 문자열을 7bit 또는 8bit로 표현하는 기술이다. 근데, 소프트뱅크 문서에 7bit로 달란다.메일 폼을 열어서 build시에 인코딩 바이트를 변경하자.app/Mail/YourMailForm.php12345678910111213141516171819&lt;?php...use Swift_Mime_ContentEncoder_PlainContentEncoder;class YourMailForm extends Mailable&#123; ... public function build() &#123; return $this-&gt;subject('ご注文を承りました。') -&gt;view('mail.your_mail_view') -&gt;withSwiftMessage(function($message) &#123; // 전역으로 설정한 뒤에 이 메소드를 빼보고 테스트를 못 해봤다. // 다음 분이 빼고 테스트 부탁드려요 : ) $message-&gt;setCharset('iso-2022-jp') // 인코딩 바이트를 바꿔준다. -&gt;setEncoder(new Swift_Mime_ContentEncoder_PlainContentEncoder('7bit')); &#125;); &#125;&#125; mail.view가장 중요한 것은 Mail View에서도 charset meta tag를 등록해줘야 한다는 것이다.이 걸 세팅안하고 얼마나 삽질을 해댔는지, 없던 이두근이 생길지경.resources/view/mail/your_mail_view.blade.php12345678&lt;html&gt; &lt;head&gt; &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=iso-2022-jp\"&gt; &lt;/head&gt; &lt;body&gt; ... &lt;/body&gt;&lt;/html&gt;이렇게 세팅을 하고 메일을 보내면 정상적으로 보내지는 걸 확인할 수 있다. 여담세 가지만 기억하자.iso-2022-jp7bitmeta[charset=“iso-2022-jp”]","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"AWS 용어 정리","slug":"AWS-용어-정리","date":"2017-07-16T07:03:14.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/07/16/AWS-용어-정리/","link":"","permalink":"https://gracefullight.dev/2017/07/16/AWS-%EC%9A%A9%EC%96%B4-%EC%A0%95%EB%A6%AC/","excerpt":"","text":"AWS의 생태계에 들어가기 위해선 먼저 용어에 익숙해져야 될 것 같았다.사용법은 쉬운데… 약어가 처음 접하는 사람에게 조금 부담스러웠다. 용어서비스명약어설명Elastic Compute CloudEC2클라우드 서버EC2 Container ServiceECSDocker 컨테이너 서버Elastic Load BalancingELB트래픽, 부하 분산 서비스Lambda-클라우드 FunctionScale Up-인스턴스 물리용량 증가Scale Out-인스턴스 복제Auto Scaling-인스턴스 Scale 자동화Route 53-DNS 서비스Virtual Private CloudVPC내부망 구축 서비스Relational Database ServiceRDSRDBMS 구축 서비스DynamoDB-NoSQL 구축 서비스Simple Storage ServiceS3데이터 스토리지 서비스 (파일서버)CloudFront-CDN 서비스Glacier-저렴한 스토리지 서비스 (주로 백업용)Elastic Block StoreEBSEC2의 가상 하드디스크Identity and Access ManagementIAM인증, 권한 부여CloudWatch-AWS 리소스 모니터링Elastic BeanstalkEBPaaSLightSail-저렴한 EC2 (VPS) 여담전체적으로 GCP보다 용어가 직관적이지 않은 느낌 (App Engine, Compute Engine을 보면 얼마나 멋진가)이였는데, 풀어 놓고 적어보니 GCP도 AE, CE 이렇게 적으면 못 알아 먹었겠구나.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"aws","slug":"server/aws","permalink":"https://gracefullight.dev/categories/server/aws/"}],"tags":[{"name":"aws","slug":"aws","permalink":"https://gracefullight.dev/tags/aws/"}]},{"title":"unpkg cdn 사용하기 (jsdelivr)","slug":"unpkg-cdn","date":"2017-07-16T06:50:21.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/07/16/unpkg-cdn/","link":"","permalink":"https://gracefullight.dev/2017/07/16/unpkg-cdn/","excerpt":"","text":"최근 소스들을 까보다가 발견했는데, npm에 등록된 패키지를 CDN으로 바로 활용 가능한 서비스가 있다.바로 unpkg이다. 리젼은 여기서 확인 가능하다. 사용사용법은 엄청나게 간단하다.node_modules 폴더 안에 있는 구조를 URL에 그대로 입력만 해주면 된다.몇 가지 예로 확인해보자.123456&lt;!-- React --&gt;&lt;script src=\"https://unpkg.com/react@15.3.1/dist/react.min.js\"&gt;&lt;/script&gt;&lt;!-- Lodash --&gt;&lt;script src=\"https://unpkg.com/lodash@4.17.4/lodash.min.js\"&gt;&lt;/script&gt;&lt;!-- Bootstrap css --&gt;&lt;script src=\"https://unpkg.com/bootstrap@3.3.7/dist/css/bootstrap.min.css\"&gt;&lt;/script&gt;node_modules 안의 경로가 생각나지 않는다 라면 폴더 경로까지만으로 웹에서 접근해보자.예를 들어 Bootstrap4라면 https://unpkg.com/bootstrap@4.0.0-alpha.6/ 까지만 들어가면 폴더 구조가 보인다. 여담블로그의 스크립트도 unpkg로 바꿨는데, 로딩속도가 1초 가까이 줄어든 느낌이다. 이슈unpkg로 스크립트를 가져오는 도중에 503 timeout 에러가 발생해서 블로그가 동작하지 않았었다.같은 방법으로 동작하지만 좀 더 reliable한 서비스인 jsdelivr를 사용하자.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"}]},{"title":"Laravel 5.5 - 로그인(Auth) 붙히기","slug":"Laravel-5-4-Login-with-Auth","date":"2017-07-09T13:46:57.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/07/09/Laravel-5-4-Login-with-Auth/","link":"","permalink":"https://gracefullight.dev/2017/07/09/Laravel-5-4-Login-with-Auth/","excerpt":"","text":"이전 포스팅에서 데이터를 가져왔으니, 로그인을 구현해보자. Basic Auth라라벨에서 제공하는 회원가입, 로그인, 비밀번호 찾기 기능을 사용하고 싶다면 artisan 명령어로 간단하게 시작할 수 있다.1$ php artisan make:auth명령어를 실행하면 resources/views/auth 폴더에 뷰가 app/Http/Controllers/Auth에 로직이 생성되고 routes/web.php에 라우팅이 등록된다.DB도 같이 만들고 싶다면 Docs를 따라하자. 다른 테이블 사용제공된 user 테이블을 안 쓰려면 커스터마이징이 필요하다. 설정 변경config/auth.php 파일로 이동해 다른 모델을 등록하자.config/auth.php12345678&lt;?php'providers' =&gt; [ 'users' =&gt; [ 'driver' =&gt; 'eloquent', // 여기에 사용할 모델을 등록한다. 'model' =&gt; App\\Models\\Member::class, ]]config 안의 파일을 변경하면 config:clear를 실행해 혹시 모를 캐시를 날려주자그리고 app/Models/Member.php로 이동해 내 모델을 라라벨 기본 인증 모듈을 사용할 수 있게 추가해야한다.app/Models/Member.php12345678910111213141516171819&lt;?// 라라벨 인증 사용use Illuminate\\Foundation\\Auth\\User as Authenticatable;// 비밀번호 변경 메일을 위해 필요한 traituse Illuminate\\Notifications\\Notifiable;// Authenticatable 를 상속받는다.class Member extends Authenticatable &#123; // Notifiable trait를 추가한다. use Notifiable; protected $guarded = [ 'member_id', 'remember_token' ]; protected $hidden = [ 'password', 'remember_token', ];&#125; 인증 필드 변경Basic Auth는 기본 필드를 email로 잡고 있기 때문에 id 필드를 사용하게 변경해야한다.app/Http/Controllers/Auth/LoginController.php123456&lt;?php// username 메소드를 추가public function username() &#123; // 반환할 필드를 선언한다. return 'id';&#125; 회원가입 후 자동로그인회원가입이 성공하면 세션을 생성해줘야한다.app/Http/Controllers/Auth/RegisterController.php1234567891011&lt;?php// registered 메소드를 Overrideprotected function registered(Request $request, $user) &#123; // 세션 생성 Auth::attempt([ 'id' =&gt; $request-&gt;input('id'), 'password' =&gt; $request-&gt;input('password') ]); return response(null, 204);&#125; ajax 처리 로그인로그인을 ajax로 처리해야될 경우 커스터마이징이 필요하다.app/Http/Controllers/Auth/LoginController.php12345678910111213&lt;?php// authenticated 메소드를 Overrideprotected function authenticated(Request $request, $user) &#123; // 인증이 된 경우 페이지 전환이 아닌 전환될 페이지를 json으로 반환한다. if ($request-&gt;ajax()) &#123; return response()-&gt;json([ 'href' =&gt; url()-&gt;previous() ]); &#125; else &#123; return abort(405); &#125;&#125; 비밀번호 찾기비밀번호 찾기를 ajax로 처리해야될 경우 커스터마이징이 필요하다.app/Http/Controllers/Auth/ForgotPasswordController.php1234567891011121314151617181920&lt;?phppublic function sendResetLinkEmail(Request $request) &#123; $this-&gt;validateId($request); // email이 아닌 아이디로 검색을 해 메일을 찾고 싶다면 $data = Member::where('id', $request-&gt;only('id')) -&gt;first(['email']); $email = isset($data-&gt;email) ? $data-&gt;email : null; // 여기서 email이 User Model(Member Model)에 바인딩된다. // 아래의 sendPasswordResetNotification 메소드에서 $this-&gt;email 값이다. $response = $this-&gt;broker()-&gt;sendResetLink([ 'email' =&gt; $email ]); // 리턴 값을 변경해주자. return response()-&gt;json([ 'email' =&gt; $email ], $response == Password::RESET_LINK_SENT ? 200 : 500 );&#125; routing 예외ajax 요청으로 바꿨다면 굳이 필요없는 기본 route는 등록할 필요가 없다. (예를 들면 로그인 페이지)먼저 routes/web.php에서 Auth::routes(); 를 지워주고 라라벨 route 파일을 열어보자.vendor/laravel/Illuminate/Routing/Router.php123456789101112131415161718// 994 라인public function auth()&#123; // Authentication Routes... $this-&gt;get('login', 'Auth\\LoginController@showLoginForm')-&gt;name('login'); $this-&gt;post('login', 'Auth\\LoginController@login'); $this-&gt;post('logout', 'Auth\\LoginController@logout')-&gt;name('logout'); // Registration Routes... $this-&gt;get('register', 'Auth\\RegisterController@showRegistrationForm')-&gt;name('register'); $this-&gt;post('register', 'Auth\\RegisterController@register'); // Password Reset Routes... $this-&gt;get('password/reset', 'Auth\\ForgotPasswordController@showLinkRequestForm')-&gt;name('password.request'); $this-&gt;post('password/email', 'Auth\\ForgotPasswordController@sendResetLinkEmail')-&gt;name('password.email'); $this-&gt;get('password/reset/&#123;token&#125;', 'Auth\\ResetPasswordController@showResetForm')-&gt;name('password.reset'); $this-&gt;post('password/reset', 'Auth\\ResetPasswordController@reset');&#125;입맛에 맞게 web.php로 가져와 사용하자. notification 예외Noticifation은 사용자에게 빠르게 알림을 보낼 수 있는 기능이지만, 정해져 있는 템플릿을 사용하므로 커스터마이징이 되게 힘들다.비밀번호 찾기시에 보낼 메일을 정해진 템플릿을 사용할 수 없다면 메소드를 수정하자.app/Models/Member.php123456&lt;?php// 이 메소드를 override해야한다.// 첫 파라미터는 비밀번호 인증용 token이 들어온다.public function sendPasswordResetNotification($token) &#123; Mail::to($this-&gt;email)-&gt;send(new PasswordReset($token));&#125; AuthBasic Auth를 사용하는데 건드려야 되는 곳이 많으므로 Auth 모듈만 사용하는게 정신건강에 좋다고 본다.(Bootstrap 기반의 Laravel에 딱 맞는 모양을 입은 프로젝트라면 기본 인증이 좋겠지만) 로그인먼저 사용할 모델에 Authenticatable 클래스를 상속 받자그리고 LoginController에서 Auth::attempt() 메소드를 실행하면 끝이다.app/Http/Controllers/LoginController.php12345678910public function login(Request $request) &#123; $password = $request-&gt;password; if(Auth::attempt([ 'id' =&gt; $request-&gt;id, 'password' =&gt; $password ]))&#123; return response(null, 200); &#125;else&#123; return abort(401); &#125;&#125; not bcryptAuth 모듈은 기본으로 bcrypt를 사용해 비밀번호를 암호화하고 비교하는데 다른 암호화 방식을 사용해야하는 경우가 있다.bcrypt를 사용하지 않게 처리해보자.app/Models/Member.php12345// 이 메소드를 override 해야한다.public function getAuthPassword() &#123; // bcrypt 비교를 하지 않기 위해 강제로 해시를 생성한다. return Hash::make($this-&gt;password);&#125;이제 Auth::attempt() 메소드에 패스워드를 넘길 때 암호화를 해주고 넘기면 된다. N개의 세션관리자와 회원은 같은 세션을 사용하면 안 된다. 세션을 분기해보자. 모델 생성먼저 모델을 하나 만들고 Authenticatable 클래스를 상속받는다.app/Models/Admin.php1234567&lt;?phpuse Illuminate\\Foundation\\Auth\\User as Authenticatable;class Admin extends Authenticatable &#123; // 속성은 테이블에 맞게 알아서 정리하자&#125; 설정 추가만든 모델을 Laravel Auth에서 사용한다고 등록을 해줘야한다.config/auth.php12345678910111213141516171819&lt;?phpreturn [ 'guards' =&gt; [ ... // 아래에 등록된 provider를 admin이란 이름의 guard로 사용 'admin' =&gt; [ 'driver' =&gt; 'session', 'provider' =&gt; 'admin' ] ], 'providers' =&gt; [ ... // 방금 만든 모델을 Auth의 Provider로 등록 'admin' =&gt; [ 'driver' =&gt; 'eloquent', 'model' =&gt; App\\Models\\Admin::class ] ],];passowrds 속성은 제공되는 password_resets 기능을 사용할 경우에만 추가해주면 된다. 미들웨어관리자 세션이 인증된 사람만 관리자 페이지에 접근할 수 있어야한다.php artisan make:middleware Admin 명령어를 실행해 Admin Middleware를 만들자.app/Http/Middleware/Admin.php12345678910111213141516&lt;?phpuse Auth;use Closure;class Admin &#123; public function handle($request, Closure $next) &#123; // admin session이 있는 경우만 request를 진행한다. if (Auth::guard('admin')-&gt;check()) &#123; return $next($request); &#125; // 아닐경우 관리자 로그인 페이지로 넘긴다. return redirect()-&gt;route('admin.login'); &#125;&#125;그리고 Http Kernel에 방금 만든 Admin Middleware를 라우팅에서 사용할 수 있게 등록해준다.app/Http/Kernel.php123456789101112&lt;?php ... protected $routeMiddleware = [ 'auth' =&gt; \\Illuminate\\Auth\\Middleware\\Authenticate::class, 'auth.basic' =&gt; \\Illuminate\\Auth\\Middleware\\AuthenticateWithBasicAuth::class, 'bindings' =&gt; \\Illuminate\\Routing\\Middleware\\SubstituteBindings::class, 'can' =&gt; \\Illuminate\\Auth\\Middleware\\Authorize::class, 'guest' =&gt; \\App\\Http\\Middleware\\RedirectIfAuthenticated::class, 'throttle' =&gt; \\Illuminate\\Routing\\Middleware\\ThrottleRequests::class, // admin 이름으로 Admin Middleware를 호출할 수 있게 등록 'admin' =&gt; \\App\\Http\\Middleware\\Admin::class, ];새로운 라우팅 파일로 관리하기 위해 RouteServiceProvider에 설정을 추가한다.app/Providers/RouteServiceProvider.php123456789101112131415161718&lt;?php... public function map() &#123; ... $this-&gt;mapAdminRoutes(); &#125; protected function mapAdminRoutes() &#123; // /admin 으로 들어오는 요청에 대해 처리한다. Route::prefix('admin') // 이런식으로 한 번에 추가할 수도 있다. 하지만 except 함수를 쓸 수 없는 것 같고, // 라우팅 페이지에서 미들웨어를 등록해주는 게 더 편했다. // -&gt;middleware(['web', 'admin']) -&gt;middleware('web') -&gt;namespace($this-&gt;namespace) // routes/admin.php 파일을 관리자 라우팅 파일로 등록한다. -&gt;group(base_path('routes/admin.php')); &#125;마지막으로 라우팅 파일에 미들웨어를 넣어준다.routes/admin.php123456&lt;?php// admin middleware를 사용하고, namespace에 admin.을 추가한다.Route::group(['middleware' =&gt; 'admin', 'as' =&gt; 'admin.'], function() &#123; // 이 라우팅은 route('admin.main') 으로 접근이 가능해진다. Route::get('/', 'AdminController@index')-&gt;name('main');&#125;); 활용기존 Auth 메소드들에 guard만 추가해주면 쉽게 사용 가능하다.12345&lt;?phpAuth::guard('admin')-&gt;attepmt();Auth::guard('admin')-&gt;check();Auth::guard('admin')-&gt;user();Auth::guard('admin')-&gt;logout(); 로그아웃Auth::logout() 메소드를 호출하면 된다. 이슈 세션 아이디라라벨에선 로그인을 할 때 세션아이디를 새로운 값으로 엎어쳐버린다.따라서 같은 환경에서 접근했는데, 로그인을 하면 다른 사용자가 되는 경우가 생긴다.(로그아웃시에는 그대로다.)1234&lt;?php// 로그인 전에 세션아이디를 가져와$old_session_id = Session::getId();// 로그인이 성공하면 DB에서 등록된 세션값을 업데이트하자. 소셜 로그인laravel/socialite 패키지를 설치하고 아주 쉽게 연동이 가능하다. 세팅1$ composer require laravel/socialite기본 socialite 패키지는 facebook, twitter, linkedin, google, github or bitbucket 만 연동이 가능하므로 다른 소셜 로그인을 연동하고 싶을 경우 Socialite Providers 패키지를 사용하면 된다.Socialite Providers 사이트에는 Naver, Kakao, BattleNet(?) 등의 소셜 연동이 가능한 패키지가 무수히 많다. 여담JWT 인증과 같이본다면 Laravel을 사용한 실무에서 필요한 인증은 다 마무리한 셈일 듯","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"PHP 7.1에서 mcrypt 대체하기","slug":"PHP-7-1에서-mcrypt-대체하기","date":"2017-07-07T13:33:46.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/07/07/PHP-7-1에서-mcrypt-대체하기/","link":"","permalink":"https://gracefullight.dev/2017/07/07/PHP-7-1%EC%97%90%EC%84%9C-mcrypt-%EB%8C%80%EC%B2%B4%ED%95%98%EA%B8%B0/","excerpt":"","text":"MCRYPT암호화 함수인 mcrypt 가 PHP 7.1 버전부터 Deprecated 되었다.왜 사라졌는지는 링크에 자세하게 나와있다. 기존 소스PHP 구버전에서는 mcrypt 와 MCRYPT_RIJNDAEL_128 알고리즘을 통해 AES128 이 구현되어 있을 것이다.MCRYPT_RIJNDAEL_128은 AES 128과 동일하다.타 언어와는 조금 다른데, 호환을 위해선 pkcs5 padding 으로 변경해주는 작업이 필요하다.php mcrypt function 의 기본 패딩은 zeros padding)123456789101112131415&lt;?php// 이런 식이거나$ciphertext = mcrypt_encrypt(MCRYPT_RIJNDAEL_128, $key, pkcs5_pad($plaintext), MCRYPT_MODE_CBC, $iv);// 이런 식일 것$td = mcrypt_module_open(\"rijndael-128\", \"\", \"cbc\", \"\");@mcrypt_generic_init($td, $key, $iv);$ciphertext = @mcrypt_generic($td, pkcs5_pad($plaintext));mcrypt_generic_deinit($td);mcrypt_module_close($td);function pkcs5_pad($text, $blocksize = 16) &#123; $pad = $blocksize - (strlen($text) % $blocksize); return $text . str_repeat(chr($pad), $pad);&#125; 대안PHP 5.3 부터 사용 가능한 openssl_encrypt 함수를 쓰면 된다. (openssl 확장 모듈이 설치되어야한다.) OPENSSL Encrypt1234&lt;?php$ciphertext = openssl_encrypt($plaintext, 'AES-128-CBC', $key, OPENSSL_RAW_DATA, $iv);// decrypt에서 오류가 발생해 PKCS5로 패딩을 맞춰주고 보내야한다면.$ciphertext = openssl_encrypt(pkcs5_pad($plaintext), 'AES-128-CBC', $key, OPENSSL_RAW_DATA, $iv); Decrypt123456789101112131415&lt;?php$plaintext = openssl_decrypt($ciphertext, 'AES-128-CBC', $key, OPENSSL_RAW_DATA, $iv);// unpad가 필요하다면$plaintext = pkcs5_unpad(openssl_decrypt($ciphertext, 'AES-128-CBC', $key, OPENSSL_RAW_DATA, $iv));function pkcs5_unpad($text) &#123; $pad = ord($text&#123;strlen($text)-1&#125;); if ($pad &gt; strlen($text)) &#123; return $text; &#125; if (!strspn($text, chr($pad), strlen($text) - $pad)) &#123; return $text; &#125; return substr($text, 0, -1 * $pad);&#125; PKCS5 vs PKCS7openssl_encrypt의 default padding 은 PKCS7 padding 인데, 어떻게 호환이 되는 것일까?여기서 해답을 찾았다.The difference between the PKCS#5 and PKCS#7 padding mechanisms is the block size;PKCS#5 padding is defined for 8-byte block sizes, PKCS#7 padding would work for any block size from 1 to 255 bytes.So fundamentally PKCS#5 padding is a subset of PKCS#7 padding for 8 byte block sizes.so, data encrypted with PKCS#5 is able to decrypt with PKCS#7, but data encrypted with PKCS#7 may not be able to decrypt with PKCS#5. triple desdes-ede3-cbc가 triple des 알고리즘이다.123456&lt;?php// Encryptopenssl_encrypt($text, \"des-ede3-cbc\", $key, OPENSSL_RAW_DATA, $iv);// Decryptopenssl_decrypt($ciphertext, \"des-ede3-cbc\", $key, OPENSSL_RAW_DATA, $iv); 여담카카오페이가 PHP 5 버전만 지원해 문의해봤지만 계획이 없어 이번 기회에 모듈을 다 뜯어봤는데 MCRYPT 만 만져주면 정상적으로 결제가 되었다.곧 이 짓을 안해도 될 듯하다.이러다가 다시 선형대수학 공부하겠어.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"openssl","slug":"openssl","permalink":"https://gracefullight.dev/tags/openssl/"}]},{"title":"Paypal 기부 버튼 만들기","slug":"Paypal-기부-버튼-만들기","date":"2017-07-02T15:48:55.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/07/02/Paypal-기부-버튼-만들기/","link":"","permalink":"https://gracefullight.dev/2017/07/02/Paypal-%EA%B8%B0%EB%B6%80-%EB%B2%84%ED%8A%BC-%EB%A7%8C%EB%93%A4%EA%B8%B0/","excerpt":"","text":"기존에 Paypal 버튼을 만들기가 되게 복잡했는데, 최근 Paypal.Me 가 생기면서 아주 간단해졌다!Paypal.Me에 들어가서 서비스 가입만 하면 된다.Paypal 계정이 없으면 가입 후에 계좌 인증이 필요하다 소스아래 소스를 추가해주자.기존 페이팔 버튼의 소스에서 action 부분만 변경해주었다.12345678910111213&lt;!-- https://www.paypal.me/GracefulLight/3 으로 금액을 붙혀 보내면 초기 금액을 설정할 수 있다. --&gt;&lt;form action=\"https://www.paypal.me/GracefulLight\" method=\"get\" target=\"_blank\"&gt; &lt;table border=\"0\" cellpadding=\"10\" cellspacing=\"0\" align=\"center\"&gt; &lt;tr&gt; &lt;td align=\"center\"&gt;&lt;/td&gt; &lt;/tr&gt; &lt;tr&gt; &lt;td align=\"center\"&gt; &lt;input type=\"image\" src=\"https://www.paypalobjects.com/webstatic/en_US/i/buttons/PP_logo_h_100x26.png\" alt=\"Donate\" border=\"0\" name=\"submit\" /&gt; &lt;/td&gt; &lt;/tr&gt; &lt;/table&gt;&lt;/form&gt; 결과새삼 예쁜 것 같다.","categories":[],"tags":[{"name":"paypal","slug":"paypal","permalink":"https://gracefullight.dev/tags/paypal/"}]},{"title":"CentOS7 LEMP Stack 설치하기 (HTTP2, PHP7.1, Maria, Letsencrypt)","slug":"CentOS7-LEMP-Stack-적용","date":"2017-06-10T01:05:06.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/06/10/CentOS7-LEMP-Stack-적용/","link":"","permalink":"https://gracefullight.dev/2017/06/10/CentOS7-LEMP-Stack-%EC%A0%81%EC%9A%A9/","excerpt":"","text":"LEMPLinux, Nginx, MariaDB, PHPWhy LEMP instead of LNMP?We go with LEMP due to the pronunciation for Nginx: Engine-X (en-juhn-ecks).Think of how in English, the article an is used instead of a for hour even though it begins with a consonant.The importance is the sound of the first letter rather than its written representation.Besides, LEMP is actually pronounceable and doesn’t sound like reciting the alphabet. PHPrepo 를 등록하고 설치하는 방법이 있지만 php71 등의 이름으로 설정해야되서 번거롭다.yum 명령어의 --enablerepo 옵션을 사용해 php71 repository 를 가져오자.123456789101112131415161718# php repo를 가져오기$ yum -y install http://rpms.famillecollet.com/enterprise/remi-release-7.rpm$ vi /etc/yum.repos.d/remi-php71.repo[remi-php71]name=Remi\\'s PHP 7.1 RPM repository for Enterprise Linux 7 - $basearch#baseurl=http://rpms.remirepo.net/enterprise/7/php71/$basearch/mirrorlist=http://rpms.remirepo.net/enterprise/7/php71/mirror# 이 값을 1로 바꿔준다.enabled=1gpgcheck=1gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-remi$ yum -y install php php-fpm php-devel php-curl php-mcrypt php-mysql php-xmlrpc php-mbstring php-zip 등등$ systemctl start php-fpm$ systemctl enable php-fpm Maria예전 포스팅으로 대체한다. 설치방법은 똑같고 버전만 다르게 해주면 된다.설치 후 서비스 실행만 systemctl 명령어로 해주자. Xtrabackup이제 mysqldump 를 좀 놓아주고 Incremental Backup 을 해주자.이게 왜 좋은지는 공홈이나 책이나 다른 블로그에 자세히 설명되어있다.12345678910111213141516171819202122232425262728# xtrabackup 설치$ yum -y install xtrabackup# 증분백업을 위해 전체 백업이 한 번 필요하다.# root가 아닌 유저일 경우 해당 DB를 백업하기 위해 PROCESS 등 여러 권한을 추가해야한다.# (로그 메세지로 추가하라고 나온다.)$ innobackupex --user='root' --password='암호' --databases='DB' --no-timestamp /백업위치# 증분백업$ innobackupex --user='root' --password='암호' --incremental --incremental-basedir='/백업위치/xtrabackup_checkpoints' --no-timestamp /증분백업위치# 증분백업을 전체백업 위에 얹기$ innobackupex --apply-log --redo-only --incremental-dir='/증분백업위치' /백업위치# 증분백업 삭제$ rm -rf /증분백업위치# 복원$ systemctl stop mariadb# 데이터 폴더를 날려야한다. (만약을 대비해 백업)$ rm -rf /var/lib/mysql/*$ innobackupex --copy-back /백업위치# 권한부여$ chown -R mysql:mysql /var/lib/mysql$ systemctl start mariadb NginxHTTP2 를 적용하기 위해서는 Nginx 1.9 버전과 Openssl 1.0.2 버전 이상이 필요한데, 기본 repository 에는 이 버전이 적용되어있지 않다.따라서 검색해보면 컴파일 설치를 해야 된다는 글이 다수다. 모든 패키지는 패키지 매니져로 관리하는게 좋다고 생각하는 나로썬 그냥 넘어갈 수 없다.Nginx 최신 repository 를 관리해주는 나이스한 곳을 찾았다.1234567891011121314$ yum -y install yum-utils$ yum-config-manager --add-repo https://brouken.com/brouken.repo# 기존 nginx repo를 사용하지 않는다는 옵션$ yum-config-manager --save --setopt=epel.exclude=nginx*;$ yum -y install nginx$ systemctl start nginx$ systemctl enable nginx# nginx 버전 확인$ Nginx -Vnginx version: nginx/1.13.1built with OpenSSL 1.0.2k 26 Jan 2017 setopt 가 오류가 날 경우ngixn.repo 를 만들어주고 연결하자.12345678910111213141516$ vi /etc/yum.repos.d/nginx.repo# vim /etc/yum.repos.d/nginx.repo[nginx]name=nginx repobaseurl=http://nginx.org/packages/mainline/centos/7/$basearch/gpgcheck=0enabled=1# 저장하고 설치 시작$ yum update$ yum -y install nginx$ systemctl start nginx$ systemctl enable nginx LetsEncrypt공짜 SSL 인 LetsEncrypt 의 이름이 certbot 으로 바뀌었다. 공홈을 참조해도 좋다.인증을 받기위해 먼저 도메인을 따야한다.1234567891011$ yum -y install certbot# 인증$ certbot certonly --standalone -d example.com -d www.example.com# 갱신 확인$ certbot renew --dry-run# 갱신하면서 nginx 재부팅# 이 명령어를 적절히 cron에 넣어주자.$ certbot renew --pre-hook=\"systemctl stop nginx\" --post-hook=\"systemctl start nginx\"인증이 성공하면 /etc/letsencrypt/live/example.com/ 경로 아래에 키가 떨어질 것이다.자세한 명령어 옵션은 Docs 참조. nginx 연동ssl 을 적용하면서 HTTP2 도 붙혀보자.HTTP2 에서는 bundling 보다 파일을 쪼개서 보내는게 더 효율적이라고 한다. (non-blocking 이니까)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071# HTTPserver &#123; listen 80; server_name example.com www.example.com; # certbot --webroot 인증을 받기위한 설정 #location ^~ &#x2F;.well-known&#x2F;acme-challenge&#x2F; &#123; # default_type &quot;text&#x2F;plain&quot;; # root &#x2F;var&#x2F;www&#x2F;letsencrypt; #&#125; # 80 접속시 443으로 redirect location &#x2F; &#123; return 301 https:&#x2F;&#x2F;$server_name$request_uri; &#125;&#125;# HTTPSserver &#123; listen 443 ssl http2; listen [::]:443 ssl http2; server_name example.com www.example.com; root &#x2F;var&#x2F;nginx&#x2F;www&#x2F;public; index index.php index.html; # 지저분한 보안 옵션은 추천옵션이니 넣어주자. ssl on; ssl_certificate &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;example.com&#x2F;fullchain.pem; ssl_certificate_key &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;example.com&#x2F;privkey.pem; ssl_trusted_certificate &#x2F;etc&#x2F;letsencrypt&#x2F;live&#x2F;example.com&#x2F;fullchain.pem; ssl_session_timeout 1d; ssl_session_cache shared:SSL:50m; ssl_session_tickets off; #ssl_protocols TLSv1 TLSv1.1 TLSv1.2; ssl_protocols TLSv1.2; ssl_ciphers EECDH+AESGCM:EECDH+AES; ssl_ecdh_curve secp384r1; ssl_prefer_server_ciphers on; ssl_stapling on; ssl_stapling_verify on; location &#x2F; &#123; try_files $uri $uri&#x2F; &#x2F;index.php?$query_string; &#125; location ~ \\.php &#123; fastcgi_split_path_info ^(.+\\.php)(&#x2F;.+)$; include fastcgi_params; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_param SCRIPT_NAME $fastcgi_script_name; fastcgi_index index.php; fastcgi_pass 127.0.0.1:9000; &#125; location ~ &#x2F;\\.ht &#123; deny all; &#125; # 캐싱할 데이터가 있다면 추가 location ~* \\.(?:jpg|jpeg|gif|png|ico|cur|gz|svg|svgz|mp4|ogg|ogv|webm|htc|woff)$ &#123; expires 1M; add_header Cache-Control &quot;public&quot;; &#125; location ~* \\.(?:css|js)$ &#123; expires 7d; add_header Cache-Control &quot;public&quot;; &#125;&#125;해당 세팅은 Laravel5.4 용이다.nginx.conf 에는 해당 옵션들도 추가해주자.nginx.conf1234567891011121314151617181920212223242526272829303132333435363738394041424344# CPU 물리 코어에 따라 설정한다.# 1코어에선 1로 나머지는 auto로 설정하면 된다.# grep ^processor /proc/cpuinfo | wc -l 로 확인 가능worker_processes 1;events &#123; # 각 worker process에서 한 번에 처리할 수 있는 최대 연결 수 # ulimit -n의 값과 같게 설정하자. worker_connections 1024; # I/O event 노티 방식을 epoll로 사용. (poll보다 발전한 방식) use epoll; # worker가 한 번에 모든 연결을 수용할 수 있도록 설정 multi_accept on;&#125;http &#123; # access_log 제거 access_log off; server_tokens off; # iframe 보안 이슈 DENY add_header X-Frame-Options DENY; add_header X-Content-Type-Options nosniff; add_header X-XSS-Protection \"1; mode=block\"; # PHP 서버라는 header 제거 fastcgi_hide_header X-Powered-By; # static file 제공 최적화 sendfile on; # TCP multiple buffer를 individual packet으로 전송하게 변경 tcp_nopush on; # TCP에서 TCP_CORK 옵션을 활성화 # MTU에서 IP 헤더의 40-60 Byte를 뺀값과 같다는데 뭐라는건지 모르겠다. tcp_nodelay on; # keep alive 설정 keepalive_timeout 65; # keepalive_requests 100000; # gzip 압축설정 gzip on; gzip_min_length 1000; gzip_types application/x-javascript text/css application/javascript text/javascript text/plain text/xml application/json application/vnd.ms-fontobject application/x-font-opentype application/x-font-truetype application/x-font-ttf application/xml font/eot font/opentype font/otf image/svg+xml image/vnd.microsoft.icon; gzip_disable \"MSIE [1-6]\\.\";&#125;적용 후에 HTTP2 확인 확장프로그램 설치 후 이 프로그램에 파란불이 들어오면 성공이다. 파일 백업소스는 git 으로 관리가 되는데 static 파일은 주기적으로 백업이 필요하다.file_backup.sh1234567891011NOW_DATE=`date`BACKUP_DATE=`date +\"%Y%m%d\"`FILE_DIR=백업할 폴더 경로BACKUP_DIR=백업된 파일 경로# gz 압축tar zcvf $&#123;BACKUP_DIR&#125;/$&#123;BACKUP_DATE&#125;.tar.gz $&#123;FILE_DIR&#125;# 3일 이상된 백업파일은 제거find $&#123;BACKUP_DIR&#125;/ -mtime +3 -exec rm -f &#123;&#125; \\;# find $&#123;BACKUP_DIR&#125;/ -mtime 3 -delete 여담다음부터 Ubuntu 쓸까 생각했는데, Nginx 최신 Repo 를 찾은게 컸다. 하지만 빨리 Docker 책 읽자.Nginx, Reverse Proxy, Redis, PHP, Jenkins 를 한 번에 해결해주겠지.이제 DockerFile 이 잘 읽히긴 하는데, 언제쯤 갈아탈 수 있으려나","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"},{"name":"nginx","slug":"nginx","permalink":"https://gracefullight.dev/tags/nginx/"},{"name":"letsencrypt","slug":"letsencrypt","permalink":"https://gracefullight.dev/tags/letsencrypt/"}]},{"title":"Laravel 5.5 - Eloquent ORM 사용하기","slug":"Laravel-5-4-Eloquent-Model","date":"2017-06-06T02:49:33.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/06/06/Laravel-5-4-Eloquent-Model/","link":"","permalink":"https://gracefullight.dev/2017/06/06/Laravel-5-4-Eloquent-Model/","excerpt":"","text":"Eloquent ORM을 사용해 데이터를 가져와보자.이전 포스팅에서 이어진다. (Eloquent ORM 기능만 필요하다면 3.Model부터 보면 된다) MigrationDBMS에 상관 없이 테이블을 똑같이 생성하기 위한 기능이다. 생성artisan 명령어로 간단히 생성할 수 있다. 날짜_테이블 형식의 파일이 database/migrations 밑에 생성된다.이 파일들의 자동 생성된 이름을 절대 변경하지 말자 내부적으로 언더스코어를 explode해 class를 호출하기 때문에 건들면 고생한다.123456# 모델을 생성하면서 같이 생성# m 옵션을 추가한다.$ php artisan make:model -m 모델명# 마이그레이션만 생성$ php artisan make:migration 마이그레이션명생성 후에 up 메소드 안에 테이블을 꾸며주고 down 메소드에 테이블을 지울 때 실행할 로직을 구현한다.컬럼 타입을 지정하는 메소드는 여기를 참조하면 된다.1234567891011121314151617181920&lt;?phppublic function up()&#123; Schema::create('table_name', function (Blueprint $table) &#123; $table-&gt;increments('idx'); $table-&gt;string('id', 20)-&gt;unique(); $table-&gt;string('name', 30); $table-&gt;string('email', 100)-&gt;unique(); $table-&gt;string('password', 250); $table-&gt;tinyInteger('tiny')-&gt;nullable(); $table-&gt;timestamps(); &#125;);&#125;// 테이블에 외래키 제약조건이 걸려있을 경우 migration으로 일괄 삭제시에// 오류가 발생하므로, 외래키 체크 옵션을 비활성화 해줘야될 수 도 있다.public function down()&#123; DB::statement('SET FOREIGN_KEY_CHECKS = 0'); Schema::dropIfExists('table_name'); DB::statement('SET FOREIGN_KEY_CHECKS = 1');&#125; 실행php artisan migrate 명령어로 실행하면 된다.migrate =&gt; 전체 실행migrate:refresh =&gt; 다시 실행migrate:rollback =&gt; 마지막 migrate 시점으로 돌림migrate:reset =&gt; 제거 Tinker이미 데이터가 들어간 테이블이 있어 migrate --path로 한 파일만을 실행해야 하는데, tinker를 사용하면 더 쉽게 해당 마이그레이션을 실행시킬 수 있다.Tinker는 커맨드로 라라벨 쉘(실행환경)으로 들어간다고 생각하면 된다.123456789101112131415# tinker$ php artisan tinker# shell로 접속된다.Psy Shell v0.8.5 (PHP 7.0.7 ??cli) by Justin HilemanNew version is available (current: v0.8.5, latest: v0.8.8)&gt;&gt;&gt;# blueprint 의존성을 추가해주고 (Blueprint는 up 메소드에 DI로 들어가 있기에 읽지 못한다.)$ use Illuminate\\Database\\Schema\\Blueprint;# 새로 실행하려 했던 스키마를 실행시켜주기만 하면 된다.$ Schema::create('new_table', function (Blueprint $table) &#123; $table-&gt;increments('idx'); $table-&gt;string('id', 20)-&gt;unique(); $table-&gt;timestamps(); &#125;);DB에 해당 테이블이 생성된 걸 확인할 수 있다. SeedSeed는 테이블에 필수 데이터 또는 더미 데이터를 심어주는 과정이다.테스트에 필요한 데이터를 넣어주는데 아주 효과적이다. 생성1$ php artisan make:seeder 시더명database/seeds 아래에 파일이 생성된다.파일을 열어보면 run() 메소드 하나가 있는데, 여기에 시드파일이 호출될 때 실행할 로직을 구현해주면 된다.database/seeds/BoardSeed.php123456789101112131415&lt;?phppublic function run() &#123; // 모델로 생성하기 Board::create([ 'title' =&gt; '공지', 'author' =&gt; '관리자', 'content' =&gt; '공지입니다' ]); // DB 파사드로 생성하기 DB::table('board')-&gt;insert([ 'title' =&gt; '공지', 'author' =&gt; '관리자', 'content' =&gt; '공지입니다' ]);&#125; Faker랜덤한 테스트용 데이터가 많이 필요하다면, 가짜(더미) 데이터를 생성해주는 라이브러리를 사용할 수 있다.링크를 따라가보면 정말 엄청난 종류의 랜덤 데이터를 생성할 수 있음에 놀랄 것이다.faker를 사용하려면 ModelFactory를 먼저 정의해야한다.상품 모델을 가져와 가짜 데이터 타입을 정의해보자.database/factories/ModelFactory.php12345678910111213141516171819&lt;?php$factory-&gt;define(App\\Models\\Product::class, function(Faker\\Generator $faker)&#123; return [ // 메소드는 위의 라이브러리를 참고하자. // 상품명을 중복되지 않게 city(도시명)으로 가져온다. 'name' =&gt; $faker-&gt;unique()-&gt;city, // 색상 헥스코드를 가져온다. 'color' =&gt; $faker-&gt;safeColorName, // 1000~50000원 사이의 가격을 가져온다. 'price' =&gt; $faker-&gt;numberBetween(1000, 50000), // lorempixel의 랜덤 이미지를 가져온다. 'thumbnail' =&gt; $faker-&gt;imageUrl(200, 100), 'detail_image' =&gt; $faker-&gt;imageUrl(300, 600), 'qty' =&gt; $faker-&gt;numberBetween(1, 1000), 'status' =&gt; 1, 'owner' =&gt; $faker-&gt;name, 'sorting' =&gt; $faker-&gt;numberBetween(1, 9999) ];&#125;); 실행위에서 선언한 faker 모델을 seed에서 호출해보자.database/seeds/ProductSeed.php12345&lt;?phppublic function run() &#123; // 두번째 인자로 실행시킬 횟수를 넣어주면 된다. factory(App\\Models\\Product::class, 100)-&gt;create();&#125;1$ php artisan db:seed테이블에 상품 더미데이터가 100개 생성된 것을 확인할 수 있다. Model모델은 하나의 테이블의 타입을 정해 놓은 것이라 보면 된다.데이터를 가져오거나 넣을 때 모델에 정의된 형태로 가져온다. 기본 구조아래 구조 정도만 알아두면 된다. 더 자세한건 Eloquent Model Class를 확인해보자.app/Models/Board.php1234567891011121314151617181920212223242526272829303132333435&lt;?phpnamespace App\\Models;use Illuminate\\Database\\Eloquent\\Model;class Board extends Model &#123; // 임의의 생성 필드가 있다면 설정해준다. (기본값 created_at) const CREATED_AT = 'created_dt'; // 사용하지 않을 경우 Null로 초기화해주자. (기본값 updated_at) const UPDATED_AT = null; // 둘 다 사용하지 않을 경우 timestamps만 꺼주면 된다. (기본값 true) public $timestamps = false; // PK가 auto increment가 아닐경우 false로 바꿔준다. (기본값 true) public $incrementing = false; // PK 값을 변경한다. (기본값 id) protected $primaryKey = 'idx'; // 테이블 명을 변경한다. (기본값 모델명의 복수형) protected $table = 'board'; // dump insert 및 dump update가 안되는 필드를 설정한다. protected $guarded = [ 'idx' ]; // guarded와 fillable 중 하나만 있으면 된다. (써보니 guarded가 편하더라.) // dump insert 및 dump update가 가능한 필드를 설정한다. //protected $fillable = [ // 'title', 'content' //]; // 노출시키지 않을 필드가 있을 경우 protected $hidden = [ 'password' ];&#125; Relationship 1:1hasOne과 belongsTo로 연결한다. 1:nhasMany와 belongsTo로 연결한다. n:mbelongsToMany로 연결한다.처음에 제일 감이 안왔던 Relationship이지만 코드를 보면 이해하기가 쉽다.주문(Order) - 주문 상품(OrderProduct) - 상품(Product) 테이블이 있다고 가정한다. 각각 시작 - 링크(피벗) - 종료 테이블이다.12345678&lt;?php App/Models/Order.phppublic function product()&#123; // 마지막으로 연결될 모델명, 링크 테이블 명, 시작-&gt;링크를 연결시킬 인덱스, 링크-&gt;종료를 연결시킬 인덱스 return $this-&gt;belongsToMany('App\\Models\\Product', 'order_product', 'order_id', 'product_id') // 링크 테이블의 컬럼을 가져와야할 때 -&gt;withPivot(['price', 'quantity']);&#125;이렇게 정의하면 뷰에서 order-&gt;product를 foreach로 돌려 product-&gt;product_id처럼 접근할 수 있고product-&gt;pivot-&gt;price로 pivot 테이블의 데이터도 가져올 수 있다. 1:1:1이런 관계가 있을 경우에 라라벨에서 관계메소드를 직접 지원하지는 않는다.억지로 사용하려면, hasOne을 두 번 사용해 연결해야하는데, Select Query를 두 번 날려야 된다는 소리다. (참을 수 없다)BelongsToThrough trait 패키지를 통해 깔끔하게 해결할 수 있다.메소드에서 belongsToMany처럼 커스텀 외래키를 사용해야할 경우엔 5번째 파라미터로 [ 클래스 =&gt; 키 ] 형식으로 넘겨주면 된다. (여기의 소스를 참고하자) 이슈 ORM의 Join 방식한 방 쿼리가 불가능하다. 오직 PK를 통해 Select된 데이터들을 다시 PHP 단에서 합쳐서 보여준다.한 방이 필요할 때는 Database에서 View를 이용하거나 DB 파사드를 써야한다. Composite Key라라벨 Eloquent Model에서 복합키를 사용할 수는 없다. 편법으로 trait를 추가할 수 있는데 find 메소드도 overriding 해야 된다. Timestampscreated_at과 updated_at은 timestamps 형식이라 date_format과 같은 쿼리함수 대신 whereDate 메소드로 연산을 실행해야한다.물론 DB에 데이터가 들어가기 전 datetime으로 해당 컬럼을 변경해주면 된다.(timestamps의 유효기간은 2035년까지므로.) Group ByGroupBy를 이용한 쿼리 사용시에 Syntax error or access violation: 1055 ‘table.column’ isn’t in GROUP BY라는 오류 메세지가 보이며 실행이 안 되는 경우가 있다. 해당 컬럼으로 GroupBy를 하지 않았는데도 발생한다.database config의 strict 모드 중 ONLY_FULL_GROUP_BY 모드가 활성화 되어있어서 그런데 이 모드만 제외를 시켜주면 된다.config/database.php123456789101112131415&lt;?php'connections' =&gt; [ 'mysql' =&gt; [ // strict 속성을 false로 바꿔준다. 'strict' =&gt; false, // modes 속성을 추가해 기본 strict 옵션을 다시 추가한다. 'modes' =&gt; [ 'STRICT_TRANS_TABLES' 'NO_ZERO_IN_DATE' 'NO_ZERO_DATE' 'ERROR_FOR_DIVISION_BY_ZERO' 'NO_AUTO_CREATE_USER' 'NO_ENGINE_SUBSTITUTION' ] ],변경 후 config:cache로 config 파일들을 다시 캐싱해주자. 연동만든 모델을 선언만 하면 Eloquent Model 메소드와 Query Builder 메소드를 사용할 수 있다.CRUD는 다음과 같다.YourController.php12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152&lt;?phpuse App\\Model;public function test($id) &#123; // PK로 데이터 1개 반환 Model::find($id); Model::where('idx', $id)-&gt;first(); // 전체 데이터 반환 Model::all(); // 조건 데이터 반환 Model::where()-&gt;get(); // Insert $model = new Model; $model-&gt;column = '추가 값'; $model-&gt;column2 = '추가 값2'; $model-&gt;save(); // Mass Insert Model::create([ 'column' =&gt; '추가 값', 'column2' =&gt; '추가 값2' ]); // Bulk Insert Model::insert([[ 'column' =&gt; '추가 값', 'column2' =&gt; '추가 값2' ], [ 'column' =&gt; '추가 값', 'column2' =&gt; '추가 값2' ]]); // Update $model = Model::find($id); $model-&gt;column = '변경 값'; $model-&gt;column2 = '변경 값2'; $model-&gt;save(); // Mass Update Model::where()-&gt;update([ 'column' =&gt; '변경 값', 'column2' =&gt; '변경 값2' ]); // Delete Model::destory($id); Model::find($id)-&gt;delete(); Model::where()-&gt;delete();&#125; Collection과 Model의 차이Model에서 쓸 수 있는 메소드와 Collection에서 쓸 수 있는 메소드가 다르다.Model Class에서 정의하는 관계 메소드들은 Model에서만 사용 가능하다.Collection: Array&lt;Model&gt; 즉 모델의 집합이다.Model: 테이블에서 하나의 행이라고 생각하자. Paging모델에서 paginate 메소드를 사용하면, querystring에 page 변수가 붙어 페이징이 된다. (예를들면 /boards?page=1)라라벨의 기본 페이징은 Bootstrap의 Class를 사용한다.123456789&lt;?php// 이렇게 모델을 가지고 왔다면Model::where()-&gt;get();// get을 paginate로 바꿔주기만 하면 된다. (뿌려지는 list item의 기본값은 15이다.)Model::where()-&gt;paginate(10);// next와 prev 버튼이 없는 pagination을 구현하고 싶다면Model::where()-&gt;simplePaginate(10);페이징 뷰를 꾸미고 싶다면 아래 명령어를 실행해 resources/views/vendor/pagination에 view가 생기고 default.blade.php를 수정하면 된다.1$ php artisan vendor:publish --tag=laravel-pagination ajax pagination실무에선 Paging 호출을 GET보단 AJAX를 쓰는게 깔끔한데 List View와 ListItem View, Controller 세부분을 모두 변경해줘야한다.아래 소스는 jQuery를 사용하고 있다고 가정한다. (Frontend Framework를 같이 사용하고 있다면 더 깔끔하게 처리 될 수 있을듯) ControllerYourController.php1234567891011121314&lt;?phppublic function list(Request $request) &#123; // ajax 요청일 경우에 listitem 뷰 반환 if ($request-&gt;ajax()) &#123; return view('listitem', [ 'data' =&gt; Model::where()-&gt;paginate(10); ]); // get 요청일 경우에 list 뷰 반환 &#125; else &#123; return view('list', [ 'data' =&gt; Model::where()-&gt;paginate(10); ]) &#125;&#125; List viewlist.blade.php1234567891011121314151617181920212223242526&lt;div id=\"list\"&gt; @include('listitem')&lt;/div&gt;&lt;script&gt;var paging_listener = function () &#123; // 페이지 버튼에 click listener 등록 $('.pagination a').click(function (e) &#123; // a href 로 페이지가 이동하는걸 방지한다. e.preventDefault(); get_list($(this).attr('href')); &#125;);&#125;;var get_list = function (url) &#123; $.get(url) .then(function(html) &#123; $('#list').html(html); // 페이지가 다시 그려졌으므로 listener를 다시 등록한다. paging_listener(); &#125;);&#125;;$(function () &#123; paging_listener();&#125;);&lt;/script&gt; ListItem viewlistitem.blade.php1234567&lt;ul&gt;@foreach($data as $item) &lt;li&gt;&#123;&#123; $item-&gt;name &#125;&#125;&lt;/li&gt;@endforeach&lt;/ul&gt;// pagination html이 반환되어 자동으로 보여진다.&#123;&#123; $data-&gt;links() &#125;&#125; multiple pagination한 페이지에 여러 리스트가 있는 경우가 종종 있다. 먼저 paginate 메소드를 살펴보자.1234567891011&lt;?php/*** Paginate the given query into a simple paginator.** @param int $perPage* @param array $columns* @param string $pageName* @param int|null $page* @return \\Illuminate\\Contracts\\Pagination\\LengthAwarePaginator*/public function paginate($perPage = 15, $columns = ['*'], $pageName = 'page', $page = null)perPage: 한 페이지에 표시될 Item 수columns: 가져올 컬럼명의 배열pageName: page 변수명 (예를들면 /boards?page=1 에서 page 변수명을 변경 가능)page: 가져올 페이지 ControllerController에서 paginate 메소드를 활용해보자.YourController.php1234567891011121314151617181920212223242526272829303132&lt;?phppublic function list(Request $request) &#123; if ($request-&gt;ajax()) &#123; // list1_page 값이 들어올 경우 if ($request-&gt;has('list1_page')) &#123; // list1_item 뷰에 바인딩해준다. return view('list1_item', [ 'data1' =&gt; $this-&gt;get_list1() ]); &#125; else if ($request-&gt;has('list2_page')) &#123; return view('list2_item', [ 'data2' =&gt; $this-&gt;get_list2() ]); &#125; &#125; // 메인 요청 $data1 = $this-&gt;get_list1(); $data2 = $this-&gt;get_list2(); return view('list', [ 'data1' =&gt; $data1, 'data2' =&gt; $data2 ]);&#125;protected function get_list1() &#123; return Model::where()-&gt;orderBy()-&gt;paginate(5, ['*'], 'list1_page');&#125;protected function get_list2() &#123; return Model::where()-&gt;paginate(10, ['*'], 'list2_page');&#125; List view위의 script에서 조금만 수정해주면 된다.(list item view는 위와 동일한 코드의 반복이므로 생략)list.blade.php12345678910111213141516171819202122232425262728&lt;div id=\"list1\"&gt; @include('list1_item')&lt;/div&gt;&lt;div id=\"list2\"&gt; @include('list2_item')&lt;/div&gt;&lt;script&gt;var paging_listener = function () &#123; $('.pagination a').click(function (e) &#123; e.preventDefault(); var page = $(this).attr('href').split('?')[1]; // page.split('=')[0]은 페이지 변수명을 가져온다. var paging_type = page.split('=')[0] === 'list1_page' ? 'list1' : 'list2'; get_list($(this).attr('href'), paging_type); &#125;);&#125;;var get_list = function (url, target) &#123; $.get(url) .then(function(html) &#123; $(`#$&#123;target&#125;`).html(html); paging_listener(); &#125;);&#125;;&lt;/script&gt; 여담이제 DB에서 데이터를 가져오는 것까지 끝났다.다음 포스팅에서는 User Login을 구현해보자.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"Yarn 사용법","slug":"Yarn-사용법","date":"2017-05-29T13:17:44.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/05/29/Yarn-사용법/","link":"","permalink":"https://gracefullight.dev/2017/05/29/Yarn-%EC%82%AC%EC%9A%A9%EB%B2%95/","excerpt":"","text":"Bower의 시대가 끝났다. 홈페이지를 들어가보면 다음과 같은 문구가 보인다.…psst! While Bower is maintained, we recommend yarn and webpack for new front-end projects!Yarn을 사용해보자. 설치NPM으로 설치할 수도 있는데 추천하는 방법은 Installer이니 다운받고 설치해주면 된다!NPM으로 설치시에는 환경변수 등록을 거쳐야한다.설치 후 Bash에서 확인해보자.12$ yarn --version0.24.5 사용법npm 사용법과 아주 유사하다.기존 NodeJS 패키지에서 yarn 명령어만을 입력하면 완벽히 호환이 되고, 새로운 프로젝트라면 yarn init 명령어를 실행하면 된다.package.json을 사용하기 때문에 그냥 명령어만 바뀌었다고 생각하면 된다. (패키지들도 npm의 것을 공유한다.) 명령어 비교install이 add로, uninstall이 remove로, update가 upgrade로 바뀐게 사실상 끝이다.자세한 옵션은 CLI Docs를 참조하자.npmYarnnpm installyarn install(N/A)yarn install --flat(N/A)yarn install --har(N/A)yarn install --no-lockfile(N/A)yarn install --pure-lockfilenpm install [package](N/A)npm install --save [package]yarn add [package]npm install --save-dev [package]yarn add [package] [–dev/-D](N/A)yarn add [package] [–peer/-P]npm install --save-optional [package]yarn add [package] [–optional/-O]npm install --save-exact [package]yarn add [package] [–exact/-E](N/A)yarn add [package] [–tilde/-T]npm install --global [package]yarn global add [package]npm update --globalyarn global upgradenpm rebuildyarn install --forcenpm uninstall [package](N/A)npm uninstall --save [package]yarn remove [package]npm uninstall --save-dev [package]yarn remove [package]npm uninstall --save-optional [package]yarn remove [package]npm cache cleanyarn cache cleanrm -rf node_modules &amp;&amp; npm installyarn upgrade Global 경로Windows: %LOCALAPPDATA%/Yarn/config/global 환경 변수 설정설정을 확인한 뒤 prefix 경로를 PATH에 추가해주면 된다.12$ yarn config list&#123; prefix: 'C:\\\\Users\\\\&#123;NAME&#125;\\\\npm' &#125; 결론bower_components 안녕이젠 node_modules만 있겠구나","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"}]},{"title":"HTTP Status Code 정리","slug":"HTTP-Status-Code-정리","date":"2017-05-28T09:31:31.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/05/28/HTTP-Status-Code-정리/","link":"","permalink":"https://gracefullight.dev/2017/05/28/HTTP-Status-Code-%EC%A0%95%EB%A6%AC/","excerpt":"","text":"API 나 AJAX 응답시에 코드로 날려주는게 표준이기도하고, 편하기도 해서 정리했다.매번 검색해 쓰는 것도 귀찮고 포스팅마다 의미도 다르고해서. 100순수하게 정보 제공만을 위한 코드102 임의의 동작이 백그라운드에서 발생하고 완료까지 시간이 걸린다고 나타낼 때 사용 200200 Success, OK 성공201 Created 새로운 리소스 생성202 Accepted 요청은 성공했으나 처리되지 않음203 Non-authoritative information 요청이 변형 프록시를 통해 라우팅 되는 경우204 No Content 요청은 성공했으나 반환되는 내용이 없음206 Partial Content 페이징된 응답을 위해 사용된다. 헤더가 전송되고 클라이언트가 허용 가능한 범위가 지정되는데 응답이 범위보다 큰 경우, 서버는 처리해야 하는 더 많은 데이터가 있음을 나타내는 이 코드를 응답한다. 300리다이렉션301 Moved Permanently 영구적으로 리다이렉트302 Found 리다이렉트하지만 나중에 바뀔 수 있음, 사용자가 임의의 이유로 일시적인 리다이렉션 수행을 요구하는 것304 Not Modified 클라이언트에 캐시된 리소스로 요청됨307 Temporary Redirect308 Permanent Redirect 자원에 대한 영구적인 리다이렉트를 지정, HTTP 메소드가 자원을 변경하는 것을 허용하지 않는다. 400클라이언트 오류400 Bad Request 구문적으로 잘못된 요청401 Unauthorized 인증 필요 (실제로는 Unauthenticated 의 의미)403 Forbidden 권한 부족 (실제로는 Unauthorized 의 의미)404 Not Found405 Method Not Allowed 메소드가 일치하지 않음406 Not Acceptable 헤더 또는 내용이 서버에서 받아들일 수 없는 요청407 Proxy Authentication Required 프록시 인증 필요408 Request Timeout 요청시간 초과409 Conflict 기존 리소스와 충돌410 Gone 리소스가 영원히 사라짐411 Length Required Content-Length 없음413 Requested Entity Too Large 내용이 너무 큼 (첨부파일)414 Requested URL Too Long URL 이 너무 김422 Unprocessable Entity Validation 오류429 Too Many Requests 요청 횟수 제한 500서버 오류500 Internal Server Error 서버 오류501 Not Implemented 클라이언트가 아직 구현되지 않은 엔드포인트에 접근하는 경우502 Bad Gateway 게이트웨이 오류503 Service Unavailable 일시적인 오류 (터지거나 점검 중)","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"}]},{"title":"composer zlib_decode와 content-length mismatch 오류","slug":"composer-zlib-decode와-content-length-mismatch-오류","date":"2017-05-24T13:14:22.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/05/24/composer-zlib-decode와-content-length-mismatch-오류/","link":"","permalink":"https://gracefullight.dev/2017/05/24/composer-zlib-decode%EC%99%80-content-length-mismatch-%EC%98%A4%EB%A5%98/","excerpt":"","text":"오류컴포저로 패키지를 다운 받은 후에 갑자기 오류가 나면서 다른 설치조차 안되는 경우가 있다.오류 메세지는 아래 두 경우로 나타난다. zlib_decodejson 파일 디코딩이 실패했다는 오류이다.12345Failed to decode response: zlib_decode(): data errorRetrying with degraded mode, check https://getcomposer.org/doc/articles/troubleshooting.md#degraded-mode for more info[ErrorException]zlib_decode(): data error위의 링크를 따라가 보면 해결책으로 다음과 같이 제시가 되는데ESET antivirus는 아직 국내에서 쓰는 사람을 못 봤고, IPv6을 막아도 그대로일 것이다.If you are using ESET antivirus, go in “Advanced Settings” and disable “HTTP-scanner” under “web access protection”If you are using IPv6, try disabling it. If that solves your issues, get in touch with your ISP or server host, the problem is not at the Packagist level but in the routing rules between you and Packagist (i.e. the internet at large). The best way to get these fixed is raise awareness to the network engineers that have the power to fix it. Take a look at the next section for IPv6 workarounds.If none of the above helped, please report the error. content-length mismatchcomposer의 패키지 list를 가지고 있는 json파일이 다 안받아졌다는 내용의 오류이다.12[Composer\\Downloader\\TransportException]Content-Length mismatch 해결구글링 해보면 clear-cache를 한 뒤에 composer -vvv 명령어를 사용해 디버깅 로그를 확인해보라는 내용이 주류인데 별 도움은 안 된다.http 연결이아닌 https로 packagist에 붙어보라는 것도 해결되지 않았다. packagist repository 변경packagist는 유럽에 있어서 한국에서 유럽까지 갔다가 다시 돌아오는 구조라,packagist 일본 미러를 이용하면 이 문제가 해결된다.123456789# 이 명령어로 global config에 repos.packagist 를 추가한다.$ composer config -g repos.packagist composer https://packagist.jp# 설정이 되었는지 확인한다..$ composer config -gl|grep repo# 아래 설정이 보이면 추가가 된 것이다.[repositories.packagist.org.type] composer[repositories.packagist.org.url] https://packagist.jp 캐시 제거12$ composer global clear-cache$ composer clear-cache이제 다시 패키지를 설치하면 설치가 될 것이다. 다운로드 속도 향상병렬 다운로드를 가능하게 하는 hirak/prestissimo 패키지를 설치하자.288s -&gt; 26s 가 되는 마법이 일어난다고 한다.1$ composer global require hirak/prestissimo","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"composer","slug":"php/composer","permalink":"https://gracefullight.dev/categories/php/composer/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"composer","slug":"composer","permalink":"https://gracefullight.dev/tags/composer/"}]},{"title":"Laravel 5.5 - 시작하기","slug":"Laravel-5-4-Start","date":"2017-05-16T13:34:39.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/05/16/Laravel-5-4-Start/","link":"","permalink":"https://gracefullight.dev/2017/05/16/Laravel-5-4-Start/","excerpt":"","text":"왜 라라벨인가?1등이 된지가 14년 7월이다. 이 글은 17년 글이다.다른 장점이 궁금하다면 다른 포스트나 stackoverflow에서 해결해줄 것 같다.이 글을 읽어주시는 분들은 Modern PHP에 대해 이해하고 있다고 생각했기 떄문에 문법적인 것들은 설명하지 않을 것이다.더군다나 라라벨을 도입하면서 삽질한 내용을 정리하고 있기에, 입문용은 절대 아니다.기본적으로 아래와 같은 PHP 개념을 알고 있어야한다.PSRComposerClassNamespaceClosureTraitPDO추가적으로 이런 걸 사용해 봤다면 더 쉬울 듯하다.Monolog다른 MVC 프레임워크Lodash 설치 PHPPHP 7 이상을 설치해주고, 아래 Extension은 웬만하면 열어주는 것들이니 크게 신경쓰지 말자.PHP &gt;= 7.0.0OpenSSL PHP ExtensionPDO PHP ExtensionMbstring PHP ExtensionTokenizer PHP ExtensionXML PHP Extension ComposerComposer 홈페이지에서 다운받고 전역설정만 해주면 된다. Laravel CliLaravel 명령어를 사용할 수 있게 composer로 전역 설치하자.1$ composer global require \"laravel/installer\" 프로젝트 생성 초기 생성1$ laravel new 프로젝트명위 명령어를 실행하면, 알아서 composer 패키지까지 설치된다. clone 했을 때환경 설정 파일과 프로젝트 키가 없으므로 적절하게 세팅해줘야한다.123456789# 패키지 의존성 설치$ composer install# .env 파일 복사 (설정파일 생성)# post-root-package-install scripts로 들어가 있긴한데, 복사가 안 되는 경우$ cp .env.example .env# 프로젝트 키 생성$ php artisan key:generate 실행프로젝트를 실행해보자.1$ php artisan serve이제 localhost:8000으로 라라벨 프로젝트에 접근이 가능하다.php artisan 명령어는 laravel에서 사용하는 커맨드 쉘이다.php artisan로 명령어 리스트가 나오고 php artisan help 명령어 로 해당 명령어의 옵션을 볼 수 있다. 프로젝트 구조라라벨 한글 메뉴얼이나 공식 메뉴얼을 보면 되는데 마치 사전을 펴놓았는데 어떤 단어를 찾는지 까먹은 느낌이 들 것이다.모든 프레임워크는 Model, View, Controller, Routing만 알면 끝이라는 것을 잠시 기억 속에서 꺼내보고 딱 3가지 경로만 기억하자.Route: routes/Controller: app/Http/Controllers/View : resources/views/모델은 어딨어? 라고 생각할 것 같은데 Model을 완벽하게 사용하려면 ORM을 써야하고 DB를 ORM에 맞게 정규화해야하며 이 작업은 처음 진행하기에 고통스럽다.다음 포스트에 진행해보자. Route모든 웹 프레임워크의 기본은 Routing이다.routes 폴더에 기본으로 api, channels, console, web 파일이 보이는데 그 중 2가지만 알면 된다.api.php: Token 인증이 필요한 라우터로 /api/{route} 로 접근이 가능하다.web.php: 기본적인 Route이다. GET이 아닌 다른 메소드는 CSRF Token이 있어야만 호출이 가능하다. ControllerRouting 요청을 처리하는 로직이 들어있는 부분이다. ViewController에서 처리된 데이터를 플랫폼에 보여주는 부분이다. 프로젝트 세팅 App 설정 env 파일.env 파일에서 APP_NAME과 DB로 시작하는 설정을 바꿔준다. app 파일config/app.php12345678&lt;?phpreturn [ // 시간대 세팅을 한다. 'timezone' =&gt; 'Asia/Seoul', // 언어 설정을 한다. // fallback_locale은 언어팩이있어야 하므로 아래에서 진행할 laravel-lang 설치 후 바꿔주자. 'locale' =&gt; 'ko',] database 파일config/database.php123456789101112131415&lt;?phpreturn [ 'connections' =&gt; [ 'mysql' =&gt; [ // mysql일 경우 utf8로 설정해준다 (maria는 utf8mb4) // DB 설정과 다르게 Model 이용시 charset 및 collation이 지정되어 들어가기에 꼭 설정해줘야한다. 'charset' =&gt; 'utf8', 'collation' =&gt; 'utf8_general_ci', // 내 테이블의 접두사가 필요하다면 여기서 설정한다. // 예를들어 test_member, test_product 이런식의 테이블 명명규칙이라면 아래처럼 주면된다. 'prefix' =&gt; 'test_', // engine 옵션은 my.ini에서 만져주자.. 'engine' =&gt; null, ],];config 내의 파일과 .env파일을 건드릴 경우 laravel 환경을 다시 캐싱해주거나 아예 삭제해야 적용이 된다.php artisan config:cache 명령어 또는 php artisan config:clear 명령어를 실행해주자. Debug Bar정말 멋진 디버깅 툴이다.간단히 설치 후에 .env 파일의 APP_DEBUG 옵션이 true이면 자동으로 View 하단에 생성된다.아래와 같은 데이터를 확인할 수 있다.로그 내역뷰 데이터 바인딩 확인오류라우팅쿼리 실행메일 발송 데이터실행 시간Request 설치1$ composer require barryvdh/laravel-debugbar laravel-lang기본 오류 메세지들의 localization 패키지이다. 설치1$ composer require caouecs/laravel-lang:~3.0 적용vendor/caouecs/laravel-lang/src/{국가} 폴더를resources/lang/{국가} 로 복사하고 config/app.php 의 fallback_locale을 {국가}로 바꿔주면 된다.12# 귀찮으니 git bash에서 날려봅시다.$ cp -r ./vendor/caouecs/laravel-lang/src/ko ./resources/lang/ko 라우팅routes/web.php123456789&lt;?php// url 변수Route::get('/your_url/&#123;id&#125;', function($id) &#123; return $id;&#125;);Route::get('/your_url/&#123;id?&#125;', function($id = null) &#123; return $id;&#125;); 컨트롤러 생성artisan 명령어로 간단히 생성할 수 있다.12345# make:controller 폴더명/컨트롤러명$ php artisan make:controller TestController# 리소스 메소드를 같이 생성$ php artisan make:controller TestController --resource 연결routes/web.php12345678910111213&lt;?php// 컨트롤러명@메소드명 으로 바로 연결시킬 수 있다.Route::get('/url/&#123;id&#125;', 'TestController@get');Route::post('/url', 'TestContoller@post');// CRUD가 명확한 컨트롤러인 경우 Resource를 사용하는 게 편할 수 있다.Route::resource('tests', 'TestController');// only 또는 except로 원하는 resource만 가져갈 수 있다.Route::resource('tests', 'TestController', [ 'only' =&gt; [ 'index', 'show' ]]);app/Http/Controllers/TestController.php1234567891011121314151617181920212223242526&lt;?phpuse Illuminate\\Http\\Request;class TestController extends Controller&#123; public function get($id)&#123; // 뷰를 호출 return view('test.detail', [ 'data' =&gt; $data ]); &#125; public function post(Request $request, $id)&#123; // Request 데이터를 제어할 수 있다. $input = $request-&gt;all(); $name = $request-&gt;input('name'); $data = []; // json body와 201 http code를 반환 return response()-&gt;json([ 'data' =&gt; $data ], 201); &#125;&#125; Resource리소스 사용시라면 아래와 같은 메소드로 구성되어야한다.게시판 컨트롤러라면 아래와 같은 구성일 것이다.메소드경로액션라우트.메소드GET/boards게시판 메인boards.indexGET/boards/create게시글 생성페이지boards.createPOST/boards게시글 저장boards.storeGET/boards/{id}게시글 상세페이지boards.showGET/boards/{id}/edit게시글 수정페이지boards.editPUT/PATCH/boards/{id}게시글 수정로직boards.updateDELETE/boards/{id}게시글 삭제boards.destroy 뷰블레이드 템플릿을 사용하며 홈페이지 설명이 꽤나 자세하다.당장 알아야 할건 아래 두 개 정도 뿐이다. 나머지는 그때 그때 문서를 참조하자.resources/views/test/detail.blade.php12// 바인딩한 데이터를 &#123;&#123; &#125;&#125; 구문으로 바로 접근할 수 있다.&#123;&#123; $data-&gt;name &#125;&#125;님의 정보입니다.resources/views/test/create.blade.php123456789101112131415// post로 전송시&lt;form method=\"post\" url=\"/url\"&gt; // post로 데이터를 전송시 csrf 토큰이 필요하다. // 이 헬퍼함수를 호출하면 자동으로 토큰 값이 들어간 input hidden 필드가 생성된다. &#123;&#123; csrf_field() &#125;&#125; 이름: &lt;input type=\"text\" name=\"name\" vavlue=\"\"&gt;&lt;/form&gt;// 기타 메소드로 전송시&lt;form method=\"post\" url=\"/url\"&gt; &#123;&#123; crsf_field() &#125;&#125; // PUT, PATCH, DELETE 와 같은 메소드로 전송시 form 태그에서는 지원을 해주지 않으므로 method spoofing이 필요하다. // 이 헬퍼함수를 호출하면 해결된다. &#123;&#123; method_field('PUT')&#125;&#125;&lt;/form&gt; 여담이제 라라벨을 이용해 데이터를 서버에 보내고 뷰를 구성할 수 있게 되었다.다음 포스팅에서는 DB 연동과 ORM 모델을 사용해 데이터를 가져오고 페이징 처리를 해보자.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"},{"name":"laravel","slug":"php/laravel","permalink":"https://gracefullight.dev/categories/php/laravel/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"laravel","slug":"laravel","permalink":"https://gracefullight.dev/tags/laravel/"}]},{"title":"알고리즘","slug":"알고리즘","date":"2017-04-01T14:06:24.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/04/01/알고리즘/","link":"","permalink":"https://gracefullight.dev/2017/04/01/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/","excerpt":"","text":"객체지향 객체지향 기법현실 세계의 개체를 기계의 부품처럼 하나의 객체로 만들어 기계적인 부품들을 조립하여 제품을 만들 듯 소프트웨어를 개발할 때도 객체들을 조립해 작성할 수 있도록 하는 기법 객체데이터와 데이터를 처리하는 함수를 묶어 놓은 하나의 소프트웨어 모듈데이터: 객체가 가지고 있는 정보함수: 객체가 수행하는 기능, 객체가 갖는 데이터를 처리하는 알고리즘 클래스공통된 속성과 연산을 갖는 객체의 집합객체의 일반적인 타입각각의 객체들이 갖는 속성과 연산을 정의하고 있는 틀인스턴스: 클래스에 속한 각각의 객체 메세지객체들 간에 상호작용을 하는 데 사용되는 수단객체에게 어떤 행위를 하도록 지시하는 명령 또는 요구사항 객체지향 기본 원칙 캡슐화Encapsulation데이터와 데이터를 처리하는 함수를 하나로 묶는 것연관된 데이터와 함수를 함께 묶어 외부와의 경계를 만들고 필요한 인터페이스만을 밖으로 드러내는 과정 정보 은닉Information Hiding다른 객체에게 자신의 정보를 숨기고 자신의 연산만을 통하여 접근을 허용하는 것캡슐화에서 가장 중요한 개념 추상화Abstraction불필요한 부분을 생략하고 객체의 속성 중 가장 중요한 것에만 중점을 두어 개략하는 것모델화 상속성Inheritance이미 정의된 상위 클래스의 모든 속성과 연산을 하위 클래스가 물려받는 것 다형성Polymorphism메세지에 의해 객체가 연산을 수행하게 될 때 하나의 메세지에 대해 각 객체가 가지고 있는 고유한 방법으로 응답하는 것 객체지향 생명 주기계획 및 분석 =&gt; 설계 =&gt; 구현 =&gt; 테스트 및 검증 객체지향 분석OOA = Object Oriented Analysis사용자의 요구사항을 분석하여 요구된 문제와 관련된 모든 클래스, 이와 연관된 속성과 연산, 그들간의 관계 등을 정의하여 모델링하는 작업 객체지향 설계OOD = Object Oriented Design객체지향 분석을 사용해 생성한 여러 가지 분석 모델을 설계 모델로 변환하는 작업시스템 설계와 객체 설계를 수행문제 정의 =&gt; 요구 명세화 =&gt; 객체 연산자 정의 =&gt; 객체 인터페이스 결정 =&gt; 객체 구현 객체지향 구현설계 단계에서 생성된 설계 모델과 명세서를 근거로 하여 코딩하는 단계객체 기반 언어: Ada, Actor와 같이 객체의 개념만을 지원클래스 기반 언어: Clu와 같이 객체와 클래스의 개념을 지원객체 지향성 언어: 객체, 클래스, 상속의 개념을 모두 지원, Simula, Smalltalk, C++, Objective C, Java객체지향 프로그래밍OOP = Object Oriented Programming새로운 개념의 모듈 단위, 즉 객체를 중심으로 하여 프로그램을 개발하는 기법 객체지향 테스트 클래스 테스트구조적 기법에서의 단위 테스트와 같은 개념캡슐화된 클래스나 객체를 검사하는 것 통합 테스트객체 몇 개를 결합하여 하나의 시스템으로 완성시키는 과정에서의 검사스레드 기반 테스트: 시스템에 대한 하나의 입력이나 이벤트에 응답하는 데 요구되는 클래스들을 통합하는 것사용 기반 테스트: 독립 클래스를 테스트한 후 독립 클래스를 사용하는 다음 계층의 종속 클래스를 테스트 확인 테스트사용자 요구사항에 대한 만족 여부를 검사 시스템 테스트모든 요소들이 적합하게 통합되고 올바른 기능을 수행하는지 검사 아키텍처 IEEE 1471ANSI / IEEE 1471-2000소프트웨어 집약적인 시스템에서 아키텍처가 표현해야 하는 요소와 내용들, 이들 간의 관계를 규정하고 있는 국제 표준표준화, 중립성, 유연성, 의사소통 저장소 구조중앙자료구조와 독립된 컴포넌트로 구성된 아키텍처큰 데이터의 이동 및 공유에 적합하며 컴포넌트 간 통신은 이뤄지지 않는다.대량의 데이터를 저장하는데 효과적이다.컴포넌트의 추가 삭제가 편리하다.중앙 집중화를 통해 데이터 관리가 용이하고 보안이 뛰어나다. MVC 구조애플리케이션을 모델, 뷰, 컨트롤러의 세 개의 컴포넌트로 구분하는 아키텍처유저 인터페이스와 비지니스 로직들을 서로 분리하여 개발하는 방법장점동일한 모델에 대해 다양한 뷰 제공효율적인 모듈화 가능모델과 뷰의 구분으로 사용자 인터페이스에 대한 요구 사항을 적용시키는데 용이 모델애플리케이션의 핵심 기능을 포함상태 변화시 컨트롤러와 뷰에 전달 뷰정보 표시를 관리결과물 생성을 위해 모델로부터 정보를 수신 컨트롤러사용자로부터 입력을 받아 모델과 뷰에 명령을 전달모델에 명령을 전달해 상태를 변경하고 뷰에 명령을 보내 표시 방법을 변경 클라이언트/서버 구조클라이언트와 서버로 나뉘는 아키텍처클라이언트: 사용자로부터 입력을 받아 서버에 요청을 전달서버: 수신된 요청을 수행하고 데이터의 일관성을 유지새로운 서버의 추가 및 업그레이드가 용이데이터가 서버에 집중되어 데이터 관리 용이서버에 네트워크 트래픽과 데이터가 집중되 처리 비용이 급증할 수 있다. 계층 구조계층적으로 조직화가 가능한 애플리케이션에 적합한 아키텍처인접 계층 사이에서만 요청과 응답이 이뤄지며 변경 사항을 적용할 때에도 두 개의 인접 계층에만 영향을 미쳐 원활한 변경이 가능OSI 7 Layer 파이프 필터 구조데이터의 흐름을 점진적으로 처리하는 시스템을 위한 아키텍처프로세싱을 위한 시스템이 각 필터에 캡슐화되어 있으며 데이터는 인접 필터 사이의 파이프를 통해 전달되는 형태 서식 문자열%d: 정수형 10진수 입출력%c: 문자 입출력%s: 문자열 입출력%-8.3s: 8칸 확보 후 문자열 왼쪽부터 문자열 3개 출력%f: 소숫점을 포함하는 실수로 입출력자릿수 없으면 6자리까지 표기%8.3f: 8칸 확보 후 오른쪽부터 정수 표기 후 소숫점은 3자리까지 출력 패딩 비트양수: Left, Right 모두 0음수: Left 0, Right 1 연산자 우선순위단항산술시프트관계: &lt; &lt;=가 == !=보다 우선비트: &amp;(and), ^(xor), |(or) 순서논리: &amp;&amp;, || 순서삼항연산xor, 다른면 1 같으면 0 소수 판별N을 2~(N-1)까지 차례대로 나눠 떨어지는지 확인N을 2부터 차례대로 나눠 처음으로 나눠떨어질 때의 나눈 수와 N이 같으면 소수N를 2부터 루트N 까지 숫자로 나눠 떨어지는지 확인 소수의 개수처음 나온 소수의 배수들은 소수가 아니다 최대공약수, 최소공배수유클리드 호제법 사용두 수 중 큰 수와 작은 수를 정한 뒤 큰 수를 작은 수로 나눠 나머지를 구한다.나머지가 0이면 그 때의 작은 수가 최대공약수두 수를 곱한 값을 최대공약수로 나눈 값이 최소공배수나머지가 0이 아니면 작은 수를 큰 수로, 나머지를 작은 수로 약수N을 1부터 N까지 나눠 나머지가 0이 되는 수 소인수 분해N을 2에서 루트N까지 나눠 떨어지는지 확인나눠 떨어졌다면 그 수는 소인수나눌때의 몫을 다시 N으로 놓고 2에서 루트 N까지 나눠떨어지는지 확인 10진법에서 2진법10진수를 2로 나눠 나머지를 구한 후 저장 10진법에서 N진법10진수를 N진법의 가장 가까운 누승부터 1까지 차례대로 나누는 방법","categories":[],"tags":[{"name":"정보처리","slug":"정보처리","permalink":"https://gracefullight.dev/tags/%EC%A0%95%EB%B3%B4%EC%B2%98%EB%A6%AC/"}]},{"title":"Angular4로의 업그레이드","slug":"Upgrade-Angular4","date":"2017-03-31T08:13:14.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/03/31/Upgrade-Angular4/","link":"","permalink":"https://gracefullight.dev/2017/03/31/Upgrade-Angular4/","excerpt":"","text":"170323에 Angular2의 stable 버전이라고 할 수 있는 Angular4가 나왔다.Angular2하고 있었는데 나도 모르는 사이에 버전이 4가 되었나, 1에서 2가 그렇게 많이 바뀌었는데 Angular4는 얼마나 바뀐걸까?Angular2부터는 npm으로 관리되기에 소스의 버전을 따라서 명명을 해 비롯된 것으로 큰 변경점이 없으니 안심해도 된다.버전별로 보면 이렇다.Angular1 : 기존 javascript로 코딩하던 $scope를 사용했던 버전Angular1.x : Component가 도입된 버전Angular2 : 처음으로 ts가 사용되고 새로운 앵귤러가 된 버전Angular3 : 아무도 모르게 사용을 했었다. package.json에서 @angular/router를 보자 3버전대일 것이다.Angular4 : 성능이 개선되었고 모든 Angular 모듈이 4버전 변경점모든 변경점은 앵귤러 블로그에서 확인할 수 있다.컴파일시 가벼워졌다.애니메이션 패키지가 angular/core에서 angular/animation으로 분리되었다.ngIf에서 else 구문을 쓸 수 있다.angular universial의 기능이 angular/platform-server로 통합되었다.typescript 2.1, 2.2버전 호환이 되었다.angular-cli가 1버전으로 업그레이드 되어 1버전의 cli로 프로젝트 생성시 angular4 버전으로 생성이 된다. 업그레이드12345678# angular 및 typescript$ npm install @angular/common@latest @angular/compiler@latest @angular/compiler-cli@latest @angular/core@latest @angular/forms@latest @angular/http@latest @angular/platform-browser@latest @angular/platform-browser-dynamic@latest @angular/platform-server@latest @angular/router@latest @angular/animations@latest typescript@latest --save# zone.js$ npm install zone.js@0.8.5 --save# angular-cli$ npm install @angular/cli@1.0.0 --save-dev 충돌angular animation 기능을 사용한다면 platform-browser/animation의 BrowserAnimationsModule을 추가적으로 넣어줘야할 수도 있다.typescript가 업그레이드 되면서 사용하지 않는 메소드나, 오류가 발생할 수 있는 스코프에 대해 linting이 더 강력해진 느낌이었다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"angular","slug":"javascript/angular","permalink":"https://gracefullight.dev/categories/javascript/angular/"}],"tags":[{"name":"angular","slug":"angular","permalink":"https://gracefullight.dev/tags/angular/"}]},{"title":"Single line for loop","slug":"single-line-for-loop","date":"2017-03-31T02:06:37.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/03/31/single-line-for-loop/","link":"","permalink":"https://gracefullight.dev/2017/03/31/single-line-for-loop/","excerpt":"","text":"예제 Single line12345var i, sum = 0;for (i = 0; i &lt; 10; ++i, sum += i);console.log(`$&#123;i&#125; $&#123;sum&#125;`); 일반적인 형태1234567var j, sum2 = 0;for (j = 0; j &lt; 10; ++j) &#123; sum2 += j;&#125;console.log(`$&#123;j&#125; $&#123;sum2&#125;`);두 예제의 결과는 어떻게 나올까.첫번째는 10 55, 두번째는 10 45가 나온다. 설명i 와 j 의 전위 후위 연산은 별로 중요하지 않다. (i 나 i이나 결과는 같게 나온다) Single line123456var i, sum = 0;// 1 2 3 4for (i = 0; i &lt; 10; ++i, sum += i);console.log(`$&#123;i&#125; $&#123;sum&#125;`); 일반적인 형태123456789var j, sum2 = 0;// 1 2 4for (j = 0; j &lt; 10; ++j) &#123; // 3 sum2 += j;&#125;console.log(`$&#123;j&#125; $&#123;sum2&#125;`); 안티패턴의 끝123456var k, sum3 = 0;// 1 2 4 5for (k = 0; k &lt; 10; ++k, sum3 += k) // 3 console.log(`$&#123;k&#125; $&#123;sum3&#125;`);연산의 실행 순서가 다르다고 이해하면 되겠다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"Database 실기","slug":"database-실기","date":"2017-03-26T02:54:27.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/03/26/database-실기/","link":"","permalink":"https://gracefullight.dev/2017/03/26/database-%EC%8B%A4%EA%B8%B0/","excerpt":"","text":"DB 정의통합된 데이터(Integrated Data): 검색의 효율성을 위해 중복이 최소화된 데이터의 모임저장 데이터(Stored Data): 컴퓨터가 접근 가능한 저장 매체에 저장된 데이터운영 데이터(Operational Data): 조직의 목적을 위해 존재 가치가 확실하고 반드시 필요한 데이터공유 데이터(Shared Data): 여러 응용 프로그램들이 공동으로 사용하는 데이터 DB 특징실시간 접근성(Real Time Accessibility): 사용자의 질의에 대해 즉시 처리하여 응답하는 특징계속적인 진화(Continuous Evolution): 삽입, 삭제, 갱신을 통하여 항상 최근의 정확한 데이터를 동적으로 유지하는 특징동시 공유(Concurrent Sharing): 여러 사용자가 동시에 원하는 데이터를 공용할 수 있는 특징내용에 의한 참조(Content Reference): 주소나 위치에 의해서가 아니라 사용자가 요구하는 내용에 따라 참조하는 특징데이터의 논리적, 물리적 독립성(Independence)논리적 독립성: 응용 프로그램과 DB 를 독립시킴으로써 데이터의 논리적 구조를 변경시키더라도 응용 프로그램은 변경되지 않는 특징물리적 독립성: 응용 프로그램과 보조기억장치와 같은 물리적장치를 독립시킴으로써 새로운 디스크를 도입하더라도 응용 프로그램에는 영향을 주지 않고 데이터의 물리적 구조만 변경될 수 있는 특징 데이터 언어Data LanguageDDL(데이터 정의어): 데이터베이스를 구축하거나 변경할 목적으로 사용하는 언어DML(데이터 조작어): 데이터 처리를 위해 응용 프로그램과 DBMS 사이의 인터페이스를 위한 언어DCL(데이터 제어어): 보안 및 권한제어, 무결성, 회복, 병행제어를 위한 언어 DB 사용자DB 관리자(DBA): DDL 과 DCL 을 통해 DB 를 정의하고 제어하는 사람 또는 그룹데이터 관리자(Data Administrator): 기업 또는 조직 내에서 데이터에 대한 정의, 체계화, 감독 및 보안업무 등 데이터에 대한 관리를 총괄하고 정보 활용에 대한 계획 수립 및 통제를 수행한다.데이터 설계자(Data Architect): 데이터의 구조를 체계적으로 정의하는 사람응용 프로그래머: 호스트 프로그래밍 언어에 DML 을 삽입하여 DB 에 접근하는 사람일반 사용자(End User): 질의어를 통해 DBMS 에 접근하는 사람 DBMS 개념사용자와 DB 사이에서 사용자의 요구에 따라 정보를 생성해주고 DB 를 관리해주는 소프트웨어기존 fs 가 갖는 데이터의 종속성과 중복성문제를 해결하기 위한 시스템으로 모든 응용 프로그램들이 DB 를 공유할 수 있도록 관리해준다.데이터 종속성으로 인한 문제점: 데이터 파일이 보조기억장치에 저장되는 방법이나 저장된 데이터의 접근 방법을 변경할 때 응용 프로그램도 같이 변경해야하는 문제점데이터 중복성으로 인한 문제점: 중복된 데이터 간에 데이터의 정확성이나 무결성을 효율적으로 유지할 수 없다는 문제점 DBMS 필수기능정의 기능(Definition Facility): 데이터의 타입과 구조, 데이터가 DB 에 저장될 때의 제약조건 등을 명시하는 기능조작 기능(Manipulation Facility): 체계적 데이터 처리를 위해 데이터 접근 기능(CRUD)을 명시하는 기능제어 기능(Control Facility): 데이터의 정확성과 안정성을 유지하기 위해 무결성, 보안 및 권한 검사, 병행제어 등을 명시하는 기능 DSMS데이터 스트림 관리 시스템(Data Stream Management System)대량의 스트림 데이터를 처리하고 관리하는 시스템온라인상의 데이터 스트림이라는 동적인 특성을 가진 데이터를 처리하고 관리하는 시스템입력 순서에 따라 데이터의 처리결과가 달라질 수 있다. 스키마DB 의 구조와 제약 조건에 대한 전반적인 명세개체, 속성, 관계 및 제약조건 등에 관해 전반적으로 정의외부 스키마, 개념 스키마, 내부 스키마개체: 현실 세계의 객체로 유형 또는 무형의 정보를 대상으로 존재하며 서로 구별될 수 있는 것속성: 개체의 특성이나 상태를 기술하는 것으로 데이터의 가장 작은 단위관계: 2 개 이상의 개체 사이에 연관성을 기술한 것 스키마 특징데이터의 구조적 특성을 의미데이터 사전에 저장된다.현실세계의 특정한 한 부분의 표현으로 특정 데이터 모델을 이용해 만들어진다.시간에 따라 불변적이다.데이터의 논리적 단위에 명칭을 부여하고 그 의미를 기술 데이터 사전데이터 사전은 DB 에 저장되어 있는 모든 데이터 개체들에 대한 정보를 유지관리하는 시스템시스템 카달로그 메타 데이터데이터에 관한 데이터저장되는 데이터와 직간접적으로 관계가 있는 정보를 제공하는 데이터MARC(Machine Readable Cataloging): 목록 레코드를 식별하여 축적유통할 수 있도록 코드화한 메타 데이터DC(Dublin Core): 네트워크 환경에서 각종 전자 정보를 기술하는 메타 데이터ONIX(ONline Information eXchange): 유통에 관한 통계와 체계적인 정보를 취급함으로써 정상적인 유통 및 관리를 위한 메타 데이터MODS(Metadata Object Description Schema): 디지털 도서관의 범용 서지 정보 표준 메타 데이터 메타 데이터의 상호 운용성하나의 표준적인 메타 데이터로 통합하여 표현하는 방법상호 매핑을 통해 해결하는 방법MDR에 의한 해결방법Meta Data Registry메타 데이터의 등록과 인증을 통해 메타 데이터를 유지관리하며, 메타 데이터의 명세를 공유하는 레지스트리 스키마 3 계층 외부 스키마사용자나 응용 프로그래머가 각 개인의 입장에서 필요로 하는 DB 의 논리적 구조를 정의하나의 DBMS 에는 여러 개의 외부 스키마가 존재할 수 있으며 하나의 외부 스키마는 여러 개의 응용 프로그램이나 사용자에 의해 공유될 수 있다. 개념 스키마개체 간의 제약 조건을 나타내고 DB 의 접근 권한, 보안 정책 및 무결성 규정에 관한 명세를 정의DB 의 전체적인 논리적 구조로 데이터를 통합한 조직 전체의 DB 명세로서 하나만 존재한다.기관이나 조직의 관점에서 DB 를 정의 내부 스키마DB 의 물리적 구조를 정의물리적 저장장치의 관점에서 본 전체 DB 의 명세로 하나만 존재개념 스키마의 물리적 저장 구조에 대한 정의를 기술시스템 프로그래머나 시스템 설계자가 보는 관점의 스키마 DB 설계DB 스키마를 개발하는 과정요구 조건 분석(Requirement Analysis)개념적 설계(Conceptual Design)논리적 설계(Logical Design)물리적 설계(Physical Design)DB 구현(Database Implementation) 요구 조건 분석DB 를 사용할 사람이 필요로 하는 용도를 파악하는 작업 개념적 설계현실 세계에 대한 인식을 추상적 개념으로 표현하는 과정 논리적 설계시스템이 지원하는 논리적 데이터 구조로 변환시키는 과정 물리적 설계저장 구조와 접근 경로를 결정하는 과정응답 시간, DB 파일과 접근 경로 구조에 대한 저장 공간의 효율성, 트랜잭션 처리도 등을 고려 DB 구현DB 를 실제로 구축하는 과정DBMS 의 DDL 로 기술된 명령문을 실행시켜 DB 스키마와 DB 파일을 생성DML 로 기술된 명령문을 가지는 프로그램 코드가 작성된다. ER 모델네모: 개체 타입(Entity Type)마름모: 관계 타입(Relationship Type)타원: 속성밑줄타원: 기본키 속성N:M: 개체 타입 간의 연관성선: 개체 타입과 속성을 연결ISA: 특정 개체는 서로 구별되는 여러 하위 개체로 나눠질 수 있는데 이러한 상위 개체와 하위 개체 간의 관계를 ISA 관계라고 한다.ex) 학생 개체 =&gt; 재학생, 휴학생, 졸업생 개체 개체 및 개체 타입개체는 현실 세계의 객체로 유형 또는 무형의 정보 대상으로 존재하며 서로 구별될 수 있는 것개체의 특성을 나타내는 속성을 갖는다.하나의 개체를 개체 어커런스 = 개체 인스턴스라한다.개체 어커런스들의 집합에 대한 공통의 특성을 갖는 개체 클래스를 개체 타입이라 한다. 관계 및 관계 타입관계는 2 개 이상의 개체 사이에 존재하는 연관성개체 타입의 개수에 대한 차수와 개체 어커런스의 개수에 대한 대응 카디널리티를 갖는다.차수에 따른 관계 종류단항(Unary): 관계에 참여하고 있는 개체타입이 1 개인 관계이항(Binary)삼항(Ternary)n 항(n-ary)1:1: 두 개체 타입이 모두 하나씩의 개체 어커런스를 갖는 관계1:N: 한 개체 타입은 하나의 개체 어커런스, 다른 한 개체 타입은 여러개의 개체 어커런스를 갖는 관계N:M: 두 개체 타입 모두 여러 개의 개체 어커런스를 갖는 관계ISAISAdisjoint: 상위 개체의 멤버가 하나의 하위 개체에만 포함될 때overlapping: 상위 개체의 멤버가 여러 하위 개체에 포함될 때total: 상위 개체의 멤버가 하위 개체에 속할 때partial: 상위 개체의 멤버가 하위 개체에 속하지 않을 때 속성개체의 특성이나 상태를 기술한 것도메인: 속성이 가질 수 있는 모든 가능한 값들의 집합단순 속성: 더 이상 다른 속성으로 나눌 수 없는 속성복합 속성: 2 개 이상 속성들로 분해할 수 있는 속성 릴레이션데이터를 원자값으로 갖는 이차원의 테이블릴레이션의 구조는 물리적인 구조를 나타내는 것이 아닌 논리적 구조릴레이션 스키마: 릴레이션 구조릴레이션 인스턴스: 실제 값속성: 릴레이션의 열(Column)튜플: 릴레이션의 행(Row) ER 모델을 관계형 데이터 모델로 변환개념적인 데이터 모델인 ER 모델을 논리적 데이터 모델인 릴레이션 스키마로 변환하는 것매핑 룰(Mapping Rule)이라고 한다.N:M 관계이면 릴레이션 A 와 B 의 기본키를 모두 포함한 별도의 릴레이션으로 표현한다. 이 때 생성된 별도의 릴레이션을 교차 릴레이션 또는 교차 엔티티라고 한다. 관계의 표현1:1(┼─┼): 양쪽에 반드시 1 개씩 존재1:0 또는 1:1(┼─Θ├): 왼쪽에는 반드시 1 개, 오른쪽에는 없거나 1 개 존재1:N(┼─&lt;): 왼쪽에는 반드시 1 개, 오른쪽에는 반드시 여러개1:1 또는 1:N(┼─┤&lt;): 왼쪽에는 반드시 1 개, 오른쪽에는 1 개 또는 여러개 존재1:0 또는 1:1 또는 1:N(┼─Θ│&lt;): 왼쪽에는 반드시 1 개, 오른쪽에는 0 개 또는 1 개 또는 여러개 존재 식별관계Identifying개체 A, B 사이의 관계에서 A 개체의 기본키가 B 개체의 외래키이면서 동시에 기본키가 되는 관계ER 도형에서 실선으로 표시 비식별관계Non-identifying개체 A, B 사이의 관계에서 A 개체의 기본키가 B 개체의 비기본키 영역에서 외래키가 되는 관계B 개체의 존재 여부는 A 개체의 존재 여부와 관계없이 존재ER 도형에서 점선으로 표시 슈퍼키한 릴레이션 내에 있는 속성들의 집합으로 구성된 키모든 튜플에 대해 유일성은 만족하지만 최소성은 만족하지 못한다. 후보키Candidate Key릴레이션을 구성하는 속성들 중에서 튜플을 유일하게 식별하기 위해 사용되는 속성들의 부분집합유일성과 최소성을 모두 만족한다. 복합키2 개 이상의 필드를 조합하여 만든 키 기본키Primary Key후보키 중에서 특별히 선정된 키중복된 값을 가질 수 없다.NULL 일 수 없다. 대체키Alternate Key대체키는 후보키 중에서 선정된 기본키를 제외한 나머지 후보키 외래키Foreign Key다른 릴레이션의 기본키를 참조하는 속성 또는 속성들의 집합 무결성IntegrityDB 에 저장된 데이터 값과 그 것이 표현하는 현실 세계의 실제 값이 일치하는 정확성을 의미무결성 제약조건(Constraint): DB 에 저장된 데이터의 정확성을 보장하기 위해 정확하지 않은 데이터가 DB 에 저장되는 것을 방지하기 위한 조건 무결성 종류NULL 무결성: 특성 속성 값이 NULL 이 될 수 없음고유 무결성(Unique): 특정 속성에 대해 각 튜플이 갖는 속성 값이 서로 달라야 한다.도메인 무결성: 특정 속성의 값이 그 속성이 정의된 도메인에 속해야한다.키 무결성: 하나의 릴레이션에는 적어도 하나의 키가 존재해야한다.관계 무결성(Relationship): 어느 한 튜플의 삽입 가능 여부 또는 한 릴레이션과 다른 릴레이션의 튜플들 사이의 관계에 대한 적절성 여부를 지정참조 무결성(Referential): 외래키 값은 NULL 이거나 참조 릴레이션의 기본키 값과 동일해야 한다.개체 무결성(Entity): 기본 릴레이션의 기본키를 구성하는 어떤 속성도 NULL 일 수 없다. 관계대수Relational Algebra관계형 DB 에서 원하는 정보와 그 정보를 어떻게 유도하는가를 기술하는 절차적 언어기본연산: SELECT, PROJECT, JOIN, DIVISION집합연산: UNION, DIFFERENCE, INTERSECTION, CARTESIAN PRODUCT 순수 관계 연산자 SELECT릴레이션에 존재하는 튜플들 중 특정 조건을 만족하는 튜플들의 부분집합을 구하여 새로운 릴레이션을 만든다.튜플을 구하는 것이므로 수평 연산시그마 σ를 사용한다.σ&lt;조건&gt;(테이블) PROJECT주어진 릴레이션에서 속성 리스트에 제시된 속성 값만을 추출하여 새로운 릴레이션을 만든다.열에 해당하는 속성을 추출하는 것이므로 수직 연산파이 π를 사용한다.π&lt;속성&gt;(테이블) JOIN공통 속성을 중심으로 2 개의 릴레이션을 하나로 합쳐서 새로운 릴레이션을 만든다.JOIN 연산의 결과는 CARTESIAN PRODUCT 연산을 수행한 다음 SELECT 연산을 수행한 것과 같다.▷◁ 를 사용한다.테이블▷◁(JOIN 조건)S세타 조인: 비교 연산자를 θ 로 일반화하여 θ 로 표현될 수 있는 조인자연 조인: 중복된 속성을 제거하여 같은 속성은 한 번만 나타나게 하는 연산 일반 집합 연산자수학적 집합에서 사용하는 연산자합집합(UNION): R∪S ≤ R ＋ S교집합(INTERSECTION): R∩S ≤ MIN(R, S)차집합(DIFFERENCE): R－S ≤ R교차곱(CARTESIAN PRODUCT): (R×S) = ®×(S) 관계해석Relational CalculusE.F. Codd 가 수학의 Predicate Calculus(술어해석)에 기반을 두고 관계 DB 를 위해 제안관계 데이터의 연산을 표현하는 방법원하는 정보를 정의할 때 계산 수식을 사용한다.원하는 정보가 무엇이라는 것만 정의하는 비절차적 특성을 지닌다. DDLDDL 로 정의된 내용은 메타데이터가 되며 시스템 카탈로그에 저장된다. CREATE SCHEMA1CREATE SCHEMA 스키마명 AUTHORIZATION 유저; CREATE DOMAIN1234567CREATE DOMAIN 도메인명 타입 [DEFAULT 기본값] [CONSTRAINT 제약조건명 CHECK 제약조건];CREATE DOMAIN GENDER CHAR(1) DEFAULT 'M' CONSTRAINT VALID-GENDER CHECK (VALUE IN ('M', 'F')); CREATE TABLE12345678910CREATE TABLE 테이블명 ( 속성명 타입 [NOT NULL], [PRIMARY KEY(속성),] [UNIQUE(속성)] [FOREIGN KEY(속성) REFERENCES 참조테이블(속성) [ON DELETE 옵션] [ON UPDATE 옵션] ] [CONSTRAINT 제약조건명] [CHECK(조건)]); CREATE VIEW123CREATE VIEW 뷰명[(속성명)]AS SELECT 속성 FROM 테이블[WITH CHECK OPTION];속성명을 기술하지 않으면 SELECT 문의 속성명이 자동으로 사용된다.WITH CHECK OPTION 은 뷰에 대한 갱신이나 삽입연산이 실행될 때 뷰의 정의 조건을 위배하면 갱신이나 삽입 연산의 실행을 거부하도록 지정하기 위한 것이다. CREATE INDEX123CREATE [UNIQUE] INDEX 인덱스명 ON 테이블명(속성명 정렬) [CLUSTER];CLUSTER: 지정된 키에 따라 튜플들을 그룹으로 지정하기 위해 사용한다. CREATE TRIGGER트리거는 DB 에서 데이터의 입력, 갱신, 삭제 등의 이벤트가 발생할 때마다 자동적으로 수행되는 사용자 정의 프로시저이다.123456789101112131415161718CREATE TRIGGER 트리거명 [AFTER|BEFORE] [INSERT|DELETE|UPDATE] ON 테이블명 REFERENCING [NEW|OLD] TABLE AS 테이블명 FOR EACH ROW WHEN 조건 BEGIN 트리거 BODY END;/* 학생 테이블에 값이 삽입되기 전에 학년 속성이 없으면 신입생 값을 넣어준다 */CREATE TRIGGER 학년정보트리거 BEFORE INSERT ON 학생REFERENCING NEW TABLE AS tempFOR EACH ROWWHEN temp.학년 = ''BEGIN SET temp.학년 = '신입생';END; ALTER TABLE123ALTER TABLE 테이블명 ADD 속성명 타입 [DEFAULT '기본값'];ALTER TABLE 테이블명 ALTER 속성명 [SET DEFAULT '기본값'];ALTER TABLE 테이블명 DROP 속성명 [CASCADE]; DROP12DROP TABLE 테이블명 [CASCADE|RESTRICT];DROP VIEW 뷰명 [CASCADE|RESTRICT]; SELECT12345SELECT [DISTINCT] 속성 FROM 테이블[WHERE 조건][GROUP BY 속성][HAVING 조건][ORDER BY 속성 순서] JOIN INNER JOINEQUI JOIN: 대상 테이블에서 공통 속성을 기준으로 = 비교에 의해 같은 값을 가지는 행을 연결하여 결과를 생성하는 JOIN 방법123456789SELECT 속성, 속성2FROM 테이블1, 테이블2WHERE 테이블1.속성 = 테이블2.속성;SELECT 속성, 속성2FROM 테이블1 NATURAL JOIN 테이블2;SELECT 속성, 속성2FROM 테이블1 JOIN 테이블2 USING(속성);NON-EQUI JOIN: =이 아닌 다른 비교연산자를 사용하는 JOIN 방법인데 잘 안쓴다. OUTER JOINLEFT OUTER JOIN1234567SELECT 속성, 속성2FROM 테이블1 LEFT OUTER JOIN 테이블2 ON 테이블1.속성 = 테이블2.속성;SELECT 속성, 속성2FROM 테이블1, 테이블2WHERE 테이블1.속성 = 테이블2.속성(+);RIGHT OUTER JOIN123SELECT 속성, 속성2FROM 테이블1, 테이블2WHERE 테이블1.속성(+) = 테이블2.속성; SELF JOIN같은 테이블에서 2 개의 속성을 연결하여 EQUI JOIN 을 하는 JOIN 방법 DML INSERT12INSERT INTO 테이블[(속성)]VALUES (데이터); DELETE1DELETE FROM 테이블 WHERE 조건; UPDATE123UPDATE 테이블SET 속성 = 데이터WEHRE 조건; DCL데이터의 보안, 무결성, 회복, 병행 제어 등을 정의하는 데 사용하는 언어DBA 가 데이터 관리를 목적으로 사용COMMIT, ROLLBACK, GRANT, REVOKE GRANT12GRANT 권한 TO 유저;GRANT 권한 ON 테이블 TO 유저 [WITH GRANT OPTION]; REVOKE12REVOKE 권한 FROM 유저;REVOKE [GRANT OPTION FOR] 권한 ON 테이블 FROM 유저 [CASCADE];GRANT OPTION FOR 는 다른 사람에게 해당 권한을 부여하는 권한만을 취소한다. 내장 SQLDB 내의 데이터를 정의하거나 접근하는 SQL 문을 응용프로그램 내에 내포하여 프로그램이 실행될 때 함께 실행되도록 호스트 프로그램 언어에 삽입한 SQL. 커서내장 SQL 의 실행 결과로 반환된 복수 개의 튜플을 접근할 수 있도록 해주는 개념질의 결과로 반환된 테이블의 튜플을 순서대로 가리키는 튜플에 대한 포인터DECLARE: 커서 정의 등 커서에 관련된 선언을 하는 명령어OPEN: 커서 질의 결과인 첫번째 튜플을 가리키도록 설정하는 명령어FETCH: 다음 튜플로 커서를 이동시키는 명령어CLOSE: 커서를 닫기 위해 사용하는 명령어1234567891011121314151617181920/* salary를 10% 증가시키는 갱신 연산 */EXEC SQL DECLARE SECTION int department; int salary;EXEC SQL END DECLARE SECTIONEXEC SQL DECLARE person CURSOR FOR SELECT salary FROM EMPLOYEE WHERE department = :department;EXEC SQL OPEN person;EXEC SQL FETCH person INTO :salary;while(SQLSTATE == '00000')&#123; EXEC SQL UPDATE EMPLOYEE SET salary = salary * 1.1 WHERE CURRENT OF person; EXEC SQL FETCH person INTO :salary;&#125;EXEC SQL CLOSE person; Stored Procedure모듈별 프로그래밍 허용빠른 SQL 실행: 한 번 실행된 후 메모리에 캐시되어 다음 실행에 빠르게 실행될 수 있다.보안성네트워크 통신량 감소12345CREATE [OR REPLACE] PROCEDURE 프로시저명(IN|OUT|INOUT 파라미터)[지역변수 선언]BEGIN 프로시저 BODY;END; 이상Anomaly테이블에서 일부 속성들의 종속으로 데이터의 중복이 발생하고, 중복으로 인해 테이블 조작시 문제가 발생하는 현상 =&gt; 데이터 중복으로 인해 테이블 조작시 문제가 발생하는 현상 삽입 이상Insertion Anomaly데이터를 삽입할 때 의도와는 상관없이 원하지 않는 값들로 인해 삽입할 수 없게 되는 현상 삭제 이상Deletion Anomaly테이블에서 한 튜플을 삭제할 때 의도와는 상관없는 값들도 함께 삭제되는 현상연쇄 삭제 갱신 이상Update Anomaly테이블에서 튜플에 있는 속성 값을 갱신할 때 일부 튜플의 정보만 갱신되어 정보에 불일치성(Inconsistency)이 생기는 현상 함수적 종속Functional DependencyX → Y 의 관계를 갖는 속성 X 와 Y 에서 X 를 결정자(Determinant), Y 를 종속자(Dependent)라고 한다.완전 함수적 종속: 어떤 속성이 기본키에 대해 완전히 종속적일 때를 말한다.부분 함수적 종속: 기본키의 일부에 대해 속성이 결정되는 경우. 정규화Normalization테이블의 속성들이 상호 종속적인 관계를 갖는 특성을 이용해 테이블을 무손실 분해하는 과정무손실 분해: NATURAL JOIN 을 통해 원래 테이블로 정보 손실 없이 복귀되는 경우 분해된 테이블이 무손실 분해되었다고 한다. 제 1 정규형모든 속성의 도메인이 원자값만으로 되어 있는 정규형 제 2 정규형테이블이 제 1 정규형이고 기본키가 아닌 모든 속성이 기본키에 대해 완전 함수적 종속을 만족하는 정규형 제 3 정규형테이블이 제 2 정규형이고 기본키가 아닌 모든 속성이 기본키에 대해 이행적 함수 종속을 만족하지 않는 정규형이행적 함수 종속: A → B 이고 B → C 일 때 A → C 를 만족하는 관계 BCNF테이블에서 모든 결정자가 후보키인 정규형일반적으로 제 3 정규형에 후보키가 여러 개 존재하고, 이러한 후보키들이 서로 중첩되어 나타나는 경우에 적용 가능하다. 제 4 정규형테이블에 다중 값 종속 A→→B 가 존재할 경우 테이블의 모든 속성이 A 에 함수적 종속 관계를 만족하는 정규형다중 값 종속다치 종속 = MVD = Multi Valued DependencyA, B, C 3 개의 속성을 가진 테이블 R 에서 어떤 복합 속성(A, C)에 대응하는 B 값의 집합이 A 값에만 종속되고 C 값에는 무관하면 B 는 A 에 다중 값 종속이라고 한다. 제 5 정규형테이블의 모든 조인 종속이 테이블의 후보키를 통해서만 성립되는 정규형테이블 속성에 대한 부분 집합 X, Y, Z…가 있을 때 테이블이 자신의 프로젝션 X, Y, Z…를 모두 조인한 결과와 동일한 경우 테이블은 조인 종속을 만족한다. 역정규화Denormalization정규화로 인해 여러 개로 분해된 릴레이션들에서 원하는 정보를 얻기 위해서 조인을 사용하여 다시 연결해야되는데 조인을 자주 사용하면 응답 속도가 떨어지므로 정규화에 위배되지만 성능 향상을 위해 다시 테이블을 합치는 것 시스템 카탈로그DB 에 저장되어 있는 모든 데이터 개체들에 대한 정의나 명세에 대한 정보가 수록되어 있는 시스템 테이블 시스템 카탈로그의 구성요소SYSOBJECTS: 각 개체에 관한 정보를 한 행으로 관리SYSCOLUMNS: 각 테이블이 가지고 있는 모든 열에 대한 정보를 한 행으로 관리SYSINDEXES: 모든 인덱스에 대한 정보를 한 행로 관리SYSUSERS: 사용자와 그룹에 관한 정보를 한 행으로 관리SYSPROTECTS: 사용자 권한에 관한 정보를 한 행으로 관리 인덱스데이터 레코드(튜플)에 빠르게 접근하기 위해 &lt;키 값, 포인터&gt; 쌍으로 구성되는 데이터 구조 m-원 검색트리m-Way Search Tree한 노드가 1 개의 키값과 2 개의 서브 노드를 갖는 이진 검색 트리를 일반화한 트리 B-트리인덱스를 구성하는 방법으로 많이 사용되는 균형된 m-원 검색트리키 값과 레코드를 가리키는 포인터들이 트리 노드에 오름차순으로 저장키 의 삽입과 삭제 시 노드의 분열과 합병이 발생할 수 있다. B*-트리B-트리의 문제점인 빈번한 노드의 분할을 줄이는 목적으로 제시된 B-트리의 변형각 노드가 가능한 한 최소 2/3 가 채워지도록 한 것이 특징 B±트리B-트리의 변형으로 단말 노드가 아닌 노드로 구성된 인덱스 세트와 단말 노드로만 구성된 순차 세트로 구분된다.행 이주로 인한 검색 효율 저하VARCHAR 형식을 INDEX 로 잡을 때 값이 변경될 경우 다음 블록을 또 읽어서 검색해 검색 속도가 떨어지는 현상 트랜잭션DB 에서 하나의 논리적 기능을 수행하기 위한 일련의 연산 집합으로 작업의 단위이다.DBMS 에서 회복 및 병행 수행시 처리되는 작업의 논리적 단위 트랜잭션의 특성 (ACID) 원자성Atomicity트랜잭션의 연산은 DB 에 모두 반영되든지 아니면 전혀 반영되지 않아야한다. 일관성Consistency트랜잭션 수행이 성공적으로 완료되면 언제나 일관성 있는 DB 상태로 변환한다. 독립성Isolation한 트랜잭션이 데이터를 갱신하는 동안 이 트랜잭션이 완료되지 전에는 갱신중인 데이터를 다른 트랜잭션들이 접근하지 못하도록 해야한다. 영속성Durability트랜잭션의 실행이 성공적으로 실행 완료된 후에는 시스템에 오류가 발생하더라도 트랜잭션에 의해 변경된 내용은 계속 보존되어야 한다. 트랜잭션의 상태활동(Active): 트랜잭션이 실행중인 상태실패(Failed): 트랜잭션 실행중에 오류가 발생하여 중단된 상태철회(Aborted): 트랜잭션이 비정상적으로 종료되어 ROLLBACK 연산을 수행한 상태부분 완료(Partially Committed): 트랜잭션의 마지막 연산까지 수행하였지만 COMMIT 연산을 실행하기 전의 상태완료(Committed): 트랜잭션이 성공적으로 완료되어 COMMIT 연산을 수행한 후의 상태 회복Recovery트랜잭션을 실행하는 도중에 장애가 발생하여 DB 가 손상되었을 경우 손상되기 이전의 정상 상태로 복구하는 작업 장애 유형실행 장애(Action Failure)트랜잭션 장애(Transaction Failure)시스템 장애(System Failure)미디어 장애(Media Failure) 회복 관리기로그: 트랜잭션 수행 중 작성된 DB 의 변경 내용에 대한 정보로 Redo 와 Undo 를 수행할 때 사용메모리 덤프: 메모리에 있는 DB 전체 또는 일부 내용을 주기적으로 별도의 디스크나 다른 파일로 복사해 두는 작업 RedoDB 가 비정상적으로 종료되었을 때 디스크에 저장된 로그를 분석하여 트랜잭션의 시작과 완료에 대한 기록이 있는 트랜잭션의 작업을 재작업 UndoDB 가 비정상적으로 종료되었을 때 디스크에 저장된 로그를 분석하여 트랜잭션의 시작을 나타내는 START 는 있지만 완료를 나타내는 COMMIT 이 없는 트랜잭션이 작업한 내용을 모두 취소시킨다. 회복 기법 연기 갱신 기법Deferred Update트랜잭션이 성공적으로 종료될 때까지 DB 에 대한 실질적인 갱신을 연기하는 기법 즉각 갱신 기법Immediate Update트랜잭션이 데이터를 변경하면 트랜잭션이 부분 완료되기 전이라도 즉시 실제 DB 에 반영하는 기법 그림자 페이지 기법Shadow Paging갱신 이전의 DB 를 일정 크기의 페이지 단위로 구성하여 각 페이지마다 복사본인 그림자 페이지로 별도 보관해 두고, 실제 페이지를 대상으로 트랜잭션에 대한 변경 작업을 수행하는 기법 검사점 기법Check Point시스템 장애가 발생하였을 경우, Redo 와 Undo 를 수행하기 위해 로그 전체를 조사해야하는 경우를 피하기 위한 기법검사점을 로그에 보관해 둔다. 미디어 회복 기법Media RecoveryDB 의 내용을 주기적으로 안전한 저장장치에 덤프해 놓는 기법 병행 제어Concurrency Control다중 프로그램의 이점을 활용하여 동시에 여러 개의 트랜잭션을 병행 수행할 때 실행되는 트랜잭션들이 DB 의 일관성을 파괴하지 않도록 트랜잭션 간의 상호 작용을 제어하는 기술여러 개의 트랜잭션들이 동시에 인터리빙하게 실행되는 것인터리빙트랜잭션들이 번갈아가며 조금씩 자신이 처리해야 할 일을 처리하는 것 병행 제어의 필요성갱신 분실(Lost Update): 2 개 이상의 트랜잭션이 같은 데이터를 공유하여 갱신할 때 갱신 결과의 일부가 없어지는 현상모순성(Inconsistency): 복수의 사용자가 동시에 같은 데이터를 갱신할 때 DB 내의 데이터들이 상호 일치하지 않아 모순된 결과가 발생하는 현상연쇄 복귀(Cascading Rollback): 병행 수행되던 트랜잭션들 중 어느 하나에 문제가 생겨 ROLLBACK 되는 경우 다른 트랜잭션들도 함께 ROLLBACK 되는 현상 Lock잠금이란 DB 관리에서 하나의 트랜잭션에 사용되는 데이터를 다른 트랜잭션이 접근하지 못하게 하는 것을 의미교착상태(Dead Lock): 모든 트랜잭션들이 실행을 전혀 진전시키지 못하고 무한정 기다리고 있는 상태공유 잠금(Shared Lock): 트랜잭션이 데이터에 대해 공유 잠금을 걸면 트랜잭션은 데이터에 대해 읽기만 가능하고 기록은 불가능배타 잠금(Exclusive Lock): 트랜잭션이 데이터에 대해 배타 잠금을 걸면 트랜잭션은 데이터에 대해 읽기나 기록 모두 불가능 병행 제어 기법의 종류 2 단계 잠금 규약 기법트랜잭션 스케줄의 직렬성을 보장하는 대표적인 잠금 기법교착상태를 예방할 수 없다.확장(Growing) 단계: 트랜잭션이 잠금만 수행할 수 있고 잠금해제는 수행할 수 없는 단계축소(Shrinking) 단계: 트랜잭션이 잠금해제만 수행할 수 있고 잠금은 수행할 수 없는 단계 타임스탬프 순서 기법시스템이 각 트랜잭션을 실행할 때 부여하는 값인 타임스탬프로 순서에 따라 트랜잭션 작업을 수행한다.교착상태가 발생하지 않는다. 보안DB 일부분 또는 전체에 대해 권한이 없는 사용자가 접근을 수행하는 것을 금지하기 위해 사용하는 기술 보안 기술의 목표정보 보호(Information Security): 정보의 불법적인 노출을 방지정보 인증(Information Authentication): 고의적으로 정보를 수정하거나 허위 정보를 저장시키려는 것을 방지사용자 인증(User Authentication): 패스워드나 음성, 지문 등을 대조하여 DB 를 이용하는 사람들의 신원을 확인 보안 기법뷰 기법DCL 기법: 권한 부여 및 해제암호화 기법개인키 암호화 기법: 동일한 키로 데이터를 암복호화한다.공개키 암호화 기법: 데이터를 암호화할 때 사용하는 공개키는 DB 사용자에게 공개하고 복호화할 때의 비밀키는 관리자가 비밀리에 관리 튜닝DB 튜닝이란 DB 응용 프로그램, DB 자체, 운영체제 등의 조정을 통하여 DBMS 의 성능을 향상시키는 작업 인덱스 튜닝 B-트리 인덱스일반적으로 사용되는 인덱스 방식루트 노드에서 하위 노드로 키 값의 크기를 비교해 나가면서 단말 노드에서 찾고자 하는 데이터를 검색 비트맵 인덱스인덱스 컬럼의 데이터를 Bit 값인 0 또는 1 로 변환하여 인덱스 키로 사용하는 방법분포도가 좋은 컬럼에 적합하며 데이터가 Bit 로 구성되어 있기 때문에 효율적인 논리 연산이 가능하고 저장공간이 적다. 역방향 인덱스인덱스 컬럼의 데이터를 역으로 변환하여 인덱스 키로 사용하는 방법B-트리 인덱스에서 발생할 수 있는 불균형 문제를 해결데이터의 분포도가 좋아져 검색 성능이 좋다. 클러스터드 인덱스Clustered Index인덱스 키의 순서에 따라 데이터가 정렬되어 저장되는 방식실제 데이터가 순서대로 저장되어 있어 인덱스를 검색하지 않아도 원하는 데이터를 빠르게 찾을 수 있다.데이터 삽입, 삭제시 순서를 유지하기 위해 데이터를 재정렬해야한다.한 개의 릴레이션에 하나의 인덱스만 생성 가능하다. 논클러스터드 인덱스Non-Clustered Index인덱스의 키 값만 정렬되어 있고 실제 데이터는 정렬되지 않는 방식데이터를 검색하기 위해 인덱스를 검색하고 실제 데이터의 위치를 확인해야 하므로 클러스터드 인덱스에 비해 검색속도가 떨어진다.한 개의 릴레이션에 여러 개의 인덱스를 만들 수 있다. 결합 인덱스인덱스들이 자주 조합되어 사용하는 경우는 하나의 결합 인덱스를 생성한다.결합 인덱스의 컬럼 순서는 데이터 분포도가 좋은 컬럼을 선행 컬럼으로 설정분포도선택성(Selectivity)전체 레코드 중 조건에 맞는 레코드의 숫자가 적은 경우 분포도가 좋다고 한다.분포도가 10~15%인 경우 효율적인 인덱스 검색을 할 수 있다. 객체 지향 DB오버로딩: 하나의 메소드 이름으로 다른 파라미터를 지정하여 사용하는 기법오버라이딩: 슈퍼 클래스에 있는 메소드를 서브 클래스에서 상속받아 다른 기능을 수행하는 메소드로 재정의하는 기법 분산 DB 분산 DB 시스템의 구성요소분산 처리기: 지리적으로 분산되어 있는 컴퓨터 시스템분산 DB: 지리적으로 분산되어 있는 DB통신 네트워크: 분산 처리기들을 통신망으로 연결하여 논리적으로 하나의 시스템처럼 작동할 수 있도록 하는 네트워크 분산 DB 의 목표 위치 투명성Location TransparencyDB 의 실제 위치를 알 필요 없이 단지 DB 의 논리적인 명칭만으로 접근할 수 있다. 중복 투명성Replication Transparency데이터가 여러 곳에 중복되어 있더라도 사용자는 마치 하나의 데이터만 존재하는 것처럼 사용할 수 있고 시스템이 자동으로 여러 데이터에 대한 작업을 수행한다. 병행 투명성Concurrency Transparency다수의 트랜잭션들이 동시에 실행되더라도 그 트랜잭션들의 수행 결과는 서로 영향을 받지 않는다. 장애 투명성Failure Transparency장애에도 불구하고 트랜잭션은 정확하게 수행된다. 멀티미디어 DB텍스트, 그래픽, 정지 화상, 동영상, 음성 등이 복합적으로 구성된 DB비정형 데이터이기 때문에 미디어별로 별도의 검색 방법이 필요하다.데이터의 구조가 복잡하고 관계를 구성하기가 어렵다. 주기억장치 DBDB 전체를 주기억장치에 상주시킨 후 DB 연산을 수행하는 시스템 데이터 웨어하우스Data Warehouse급증하는 다량의 데이터를 효과적으로 분석하여 정보화하고 이를 여러 계층의 사용자들이 효율적으로 사용할 수 있도록 한 DB 데이터 마트Data Mart소규모 단일 주제의 데이터 웨어하우스를 말한다. 데이터 마이닝Data Mining데이터 웨어하우스에 저장된 데이터 집합에서 사용자의 요구에 따라 유용하고 가능성 있는 정보를 발견하기 위한 기법 데이터 마이닝 기법연관(Association): 연관 관계를 발견하기 위한 방법연속(Sequence): 트랜잭션의 향후 발생 가능성을 예측하는 방법분류(Classfication): 다른 그룹과의 차별적인 특성을 도출하기 위한 방법클러스터링(Clustering): 상호 간에 유사한 특성을 갖는 데이터를 집단화하는 방법특성화(Characterization): 데이터의 요약 과정을 통해 특성을 발견하는 방법패턴 분석(Pattern Analysis): DB 내의 명시된 패턴을 찾는 방법경향 분석(Trend Analysis): 동적으로 변화하는 데이터를 분석하는 방법 OLAPOnline Analytical Processing다차원으로 이루어진 데이터로부터 통계적인 요약 정보를 분석하여 의사결정에 활용하는 방식 OLAP 연산Roll-up: 구체적인 내용의 상세 데이터로부터 요약된 형태의 데이터로 접근하는 기능Drill-down: 단계적으로 요약된 형태의 데이터로부터 구체적인 내용의 상세 데이터로 접근하는 기능Drill-through: 데이터 웨어하우스나 OLTP 에 존재하는 상세 데이터에 접근하는 기능Drill-across: 다른 데이터 큐브의 데이터에 접근하는 기능Pivoting: 보고서의 행, 열, 페이지 차원을 바꿔 볼 수 있는 기능Slicing: 다차원 데이터 항목을 다양한 각도에서 조회하고 비교하는 기능Dicing: Slicing 을 더 세분화하는 기능 OLAP 종류ROLAP(Relational-OLAP): 관계형 DB 와 관계형 질의어를 사용하여 다차원 데이터를 저장 및 분석MOLAP(Multi-dimension OLAP): 데이터 검색 속도를 향상시키기 위해 큐브 캐시라고 하는 주기억장치 속에 데이터 큐브를 보관HOLAP(Hybrid OLAP): ROLAP 과 MOLAP 의 특성을 모두 가졌고, 요약을 메모리에 저장하고 기본 데이터나 다른 요약들은 관계형 DB 에 저장 OLTPOnline Transaction Processing온라인 업무 처리 형태의 하나로 네트워크 상의 여러 이용자가 실시간으로 DB 의 데이터를 갱신하거나 검색하는 등의 단위 작업을 처리하는 방식 ODBC프로그램과 DB 의 종류에 관계없이 자유롭게 DB 에 접근하여 사용할 수 있도록 만든 표준 인터페이스Application: DB 에 접속할 때 ODBC API 를 사용Driver Manager: Application 과 ODBC Driver 간의 통신을 관리하는 라이브러리DSN(Domain Service Name): 서버에 연결할 때 필요한 드라이버와 DB 정보를 저장ODBC Driver: ODBC API 가 지원하는 함수를 구현하는 라이브러리","categories":[],"tags":[{"name":"정보처리","slug":"정보처리","permalink":"https://gracefullight.dev/tags/%EC%A0%95%EB%B3%B4%EC%B2%98%EB%A6%AC/"}]},{"title":"sublime text를 contextmenu에 추가","slug":"sublime-text-open-contextmenu","date":"2017-03-06T14:11:29.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/03/06/sublime-text-open-contextmenu/","link":"","permalink":"https://gracefullight.dev/2017/03/06/sublime-text-open-contextmenu/","excerpt":"","text":"서브라임 텍스트를 탐색기 우클릭 메뉴에 추가해서 접근성을 높여보자. 설치OpenWithSublime Gist에서 실행파일을 다운로드 받는다.압축 푼 파일을 서브라임 텍스트가 깔려있는 경로에 넣어준다.OpenWithSublime.bat 파일을 실행한다. 확인이제 폴더나 파일을 바로 서브라임 텍스트로 열 수 있다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"sublimetext","slug":"sublimetext","permalink":"https://gracefullight.dev/tags/sublimetext/"}]},{"title":"로드 모바일 초반 공략","slug":"roads-mobile-start","date":"2017-03-02T15:20:54.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/03/02/roads-mobile-start/","link":"","permalink":"https://gracefullight.dev/2017/03/02/roads-mobile-start/","excerpt":"","text":"Roads Mobile 공식 카페 말고는 쉽게 접할 수 있는 올바른 초반 공략이 없어 작성한다.이 게임은 적어도 3 티어 병력이 나올 때부터 시작한다고 봐야한다.주성 17 레벨부터 돌성으로 이미지가 바뀌는데, 이 때부터 3 티어 병력을 뽑을 수 있다.목표를 주성 17 레벨로 잡고 빠르게 성을 성장시켜보자.(가장 빠른 레벨링 방법이며, 이렇게 해도 목표까지 한달정도 소요된다.)무과금 유저도 즐겁게 성을 키울 수 있고 3 티어 병력을 운용하며 전투를 할 수 있다.하지만 4 티어 병력은 현실적으로 불가능하다. 시작가장 먼저 시작해야하며 중요한 공략을 소개한다. 기본 공략성을 생성하면 먼저 주성이 5 레벨이 될 때까지 퀘스트를 완료해가며 성장하면 된다.수정은 VIP 포인트를 구매해 VIP 포인트를 8 레벨까지 만들어준다.다른 용도로 수정을 쓰지 않는다.1 급 부대를 생산하고 1 레벨 자원지를 채집한다.주성 보호막이 풀리는 9 레벨부터는 무조건 피신처에 12 시간씩 영주와 병력을 넣어둔다.연맹에 가입해 가속지원을 주고 받는다.몬스터 연구를 먼저 완료해 몬스터를 사냥하고, 빠르게 성장한다. 이벤트 참여이벤트 &gt; 최근소식 &gt; 시메스터 교수님의 바바리안 학교에서 수정을 받는다.이벤트 &gt; 최근소식 &gt; 송지효가 전하는 봄날의 기쁨에서 수정을 받는다.이벤트 페이지는 여기서 들어갈 수 있다. 건물성, 지교, 연구소 건설을 최우선으로 해준다. 채석장최대한 많이 짓는다. 벌목장최대한 많이 짓는다. 광산최대한 많이 짓는다. 농장3 개를 짓는다.초반에는 3 개, 부족하다 싶으면 중반에는 6 개까지 늘려주고 후반에는 1 개로 줄여준다.쌀이 없어도 병력이 죽는게 아니기 때문에 농장을 적게 짓고 채집으로 커버가 가능하다. 병영1 개만 짓는다.병영이 많아도 훈련속도가 증가하지 않기 때문에 1 개면 충분하다.초반에 병영 2 개를 짓는 퀘스트를 완료해준 뒤 부순다. 장원8 개를 짓는다.골드 및 군영 훈련속도 증가때문에 많이 지어야한다. 치료소8 개를 짓는다.치료 인원을 넘는 부상병은 사망하기 때문에 많이 지어야한다.장원을 먼저 8 개를 채워주고 나머지를 치료소 건설에 투자하면 된다.퀘스트로 짓는 2 개로 운용하다가 군단전 접전을 클리어해 영토가 늘어날 때 8 개로 늘려준다. 연구가속지원을 모두 받으면 모아둔 수정이나 가속 아이템으로 밀어버린다. 경제경제 연구는 수정 채집을 제외한 모든 연구를 마무리 해준다.수정 채집 연구를 비추천하는 이유는 달마다 찾아오는 킹덤클래시(서버간 침략가능) 후 이긴 쪽에 수정 자원지가 나오는데, 1 렙 수정자원지는 겨우 10 수정만 준다. 고레벨 수정자원지는 채집하러가면 맛집되기 십상이다. 방어우선적으로 할 연구가 아니다.성벽은 어차피 침략이 들어오면 벽이아니라 종이에 불과하다.퀘스트를 위해 거마창, 초탑, 철질려 등 함정 연구를 뚫어줄 수 있을 만큼만 업그레이드 하자. 군사첩보술과 급행을 우선적으로 연구해주고, 상위 티어 병사를 뽑을 수 있을 정도로 업그레이드 하자. 몬스터 사냥가장 중요한 연구로 모든 연구를 우선적으로 마무리 한다.몬스터 사냥만이 빠른 레벨업을 할 수 있는 지름길이다.연맹 가입 후 몬스터를 때릴 때마다 아이템을 얻으며, 사냥시 연맹원 모두가 현금 아이템을 구매한 것과 같은 보상을 하나 얻을 수 있다. 방어승급함정 해체술을 배울 정도로만 연구한다. 군사승급급행, 응급처치 및 행군 상한 증대를 배울 정도로만 연구한다. 행군배진이 연구를 올릴 정도면 로드 모바일 공략이 필요 없다. 특성군단과 관련된 특성은 쳐다보지 말자! 1 단계2 레벨을 올리면 다음 특성이 열린다.건설속도 I, 연구속도 I, 골드 생산량 I 에 모두 투자한다. 2 단계5 레벨을 올리면 다음 특성이 열린다.건설속도 II, 연구속도 II, 골드 생산량 II, 채집 속도 II, 군단 무게 II 에 모두 투자한다. 3 단계5 레벨을 올리면 다음 특성이 열린다.골드 생산량 III 에 투자한다. 영웅영웅 맵은 별 3 개가 나오지 않으면 재도전이나 도전 취소를해서 하트를 아껴가며 클리어 해준다. 초반 영웅오스 키퍼나이트 레이븐스톰 세이지스노우 퀸소프라노 중반 영웅고용할 수 있는 시점부터 바로 고용시켜 키워주면 된다.트래커트릭스터라이트 히어로데몬 슬레이어데스나이트라이트 히어로와 데스나이트는 오스 키퍼의 자리를 대신해 서브탱커와 탱커를 담당하고 나머지 영웅은 딜러자리를 대체한다.후반엔 로즈 나이트가 서브탱커 자리를 대신한다.트릭스터는 연구 가속 능력을 가졌기 때문에 영주로 둬야하며 훈장을 통해 가장 먼저 키워야한다.트래커는 스턴기를 가졌고 단일 데미지가 1 위인 영웅이다.라이트 히어로는 스턴기와 가장 체력이 낮은 영웅에게 쉴드를 채워준다.데스나이트는 얼려버리는 스턴기와 많은 체력을 가졌고 죽어도 한 번 더 부활한다.데몬 슬레이어는 후방으로 이동해 암살하며 광역 데미지 궁극기를 가졌다.소프라노는 하나 밖에없는 무과금용 힐러 영웅으로 꼭 키워준다.로즈나이트를 얻을 정도면 이 공략을 볼 필요가 없다. 몬스터 사냥 상세몬스터 사냥은 연맹에 가입해야 시작할 수 있다.여러 대를 한 번에 때리는 것보다 한 대씩 여러 번 때리는 것이 더 데미지가 많이 들어간다.영웅의 레벨도 중요하지만 계급 7을 먼저 올려줘서 모든 스킬을 배우게 해주자.효율상 1 레벨 몬스터만 사냥한다.몬스터마다 방어 종류가 다른데 i 표시를 누르면 확인할 수 있다. 물리 방어마법 영웅으로 사냥한다.스톰 세이지, 인시너레이터, 봄버맨, 엘레멘탈리스트, 스노우 퀸이 주가 되며 없을시 소프라노도 괜찮다. 마법 방어물리 영웅으로 사냥한다.트래커, 트릭스터, 스칼렛 볼트, 데몬 슬레이어, 블랙 크로우가 주가 되며 없을시 데스 나이트도 괜찮다.라이트 히어로는 스킬이 마법피해라 비추천 물리 &amp; 마법 방어물리 영웅으로 사냥하는 것이 더 효율적다. 장비장비는 연구 속도, 건설 속도 장비를 중점적으로 간다. 채집과 사냥을 통해 재료를 얻을 수 있다.다음 장비 외에는 생각도 안하면 된다. 레벨이 안 된다면 영주부터 키우자.투구 : 노세로스 마스크갑옷 : 얼음서리의 일격, 오디세우스의 갑옷신발 : 그리핀의 신발, 살벌한 전장무기 : 거대 공룡의 습격장갑 : 그리핀의 발톱, 절대의 감금장식품 : 달의 피리, 수호의 팔찌 무역선지교 한계치를 넘는 자원은 무역을 통해 **도시락(아이템)**으로 바꿔준다.골드에서 다른 자원으로 교환하는 것이 효율이 좋으므로 많이 바꿔주자. 아레나데스나이트(또는 라이트 히어로), 로즈 나이트, 데몬 슬레이어, 소프라노, 트릭스터(또는 트래커)가 무과금에서 최선의 조합이다. 요약나의 병력은 채집과 수렵을 즐겨야하며 내가 없는 동안은 동굴에서 자야한다.틀렸거나 추가하고 싶은 부분이 있으시면 댓글로 남겨주세요. 반영하겠습니다.","categories":[{"name":"game","slug":"game","permalink":"https://gracefullight.dev/categories/game/"}],"tags":[{"name":"game","slug":"game","permalink":"https://gracefullight.dev/tags/game/"}]},{"title":"Angular2 with angular-cli","slug":"Angular2-with-angular-cli","date":"2017-02-23T14:30:24.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/02/23/Angular2-with-angular-cli/","link":"","permalink":"https://gracefullight.dev/2017/02/23/Angular2-with-angular-cli/","excerpt":"","text":"앞서지난시간에는 Angular with Webpack으로 ng2 의 기본 실행 틀에 대해 알아봤다.매번 이렇게 세팅을하려면 아무도 ng2 를 쉽게 사용하지 못할 것이다.버전별 충돌문제도 해결해야되고 컴포넌트를 생성할 때마다 주입해줘야되고 third party 라이브러리를 쓸 때는 typings 를 사용해 타입 인터페이스를 넣어줘야하고 웹팩 로더에 대한 정보도 찾아봐야하며… (지난시간에 해봤던 것)이걸 모두 해결한 정말 멋진 모듈인 Angular-cli 로 ng2 project 를 시작해보자. 설치Angular-cli를 참조해도 되지만 하나씩 해보자.먼저 npm 으로 angular/cli 를 전역으로 설치한다.1$ npm install -g @angular/cli설치가 완료되면 ng 라는 명령어를 사용할 수 있다.1$ ng --version 프로젝트 생성ng new 프로젝트명 명령어로 프로젝트를 생성하면 된다.123$ ng new 프로젝트명$ ng new ng2-cli-test --routing–routing 명령어는 기본으로 angular 라우팅을 app module 에 넣어준다.angular routing 을 사용하지 않을 경우 옵션을 제외시키면 된다. 프로젝트 실행생성한 프로젝트로 이동해 프로젝트를 실행해보자 패키지 설치12# cd ng-cli-test$ npm install1~3 분정도 걸리니 느긋하게 기다리면 된다. 웹서버 실행123$ npm start# 또는$ ng serveng2-cli 는 기본 포트 4200 을 사용한다.이 포트가 사용 중이라면 --port 옵션으로 포트를 변경해주면 된다.package.json 을 열어 start 명령어 실행시 브라우져가 바로 뜨게 --open 옵션을 주자.package.json123456789101112&#123; \"name\": \"ng2-cli-test\", \"version\": \"0.0.0\", \"license\": \"MIT\", \"angular-cli\": &#123;&#125;, \"scripts\": &#123; \"ng\": \"ng\", \"start\": \"ng serve --open\", ... &#125;, ...&#125;자세한 옵션은 여기서 확인할 수 있다.쉽게 실행되었다! 컴포넌트 추가컴포넌트도 쉽게 생성할 수 있다.123$ ng generate component 컴포넌트명$ ng g c 컴포넌트명ng g c sub 명령어로 서브 컴포넌트를 생성해보자.서브라는 폴더로 ng2 컴포넌트 명명 규칙에 맞게 예쁘게 생성되었다.app.module.ts를 확인해보면 자동으로 import 가 되어있다.src/app/app.module.ts12345678910...import &#123; SubComponent &#125; from './sub/sub.component';@NgModule(&#123; declarations: [ AppComponent, SubComponent ], ...&#125;)정말 영롱하다.자세한 generate component 옵션은 여기서 확인할 수 있다. 라우팅이제 app-routing.module.ts 파일을 열어 sub.component 로 라우팅이 되게 해보자.src/app/app-routing.module.ts1234567891011121314151617181920import &#123; NgModule &#125; from \"@angular/core\"import &#123; Routes, RouterModule &#125; from \"@angular/router\"// 서브 컴포넌트 importimport &#123; SubComponent &#125; from \"./sub/sub.component\"// sub로 접속시 SubComponent 사용const routes: Routes = [ &#123; path: \"\", children: [] &#125;, &#123; path: \"sub\", component: SubComponent &#125;]@NgModule(&#123; imports: [RouterModule.forRoot(routes)], exports: [RouterModule], providers: []&#125;)export class AppRoutingModule &#123;&#125;메인 컴포넌트의 뷰를 수정한다.src/app/app.component.html123456&lt;h1&gt; &#123;&#123;title&#125;&#125;&lt;/h1&gt;&lt;a routerLink=\"\"&gt;home&lt;/a&gt;&lt;a routerLink=\"/sub\"&gt;sub page&lt;/a&gt;&lt;router-outlet&gt;&lt;/router-outlet&gt;브라우저에서 확인해보자.subpage 버튼 링크를 클릭시 sub work! 라는 sub component 의 뷰가 보이는 것을 확인 할 수 있다.ng2 의 routing 은 router-outlet directive 바로 다음에 생성된다. 라이브러리 polyfills하위 버전 브라우저를 위해 polyfills 를 활성화 해준다.polyfils.ts의 core-js/es6 구문들의 주석을 해제만 해주면 된다. global script전역에서 사용해야할 스크립트가 있다면 .angular-cli.json 파일의 apps.scripts 안에 넣어주면 된다.angular-cli.json123456789&#123; ... \"apps\":[&#123; \"scripts\": [ \"../node_modules/jquery/dist/jquery.js\", \"../node_modules/hammerjs/hammer.min.js\" ] &#125;]&#125; global cssglobal script 와 마찬가지로 angular-cli.json 에 넣는 방식이 있지만src/style.css에 import 방식으로 넣어줘도 된다.src/style.css12/* You can add global styles to this file, and also import other style files */@import \"~https://fonts.googleapis.com/icon?family=Material+Icons\"; third partythird party library 를 사용해야한다면 라이브러리와 @types 를 설치해 사용하고 싶은 컴포넌트에서 import 구문으로 사용하면 된다.12$ npm install lodash --save$ npm install @types/lodash --save-devany.component.ts1import * as _ from \"lodash\" 빌드웹 브라우저에서 실행할 수 있게 프로젝트를 빌드해보자.123$ ng build# minify 옵션 추가$ ng build --prod빌드를 실행하면 .angular-cli.json 파일에 있는 root 와 outDir 경로를 이용해 진행된다. 여담이번 시간을 통해 로컬에 ng2 프로젝트를 쉽게 생성하고, 관리할 수 있게 되었습니다.👏👏👏 고생하셨습니다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"angular","slug":"javascript/angular","permalink":"https://gracefullight.dev/categories/javascript/angular/"}],"tags":[{"name":"angular","slug":"angular","permalink":"https://gracefullight.dev/tags/angular/"},{"name":"webpack","slug":"webpack","permalink":"https://gracefullight.dev/tags/webpack/"}]},{"title":"Hyper-V를 사용한 VM 실행","slug":"virtual-machine-using-hyper-v","date":"2017-02-23T04:53:08.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/02/23/virtual-machine-using-hyper-v/","link":"","permalink":"https://gracefullight.dev/2017/02/23/virtual-machine-using-hyper-v/","excerpt":"","text":"윈도우에서 테스트용으로 사용할 서버가 필요하다.Ubuntu, CentOS 환경을 구축한다던지, 여러 서버 프로그램을 테스트해본다던지…가장 유명한 프로그램은 VMware이지만 유료이다. VirtualBox도 있지만 느리다.그렇다면 다른 대안이 무엇이 있을까?바로 Windows10을 쓰고 있다면 사용할 수 있는 Hyper-V 가상화 기술이다. (아쉽지만 Home Edition은 지원하지 않는다.)속도면에서 느리지는 않을까? 서버 실행에 가장 많은 부하를 주는 I/O의 테스트 결과가 있다. Hyper-V 설정 지원 확인cmd 또는 powershell을 열어 systeminfo.exe를 실행하자.1$ systeminfo.exe결과 화면 중 아래 부분에Hyper-V 요구사항VM 모니터 모드 확장 : 예펌웨어 가상화 사용: 예두 번재 수준 주소 변환: 예데이터 실행 방지 사용 가능: 예처럼 표시되면 Hyper-V를 지원하는 컴퓨터이다.그렇지 않다면 재부팅 후 BIOS로 접근해 Advanced 탭으로 이동한 후 옵션을 켜준다.Intel Virtualization Technology 기능을 활성화VT-d 옵션 활성화 (있는 경우) 활성화제어판 &gt; 프로그램 및 기능 &gt; Windows 기능 켜기/끄기 메뉴로 이동한다.Hyper-V 관련 기능을 체크해주고 확인 버튼을 눌러 다시 시작하자. 가상 컴퓨터 실행 CentOS 다운로드CentOS 7 이미지를 다운로드 받는다.kakao mirror를 이용해도 된다. 가상 네트워크 생성시작 &gt; Hyper-V 검색 &gt; Hyper-V 관리자로 이동한다.가상 스위치 관리자 &gt; 외부 &gt; 가상 스위치 만들기 버튼으로 가상 스위치를 생성한다.생성 후 이름 변경 및 연결할 외부 네트워크를 선택해주자. 가상 컴퓨터 생성새로만들기 &gt; 가상 컴퓨터 버튼을 클릭해 가상 컴퓨터 마법사로 가상 머신을 생성한다.2세대로 생성해주자.네트워킹 구성 탭에서는 금방 만들었던 가상 네트워크를 선택한다.가상 하드디스크 연결 탭에서는 물리적으로 어디에 저장할지 선택해준다.설치 옵션 탭에서는 다운받았던 CentOS 이미지 파일을 선택한다. 보안 부팅 해제생성된 가상 컴퓨터의 옵션 &gt; 보안 부팅 탭에서 보안 부팅 사용 체크박스를 해제한다.보안 부팅은 권한 없는 펌웨어, 운영 체제 또는 UEFI 드라이버(옵션 ROM)가 부팅 시 실행되지 않도록 하는 기능인데 켜주면 오류가 발생한다. 실행만들어진 가상컴퓨터를 실행해 CentOS 설치를 진행하면 된다!설치가 다 되고 쉘이 보이면 네트워크 서비스를 실행한다.123456$ vi /etc/sysconfig/network-scripts/ifcfg-eth0# onboot 속성을 yes로 변경해준다.ONBOOT=yes$ service network start이제 yum을 활용해 서버를 구성하는 일만 남았다. 오류잘 실행되던 가상서버가 하이퍼바이저가 실행되고 있지 않으므로 가상 컴퓨터를 시작할 수 없습니다 라는 오류를 뱉으며 실행이 되지 않을 경우 CMD 창에서 아래 명령어를 날리고 재부팅을 한다.1$ bcdedit /set hypervisorlaunchtype auto","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"hyperv","slug":"hyperv","permalink":"https://gracefullight.dev/tags/hyperv/"}]},{"title":"연속된 번호 카운트 알고리즘","slug":"count-sequence-number","date":"2017-02-19T08:33:38.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/02/19/count-sequence-number/","link":"","permalink":"https://gracefullight.dev/2017/02/19/count-sequence-number/","excerpt":"","text":"연번 체크 알고리즘이라고도 하는 것 같다.통계 또는 비밀번호의 연속성을 체크하기 위해 필요할 때가 있다.비밀번호 연속성 체크에는 target[j]의 데이터를 charCodeAt 을 붙여 처리하면 된다. 소스123456789101112131415161718192021222324252627282930function checkSequnceNumbers(target, counterLength = 6) &#123; // under es6 // let sequentialCounter = Array.apply(null, Array(counterLength)).map(Number.prototype.valueOf,0); let sequentialCounter = new Array(counterLength).fill(0) let count = 0 for (let i = 0, len = target.length; i &lt; len; i++) &#123; let subCount = 0 for (let j = 1; j &lt; len; j++) &#123; if (target[j] === target[i] + 1) &#123; subCount = subCount + 1 &#125; else &#123; continue &#125; &#125; count = count + subCount if (subCount === 0) &#123; sequentialCounter[count] = sequentialCounter[count] + 1 count = 0 &#125; &#125; return sequentialCounter&#125;let target = [1, 2, 3, 5, 6, 7, 8, 10, 11, 13, 16, 17]console.log(checkSequnceNumbers(target))// =&gt; [1, 2, 1, 1, 0, 0] 설명n 과 n+1… n+n-1 을 비교해서 카운트한다.결과는 sequentialCounter 배열에 각 포지션에 들어간다.2 연속 숫자 1 개가 있다면 sequentialCounter[2] = 1; 여담왜 이런걸 공유를 안할까?","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"Ubuntu에서 timezone 변경","slug":"Ubuntu-change-timezone","date":"2017-02-14T16:46:18.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/02/14/Ubuntu-change-timezone/","link":"","permalink":"https://gracefullight.dev/2017/02/14/Ubuntu-change-timezone/","excerpt":"","text":"Ubuntu 설치시 다른 국가로 되어있는 시간대를 바꿔야한다. 실행1$ tzselect명령어를 실행하면 아래처럼 번호를 선택할 수 있다.1234567891011121314Please identify a location so that time zone rules can be set correctly.Please select a continent, ocean, \"coord\", or \"TZ\". 1) Africa 2) Americas 3) Antarctica 4) Asia 5) Atlantic Ocean 6) Australia 7) Europe 8) Indian Ocean 9) Pacific Ocean10) coord - I want to use geographical coordinates.11) TZ - I want to specify the time zone using the Posix TZ format.#? 44번 아시아를 선택하면 국가 선택지가 나온다.12345678910111213141516171819Please select a country whose clocks agree with yours. 1) Afghanistan 18) Israel 35) Palestine 2) Armenia 19) Japan 36) Philippines 3) Azerbaijan 20) Jordan 37) Qatar 4) Bahrain 21) Kazakhstan 38) Russia 5) Bangladesh 22) Korea (North) 39) Saudi Arabia 6) Bhutan 23) Korea (South) 40) Singapore 7) Brunei 24) Kuwait 41) Sri Lanka 8) Cambodia 25) Kyrgyzstan 42) Syria 9) China 26) Laos 43) Taiwan10) Cyprus 27) Lebanon 44) Tajikistan11) East Timor 28) Macau 45) Thailand12) Georgia 29) Malaysia 46) Turkmenistan13) Hong Kong 30) Mongolia 47) United Arab Emirates14) India 31) Myanmar (Burma) 48) Uzbekistan15) Indonesia 32) Nepal 49) Vietnam16) Iran 33) Oman 50) Yemen17) Iraq 34) Pakistan#? 23국가를 선택 후 마지막으로 확인을 해주면12345678910111213141516The following information has been given: Korea (South)Therefore TZ=\\'Asia/Seoul\\' will be used.Local time is now: Tue Feb 14 23:04:10 KST 2017.Universal Time is now: Tue Feb 14 14:04:10 UTC 2017.Is the above information OK?1) Yes2) No#? 1...Here is that TZ value again, this time on standard output so that youcan use the /usr/bin/tzselect command in shell scripts:Asia/Seoul성공적으로 반영되었다. 확인12$ dateTue Feb 14 23:04:21 KST 2017","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"ubuntu","slug":"server/ubuntu","permalink":"https://gracefullight.dev/categories/server/ubuntu/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"ubuntu","slug":"ubuntu","permalink":"https://gracefullight.dev/tags/ubuntu/"}]},{"title":"PHP에서 HTML tag 사이의 문자 가져오기","slug":"php-get-text-between-tags","date":"2017-02-13T06:00:14.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/02/13/php-get-text-between-tags/","link":"","permalink":"https://gracefullight.dev/2017/02/13/php-get-text-between-tags/","excerpt":"","text":"PHP 로 페이지를 크롤링한 후 HTML tag 안의 데이터가 필요할 때 함수 하나로 해결할 수 있다. 소스12345678910111213141516171819202122232425262728&lt;?php/** * [splitBetweenStr 텍스트 사이의 문자열을 배열로 반환] * @param [string] $str [전체 문자열] * @param [string] $startWord [찾을 시작 문자열] * @param [string] $endWord [찾을 종료 문자열] * @return [array] [텍스트 사이의 문자열 배열] * * ex) splitBetweenStr('&lt;br&gt;hi&lt;/br&gt;&lt;b&gt;test&lt;/b&gt;&lt;br&gt;graceful_light&lt;/br&gt;', '&lt;br&gt;', '&lt;/br&gt;') * =&gt; ['hi', 'graceful_light'] */function splitBetweenStr($str, $startWord, $endWord) &#123; for ($i=0, $len=strlen($str); $i&lt;$len; $i++) &#123; $target = substr($str,$i); $prevStartIdx = strpos($target, $startWord); $startIdx = $prevStartIdx + strlen($startWord); $endIdx = strpos(substr($target, $startIdx), $endWord); if ($prevStartIdx===false || $endIdx===false) &#123; break; &#125; else &#123; $betweenStrings[] = substr($target, $startIdx, $endIdx); $i += $startIdx + $endIdx + strlen($endWord) - 1; &#125; &#125; return $betweenStrings;&#125; 여담물론 다른 크롤러 라이브러리를 사용하는게 속편하다.호스팅 환경에서는 유용하게 사용할 수 있다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"npm 업데이트시 npm 폴더가 사라졌을 때","slug":"npm-version-update","date":"2017-02-06T10:46:53.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/02/06/npm-version-update/","link":"","permalink":"https://gracefullight.dev/2017/02/06/npm-version-update/","excerpt":"","text":"npm으로 npm의 버전을 업데이트 할 때의 명령어는 다음과 같다.1$ npm install -g npm업데이트 명령 실행 후 오류가 발생한 뒤 npm 명령어가 없다는 경우가 생길 수 있다.당황하지 말고 아래 명령어를 실행한다.12345# 캐시 강제 삭제$ npm cache clean -f# npm 다운로드$ curl http://npmjs.org/install.sh | sh다시 npm이 설치되어 npm 명령어를 실행할 수 있다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"}]},{"title":"Angular2 with Webpack","slug":"Angular2-with-Webpack","date":"2017-02-06T05:54:06.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/02/06/Angular2-with-Webpack/","link":"","permalink":"https://gracefullight.dev/2017/02/06/Angular2-with-Webpack/","excerpt":"","text":"앞서정말 angular2 를 배우고 싶었다.대세는 angular2 와 react 가 되었지만 angular2 를 선택한건 angular1 에 반했었고 구글이기 때문이었다.근데 angular2 를 사용하려면 typescript 를 알아야하고, systemjs 또는 webpack 을 알아야하며 rxjs, corejs, zonejs, karma, e2e 등 새로운 기술을 너무 많이 알아야되었다.대부분이 여기서 좌절(?)해 react 나 vue 로 가려고 하는 것 같다.러닝 커브가 상당했던 이유는 이러했다.angular2 의 포스트는 이론만 많았다.실전을 찾으면 버전이 알파 또는 베타 버전이라 현재와는 호환이 안된다.설치법은 알려주지도 않는다. (다 nodejs 개발자라 생각하는 것 같다.)어떤 패키지가 무슨 기능에 사용되는지 하나도 알려주지 않는다.심지어 공식 홈페이지의 starter-kit 을 clone 하면 오만가지의 테스팅 모듈도 다 딸려와 정신이 혼미하다.2016 년에 자바스크립트를 배우는 기분은 대부분이 이런 것 같다.하나하나 차근차근 알아가며 angular2 로 빠져보자. npm먼저 angular2 (이하 ng2)는 npm 으로 설치를 해야한다.npm 이 무엇인가?bower, composer, maven 같은 패키지 다운로드 매니저이다.더 쉽게 말하면 자바스크립트 라이브러리를 다운로드하고 관리해주는 프로그램이라 생각하자.nodejs 다운로드에서 맞는 윈도우 버전을 다운로드해 설치하자. package.jsonnpm 으로 자바스크립트 라이브러리를 다운받기 위해선 package.json(설정파일)이 필요하다.원하는 위치에 폴더를 만들자. (D:\\workspace\\ng-test)그리고 package.json 파일을 폴더 하위에 만든다.package.json123456789101112131415161718&#123; \"name\": \"ng2-webpack-start\", \"version\": \"0.1.0\", \"dependencies\": &#123; \"@angular/common\": \"^2.4.6\", \"@angular/compiler\": \"^2.4.6\", \"@angular/core\": \"^2.4.6\", \"@angular/forms\": \"^2.4.6\", \"@angular/http\": \"^2.4.6\", \"@angular/platform-browser\": \"^2.4.6\", \"@angular/platform-browser-dynamic\": \"^2.4.6\", \"@angular/router\": \"^3.4.6\", \"core-js\": \"^2.4.1\", \"reflect-metadata\": \"^0.1.9\", \"rxjs\": \"^5.1.0\", \"zone.js\": \"^0.7.6\" &#125;&#125; 설명name : 프로젝트의 이름version : 버전 기법에 맞게 원하는대로 적는다.dependencies : ng2 프로젝트에 사용할 js library 의 이름과 버전을 적는다.@angular/common : ng2 의 기본 모듈@angular/compiler : ng2 의 template 을 위해 필요한 모듈@angular/core : ng2 의 기본 모듈@angular/forms : ng2 로 form 을 다루기 위한 모듈@angular/http : 비동기 서버 통신을 위한 모듈@angular/platform-browser : ng2 를 브라우저로 표시하기 위한 모듈@angular/platform-browser-dynamic : ng2 를 브라우저로 표시하기 위한 모듈@angular/router : 라우팅 기능 모듈core-js : js 의 최신 문법을 사용하기 위함reflect-metadata : metadata 문법을 사용하기 위함rxjs : observables 기능을 사용하기 위함zone.js : async 함수의 도착 지점을 알기 위함ng2 의 기능들과 그 기능을 하위버전 브라우저에서도 사용하기 위한 라이브러리들을 포함했다. 설치프로젝트에서 쉘을 실행시켜 설치를 진행하자.1$ npm installnode_modules 폴더가 생성된 걸 확인할 수 있다. Hello Worldsrc 라는 폴더를 새로 만든다. (D:\\workspace\\ng-test\\src)index.html 과 main.ts 파일을 생성한다. index.htmlindex.html123456789&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Hi Angular2&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;main&gt;Loading...&lt;/main&gt;&lt;/body&gt;&lt;/html&gt; main.tsmain.ts 는 ng2 의 기능을 하나로 통합시켜주는 시작 스크립트이다.main.ts12345678import \"core-js\"import \"reflect-metadata\"import \"zone.js/dist/zone\"import &#123; platformBrowserDynamic &#125; from \"@angular/platform-browser-dynamic\"import &#123; AppModule &#125; from \"./app/app.module\"platformBrowserDynamic().bootstrapModule(AppModule) app.module.tssrc 밑에 app 폴더를 만든다.src\\app\\ 아래에 app.module.ts 파일을 생성한다.(D:\\workspace\\ng-test\\src\\app\\app.module.ts)app.module.ts12345678910import &#123; BrowserModule &#125; from \"@angular/platform-browser\"import &#123; NgModule &#125; from \"@angular/core\"import &#123; AppComponent &#125; from \"./app.component\"@NgModule(&#123; imports: [BrowserModule], declarations: [AppComponent], bootstrap: [AppComponent]&#125;)export class AppModule &#123;&#125;이 파일은 ng2 에서 어떤 모듈을 사용할지 알려준다. 설명imports : 이 모듈에 필요한 다른 모듈declarations : 모듈에 속하는 뷰 클래스, 앵귤러에는 components, directives, pipes 라는 세가지 뷰 클래스가 있다.bootstrap : 메인 Component 지정 (root 모듈만 지정해야함)컴포넌트란 무엇인가?컴포넌트는 화면(뷰)를 제어하는 자바스크립트 클래스이다. app.component.tsapp.module.ts 에서 사용할 메인 컴포넌트를 생성하자.app.component.ts123456789import &#123; Component &#125; from \"@angular/core\"@Component(&#123; selector: \"main\", template: ` &lt;h1&gt; Hello World &lt;/h1&gt; `&#125;)export class AppComponent &#123;&#125; 설명selector : 어떤 위치에 삽입할지 attribute 이름을 적는다.template : 어떤 템플릿을 사용할지 ` 기호를 사용해 적는다.여기까지가 ng2 의 가장 기본적인 틀이다.이제 실행을 하기 위해 만만치 않은 작업이 남았다. TypeScriptng2 는 typescript 를 주 언어로 사용한다. typescript 는 javascript 의 상위 집합이다.상위집합이란 말이 어렵다면… 그냥 javascript 랑 똑같다고 생각해도 된다.똑같이 코딩해도 된다. 거기에 java 처럼 type 을 곁들여 코드를 짤 수 있다.하지만 브라우저에서 실행하려면 javascript 로 compile 을 해줘야한다.쉽게 java(ts)로 짜고 class(js)로 컴파일해야 실행되는 구조라 이해하자.그러기 위해 몇가지 라이브러리를 npm 에서 추가로 설치해줘야한다.12# 타입스크립트 다운로드$ npm install --save-dev typescript위 명령어를 실행하면 개발버전(save-dev)으로 typescript 라이브러리가 설치된다.package.json 을 보면 devDependencies 옵션 밑에 의존성이 추가 된 것을 볼 수 있다. tsconfig.jsontypescript 를 javascript 로 컴파일하기 위해 기본 옵션을 설정해줘야한다.root 에 tsconfig.json 파일을 만들자.tsconfig.json1234567&#123; \"compilerOptions\": &#123; \"target\": \"es5\", \"experimentalDecorators\": true, \"emitDecoratorMetadata\": true &#125;&#125;target : javascript es5 버전으로 컴파일을 한다.experimentalDecorators : 데코레이터 기능을 사용하기 위해 true 로 설정한다.emitDecoratorMetadata : 데코레이터 기능을 사용하기 위해 true 로 설정한다.여기까지가 ng2 의 typescript 기본 설정이다. compile아래 명령어를 실행한다.1$ $(npm bin)/tsc --rootDir src --outDir dist실행이 되고 dist 폴더 아래 typescript 가 javascript 로 컴파일된 게 보인다.근데 아직까진 여러 오류가 보인다.es6 의 기능을 사용할 수 없다는 오류인데 우리에겐 core-js 라이브러리가 있으니 typescript 에 core-js 를 사용하고 있다고 알려주자. typings라이브러리를 사용하고 있다고 알려주기 위해선 typings 를 설치해야한다.1$ npm install --save-dev typings core-jscore-js 에 type 이 들어간 interface 를 typings 로 추가한다.1$ $(npm bin)/typings install --global --save dt~core-jstypings 폴더와 typings.json 파일이 추가된 것을 확인할 수 있다.다시 컴파일을 해보면 오류 없이 js 로 컴파일 된다. custom scripts매번 $(npm bin)/… 명령어를 치기는 너무 귀찮다.package.json 을 열어 명령어를 줄인 script 기능을 사용해보자.123456789&#123; &quot;name&quot;: &quot;ng2-webpack-start&quot;, &quot;version&quot;: &quot;0.1.0&quot;, &quot;scripts&quot;: &#123; &quot;build&quot;: &quot;tsc --rootDir src --outDir dist&quot;, &quot;postinstall&quot;: &quot;typings install&quot; &#125; ...&#125;이렇게 추가하면 쉘에서 npm run build 명령어로 컴파일을 할 수 있다.또한 postinstall 스크립트를 활성화하면 npm install 명령어 후에 바로 postinstall 명령어가 실행되어 한 번에 typings 모듈까지 설치를 할 수 있다.…/dist/main.js 를 index.html 에 추가하고 브라우저에서 열어보자.index.html12345678910&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Hi Angular2&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;main&gt;&lt;/main&gt; &lt;script src=\"../dist/main.js\"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;index.html 을 열면 아래와 같은 오류가 나온다.이 오류는 commonjs 환경이 아니여서 발생한다.commonjs 는 무엇인가?nodejs 와 같이 require 함수를 사용해 javascript 를 가져오는(import) 환경을 말한다.해결하기 위해 Webpack 을 설치하자. WebpackWebpack 은 무엇인가?내가 원하는 모든 파일을 하나의 javascript 파일로 불러올 수 있게 하는 모듈 번들러다. 설치1$ npm install --save-dev webpackwebpack 이 typescript 파일을 로드하기 위해선 typescript loader 모듈을 설치해줘야한다. typescript-loader1$ npm install --save-dev awesome-typescript-loader설치 후에 tsconfig.json 파일을 열어 webpack 을 사용한다는 옵션을 줘야한다.tsconfig.json12345678910&#123; \"compilerOptions\": &#123; \"target\": \"es5\", \"experimentalDecorators\": true, \"emitDecoratorMetadata\": true &#125;, \"awesomeTypescriptLoaderOptions\": &#123; \"useWebpackText\": true &#125;&#125; 설정root 에 webpack.config.js 파일을 만들자.webpack.config.js123456789101112131415161718192021222324var webpack = require(\"webpack\")var path = require(\"path\")module.exports = &#123; entry: \"./src/main.ts\", output: &#123; path: path.resolve(__dirname, \"./dist\"), filename: \"app.bundle.js\" &#125;, plugins: [ new webpack.ContextReplacementPlugin( /angular(\\\\|\\/)core(\\\\|\\/)src(\\\\|\\/)linker/, path.resolve(__dirname, \"./src\"), &#123;&#125; ) ], module: &#123; loaders: [&#123; test: /\\.ts$/, loaders: [\"awesome-typescript-loader\"] &#125;] &#125;, resolve: &#123; extensions: [\".ts\", \".js\"], modules: [path.resolve(__dirname, \"node_modules\")] &#125;&#125; 설명entry : 웹팩이 읽을 파일output : 어디로 파일을 내보낼지plugins : 어느 추가 플러그인을 사용할지module : 파일을 가져오는데 어떤 모듈을 사용할지resolve : 모듈을 어디서 찾을지plugins 에 angular 설정을 주지 않으면 오류가 발생한다. 실행package.json 에서 build script 를 변경한다.package.json123456789&#123; \"name\": \"ng2-webpack-start\", \"version\": \"0.1.0\", \"scripts\": &#123; \"build\": \"webpack --progress\" ... &#125; ...&#125;dist 폴더를 삭제한 뒤 빌드 스크립트를 실행한다.1234567# 쉘에서$ rm -rf dist# 터미널에서$ rmdir dist# 빌드 실행$ npm run builddist/app.bundle.js 가 생성된 것을 확인할 수 있다.index.html 에서 app.bundle.js 를 가져오게 추가한 뒤 실행해보자 구조현재까지의 폴더 구조는 이렇다. webpack-dev매번 컴파일할 수 없으니 자동으로 컴파일이 되고 브라우저로 볼 수 있게 해보자. 설치webpack-dev-server와 html-webpack-plugin을 설치한다.12$ npm install --save-dev webpack-dev-server$ npm install --save-dev html-webpack-plugin html-webpack-pluginwebpack.config.js에 html plugin 설정을 추가한다.webpack.config.js12345678910111213141516171819var webpack = require('webpack');var path = require('path');// 여기를 추가var HtmlWebpackPlugin = require('html-webpack-plugin');module.exports = &#123; ... plugins: [ new webpack.ContextReplacementPlugin( /angular(\\\\|\\/)core(\\\\|\\/)src(\\\\|\\/)linker/, path.resolve(__dirname, './src'), &#123;&#125; ), // 여기를 추가 new HtmlWebpackPlugin(&#123; template: './src/index.html' &#125;) ], ...index.html 에서 스크립트 삽입부분을 지운다.index.html123456789&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Hi Angular2&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;main&gt;&lt;/main&gt;&lt;/body&gt;&lt;/html&gt; webpack-dev-serverpackage.json 에 start 스크립트를 추가한다.package.json1\"start\": \"webpack-dev-server --inline --progress\" 실행1234# 다시 빌드$ npm run build# 서버 시작$ npm start다시 빌드하면 dist/index.html 이 생성되고 webpack 이 생성해준 script 가 자동으로 들어가 있는걸 확인할 수 있다.dist/index.html123456789&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Hi Angular2&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;main&gt;&lt;/main&gt;&lt;script type=\"text/javascript\" src=\"app.bundle.js\"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;서버를 시작하고 localhost:8080/dist/index.html 로 접속해보자.localhost:8080으로 접속해도 동일한 화면이 보인다.이제 app.component.ts 에서 Hello World 구문을 조금 수정해보자.바로 반영되어 브라우저에 보여지는 걸 확인할 수 있다. 여담이로써 ng2-webpack 기본틀이 완성되었습니다.github에서 통소스를 보실 수 있습니다.css-loader, style-loader, file-loader, template-loader 등 webpack 에 로더 플러그인을 더 추가해야 실서비스에 사용할 수 있습니다.Angular2 with Angular-cli로 이어집니다.👏👏👏 고생하셨습니다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"angular","slug":"javascript/angular","permalink":"https://gracefullight.dev/categories/javascript/angular/"}],"tags":[{"name":"angular","slug":"angular","permalink":"https://gracefullight.dev/tags/angular/"},{"name":"webpack","slug":"webpack","permalink":"https://gracefullight.dev/tags/webpack/"}]},{"title":"cURL error 60 SSL certificate problem","slug":"cURL-SSL-certificate-problem","date":"2017-02-02T14:50:09.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/02/02/cURL-SSL-certificate-problem/","link":"","permalink":"https://gracefullight.dev/2017/02/02/cURL-SSL-certificate-problem/","excerpt":"","text":"window localhost php 에서 cURL 함수 사용시cURL error 60: SSL certificate problem…으로 시작하는 오류가 발생할 때가 있다. 해결 키 다운로드root certificate bundle을 다운로드 받아 php 하위 경로로 넣어준다. 등록php.ini에서 키를 추가한다.php.ini1234[curl]; A default value for the CURLOPT_CAINFO option. This is required to be an; absolute path.curl.cainfo = D:/php7/extras/ssl/cacert.pem 참조PHP cURL error code 60","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"Nginx for Windows - 3. Virtual Host","slug":"Nginx-for-Windows-with-VirtualHost","date":"2017-02-02T09:58:59.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/02/02/Nginx-for-Windows-with-VirtualHost/","link":"","permalink":"https://gracefullight.dev/2017/02/02/Nginx-for-Windows-with-VirtualHost/","excerpt":"","text":"Nginx - 2. PHP 연동에서 이어집니다. 설정conf\\nginx.conf 파일에서 쉽게 추가가 가능하다.nginx.conf12345678910111213141516171819202122232425262728293031http &#123; # 기존에 있던 default 설정 server &#123; ... &#125; # 이렇게 server 구문을 하나 더 추가한다. server &#123; listen 8000; # 서버 주소 server_name local.test.com; index index.php; # 서버 경로 root D:/workspace/testphp/; location / &#123; try_files $uri /index.php$is_args$args; &#125; # php 사용을 개별로 추가해야한다. location ~ \\.php$ &#123; try_files $uri =404; fastcgi_split_path_info ^(.+\\.php)(/.+)$; fastcgi_pass 127.0.0.1:9123; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; &#125; &#125; ...&#125;위 소스는 index.php를 라우터로 사용하기 위해 설정되었으므로,17, 22, 23줄의 구문은 없어도 된다. Host 파일 수정Apache Virtual Host 설정 문서의 Host 파일 수정 메뉴를 따라 진행하면 된다. 연동 확인nginx 서비스를 재시작하고 확인한다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"nginx","slug":"server/nginx","permalink":"https://gracefullight.dev/categories/server/nginx/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"nginx","slug":"nginx","permalink":"https://gracefullight.dev/tags/nginx/"}]},{"title":"Nginx for Windows - 2. PHP 연동","slug":"Nginx-for-Windows-with-PHP","date":"2017-02-02T02:43:37.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/02/02/Nginx-for-Windows-with-PHP/","link":"","permalink":"https://gracefullight.dev/2017/02/02/Nginx-for-Windows-with-PHP/","excerpt":"","text":"Nginx 설치에서 이어집니다.Nginx를 설치했으니 PHP와 연동을 해보자. 설치이전 포스트로 대체한다.Apache버전은 상관이 없으니 x64 Thread Safe 버전으로 3번까지만 따라서 설치하면된다. 연동 nginx 설정Nginx 폴더에서 conf/nginx.conf를 수정한다.123456789101112131415161718192021222324252627http &#123; ... server &#123; ... location / &#123; root html; # index.php를 추가 index index.html index.htm index.php; &#125; ... # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # 이 부분 주석을 모두 제거해준다. location ~ \\.php$ &#123; root html; # nginx에서 9123포트를 추천한다. fastcgi_pass 127.0.0.1:9123; fastcgi_index index.php; # SCIPRT를 $document_root 로 변경 fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; &#125; ... &#125;&#125; php-cgi 설정nssm을 사용하는 방법과 배치 파일을 만드는 방법이 있는데 전자를 추천한다.bat 파일은 nginx restart를 할 때마다 따로 실행해줘야한다.다른 포스팅에는 php-cgi 서비를 cmd에서 sc create 명령어를 사용하여 등록하는 부분이 있는데 windows10 환경에서 서비스가 1053 오류를 뱉으며 죽는다.시간 낭비하지 말자. nssmnginx에 지난 스텝에서 설치한 nssm을 사용한다.nginx\\nssm\\win64 폴더로 이동해 php 등록 커맨드를 입력한다.1./nssm.exe install phpphp-cgi 경로를 선택한 뒤 아래 명령어를 Arguments 필드에 넣어준다.12# 경로를 알맞게 수정해주자.D:\\php7\\php-cgi.exe -b 127.0.0.1:9123 -c D:\\php7\\php.ini서비스를 실행한다.실행이 안되는 경우arguments에 앞의 경로를 제거하고 -b 127.0.0.1:9123 -c D:\\php7\\php.ini 만 입력해준다. bat배치 파일을 만들어 nginx가 실행 되기전만 php-cgi를 킬 수도 있다.1234@ECHO OFFECHO Starting PHP CGI...set PATH=D:\\php7;%PATH%D:\\php7\\php-cgi.exe -b 127.0.0.1:9123 -c D:\\php7\\php.ini위 소스의 경로를 알맞게 수정한 뒤 start-php-cgi.bat으로 저장 후 실행한다. 확인**nginx\\html\\**에 index.php를 만든다.index.php12&lt;?phpphpinfo();localhost:88/index.php로 접속한다. 여담한 방에 설치하는 방법도 있지만 현재 버전까지는 C:\\말고 D:\\에 php를 설치한 사람에 대한 배려는 없다. (bat 파일을 건드려봐도 dll 안에 로깅하는 부분에서 오류 발생)","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"nginx","slug":"server/nginx","permalink":"https://gracefullight.dev/categories/server/nginx/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"nginx","slug":"nginx","permalink":"https://gracefullight.dev/tags/nginx/"}]},{"title":"Nginx for Windows - 1. Setup","slug":"Nginx-for-Windows","date":"2017-02-01T07:16:28.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/02/01/Nginx-for-Windows/","link":"","permalink":"https://gracefullight.dev/2017/02/01/Nginx-for-Windows/","excerpt":"","text":"Windows에서 Nginx로 로컬 웹서버를 돌려보자. 설치 다운로드Nginx 홈페이지에서 Windows 버전을 다운로드 받는다.압축을 풀어 원하는 위치(D:\\nginx)로 옮겨주자 설정apache, iis가 중복이 된다면 conf/nginx.conf 파일을 열어 포트 설정을 바꿔준다.nginx.conf123456789http &#123; ... server &#123; listen 88; # 여기를 수정해주자. server_name localhost; ... &#125;...&#125; 실행nginx.exe를 더블 클릭한다. 서비스 등록실행은 되었지만 서비스를 등록해야 자동으로 실행되고 on/off를 관리하기가 쉽다.다른 포스트에 있는 github의 2011년 엔진엑스 서비스 등록 소스는 찾아봐도 없길래 새로운 방법으로 등록한다. nssmnssm에서 서비스 등록 프로그램을 다운받는다.압축을 풀어주고(D:\\nginx\\nssm-2.24) 자신의 windows bit에 맞는 폴더에서 nssm.exe를 커맨드로 실행하면 된다.1$ ./nssm.exe install nginxnginx 경로를 잡아주고 Install Service 버튼을 클릭한다. 실행services.msc를 실행해 서비스 창을 열어 nginx를 실행한다. 확인Nginx - 2. PHP 연동으로 이어집니다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"nginx","slug":"server/nginx","permalink":"https://gracefullight.dev/categories/server/nginx/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"nginx","slug":"nginx","permalink":"https://gracefullight.dev/tags/nginx/"}]},{"title":"로데오 스탬피드 공략 및 동물 포획 (170810)","slug":"rodeo-stampede-start","date":"2017-01-22T15:45:16.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/22/rodeo-stampede-start/","link":"","permalink":"https://gracefullight.dev/2017/01/22/rodeo-stampede-start/","excerpt":"","text":"기본 공략티켓수익이 늘어나는 4레벨까지 서식지 업그레이드하기6시간마다 찾아오는 동물원 크루즈를 광고와 함께 사용하기에픽동물 3종세트(10,000원)을 구입하고 시작하길 추천 (광고를 봐서 미션을 갱신하고, 부활할 수 있지만 30초씩 소요되는 시간대비 금화벌기가 힘들다)다른 대륙으로 가기 전에 보스미션 끝내기Ctrl+F 키로 원하는 동물을 검색하거나 오른쪽 TOC에서 원하는 동물을 클릭하면 이동합니다.획득경로가 적히지 않은 경우는 랜덤으로 출현하는 동물이거나 입수정보가 없는 동물입니다.번식 컨텐츠가 추가되었습니다댓글 남겨주시면 없는 새끼 동물 반영합니다! 사바나 버펄로총 7마리이름획득케이프 버펄로-포레스트 버펄로얼룩말 한 마리 이상 잡기워터 버펄로얼룩말 한 마리 이상 잡기들소얼룩말 한 마리 이상 잡기컬리펄로8단계 업그레이드버페라리9단계 업그레이드디아버펄로한 마리의 버팔로로 750미터를 달리기 얼룩말총 7마리이름획득얼룩말-말룩얼-사탕말-일렉트로 얼룩말3000m 이상 달리기펑키 얼룩말8단계 업그레이드전설의 얼룩말9단계 업그레이드트로잔 얼룩말사바나의 7가지 동물을 한 판에서 다 타기 코끼리총 8마리이름획득아프리카 코끼리-매머드-코끼리군주-히피코끼리-나팔코끼리8단계 업그레이드소화전 코끼리9단계 업그레이드젤레펀트페이스북 이벤트해골코끼리코끼리 보스미션 타조총 8마리이름획득타조-셀레버디-글램 락스타조-기사타조-심장부타조8단계 업그레이드이끼타조9단계 업그레이드오스튀치할로윈 이벤트보스타조타조 보스미션 기린총 7마리이름획득기린-더티기린-타코기린파-하이볼러-은하기린8단계 업그레이드기린바타9단계 업그레이드외계기린기린 보스미션 독수리총 7마리이름획득독수리-이집트 독수리-화려한 독수리-자본가 독수리1500m 이상 달리기팝 독수리8단계 업그레이드드라코리안9단계 업그레이드독수리온1000m 이후에 기린으로만 갈 수 있는 언덕 위 사자총 8마리이름획득사자-단델리온-검치호1800m 이상 달리기그리폰길들인 그리폰 미션울보 사자8단계 업그레이드마사이 사자9단계 업그레이드라이언 셰프사자로 30마리 동물 먹기괴물 니엔설날 이벤트 주괴125개 정글 멧돼지총 7마리이름획득멧돼지-인디언 돼지-돼지리-보크-아름다운 돼지리8단계 업그레이드으르렁 코골이9단계 업그레이드호그 라이더멧돼지 보스미션 고릴라총 8마리이름획득서부 고릴라-산 고릴라-쿼터백 고릴라-궤릴라-로릴라8단계 업그레이드소릴라9단계 업그레이드볼카노릴라고릴라 보스미션고릴럭설날 이벤트 주괴200개 악어총 7마리이름획득엘리게이터-프로게이터-스노커다일-버니게이터2000m 달리기브라이드질라8단계 업그레이드크루코다일9단계 업그레이드꼬끼오아침 시간에 달리기 하마총 7마리이름획득하마-피그미 히포-발레리나 히포-힙합호타머스-히피포타머스8단계 업그레이드타웨레트9단계 업그레이드플라티모파머스한 마리의 하마로 30초 타기 코뿔소총 8마리이름획득코뿔소-하와이노-사과 피에노-펠린오-스카이노세로스8단계 업그레이드마르셀 라이노9단계 업그레이드슬라임노세루스할로윈 이벤트다이노세로스7마리 다른 동물 차례대로 타기 호랑이총 7마리이름획득호랑이-라이거-웅크린 호랑이-H.R 호랑이3000m 이상 달리기흰호랑이8단계 업그레이드핑크 팬더라9단계 업그레이드호랑이 릴리호랑이 보스미션 큰부리새총 7마리이름획득큰부리새-혼빌-블루칸-브류칸-무칸8단계 업그레이드카주칸9단계 업그레이드쓰리칸큰부리새로 100m 점프 산 염소총 8마리이름획득산염소-바이킹 염소-아쿠아염소-미치광이 염소-스텔스염소 마크28단계 업그레이드이형접합 염소체9단계 업그레이드고스트할로윈 이벤트이각수염소 보스미션 라마총 8마리이름획득라마-짠물라마-파냐타라마-엘리자베스풍 라마-나비라마8단계 업그레이드버락 오블라마9단계 업그레이드하이퍼 광라마라마 보스미션알파카 폭죽설날 이벤트 주괴250개 곰총 7마리이름획득불곰-곰추장1000m 이상 달리기느림보곰-곰케이크-비버곰8단계 업그레이드TIME LOCKER 곰9단계 업그레이드SU-24 곰비행기산독수리로 2000m 날기 늑대총 7마리이름획득회색늑대-불늑대-생존자늑대-크고 나쁜 늑대-재버늑대8단계 업그레이드TIME LOCKER 개9단계 업그레이드애꾸눈 늑대수염늑대 보스미션 야크총 7마리이름획득야크-스컹야크-무서운 설야크-웅이야크 나무1300m 이상 달리기배틀 야크8단계 업그레이드아프로디지 야크9단계 업그레이드기어펑크 야크야크로 한 판에 10마리 날리기 독수리총 7마리이름획득대머리독수리-호크 경-이글워드 가위날개-배트큘라 백작-큰독수리 나방8단계 업그레이드비행기 승무원9단계 업그레이드로빈수리30~100m 사이의 절벽 밖에 생성 무스총 7마리이름획득알프스무스-이끼무스-가문비무스-고원무스-괴물무스8단계 업그레이드초콜릿 무스9단계 업그레이드다크무스8마리 다른 동물 차례대로 타기 오지 양총 7마리이름획득메리노 양-늑대 탈을 쓴 양-사탕 양-레이디 매애매애-양치기 아가씨8단계 업그레이드양보르기니9단계 업그레이드코난 더 매애매애리안양 보스미션 캥거루총 7마리이름획득붉은캥거루-킥복서루-레인저루-막대사탕루-스키비디피두3000m 이상 달리기캥거푸들9단계 업그레이드칸구루캥거루 보스미션 드롭베어총 7마리이름획득드롭베어-드롭베어 던디-드롭 바이키-구두쇠 코알라-러셀 코3000m 이상 달리기드롭베어 영애9단계 업그레이드, 2000m이상괴수드롭베어2000m 이상 달리면 불타는 나무 위 웜뱃총 8마리이름획득웜뱃-전투웜뱃500m 이상 달리기웜캣1100m 이상 달리기웜베이비-웜드리안4000m 이상 달리기웜바멜론9단계 업그레이드봄뱃땅 속에서 3마리 날리기웜배트맨할로윈 이벤트 에뮤총 8마리이름획득에뮤-비행사 에뮤-사춘기 에뮤-에뮤지션-데임 에뮤엄청 안나옴, 조건이 있는듯.열대에뮤9단계 업그레이드불사에뮤에뮤 보스미션꼬끼오에뮤설날 이벤트 주괴300개 낙타총 7마리이름획득낙타-신밧드 낙타-카멜플라주-화산낙타-카멜롯8단계 업그레이드혹등낙타9단계 업그레이드카멜레온8마리 다른 동물 차례대로 타기 큰박쥐총 7마리이름획득큰박쥐-비행상자-큰박쥐여우-흡혈박쥐-과일박쥐8단계 업그레이드비행양말9단계 업그레이드감시박쥐풍차 또는 지붕있는 집을 부수기 툰드라 펭귄총 7마리이름획득펭귄-황제펭귄-의원펭귄-파일럿펭귄-펭기스칸-하키펭귄9단계 업그레이드요정펭귄다른 맵 동물로 시작 후, 툰드라 동물 7마리 타기 물개총 7마리이름획득평범한 물개-표범 물개-바나나 껍질-경비 물개-하프 물개-에스키모 물개9단계 업그레이드해군 물개물개 보스미션 바다코끼리총 7마리이름획득바다코끼리-바다소-무법자 바다코끼리-바다코끼리-바이킹 바다코끼리-무도회 바다코끼리9단계 업그레이드검치 바다코끼리2000m 이상 달리기 토끼총 7마리이름획득북극토끼-해적토끼-초코토끼-포격토끼-메뚜기-개그토끼9단계 업그레이드눈토끼토끼 연속 5마리 타기 부엉이총 7마리이름획득흰올빼미-수리부엉이-호시탐탐부엉이-외양간올빼미-로빈부엉이-부엉부엉9단계 업그레이드수학부엉이부엉이 보스미션 여우총 7마리이름획득북극여우-나팔여우-조로-키츠네-골디여우-주크여우9단계 업그레이드태엽여우여우로 1500m 달리기 북극곰총 7마리이름획득북극곰-딸기곰-폴로곰-태양곰-순찰곰-중산모곰9단계 업그레이드롤러곰북극곰 보스미션 쥐라기 파라사울로로푸스총 8마리이름획득파라사우롤로푸스-술로푸스-쇠지렐로푸스-파라솔로푸스-마스카랄로푸스-탐험갈로푸스-포잘로푸스-노롤로푸스파라사울로로푸스 보스미션 랩터총 8마리이름획득벨로시랩터-깃털 랩터-치실랩터-쿨쿨랩터-미녀 랩터-철학자 랩터-쌈 랩터-사신 랩터- 트리케라톱스총 8마리이름획득트리케라톱스-트리케라클롭스-트리케라캅스-하늘케라톱스-키메라톱스-미디움레어톱스-악몽케라톱스-게이샤라톱스트리케라톱스 보스미션 티라노사우루스 렉스총 8마리이름획득티라노사우루스 렉스-T-멕스-바다 렉스-G-렉스-마녀 렉스-T-헬스-폭구노사우루스 렉스-파괴왕 렉스- 브론토사우루스총 8마리이름획득브론토사우루스-네스 호의 괴물-광대토사우루스-힙스터사우루스-핫도고사우루스-디플로도쿠스8종의 다른 동물을 순서대로 타기페가사우루스-히드라- 안킬로사우루스총 8마리이름획득안킬로사우루스-천킬로사우루스-독킬로사우루스-판사우루스-탱킬로사우루스-낚시꾼사우루스안킬로사우루스로 티라노사우르스 렉스와 충돌식물사우루스-멋쟁이사우루스- 프테로닥틸총 8마리이름획득프테로닥틸-소닥틸-치료닥틸-파라오닥틸-스웨어로닥틸-요정닥틸-석유로닥틸-머리털로닥틸프테로닥틸 보스미션 스테고사우루스총 8마리이름획득스테고사우루스-시드니 오페라사우루스-시침질사우루스-나초사우루스-유의어사우루스-톱사우루스스테고사우루스로 관목 10개 먹기크리스탈사우루스-전기사우루스- 에픽총 3마리이름획득캐시카우구매미션 노새구매불사조 까마귀구매 새끼큰박쥐새끼 큰박쥐 : 밧줄 작아지는 속도 -6%, 날짐승 급강속도 -3%새끼 비행상자 : 밧줄 작아지는 속도 -6%, 상자 획득 동전 25%, 날짐승 급강 속도 -4%새끼 큰박쥐여우 : 밧줄 작아지는 속도 -10%, 점프 높이 6%, 날짐승 급강 속도 -6%새끼 흡혈박쥐 : 속도 -6%, 길들이는 속도 15%, 밧줄 작아지는 속도 -1%낙타새끼 낙타 : 불타는 속도 -15%새끼 카멜플라주 : 밧줄 작아지는 속도 -10%, 불타는 속도 -20%새끼 신밧드 낙타 : 화나는 속도 -8%, 불타는 속도 -15%, 상자 획득 동전 3%새끼 화산낙타 : 속도 5%, 불 타는 속도 -50%새끼 카멜레온 : 밧줄 크기 9%, 점프 높이 9%, 사냥 효과 9%새끼 혹등낙타 : 점프 속도 5%, 수중 이동속도 20%, 불 타는 속도 -20%에뮤새끼 에뮤 : 속도 4%, 점프 높이 4%새끼 비행사 에뮤 : 속도 6%, 날짐승 급강 속도 -8%, 시작 밧줄 크기 1%새끼 사춘기 에뮤 : 화나는 속도 -6%, 속도 -4%, 길들이는 속도 14%새끼 에뮤지션 : 속도 5%, 희귀 동물 출현 8%, 짝짓기 동물 출현 12%웜뱃새끼 웜뱃 : 점프 속도 6%새끼 전투웜뱃 : 점프 속도 12%, 상자 획득 동전 20%새끼 웜캣 : 화나는 속도 -5%, 점프 속도 7%, 점프 높이 7%새끼 봄뱃 : 점프 속도 7%, 길들이는 속도 14%, 불타는 속도 -25%새끼 웜배트맨 : 밧줄 작아지는 속도 -8%, 점프 속도 10%, 점프 높이 4%드롭베어새끼 드롭베어 : 희귀 동물 출현 4%, 불 타는 속도 -8%캥거루새끼 킥복서루 : 밧줄 크기 5%, 점프 높이 10%, 몸부림 -5%새끼 막대사탕루 : 사냥 효과 10%, 몸부림 -10%, 짝짓기 동물 길들이는 속도 2%새끼 캥거푸들 : 점프 높이 5%, 미션 획득 동전 15%, 몸부림 -15%양새끼 메리노 양 : 길들이는 속도 12%새끼 늑대 탈을 쓴 양 : 속도 6%, 점프 속도 3%, 길들이는 속도 15%새끼 사탕양 : 희귀 동물 출현 7%, 길들이는 속도 12%, 사냥 효과 9%새끼 레이디 매애매애 : 짝짓기 동물 출현 20%, 길들이는 속도 20%, 짝짓기 동물 길들이는 속도 5%새끼 양치기 아가씨 : 화나는 속도 -8%, 짝짓기 속도 20%, 길들이는 속도 2%무스새끼 가문비무스 : 밧줄 크기 6%, 화나는 속도 -8%, 미션 획득 동전 5%코뿔소새끼 코뿔소 : 상자 획득 동전 20%새끼 하와이노 : 화나는 속도 -2%, 상자 획득 동전 20%, 수중 이동 속도 10%큰부리새새끼 블루칸 : 희귀 동물 출현 3%, 짝짓기 동물 출현 7%, 날짐승 급강 속도 -6%고릴라새끼 산 고릴라 : 밧줄 크기 3%, 점프 높이 3%, 짝짓기 동물 출현 6%타조새끼 셀레버디 : 타고있는 동물 속도 8%, 희귀 동물 출현 4%독수리새끼 독수리 : 밧줄 크기 4%버펄로새끼 케이프 버펄로 : 화나는 속도 -3%새끼 포레스트 버펄로 : 화나는 속도 -4%새끼 워터 버펄로 : 화나는 속도 -4%, 수중 이동 속도 10%새끼 들소 : 밧줄 작아지는 속도 -5%, 화나는 속도 -5%새끼 컬리펄로 : 동물 화나는 속도 -5%, 짝짓기 동물 출현 8%, 짝짓기 동물 길들이는 속도 5%새끼 디아 버펄로 : 동물 화나는 속도 -4%, 점프 높이 8%새끼 버페라리 : 화나는 속도 -4%, 속도 14%, 점프 속도 5% 버그정글 맵에서 간혹 맵 밖으로 나가져서 출발정글 맵에서 기린으로 맵 밖으로 나갈 수 있음오지 맵에서 양이 벽 속에서 나옴동물을 타면서 드롭베어에게 잡아먹히면 거리가 음수로 변하면서 땅 밑으로 계속 들어감 동물출처직접 수집Rodeo Stampede WikiaRodeo Stampede Animals List로데오 스탬피드/출현동물","categories":[{"name":"game","slug":"game","permalink":"https://gracefullight.dev/categories/game/"}],"tags":[{"name":"game","slug":"game","permalink":"https://gracefullight.dev/tags/game/"}]},{"title":"검색등록 - 6. 기타 검색엔진","slug":"검색등록-6-기타-검색엔진","date":"2017-01-22T07:29:12.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/22/검색등록-6-기타-검색엔진/","link":"","permalink":"https://gracefullight.dev/2017/01/22/%EA%B2%80%EC%83%89%EB%93%B1%EB%A1%9D-6-%EA%B8%B0%ED%83%80-%EA%B2%80%EC%83%89%EC%97%94%EC%A7%84/","excerpt":"","text":"Daum, Zum 검색 등록daum 과 zum 에 사이트를 등록해보자. Daum다음 검색등록에서 내 사이트를 등록하면 된다.다음 검색등록이 완료되면 네이트에서도 노출이 된다. Zum줌 검색등록에서 내 사이트를 등록 신청하면 된다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"search","slug":"server/search","permalink":"https://gracefullight.dev/categories/server/search/"}],"tags":[{"name":"webmaster","slug":"webmaster","permalink":"https://gracefullight.dev/tags/webmaster/"}]},{"title":"검색등록 - sitemap 생성","slug":"검색등록-sitemap-생성","date":"2017-01-22T07:13:53.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/22/검색등록-sitemap-생성/","link":"","permalink":"https://gracefullight.dev/2017/01/22/%EA%B2%80%EC%83%89%EB%93%B1%EB%A1%9D-sitemap-%EC%83%9D%EC%84%B1/","excerpt":"","text":"sitemap 생성모든 검색 엔진 크롤러는 sitemap.xml 을 참조해 데이터를 인덱싱하는 기능이 있다.hexo 사용자는 hexo-generator-seo-friendly-sitemap 또는 hexo-generator-sitemap 플러그인을 설치하면 바로 생성이 되지만, 다른 경우라면 직접 sitemap 을 생성해줘야한다. 직접 생성하기xml-sitemaps에서 무료로 생성할 수 있다.내 사이트 URL 과 업데이트 빈도를 설정한 뒤 Start 버튼을 클릭하면잠시 후 sitemap.xml을 다운 받을 수 있다.이 후 서버로 업로드해 검색등록을 마무리하면 된다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"search","slug":"server/search","permalink":"https://gracefullight.dev/categories/server/search/"}],"tags":[{"name":"webmaster","slug":"webmaster","permalink":"https://gracefullight.dev/tags/webmaster/"}]},{"title":"검색등록 - 5. Naver","slug":"검색등록-5-Naver","date":"2017-01-22T06:50:40.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/22/검색등록-5-Naver/","link":"","permalink":"https://gracefullight.dev/2017/01/22/%EA%B2%80%EC%83%89%EB%93%B1%EB%A1%9D-5-Naver/","excerpt":"","text":"Naver 검색 등록네이버에 내 사이트를 등록해보자.네이버 웹마스터로 이동한다. 웹 마스터 등록사이트 추가 + 버튼을 누른 뒤 내 사이트를 추가한다. 인증HTML 태그 방식으로 인증을 진행하자.페이지에 태그를 추가하고 확인 버튼을 누르면 페이지 소유권이 확인되어 웹마스터 도구를 이용할 수 있다. sitemap 등록요청 &gt; 사이트맵 제출 메뉴에서 sitemap 을 제출한다. robots.txt 설정robots.txt에 sitemap 위치를 알려주는 라인을 추가한다.robots.txt12User-agent: *Sitemap: https:&#x2F;&#x2F;gracefullight.github.io&#x2F;sitemap.xml RSS 등록요청 &gt; RSS 제출 메뉴에서 RSS Feed 를 제출한다. 수집주기 설정사이트의 최신상태를 검색에 반영하기 위해 설정 &gt; 수집 설정 메뉴의 수집주기 설정 옵션을 빠르게로 바꿔준다. 강제 수집 요청요청 &gt; 웹 페이지 수집 메뉴에서 해당 페이지를 수집시킬 수 있다. 최적화 확인현황 &gt; 사이트 최적화 메뉴에서 내 사이트가 검색에 노출이 잘 될 수 있는 구조인지 확인해본다.최적화 되어있지 않다면 og 태그 및 meta 태그를 적절히 수정해 맞춰주자.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"search","slug":"server/search","permalink":"https://gracefullight.dev/categories/server/search/"}],"tags":[{"name":"webmaster","slug":"webmaster","permalink":"https://gracefullight.dev/tags/webmaster/"}]},{"title":"검색등록 - 4. Google","slug":"검색등록-4-Google","date":"2017-01-22T06:25:47.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/22/검색등록-4-Google/","link":"","permalink":"https://gracefullight.dev/2017/01/22/%EA%B2%80%EC%83%89%EB%93%B1%EB%A1%9D-4-Google/","excerpt":"","text":"Google 검색 등록구글에 내 사이트를 등록해보자.구글 웹마스터로 이동한다. 웹 마스터 등록속성 추가 버튼을 누른 뒤 내 사이트를 추가한다. 인증대체 방법을 눌러 HTML 태그 방식으로 인증을 진행하자.페이지에 태그를 추가하고 확인 버튼을 누르면 페이지 소유권이 확인되어 웹마스터 도구를 이용할 수 있다. sitemap 등록크롤링 &gt; Sitemaps 메뉴에서 SITEMAP 추가/테스트 버튼으로 추가한다. Analytics 연동설정 &gt; Google 애널리틱스 속성 메뉴에서 Google Analytics 와 Search Console 을 연동한다.구글의 연동 도움말을 참조한다. 강제 색인 생성크롤링 &gt; Fetch As Google 메뉴로 이동해 페이지 색인 생성을 요청할 수 있다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"search","slug":"server/search","permalink":"https://gracefullight.dev/categories/server/search/"}],"tags":[{"name":"webmaster","slug":"webmaster","permalink":"https://gracefullight.dev/tags/webmaster/"}]},{"title":"검색등록 - 3. Yandex","slug":"검색등록-3-Yandex","date":"2017-01-22T05:27:16.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/22/검색등록-3-Yandex/","link":"","permalink":"https://gracefullight.dev/2017/01/22/%EA%B2%80%EC%83%89%EB%93%B1%EB%A1%9D-3-Yandex/","excerpt":"","text":"Yandex 검색 등록전세계 4 위, 러시아 1 위 검색 서비스인 얀덱스에도 내 사이트를 추가해보자.Yandex Webmaster로 이동해 가입 후 로그인한다.영어라 부담없이 가입할 수 있고, 핸드폰 인증도 간단하다. 웹 마스터 등록+ 버튼을 눌러 사이트를 등록한다. 인증파일업로드 방식과 meta 태그 추가방식, CNAME 추가방식이 있는데 meta 태그 추가 방식을 사용한다.페이지에 태그를 추가하고 Check 버튼을 누르면 페이지 소유권이 확인되어 웹마스터 도구를 이용할 수 있다. sitemap 등록Indexing &gt; Sitemap files 메뉴에서 sitemap 을 제출한다. 여담Processing queue 가 처리됨으로 어떻게 바뀌는지 확인해봐야될 듯.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"search","slug":"server/search","permalink":"https://gracefullight.dev/categories/server/search/"}],"tags":[{"name":"webmaster","slug":"webmaster","permalink":"https://gracefullight.dev/tags/webmaster/"}]},{"title":"검색등록 - 2. Bing (Yahoo)","slug":"검색등록-2-Bing-Yahoo","date":"2017-01-22T05:06:21.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/22/검색등록-2-Bing-Yahoo/","link":"","permalink":"https://gracefullight.dev/2017/01/22/%EA%B2%80%EC%83%89%EB%93%B1%EB%A1%9D-2-Bing-Yahoo/","excerpt":"","text":"Bing, Yahoo 검색 등록Microsoft 검색인 Bing 과 Yahoo 는 한 곳에서 관리할 수 있다. 웹 마스터Bing 웹 마스터 도구에 로그인한다.Microsoft 계정이 있으면 바로 로그인할 수 있다. 등록사이트를 등록한다. 인증파일업로드 방식과 meta 태그 추가방식, CNAME 추가방식이 있는데 meta 태그 추가 방식을 사용한다.페이지에 태그를 추가하고 확인을 누르면 페이지 소유권이 확인되어 웹마스터 도구를 이용할 수 있다. sitemap 등록내 사이트 구성 &gt; Sitemaps 메뉴에서 sitemap 을 제출한다.2-3 일 정도 지나야 요청이 처리되는 것 같다. 크롤링 시간대 설정내 사이트 구성 &gt; 크롤링 제어 메뉴로 이동해 크롤링 횟수를 제한하지말고 기본값으로 설정한다. 여담기능적으로 베타인 게 많아서 시간을 두고 인덱싱 되는 페이지를 확인해봐야 될 듯.구글 다음으로 사용량이 많은게 Bing 과 Yahoo 검색이니 꼭 추가해주자.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"search","slug":"server/search","permalink":"https://gracefullight.dev/categories/server/search/"}],"tags":[{"name":"webmaster","slug":"webmaster","permalink":"https://gracefullight.dev/tags/webmaster/"}]},{"title":"바이두 검색등록 및 전화인증 없이 회원가입하기","slug":"검색등록-1-baidu","date":"2017-01-22T03:45:45.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/22/검색등록-1-baidu/","link":"","permalink":"https://gracefullight.dev/2017/01/22/%EA%B2%80%EC%83%89%EB%93%B1%EB%A1%9D-1-baidu/","excerpt":"","text":"Baidu 검색 등록중국 1 위 검색사이트인 바이두에 내 사이트를 추가해보자.바이두 사이트에서 회원가입을 하는 경우 인증번호를 입력해야하는데 국외번호 인증이 안된다. 회원가입바이두 클라우드로 이동하여 회원가입 버튼을 클릭한다.국제번호를 변경 후 휴대번호로 인증한다.전화번호아이디인증번호비밀번호순으로 입력하면 된다.인증하고 아래 큰 버튼을 누르면 가입과정이 완료된다. 웹 마스터 등록바이두 웹마스터로 들어가 사이트 등록 버튼을 클릭한다.URL 을 입력하고 아래 버튼을 클릭한다. 인증파일업로드 방식과 meta 태그 추가 방식 중 후자를 선택했다.메타 태그를 헤더에 추가해주자. 단순한 링크 등록블로그 등 파일을 올릴 수 없는 사이트의 링크만 등록하고 싶다면 여기서 URL 을 입력해준다.(Baidu 에서는 site 인증을 통한 방법을 권장하고 있다.) sitemap 등록sitemap 등록 메뉴로 이동합니다. 경로 입력textarea 에 사이트맵 경로를 라인마다 입력한다.https://gracefullight.github.io/sitemap.xmlhttps://gracefullight.github.io/feed.xml 인증문자 입력간체자는 한자키로 입력할 수 없는 문자가 많기에 네이버 중국어사전의 필기 인식기 기능을 사용한다.한글자씩 복사해 입력해준다. 제출제출하면 아래 부분에 등록된 sitemap 이 보인다. Automatic Push스크립트를 추가해 자동으로 페이지를 인덱싱할 수 있다. 소스12345678910111213&lt;script&gt; ;(function() &#123; var bp = document.createElement(\"script\") var curProtocol = window.location.protocol.split(\":\")[0] if (curProtocol === \"https\") &#123; bp.src = \"https://zz.bdstatic.com/linksubmit/push.js\" &#125; else &#123; bp.src = \"http://push.zhanzhang.baidu.com/push.js\" &#125; var s = document.getElementsByTagName(\"script\")[0] s.parentNode.insertBefore(bp, s) &#125;)()&lt;/script&gt;sitemap 이 읽혀지지 않는다면 head 에 위 스크립트를 추가해주자. 여담사이트 등록 중 추가 정보를 입력이 필요하면 여기서 webmaster 관리자정보를 수정하면 된다.이메일의 경우만 인증이 들어감으로 QQ 와 Wechat 의 경우는 대충 써주면 된다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"search","slug":"server/search","permalink":"https://gracefullight.dev/categories/server/search/"}],"tags":[{"name":"webmaster","slug":"webmaster","permalink":"https://gracefullight.dev/tags/webmaster/"}]},{"title":"curl을 사용하지 않는 http 통신","slug":"curl을-사용하지-않는-http-통신","date":"2017-01-22T02:29:48.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/22/curl을-사용하지-않는-http-통신/","link":"","permalink":"https://gracefullight.dev/2017/01/22/curl%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94-http-%ED%86%B5%EC%8B%A0/","excerpt":"","text":"curl 기능이 확장되어있지 않아 http 통신을 할 수 없는 경우가 있다.fsockopen 메소드를 사용해 같은 기능을 할 수 있다. 소스 GET123456789101112131415161718192021222324252627282930313233343536373839&lt;?php/** * [getData 외부파일을 GET 방식으로 읽기] * @param [string] $str [url] * @param [array] $data [parameters] * @return [string] [내용] */function getData($str, $data) &#123; $url = parse_url($str); switch(strtoupper($url['scheme'])) &#123; case 'HTTP': if (!isset($url['port'])) &#123; $url['port'] = 80; &#125; break; case 'HTTPS': $url['ssl'] = 'ssl://'; if (!isset($url['port'])) &#123; $url['port'] = 443; &#125; break; &#125; $fp = @fsockopen($url['ssl'].$url['host'], $url['port'], $errno, $errstr, 10); if ($fp) &#123; fwrite($fp, \"GET $url[path]?\".http_build_query($data).\" HTTP/1.0\\r\\nHost: $url[host]\\r\\n\"); while (!feof($fp)) &#123; $out .= fread($fp, 1024); &#125; fclose($fp); $out = explode(\"\\r\\n\\r\\n\",$out); array_shift($out); $out = implode(\"\",$out); &#125; return $out;&#125; POST12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273&lt;?php&lt;?/** * [postData 외부파일을 POST 방식으로 읽기] * @param [string] $str [url] * @param [array] $data [parameters] * @param [int] $sleepMs [연결지연ms] * @return [string] [내용] */function postData($str, $data, $sleepMs=0) &#123; $url = parse_url($str); switch(strtoupper($url['scheme'])) &#123; case 'HTTP': if (!isset($url['port'])) &#123; $url['port'] = 80; &#125; break; case 'HTTPS': $url['ssl'] = 'ssl://'; if (!isset($url['port'])) &#123; $url['port'] = 443; &#125; break; &#125; $data_string = http_build_query($data); $referrer = $_SERVER['SCRIPT_URL']; $request = \"POST &#123;$url[path]&#125; HTTP/1.1\\r\\nHost: &#123;$url[host]&#125;\\r\\nReferer: &#123;$referrer&#125;\\r\\n\"; $request .= \"Content-type: application/x-www-form-urlencoded\\r\\n\"; $request .= \"Content-length: \" . strlen($data_string) . \"\\r\\n\"; $request .= \"Connection: close\\r\\n\\r\\n\"; $request .= \"&#123;$data_string&#125;\\r\\n\"; $fp = @fsockopen($url['ssl'].$url[host], $url[port], $errno, $errstr, 10); if ($fp) &#123; fwrite($fp, $request); usleep(($sleepMs * 1000)); do &#123; $header .= fread($fp, 1); &#125; while (!preg_match('/\\\\r\\\\n\\\\r\\\\n$/', $header)); if (preg_match('/Transfer\\\\-Encoding:\\\\s+chunked\\\\r\\\\n/', $header, $matches)) &#123; // check encoding do &#123; $byte = $chunk_size = \"\"; do &#123; $chunk_size .= $byte; $byte = fread($fp, 1); &#125; while ($byte != \"\\r\"); fread($fp, 1); $chunk_size = hexdec($chunk_size); if ($chunk_size)&#123; $out .= @fread($fp, $chunk_size); &#125; fread($fp, 2); &#125; while ($chunk_size); &#125; else if (preg_match('/Content\\\\-Length:\\\\s+([0-9]*)\\\\r\\\\n/', $header, $matches)) &#123; $out = fread($fp,$matches[1]); &#125; else &#123; while (!feof($fp)) &#123; $out .= fread($fp, 4096); &#125; &#125; fclose($fp); &#125; return $out;&#125; 예제1234567891011&lt;?php$param = array( 'data1' =&gt; '1', 'data2' =&gt; '2');// get 요청$get_data = getData('http://your.apiurl.com', $param);// post 요청$post_data = postData('http://your.apiurl.com', $param);?&gt; 설명fsockopen 으로 소켓을 연 뒤 해당 host 로 request 만들어 전송한다.stream 을 사용해 통신하는 방법도 있다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"sleep()을 사용해야할 때","slug":"sleep-을-사용해야할-때","date":"2017-01-21T16:19:01.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/21/sleep-을-사용해야할-때/","link":"","permalink":"https://gracefullight.dev/2017/01/21/sleep-%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%95%BC%ED%95%A0-%EB%95%8C/","excerpt":"","text":"php에서 sleep() 메소드의 사용법은 이렇다.1sec_delay.php123456&lt;?php // sleep ( int $seconds ) sleep(1); // usleep ( int $micro_seconds ) usleep(1000000);단순히 시간을 지연시키는 이 메소드를 어디에 사용하는 걸까? Curl RequestCurl 또는 file_get_contents로 내용을 가져올 때 지연없이 request를 보내면 차단을 당하거나 정상적인 응답이 오지 않을 수 있다.요청을 보낸 후 sleep을 사용해 지연호출을 한다. Crawling웹 크롤링 중 호출이 일정시간이상되야 응답을 돌려주는 경우가 있다.요청을 닫기 전에 sleep을 사용해 연결시간을 늘려준다. Batch Update많은 데이터를 cron을 사용해 update를 할 때 테이블이 Lock이 되는 경우를 방지하기 위해 사용한다.12345678&lt;?phpforeach ($dummy as $data) &#123; // 5초가 걸리는 쿼리 DB::query(\"UPDATE ...\"); // 5초를 지연시켜 그동안에 호출된 다른 로직을 실행할 수 있게 한다. sleep(5);&#125;이 방법보다 테이블이 Lock 되지않게 Update Query를 만드 것이 더 바람직하다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"id에 .(pariod)이 있는 element querySelector","slug":"querySelector-escape-pariod","date":"2017-01-18T06:38:37.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/18/querySelector-escape-pariod/","link":"","permalink":"https://gracefullight.dev/2017/01/18/querySelector-escape-pariod/","excerpt":"","text":"원인document.querySelector를 사용해 id에 .이 포함된 element를 선택시123456&lt;div id=\"id.has.pariod\"&gt;&lt;/div&gt;&lt;script&gt; var $div = document.querySelector(\"#id.has.pariod\"); console.log($div); // =&gt; undefined;&lt;/script&gt;undefined를 반환하며 선택이 되지 않는다..(pariod)는 class 선택자라 중복이되어 발생하는 오류이다. 해결.에 역슬래시를 2개 붙혀 escape 시킨다.123var $div = document.querySelector(\"#id\\\\.has\\\\.pariod\");console.log($div);// =&gt; &lt;div id=\"id.has.pariod\"&gt;&lt;/div&gt;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"Vimeo Upload API - 2. PHP API","slug":"Vimeo-Upload-API-2-PHP-API","date":"2017-01-18T01:50:14.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/18/Vimeo-Upload-API-2-PHP-API/","link":"","permalink":"https://gracefullight.dev/2017/01/18/Vimeo-Upload-API-2-PHP-API/","excerpt":"","text":"Vimeo Developers 등록에서 이어집니다. PHP API 설치Vimeo Libraries에서 원하는 API를 선택하면 된다.Server Libraries PHP에서 Download를 클릭하면 Github로 이동하고 Installation을 참조하면 된다. composercomposer가 있으면 쉽게 설치할 수 있다.1$ composer require vimeo/vimeo-api 직접 설치v1.2.5를 다운 받고 원하는 곳에 압축을 푼 뒤 class를 load한다.123&lt;?php require(\"/path/to/vimeo.php/autoload.php\");?&gt; 설정 변경vimeo.php\\config.json 파일을 열어 client_id, client_secret, access_token 값을 수정하자. Upload API 사용vimeo.php\\example\\upload.php를 커스터마이징 해보자. 기본 예제 소스example\\upload.php123456789101112131415161718192021222324252627282930313233343536373839404142434445&lt;?phpuse Vimeo\\Vimeo;use Vimeo\\Exceptions\\VimeoUploadException;$config = require(__DIR__ . '/init.php');if (empty($config['access_token'])) &#123; // 액세스 토큰이 없을시 로깅 로직 추가 // throw new Exception('액세스 토큰 없이 업로드 할 수 없다. // 개발자 앱 페이지에서 액세스 토큰을 발급 받거나 auth.php를 이용해라.');&#125;$lib = new Vimeo($config['client_id'], $config['client_secret'], $config['access_token']);// argv 대신 업로드할 파일경로의 배열을 넣으면 된다.$files = $argv;array_shift($files);// 업로드된 트랙을 체크하는 배열$uploaded = array();// 업로드 로직 시작foreach ($files as $file_name) &#123; // 업로드 시작 로깅 // print 'Uploading ' . $file_name . \"\\n\"; try &#123; // Vimeo 서버에 업로드하고 해당 파일의 uri을 받는다. $uri = $lib-&gt;upload($file_name); // 해당 파일의 정보를 요청한다. $video_data = $lib-&gt;request($uri); // 업로드가 성공한 파일의 링크를 받는다. $link = ''; if($video_data['status'] == 200) &#123; $link = $video_data['body']['link']; &#125; // 로깅을 위해 저장 $uploaded[] = array('file' =&gt; $file_name, 'api_video_uri' =&gt; $uri, 'link' =&gt; $link); &#125; catch (VimeoUploadException $e) &#123; // 업로드 오류 발생시 예외처리 // print 'Error uploading ' . $file_name . \"\\n\"; // print 'Server reported: ' . $e-&gt;getMessage() . \"\\n\"; &#125;&#125;// 결과 로깅 및 파일 링크 표시// print 'Uploaded ' . count($uploaded) . \" files.\\n\\n\";// foreach ($uploaded as $site_video) &#123;// extract($site_video);// print \"$file is at $link.\\n\";// &#125; 커스터마이징25번째 줄의 request 요청에 추가로 영상정보를 변경하게 요청할 수 있다.영상정보를 가져오는건 변하지 않는다.12345678910111213141516171819202122232425262728293031323334&lt;?php/** * [lib-&gt;request function] * 해당 URI를 대상으로 데이터를 받아오고 * PATCH 메소드를 이용해서 그 동영상의 Metadata를 수정하는 함수 * * @param &#123;[string]&#125; uri [업로드 된 동영상 주소] * @param &#123;[array]&#125; options [파라미터 배열(json 형식의 배열타입)] * @param &#123;[string]&#125; method [요청할 메소드 타입(수정은 PATCH)] * @return &#123;[video]&#125; video_data [비디오 데이터] */$video_data = $lib-&gt;request($uri, array( 'name' =&gt; '동영상 이름', 'description' =&gt; '동영상 설명', 'embed' =&gt; array( // embed시의 옵션 'buttons' =&gt; array( 'like' =&gt; false, // 좋아요 버튼 'watchlater'=&gt; false, // 나중에보기 버튼 'share' =&gt; false, // 공유 버튼 'embed' =&gt; false, // embed 버튼 'fullscreen'=&gt; false // 전체화면 버튼 ), 'logos' =&gt; array( 'vimeo' =&gt; false // 비메로 로고 ), 'title' =&gt; array( 'owner' =&gt; 'hide', // 제작자 정보 'portrait' =&gt; 'hide', // 제작자 로고 'name' =&gt; 'hide' // 제작자 이름 ), 'playbar' =&gt; false // 재생바 )), 'PATCH');?&gt;옵션은 해당 endpoints 참조하자. video_data endpoint업로드된 파일의 response data에는 파일 metadata가 들어있다.$video_data[‘body’][‘키값’] 으로 접근하면 된다. 입맛에 맞게 사용해보자.123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163&#123; \"uri\": \"영상 vimeo 링크\", \"name\": \"영상 제목\", \"description\": \"영상 설명\", \"link\": \"영상 vimeo 링크\", \"duration\": 재생 시간, \"width\": 가로 크기, \"language\": 언어, \"height\": 세로 크기, \"embed\": &#123; \"uri\": null, \"html\": \"iframe 영상 링크\", \"buttons\": &#123; \"like\": 좋아요 버튼 여부, \"watchlater\": 나중에보기 버튼 여부, \"share\": 공유 버튼 여부, \"embed\": embed 버튼 여부, \"hd\": 고화질 버튼 여부, \"fullscreen\": 전체화면 버튼 여부, \"scaling\": 스케일링 버튼 여부 &#125;, \"logos\": &#123; \"vimeo\": 비메오 로고 여부, \"custom\": &#123; \"active\": 커스텀 로고 여부, \"link\": 커스텀 로고 링크, \"sticky\": sticky 여부 &#125; &#125;, \"title\": &#123; \"name\": 제작자 이름 display 설정, \"owner\": 제작자 정보 display 설정, \"portrait\": 제작자 로고 display 설정 &#125;, \"playbar\": 재생바 여부, \"volume\": 볼륨바 여부, \"color\": \"색상 헥스코드\" &#125;, \"created_time\": \"생성일시 gmt\", \"modified_time\": \"변경일시 gmt\", \"release_time\": \"노출일시 gmt\", \"content_rating\": [ \"safe\" ], \"license\": \"라이센스\", \"privacy\": &#123; \"view\": \"노출 설정\", \"embed\": \"embed 노출 설정\", \"download\": 다운로드 여부, \"add\": 추가 여부, \"comments\": \"댓글 허용 설정\" &#125;, \"pictures\": &#123; \"uri\": \"영상 대표 사진 링크\", \"active\": 사진 여부, \"type\": \"custom\", \"sizes\": [ &#123; \"width\": 100, \"height\": 75, \"link\": \"사이즈별 링크\" &#125;, ... ], \"resource_key\": \"접근 키\" &#125;, \"tags\": [태그 배열], \"stats\": &#123; \"plays\": 재생 수 &#125;, \"metadata\": &#123; \"connections\": &#123; \"comments\": &#123; \"uri\": \"댓글 링크\", \"options\": [ \"GET\", \"POST\" ], \"total\": 0 &#125;, \"credits\": &#123; \"uri\": \"크레딧 링크\", \"options\": [ \"GET\", \"POST\" ], \"total\": 0 &#125;, \"likes\": &#123; \"uri\": \"좋아요 링크\", \"options\": [ \"GET\" ], \"total\": 0 &#125;, \"pictures\": &#123; \"uri\": \"사진 링크\", \"options\": [ \"GET\", \"POST\" ], \"total\": 0 &#125;, \"texttracks\": &#123; \"uri\": \"텍스트 트랙 링크\", \"options\": [ \"GET\", \"POST\" ], \"total\": 0 &#125;, \"related\": null &#125;, \"interactions\": &#123; \"watchlater\": &#123; \"added\": false, \"added_time\": null, \"uri\": \"나중에보기 링크\" &#125; &#125; &#125;, \"user\": &#123; \"유저정보 및 접근 경로\" &#125;, \"review_link\": \"리뷰 다이렉트 링크\", \"files\": [ &#123; \"quality\": \"파일 화질\", \"type\": \"파일 타입\", \"width\": 파일 가로, \"height\": 파일 세로, \"link\": \"파일 다이렉트 링크\", \"created_time\": \"파일 생성일시\", \"fps\": 주사율, \"size\": 파일 크기, \"md5\": \"토큰\", \"link_secure\": \"파일 다이렉트 시큐어 링크\" &#125;, ... ], \"download\": [ &#123; \"quality\": \"다운로드 파일 화질\", \"type\": \"파일 타입\", \"width\": 파일 가로, \"height\": 파일 세로, \"expires\": \"만료일시\", \"link\": \"다운로드 다이렉트 링크\", \"created_time\": \"생성일시\", \"fps\": 주사율, \"size\": 파일 크기, \"md5\": \"토큰\" &#125;, ... ], \"app\": &#123; \"name\": \"앱 이름\", \"uri\": \"앱 링크\" &#125;, \"status\": \"영상 상태\", \"resource_key\": \"리소스 키\", \"embed_presets\": null&#125; 여담API의 내부 구조는 헤더추가와 curl로만 이루어져있다.OAuth2.0과 RESTful를 이해했다면 아주 쉬울 것이다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"vimeo","slug":"vimeo","permalink":"https://gracefullight.dev/tags/vimeo/"}]},{"title":"Vimeo Upload API - 1. Vimeo Developers","slug":"Vimeo-Upload-API-1-Vimeo-Developers","date":"2017-01-16T14:47:41.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/16/Vimeo-Upload-API-1-Vimeo-Developers/","link":"","permalink":"https://gracefullight.dev/2017/01/16/Vimeo-Upload-API-1-Vimeo-Developers/","excerpt":"","text":"앱 등록비메오 개발자 커뮤니티 로그인 후 MyApps &gt; Create New App 버튼을 클릭한다.사용할 앱의 이름, 설명, URL 경로와 앱 로고 URL을 등록한다.App Callback URL은 하나의 계정안에 멀티 유저를 두고 각자의 유저명으로 여러 동영상을 등록할시OAuth2.0 인증을 통해 인증을 받기위한 것인데, 단순한 업로드 로직일 경우에는 필요가 없다.앱에서 업로드가 있는 폴더안으로 경로만 대충 잡아주면 된다. 권한 신청생성된 앱으로 들어가 Request Upload Access를 클릭한다. 1번은 이 앱(test)에 요금을 받을 것인지를 묻는다.Yes 클릭시 비메오측 승인이 없으면 요금청구를 할 수 없다는 경고문과 함께 어떻게 차징을 할지 이유를 쓰는 란이 생긴다.업로드로 과금을 받진 않을 것이니 No를 선택하자.2번은 업로더의 계정으로 업로드를 할 것인지, 내 계정으로만 업로드를 할 것인지를 선택한다.전자를 선택시에 Callback URL을 필히 설정해주어야하고 Callback URL에 Return된 Multi-User의 Access Token을 가지고 분기 업로드를 해주는 로직을 구현해야 한다.하지만 우리는 한가지 계정에서의 비디오 업로드를 구현하기에 후자를 선택하면 된다.My account 선택시 비디오의 제작자를 묻는 선택지가 나오는데 선택해준다.3번은 어떤 종류에 대한 비디오가 업로드가 될지 영문으로 설명을 해야한다.간단히 “test용이다” 라고 적으니 Reject메일이 날라오는 걸로 보아 구체적으로 적어야한다.샘플 동영상을 링크 걸어주는게 가장 간단한 인증방법이 될 것이다.Request Upload Access를 클릭하면 5영업일 내에 처리해주겠다는 상태가 된다. 토큰 생성생성된 앱에서 Authentication 메뉴로 들어가 scope를 설정하고 Generate Token 버튼을 클릭한다.Create는 채널을 만드는거라 필요없고 Edit, Delete, Upload 권한정도를 설정하면 된다.Access Token, Client Identifier, Client Secret를 모두 저장해둔다.Access Token은 분실시 다시 확인할 수 없고, 재발급만 가능하니 잘 간직하자. 회신 기다리기회원가입시 등록한 메일 주소로 Vimeo 측에서 Upload Access에 대한 회신메일이 온다.Reject시 상세한 이유가 Approved시 환영한다라는 내용이다.조건을 충족해 승인 완료가 되어 해당 앱에 다시 들어가보면 아래처럼 상태가 바뀐다.2. PHP API 사용으로 이어집니다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"vimeo","slug":"vimeo","permalink":"https://gracefullight.dev/tags/vimeo/"}]},{"title":"Javascript로 로컬에 이미지 다운로드","slug":"javascript로-로컬에-이미지-다운로드","date":"2017-01-16T12:57:31.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/16/javascript로-로컬에-이미지-다운로드/","link":"","permalink":"https://gracefullight.dev/2017/01/16/javascript%EB%A1%9C-%EB%A1%9C%EC%BB%AC%EC%97%90-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C/","excerpt":"","text":"버튼을 눌러 이미지를 다운로드 받고 싶다면 어떻게 해야될까?Client Side 에서 할 수 있는 가장 쉬운 방법은 download attribute를 사용하는 것이다.하지만 예상했듯이 이 속성은 IE 에서 지원하지 않는다. For IE base64먼저 이미지를 base64 인코딩해야한다.FileReader 또는 Canvas 를 이용해 변환할 수 있는데 stackoverflow 의 명쾌한 답변을 참조하자.jQuery 환경이라면 Reading binary data using jquery ajax를 참조해도 된다.base64encode 가 된 이미지 데이터가 뽑아지면 시작할 수 있다.1data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPYAAAD2CAAAAADAeSUUAAADN0lEQVR42u3aQY7CMBAEQP7/afaKtEu2exwk4lROKITEZSQGT/vxiI/ny/H7zOv513ffXZl89viad6M6+cDGxsa+CDsZUP5uMqx3d8gntB3nH1ODjY2NvR373S/88TUtMuG1E5qMExsbGxv7eChJUTl+4nP5wMbGxsZu2UlbJy9RyQS1SxpsbGzsu7FXCkPeTkoihGTQeUPqhF4aNjY29tez81T0+19/JN/GxsbG/mL2rHEzi2OTxc968BwpsLGxsTdiz0Lc/I9+voBprzwhhMbGxsbeiN1S2xvNWkuzZtD6aLGxsbGvxW4f0BaqtpU/C4/bhRA2Njb2TuwkTF0ZVn4+/+zKJEb7lbCxsbG3YM9aRe0CJo8NkivzFhU2Njb2ruwW3/71r0vL6FnDXUvY2NjYl2XPAto8mm0LUrIImcUG2NjY2Luy1xv6eTCwMomzAlZPEzY2NvbF2ceDWIld82XJSjjRbsfExsbG3om9EgbkDak2GM5L6bApho2Njb0F+/imeclJWj/t61nwEBU2bGxs7I3Yn2vifKLN1MKKxQk2Njb2ZdlnFYzZ9bMG00rbCxsbG/sO7Lw13261zIvlMXVW5B7tDGFjY2NvwZ4lpDmpLYenXYmNjY29ETv5u5+XkDYYaFtL7ZKm2KmEjY2NfVl2u10mWYS009q2hNoC9scZbGxs7I3YM+SsjJ3V0lqZ3MfKd4uNjY39lexk6Hlkm4fHs40+7dacomhhY2Njb8TOi1MeCZw7oflER1t2sLGxsS/Onq1d2hC3XYq0japZCIGNjY29K7u9Xds8WmlU5SWwiH6xsbGxt2DnP/dthNBS12FFScPGxsbelN02aNrFRh4tzJ5SbO7BxsbGvgE7Aa8EACvlc6X9hI2Njb0T+1keySBmm3jy0Le92z9JCDY2NvbF2W0BOLfwHJ9vW0v1UgQbGxt7I3ZStFbKTLKMab+TZFH0T+SAjY2NvR07b7vP4ti2TK5MSvRcbGxs7Nuz2wfnT1nZalncBxsbG/vG7PWtlmdt5VlpimFjY2Pvx06aRHlBarfs5O3+9ut5u/rAxsbG3og9W1TkxWYWP7T3zBtV2NjY2BuxfwBOAYaS/PUQNQAAAABJRU5ErkJggg== blob이제 이미지 데이터를 Blob Object 로 변환해야한다.12345678910111213// imageSrc는 위의 이미지 데이터이다.// 실제 데이터는 iVBO...부터이므로 split한다.var imgData = atob(imageSrc.split(\",\")[1])var len = imgData.lengthvar buf = new ArrayBuffer(len) // 비트를 담을 버퍼를 만든다.var view = new Uint8Array(buf) // 버퍼를 8bit Unsigned Int로 담는다.var blob, ifor (i = 0; i &lt; len; i++) &#123; view[i] = imgData.charCodeAt(i) &amp; 0xff // 비트 마스킹을 통해 msb를 보호한다.&#125;// Blob 객체를 image/png 타입으로 생성한다. (application/octet-stream도 가능)blob = new Blob([view], &#123; type: \"image/png\" &#125;) msSaveOrOpenBlobIE10+ 에서 사용가능한 msSaveOrOpenBlob가 필요하다.msSaveBlob 메서드는 저장 단추만 사용자에게 제공하는 반면msSaveOrOpenBlob 메소드는 저장 및 열기 단추를 모두 제공한다는 것이 차이점이다.12// blob과 저장될 파일명을 받는다.window.navigator.msSaveOrOpenBlob(blob, \"new_file_name.png\") Not IEIE 가 세상에 존재하지 않는다면 코드는 아주 예쁘게 짤 수 있다.123&lt;a href=\"data:image/png;base64,iVBORw0KG...\" download=\"new_file_name.png\"&gt; &lt;img src=\"data:image/png;base64,iVBORw0KG...\"/&gt;&lt;/a&gt;a 태그가 보기 싫다면 아래 구문을 포함해 함수로 만든다.123456789101112var a = document.createElement(\"a\")a.style = \"display: none\"a.href = img.srca.download = \"new_file_name.png\"document.body.appendChild(a)a.click()setTimeout(function() &#123; // 다운로드가 안되는 경우 방지 document.body.removeChild(a)&#125;, 100) Blob 재사용IE 때문에 만들었던 Blob 객체를 URL 기능을 이용해 재사용해보자.12345678910111213var url = URL.createObjectURL(blob)var a = document.createElement(\"a\")a.style = \"display: none\"a.href = urla.download = \"new_file_name.png\"document.body.appendChild(a)a.click()setTimeout(function() &#123; document.body.removeChild(a) URL.revokeObjectURL(url) // 메모리 해제&#125;, 100) 소스12345678910111213141516171819202122232425262728293031323334353637383940/** * [downloadImage] * @param &#123;[string]&#125; img [base64encoded image data] * @param &#123;[string]&#125; fileName [new file name] * @return [image file] */function downloadImage(img, fileName) &#123; var imgData = atob(img.src.split(\",\")[1]), len = imgData.length, buf = new ArrayBuffer(len), view = new Uint8Array(buf), blob, i for (i = 0; i &lt; len; i++) &#123; view[i] = imgData.charCodeAt(i) &amp; 0xff // masking &#125; blob = new Blob([view], &#123; type: \"application/octet-stream\" &#125;) if (window.navigator.msSaveOrOpenBlob) &#123; window.navigator.msSaveOrOpenBlob(blob, fileName) &#125; else &#123; //var url = URL.createObjectURL(blob); var a = document.createElement(\"a\") a.style = \"display: none\" //a.href = url; a.href = img.src a.download = fileName document.body.appendChild(a) a.click() setTimeout(function() &#123; document.body.removeChild(a) //URL.revokeObjectURL(url); &#125;, 100) &#125;&#125; 여담","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"XML-RPC를 활용한 네이버 블로그 글쓰기 API","slug":"XML-RPC를-활용한-네이버-블로그-글쓰기-API","date":"2017-01-15T08:14:09.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/15/XML-RPC를-활용한-네이버-블로그-글쓰기-API/","link":"","permalink":"https://gracefullight.dev/2017/01/15/XML-RPC%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EB%84%A4%EC%9D%B4%EB%B2%84-%EB%B8%94%EB%A1%9C%EA%B7%B8-%EA%B8%80%EC%93%B0%EA%B8%B0-API/","excerpt":"","text":"OAuth 를 이용한 블로그 API 가 있는데, 네이버 블로그 글쓰기는 그보다 더 간단히 구현할 수 있다. XML-RPC for PHP 다운로드XML-RPC에서 다운받는다.압출을 푼 뒤 lib/xmlrpc.inc 파일을 로직을 만들 곳에 복사해 놓는다. 네이버 블로그 플러그인 설정관리 &gt; 글쓰기 API 설정 메뉴로 들어간다.사용하기로 설정을 바꾼 후 비밀번호를 기억하고, 어디에 등록할지 카테고리를 정한다. API 연동12345678910111213141516171819202122232425262728293031323334353637383940&lt;?phpinclude_once \"xmlrpc.inc\";$title = $_POST['title'];$content = $_POST['content'];$result = newPost($title, $content);echo json_encode($result);// 블로그 API 함수function newPost($title, $description) &#123; $g_blog_url = \"https://api.blog.naver.com/xmlrpc\"; $user_id = \"아이디\"; $blogid = \"아이디\"; $password = \"발급받은 비밀번호\"; $publish = true; $client = new xmlrpc_client($g_blog_url); $client-&gt;setSSLVerifyPeer(false); $GLOBALS['xmlrpc_internalencoding'] = 'UTF-8'; $struct = [ 'title' =&gt; new xmlrpcval($title, \"string\"), 'description' =&gt; new xmlrpcval($description, \"string\") ]; $f = new xmlrpcmsg(\"metaWeblog.newPost\", [ new xmlrpcval($blogid, \"string\"), new xmlrpcval($user_id, \"string\"), new xmlrpcval($password, \"string\"), new xmlrpcval($struct , \"struct\"), new xmlrpcval($publish, \"boolean\") ] ); $f-&gt;request_charset_encoding = 'UTF-8'; return $response = $client-&gt;send($f);&#125;?&gt;네이버 블로그는 html 태그가 먹으므로 escape 처리를 할 필요는 없다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"RESTful을 위한 PHP HTTP Method 처리","slug":"RESTful을-위한-PHP-HTTP-Method-처리","date":"2017-01-15T08:10:07.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/15/RESTful을-위한-PHP-HTTP-Method-처리/","link":"","permalink":"https://gracefullight.dev/2017/01/15/RESTful%EC%9D%84-%EC%9C%84%ED%95%9C-PHP-HTTP-Method-%EC%B2%98%EB%A6%AC/","excerpt":"","text":"메소드를 분기해서 새로운 배열에 담아주면 된다. 소스contentType을 application/json으로 보냈을 경우1234567891011121314151617&lt;?$method = strtolower($_SERVER['REQUEST_METHOD']);switch ($method) &#123; case 'get': $input = json_decode(json_encode($_GET), true); break; case 'post': $input = json_decode(file_get_contents('php://input'), true); break; case 'put': $input = json_decode(file_get_contents('php://input'), true); break; case 'delete': $input = json_decode(file_get_contents('php://input'), true); break;&#125;?&gt;contentType을 그냥 전송한다면 **file_get_contents(‘php://input’)**으로 받으면 된다. 여담GET을 제외한 method는 params를 JSON.stringify한 뒤에 file_get_contents로 읽어오면 되는데, GET으로는 file전송을 할 수 없기 때문에 위처럼 받으면 된다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"레이 커즈와일이 예측하는 기술발전 시나리오","slug":"레이-커즈와일이-예측하는-기술발전-시나리오","date":"2017-01-15T05:28:32.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/15/레이-커즈와일이-예측하는-기술발전-시나리오/","link":"","permalink":"https://gracefullight.dev/2017/01/15/%EB%A0%88%EC%9D%B4-%EC%BB%A4%EC%A6%88%EC%99%80%EC%9D%BC%EC%9D%B4-%EC%98%88%EC%B8%A1%ED%95%98%EB%8A%94-%EA%B8%B0%EC%88%A0%EB%B0%9C%EC%A0%84-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4/","excerpt":"","text":"급진적 미래학자인 레이 커즈와일이 How to create your mind에서 쓴 내용을 정리해봤다. 2010 년대망막에 이미지를 직접 조사하는 안경 형태의 디스플레이가 상용화인간의 뇌 용량과 거의 비슷한 10TB 의 컴퓨터가 100 만원대에 출시 2020 년대혈관 속에 투여하여 24 시간 인간의 몸 속 변화를 감시하는 나노봇이 상용화튜링테스트를 통과하는 컴퓨터의 등장자동차는 모두 자율주행차로 바뀜, 고속도로는 자율주행차의 통행만 가능 2030 년대가상현실 구현 기술이 발전해 실제와 구분할 수 없음마음과 의식을 컴퓨터에 백업할 수 있음 2040 년대인공지능이 인간의 지능보다 10 억배 뛰어난 성능을 발휘분자 단위로 물질을 조립할 수 있는 기술이 개발되어, 어떠한 물질이든 창조가능인간의 뇌와 클라우드 인공지능을 무선으로 연결하게되며, 인간의 지능은 10 억배 증가 인간2030 년대부터 뇌의 알고리즘이 컴퓨터로 구현이 완료된다면, 인간에 대한 정의가 달라질 수 있다.의식은 뇌에 있다.뇌의 모든 알고리즘을 옮겨 기계 뇌를 만들었다.기계는 의식이 있는 것인가?기계는 살아 있는 것인가?기계는 인간인가?의식은 뇌에서 나오니 의식이 있다고 할 수 있다.의식은 살아 있는 것에서부터 나오니 살아있다고 할 수 있다.??? 복제나의 뇌를 스캔해서 의식이 복제된 기계인 나 2가 있다.나 2는 마치 나처럼 내 삶에 대해 이야기하고심지어 &quot;새로운 몸이 참 마음에 드는군&quot;이라며 너스레를 떤다.나 2는 나라고 할 수 있을까?나 2는 겉보기엔 나와 똑같지만 나는 여기 존재하니 아니다.나는 뇌를 부분부분 기계로 바꾸는 수술을 진행하고 있다.수술은 성공적이여서 수술을 할수록 나의 신체 기능은 진화하고 있다.수술이 계속되어 완전한 기계뇌를 가진 내가 되었다.나는 위의 나 2와 똑같은 기계가 된 것이다.결국 나 2는 또다른 나이다.내가 둘이 된 것이다. 여담뇌를 모방하는 인공지능의 약진 기사를 읽어보면 도움이 된다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[]},{"title":"550 : smtp auth address is not same to envfrom address (#5.5.0)","slug":"550-smtp-auth-address-is-not-same-to-envfrom-address-5-5-0","date":"2017-01-15T05:26:16.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/15/550-smtp-auth-address-is-not-same-to-envfrom-address-5-5-0/","link":"","permalink":"https://gracefullight.dev/2017/01/15/550-smtp-auth-address-is-not-same-to-envfrom-address-5-5-0/","excerpt":"","text":"550 : smtp auth address is not same to envfrom addressstmp 로 메일 발송시 아래와 같은 오류가 발생하는 경우가 있다.12550 : smtp auth address is not same to envfrom address (#5.5.0)The following From address failed: your@email.com : MAIL FROM command failed, smtp auth address is not same to envfrom address (#5.5.0) 해결smtp 인증 username 과 보내는 메일주소가 같지 않아서 발생한다.username 과 from email 을 일치시켜주면 해결된다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"로컬 웹서버 돌리기 - 5. CURL 설정","slug":"로컬-웹서버-돌리기-5-CURL-설정","date":"2017-01-14T14:17:39.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/14/로컬-웹서버-돌리기-5-CURL-설정/","link":"","permalink":"https://gracefullight.dev/2017/01/14/%EB%A1%9C%EC%BB%AC-%EC%9B%B9%EC%84%9C%EB%B2%84-%EB%8F%8C%EB%A6%AC%EA%B8%B0-5-CURL-%EC%84%A4%EC%A0%95/","excerpt":"","text":"4. OpenSSL 설정에서 이어집니다.리눅스에서는 Curl 모듈을 확장만 하면 사용이 가능하지만 윈도우 로컬 서버에서는 사용이 되지 않는다. 해결해보자. 모듈 확장php.ini에서 php_curl 모듈의 주석을 해제한다. dll 복사총 4 개의 dll 파일을 C:\\Windows\\system32 폴더로 복사해야한다.php7\\ libeay32.dllphp7\\ libssh2.dllphp7\\ ssleay32.dllphp7\\ext\\ php_curl.dll이제 php curl command 를 사용할 수 있다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"로컬 웹서버 돌리기 - 4. HTTPS OpenSSL 설정","slug":"로컬-웹서버-돌리기-4-HTTPS-OpenSSL-설정","date":"2017-01-14T13:58:03.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/14/로컬-웹서버-돌리기-4-HTTPS-OpenSSL-설정/","link":"","permalink":"https://gracefullight.dev/2017/01/14/%EB%A1%9C%EC%BB%AC-%EC%9B%B9%EC%84%9C%EB%B2%84-%EB%8F%8C%EB%A6%AC%EA%B8%B0-4-HTTPS-OpenSSL-%EC%84%A4%EC%A0%95/","excerpt":"","text":"3. Virtual Host 설정에서 이어집니다.로컬에서 HTTPS 통신으로 프로젝트에 접근하시고 싶지 않으시다면 3 장으로 웹서버 구동은 완료됩니다. Apache SSL 사용 설정 모듈 활성화Apache24\\conf\\httpd.conf에서 ssl_module 과 socache_shmcb_module 의 주석을 해제한다. 설정 활성화Include conf/extra/httpd-ssl.conf의 주석을 해제한다. SSL 설정 변경 디렉토리 생성Apache24\\conf 경로에서 ssl폴더를 만든 뒤 conf/openssl.cnf 파일을 ssl 폴더로 복사한다. 키 생성ssl 폴더로 들어와 cmd 창을 연 뒤 키를 생성한다.12$ openssl genrsa -out domain.key 1024$ openssl req -new -config openssl.cnf -days 365 -key domain.key -out domain.csr위 명령어를 입력하면 입력 폼 형식이 나오는데, 주제에 맞게 입력하면 된다. (KR, Seoul 등)생성된 domain.key, domain.csr 파일을 확인한 뒤 아래 명령어를 입력한다.1$ openssl x509 -in domain.csr -out domain.crt -req -signkey domain.key -days 365완성된 파일 구조의 형태는 다음과 같아야한다. SSL 연동httpd-ssl.conf를 열어 키 파일을 연동해준다.그 밖에 다른 경로로 연결된 설정이 있다면 바로 잡아주면 된다. HTTPS 접속Apache restart 후 접속해보자. 여담 오류 발생시오류가 발생할 경우 Apache24\\logs\\error.log 파일을 확인해가며 진행하면 된다. Virtual Host 설정Virtual Host 에 직접 key 파일을 지정할 수도 있다.12345678&lt;VirtualHost *:443&gt; SSLEngine on SSLCertificateFile \"d:/Apache24/conf/ssl/domain.crt\" SSLCertificateKeyFile \"d:/Apache24/conf/ssl/domain.key\" DocumentRoot \"D:/workspace/test\" ServerName local.test.com&lt;/VirtualHost&gt;👏👏👏 이로서 로컬 HTTPS 서버를 가지게 되었습니다.다음 장에서는 서버 통신을 위해 CURL 설정을 해보겠습니다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"Windows10에서 hosts 파일 저장이 안될 때","slug":"Windows10에서-hosts-파일-저장이-안될-때","date":"2017-01-13T14:11:42.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/13/Windows10에서-hosts-파일-저장이-안될-때/","link":"","permalink":"https://gracefullight.dev/2017/01/13/Windows10%EC%97%90%EC%84%9C-hosts-%ED%8C%8C%EC%9D%BC-%EC%A0%80%EC%9E%A5%EC%9D%B4-%EC%95%88%EB%90%A0-%EB%95%8C/","excerpt":"","text":"실컷 hosts 파일을 변경했는데 다시 들어가보니 원래대로거나,권한이 없다고 아예 저장이 안 되는 경우가 있다. 해결 백신백신에 따라 hosts 파일을 보호하기 때문에 수정을 제한될 수 있다.잠시 백신을 사용안함 상태로 변경하자. Windows10Windows10 은 기본적으로 hosts 파일의 수정이 제한되어있다.바탕화면 우클릭 &gt; 새로만들기 &gt; 바로가기를 실행한다.항목 위치 입력에 host 파일 경로를 입력해 바로가기를 만든다.12# 아래 내용을 항목 위치 입력에 넣어 바로가기 생성C:\\Windows\\System32\\notepad.exe C:\\windows\\system32\\drivers\\etc\\hosts관리자 권한으로 실행한다.이제 hosts 파일을 수정하면 된다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"windows","slug":"windows","permalink":"https://gracefullight.dev/tags/windows/"}]},{"title":"로컬 웹서버 돌리기 - 3. Virtual Host 설정","slug":"로컬-웹서버-돌리기-3-Virtual-Host-설정","date":"2017-01-13T13:51:23.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/13/로컬-웹서버-돌리기-3-Virtual-Host-설정/","link":"","permalink":"https://gracefullight.dev/2017/01/13/%EB%A1%9C%EC%BB%AC-%EC%9B%B9%EC%84%9C%EB%B2%84-%EB%8F%8C%EB%A6%AC%EA%B8%B0-3-Virtual-Host-%EC%84%A4%EC%A0%95/","excerpt":"","text":"2. PHP 설치에서 이어집니다.Apache와 PHP의 연동은 끝났지만 사용하고 싶은 프로젝트를 연동하는 작업을 해주어야 원하는 폴더를 웹으로 볼 수 있을 것이다. Virtual Host 사용httpd.conf를 열어 맨 아래쪽으로 내리면 있는 httpd-vhost.conf의 주석을 해제한다. 디렉토리 접근 권한 변경httpd.conf에서 모든 디렉토리 접근권한은 기본적으로 차단되어있기에 변경해야한다.123456&lt;Directory /&gt; Options FollowSymLinks AllowOverride none Order allow,deny Allow from all&lt;/Directory&gt; Virtual Host 설정./conf/extra/httpd-vhosts.conf 파일을 연다.임시로 있는 VirtualHost를 지워주고 아래처럼 내가 사용할 프로젝트를 입력한다.DocumentRoot에는 프로젝트 경로, ServerName은 URL로 접근할 경로를 적는다. Host 파일 수정C:\\Windows\\system32\\drivers\\etc\\hosts 파일을 관리자 권한으로 열고 주소를 추가한다.1127.0.0.1 local.test.com 저장 불가일시잠시 hosts 파일을 수정가능하게 손을 보고 다시 오자. 연동 확인Apache restart 후에 확인한다.👏👏👏 이로서 기본 웹서버 설치는 마무리 됬습니다.다음 장에서는 HTTPS 환경을 위해 OpenSSL 설정을 해보겠습니다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"로컬 웹서버 돌리기 - 2. PHP 설치","slug":"로컬-웹서버-돌리기-2-PHP-설치","date":"2017-01-13T13:01:34.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/13/로컬-웹서버-돌리기-2-PHP-설치/","link":"","permalink":"https://gracefullight.dev/2017/01/13/%EB%A1%9C%EC%BB%AC-%EC%9B%B9%EC%84%9C%EB%B2%84-%EB%8F%8C%EB%A6%AC%EA%B8%B0-2-PHP-%EC%84%A4%EC%B9%98/","excerpt":"","text":"1. Apache 설치에서 이어집니다. PHP 다운로드 여기서 Apache 의 VC 버전에 맞는 Thread Safe 타입의 PHP 를 다운받으면 된다. 압축을 풀고 Apache 와 같은 폴더에 php7 로 변경해 저장한다. (D:\\php7) 폴더 안의 php.ini-development를 php.ini로 변경한다. 모듈 활성화 사용할 모듈의 세미콜론을 지워주면 된다. curl, mysqli, gettext, mbstring, openssl, pdomysql는 기본으로 지워주고, 나머진 나중에 지워도 된다. 설정 변경 php.ini 파일의 설정을 변경한다. 시간대 설정 date.timezone 을 추가한다. short_open_tag 설정","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"로컬 웹서버 돌리기 - 1. Apache 설치","slug":"로컬-웹서버-돌리기-1-Apache-설치","date":"2017-01-13T11:49:41.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/13/로컬-웹서버-돌리기-1-Apache-설치/","link":"","permalink":"https://gracefullight.dev/2017/01/13/%EB%A1%9C%EC%BB%AC-%EC%9B%B9%EC%84%9C%EB%B2%84-%EB%8F%8C%EB%A6%AC%EA%B8%B0-1-Apache-%EC%84%A4%EC%B9%98/","excerpt":"","text":"APM_setup 은 좋은 선택이지만, PHP 버전업에 있어서 충돌이 너무 심하고Nginx 도 좋은 선택이지만 나중에 정리하기로 하자. 아파치 다운로드여기에서 운영체제에 맞는 버전을 다운로드 한다.VC14, VC11 은 PHP 버전과도 관련있으니 다운받으면서 확인해 놓는다.압축을 풀면 Apache24 폴더가 생기는데 이 폴더를 원하는 경로로 옮겨준다. (D:\\Apache24) 경로 변경C:\\Apache24 에 압축을 풀었다면 3 번으로 넘어가자Apache24/conf/httpd.conf를 열어 경로를 변경한다.초기 설치 상태에서 C:\\로 검색시 4 개정도 찾아지는데 모두 변경해주면 된다. httpd 서비스 등록cmd 를 관리자 권한으로 실행 후 아래 명령어를 입력해준다.Windows10 : 시작메뉴 우클릭 &gt; 명령 프롬프트(관리자) 메뉴Windows7 : 시작메뉴 &gt; 모든 프로그램 &gt; 보조 프로그램 &gt; 명령 프롬프트 우클릭 &gt; 관리자 권한으로 실행1$ httpd.exe -k install httpd 구동Apache24\\bin\\ApacheMonitor.exe 실행한 뒤 작업표시줄에서 Apache 아이콘 클릭 후 서비스를 시작한다. localhost 접근👏👏👏 다음 장에서는 PHP 를 설치해 Apache 와 연동을 해보겠습니다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"sublime text custom shortcut","slug":"sublime-text-custom-shortcut","date":"2017-01-13T10:48:32.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/13/sublime-text-custom-shortcut/","link":"","permalink":"https://gracefullight.dev/2017/01/13/sublime-text-custom-shortcut/","excerpt":"","text":"서브라임 텍스트에서 단축키를 수정해보자. 설정Preferences &gt; Key Bindings 메뉴를 들어간다.Default 와 User 로 나눠진 창에서 User 창에 내 단축키를 등록하면 된다. 단축키다른 환경과 호환되는 사용하기 편한 단축키123456789101112131415161718192021222324252627[ // ctrl+d 로 줄삭제 &#123; keys: [\"ctrl+d\"], command: \"run_macro_file\", args: &#123; file: \"res://Packages/Default/Delete Line.sublime-macro\" &#125; &#125;, // 기존 ctrl+d의 기능을 옮김 &#123; keys: [\"ctrl+shift+k\"], command: \"find_under_expand\" &#125;, &#123; keys: [\"ctrl+k\", \"ctrl+shift+k\"], command: \"find_under_expand_skip\" &#125;, // 들여쓰기 활성화 &#123; keys: [\"f12\"], command: \"reindent\", args: &#123; single_line: false &#125; &#125;, // 파일 새로고침 &#123; keys: [\"f5\"], command: \"revert\" &#125;, // f1키 누를시 package controller 띄우기 (기존 ctrl+shift+p 기능) &#123; keys: [\"f1\"], command: \"show_overlay\", args: &#123; overlay: \"command_palette\" &#125; &#125;, // terminal package가 있을시 현재 프로젝트 터미널 띄우기 &#123; keys: [\"ctrl+alt+t\"], command: \"open_terminal_project_folder\" &#125;, // sidebarEnhancement package가 있을시 파일명 변경 &#123; keys: [\"f2\"], command: \"side_bar_rename\" &#125;, // sidebarEnhancement package가 있을시 새 파일 생성 &#123; keys: [\"ctrl+n\"], command: \"side_bar_new_file2\" &#125;]","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"sublimetext","slug":"sublimetext","permalink":"https://gracefullight.dev/tags/sublimetext/"}]},{"title":"Redmine Bitnami 플러그인 설치","slug":"Redmine-Bitnami-플러그인-설치","date":"2017-01-13T09:15:52.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/13/Redmine-Bitnami-플러그인-설치/","link":"","permalink":"https://gracefullight.dev/2017/01/13/Redmine-Bitnami-%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8-%EC%84%A4%EC%B9%98/","excerpt":"","text":"빛나미로 설치된 레드마인에 플러그인을 추가해보자 플러그인 폴더 이동root 권한으로 접근해야한다.1$ cd /opt/redmine/apps/redmine/htdocs/plugins 플러그인 설치1$ git clone 플러그인 레드마인 쉘 접속12$ cd /opt/redmine$ ./use_redmine 레드마인 번들 업데이트번들은 플러그인이라고 생각하면 된다.12$ cd apps/redmine/htdocs$ rake redmine:plugins:migrate RAILS_ENV=productionrake 명령어가 실행이 안될시12$ bundle install --without development test$ rake redmine:plugins:migrate RAILS_ENV=production 레드마인 재시작123$ exit$ cd /opt/redmine$ ./ctlscript.sh restart이제 레드마인 관리자에서 플러그인을 관리할 수 있다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[]},{"title":"sublime text Recommanded Packages","slug":"sublime-text-Recommanded-Packages","date":"2017-01-13T08:17:14.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/13/sublime-text-Recommanded-Packages/","link":"","permalink":"https://gracefullight.dev/2017/01/13/sublime-text-Recommanded-Packages/","excerpt":"","text":"서브라임 텍스트 사용시 쓸만한 패키지를 모아봤다. 패키지NameDescriptionadditional PHP SnippetsPHP 자동완성All Autocomplete열려있는 모든 문서의 구문을 가져와 자동완성Auto RefreshN초마다 자동 파일갱신AutoFileName파일경로 입력시 자동으로 목록을 보여줌BracketHighlighter괄호 하이라이터Color HighlighterHEX 및 색상 하이라이터ConvertToUTF8UTF8 환경 사용가능DocBlockr괄호 자동생성EJS2ejs 사용 가능GitGit 사용 가능IMESupport한글 및 기타 문자 사용가능JavaScript &amp; NodeJS Snippetsjs 및 node 자동완성Javascript Beautify압축된 js의 아름답게Javascript Completionsjs 자동완성Javascript PatternsES5이하에서 최적화된 js패턴 사용JSHint Gutterjs hint를 gutter 아이콘으로 표시LESSless 사용 가능MarkdownEditingmarkdown 사용 가능Material Theme메테리얼 테마SFTPftp 사용 가능SideBarEnhancements기본 우클릭메뉴 강화SublimeCodeIntelHTML 구문 자동완성SublimeLinter문법 체크SublimeLinter-jshintjs 문법체크SublimeLinter-phpphp 문법체크SublimeLinter-xmllintxml 문법체크SyncedSideBar파일 선택시 사이드바의 폴더가 자동으로 열림Terminal터미널TortoiseSVNSVN 사용가능TrailingSpaces빈공간 제거TypeScriptts 사용 가능UMD snippetsUMD 모듈패턴 자동완성진하게 표시가 된 패키지들은 필수로 설치하는걸 추천한다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"sublimetext","slug":"sublimetext","permalink":"https://gracefullight.dev/tags/sublimetext/"}]},{"title":"Windows10 업데이트 후 80포트를 사용할 수 없을 때","slug":"Windows10-업데이트-후-80포트를-사용할-수-없을-때","date":"2017-01-13T05:26:00.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/13/Windows10-업데이트-후-80포트를-사용할-수-없을-때/","link":"","permalink":"https://gracefullight.dev/2017/01/13/Windows10-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%9B%84-80%ED%8F%AC%ED%8A%B8%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%A0-%EC%88%98-%EC%97%86%EC%9D%84-%EB%95%8C/","excerpt":"","text":"Windows10 Anniversary 업데이트 후에 갑자기 80 포트 또는 Apache 서비스를 사용할 수 없는 경우가 있다. 원인WWW Publishing service 가 80 포트를 사용해서 충돌이 발생했다. 해결services.msc 를 실행해 *WWW Publishing 서비스를 사용안함으로 체크한 뒤 재부팅해주면 된다.(로컬 웹을 돌릴 정도면 서비스창을 띄울 수 있을 것이라 믿는다)","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"windows","slug":"windows","permalink":"https://gracefullight.dev/tags/windows/"}]},{"title":"한글 URL 주소 Ping 확인","slug":"한글-URL-주소-Ping-확인","date":"2017-01-13T05:24:17.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2017/01/13/한글-URL-주소-Ping-확인/","link":"","permalink":"https://gracefullight.dev/2017/01/13/%ED%95%9C%EA%B8%80-URL-%EC%A3%BC%EC%86%8C-Ping-%ED%99%95%EC%9D%B8/","excerpt":"","text":"퓨니코드 확인한글 도메인의 Ping 을 확인하려면 퓨니코드로 변환 후에 쏘면 된다. pingOutput에 들어가 있는 주소를 복사해 사용한다.1$ ping xn--bj0bj3i97fq8o5lq.co.kr","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"}]},{"title":"Windows10 Anniversary 업데이트 후 작업표시줄 폰트가 검게 보일 때","slug":"Windows10-Anniversary-업데이트-후-작업표시줄-폰트가-검게-보일-때","date":"2017-01-13T05:19:52.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/13/Windows10-Anniversary-업데이트-후-작업표시줄-폰트가-검게-보일-때/","link":"","permalink":"https://gracefullight.dev/2017/01/13/Windows10-Anniversary-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%ED%9B%84-%EC%9E%91%EC%97%85%ED%91%9C%EC%8B%9C%EC%A4%84-%ED%8F%B0%ED%8A%B8%EA%B0%80-%EA%B2%80%EA%B2%8C-%EB%B3%B4%EC%9D%BC-%EB%95%8C/","excerpt":"","text":"Anniversary 업데이트 후 작업표시줄(taskbar)의 글꼴이 회색? 검정색? 이 되어 보이지가 않는 경우가 있다.이 부분과 날짜 표시 부분이 검게 변한다. 프로그램 제목이 안보이면 여간 불편한게 아니니 직접 변경해보자. 원인업데이트시 theme 파일이 충돌되었다. 해결바탕화면 우클릭 &gt; 개인설정 &gt; 테마 &gt; 테마설정에 들어간다.테마를 Windows 기본값 테마로 바꾼 후 내 테마들을 우클릭 해 삭제해준다.그리고 다시 내 테마를 커스터마이징 하면 된다!","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"windows","slug":"windows","permalink":"https://gracefullight.dev/tags/windows/"}]},{"title":"EditPlus 테마 설정","slug":"EditPlus-테마-설정","date":"2017-01-13T05:13:26.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/13/EditPlus-테마-설정/","link":"","permalink":"https://gracefullight.dev/2017/01/13/EditPlus-%ED%85%8C%EB%A7%88-%EC%84%A4%EC%A0%95/","excerpt":"","text":"에디트 플러스를 어쩔 수 없이 써야할 상황이 있다.바로 FTP 에 붙어서 작업해야 될 경우인데, 기본 테마가 메모장이라 아쉽다.그럴 때 서브라임텍스트 소다테마를 적용하면 된다. 설치 다운로드파일을 다운받는다.EditPlus 폴더 안에 theme 폴더를 만들고 그 안에 압출을 풀어주자. 설정도구 &gt; 기본설정 &gt; 일반 &gt; 색상 탭에서 가져오기 버튼을 클릭하고 ini 파일을 읽어들인다.파일 &gt; 설정 &amp; 구문강조 탭에 가서 PHP를 선택 후 구문파일에 다운받은 php.stx 를 등록해준다.이제 예쁜 에디트플러스를 즐길 수 있다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[]},{"title":"PHP - Request와 Session을 Javascript에서 사용","slug":"PHP-Request와-Session을-Javascript에서-사용","date":"2017-01-13T04:49:58.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/13/PHP-Request와-Session을-Javascript에서-사용/","link":"","permalink":"https://gracefullight.dev/2017/01/13/PHP-Request%EC%99%80-Session%EC%9D%84-Javascript%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9/","excerpt":"","text":"소스123456&lt;script&gt;var request = JSON.parse('&lt;?=addcslashes(json_encode($_REQUEST), '\"\\\\')?&gt;');var session = JSON.parse('&lt;?=json_encode($_SESSION)?&gt;');Object.freeze(request);Object.freeze(session);&lt;/script&gt; 설명addcslashes 로 파싱을 안하면 json text 를 request 로 보낼 때 Unexpected Token 오류가 발생하는 경우가 있다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"imageTTFtext 한글 깨짐 해결","slug":"imageTTFtext-한글-깨짐-해결","date":"2017-01-13T04:46:17.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/13/imageTTFtext-한글-깨짐-해결/","link":"","permalink":"https://gracefullight.dev/2017/01/13/imageTTFtext-%ED%95%9C%EA%B8%80-%EA%B9%A8%EC%A7%90-%ED%95%B4%EA%B2%B0/","excerpt":"","text":"텍스트를 이미지로 만드는 경우에 사용하는 imageTTFtext 함수는 한글이 깨지는 문제가 있다. 해결imageTTFtext 전에 아래 함수로 한글을 컨버팅해준다.1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465&lt;?php/*** @author http://php.net/manual/en/function.imagettftext.php#57416*/function foxy_utf8_to_nce($utf = '') &#123; if (empty($utf)) &#123; return($utf); &#125; $max_count = 5; // flag-bits in $max_mark ( 1111 1000 == 5 times 1) $max_mark = 248; // marker for a (theoretical ;-)) 5-byte-char and mask for a 4-byte-char; $html = \"\"; for ($str_pos = 0; $str_pos &lt; strlen($utf); $str_pos++) &#123; $old_chr = $utf&#123;$str_pos&#125;; $old_val = ord( $utf&#123;$str_pos&#125; ); $new_val = 0; $utf8_marker = 0; // skip non-utf-8-chars if ( $old_val &gt; 127 ) &#123; $mark = $max_mark; for($byte_ctr = $max_count; $byte_ctr &gt; 2; $byte_ctr--) &#123; // actual byte is utf-8-marker? if( ( $old_val &amp;; $mark ) == ( ($mark &lt;&lt; 1) &amp;; 255 ) ) &#123; $utf8_marker = $byte_ctr - 1; break; &#125; $mark = ($mark &lt;&lt; 1) &amp; 255; &#125; &#125; // marker found: collect following bytes if ($utf8_marker &gt; 1 &amp;&amp; isset( $utf&#123;$str_pos + 1&#125; ) ) &#123; $str_off = 0; $new_val = $old_val &amp;; (127 &gt;&gt; $utf8_marker); for($byte_ctr = $utf8_marker; $byte_ctr &gt; 1; $byte_ctr--) &#123; // check if following chars are UTF8 additional data blocks // UTF8 and ord() &gt; 127 if( (ord($utf&#123;$str_pos + 1&#125;) &amp; 192) == 128 ) &#123; $new_val = $new_val &lt;&lt; 6; $str_off++; // no need for Addition, bitwise OR is sufficient // 63: more UTF8-bytes; 0011 1111 $new_val = $new_val | ( ord( $utf&#123;$str_pos + $str_off&#125; ) &amp; 63 ); &#125; // no UTF8, but ord() &gt; 127 // nevertheless convert first char to NCE else &#123; $new_val = $old_val; &#125; &#125; // build NCE-Code $html .= '&amp;#'.$new_val.';'; // Skip additional UTF-8-Bytes $str_pos = $str_pos + $str_off; &#125; else &#123; $html .= chr($old_val); $new_val = $old_val; &#125; &#125; return($html);&#125; 여담원작자를 못 찾겠다… 이걸 만든 사람은 binary 로 말을 할 것 같다.","categories":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/categories/php/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"}]},{"title":"카카오 og tag 캐시 제거","slug":"카카오-og-tag-캐시-제거","date":"2017-01-13T04:24:55.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2017/01/13/카카오-og-tag-캐시-제거/","link":"","permalink":"https://gracefullight.dev/2017/01/13/%EC%B9%B4%EC%B9%B4%EC%98%A4-og-tag-%EC%BA%90%EC%8B%9C-%EC%A0%9C%EA%B1%B0/","excerpt":"","text":"og image 또는 og tag 를 변경하면 페북, 네이버는 시간이 지나면 갱신되나 카카오는 캐싱되어서 바뀌지 않는다.(Description 같은 경우 반영이 되나, Image 는 캐시를 지울 때까지 반영이 안 되는 것 같다) 해결Kakao Developers에서 캐시를 삭제하여 해결이 가능하다. Cache 삭제Cache Tool에서 URL 을 입력하고 캐시를 삭제한다. linkinfo 삭제카카오 스토리 링크 캐시삭제에서 내 앱으로 인증한 뒤 캐시삭제를 요청한다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"kakao","slug":"kakao","permalink":"https://gracefullight.dev/tags/kakao/"}]},{"title":"Vi, Vim에서 줄번호 표시","slug":"Vi-Vim에서-줄번호-표시","date":"2017-01-13T02:40:21.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/13/Vi-Vim에서-줄번호-표시/","link":"","permalink":"https://gracefullight.dev/2017/01/13/Vi-Vim%EC%97%90%EC%84%9C-%EC%A4%84%EB%B2%88%ED%98%B8-%ED%91%9C%EC%8B%9C/","excerpt":"","text":"Vi 줄번호Vi Editor의 줄번호를 표시해보자파일을 연 다음 아래 명령어를 입력한다. 표시하기1:set number 추가적으로 라인이동에 필요한 단축키G (shift+g) 문서 맨 끝으로 이동gg (1G) 문서 처음으로 이동+ G number 번째의 라인으로 이동 (예시 : 300G)","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"centos","slug":"centos","permalink":"https://gracefullight.dev/tags/centos/"}]},{"title":"chkconfig run level 설명","slug":"chkconfig-run-level-설명","date":"2017-01-13T02:11:32.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/13/chkconfig-run-level-설명/","link":"","permalink":"https://gracefullight.dev/2017/01/13/chkconfig-run-level-%EC%84%A4%EB%AA%85/","excerpt":"","text":"chkconfig 로 부팅시 자동실행 서비스를 등록할 수 있다.1$ chkconfig service on이 명령어를 사용하면 2345 레벨이 활성화 된다.그렇다면 레벨은 뭘까? Run LevelRun Level 은 서비스의 실행을 단계별로 구분하여 적용하는 것을 말한다.0 - halt (Do NOT set init default to this)1 - Single user mode2 - Multiuser, without NFS (The same as 3, if you do not have networking)3 - Full multiuser mode4 - unused5 - X116 - reboot (Do NOT set init default to this)0 : 시스템 종료시1 : 싱글 유저 모드 (시스템 복원모드, 기본적으로 관리자 권한의 쉘을 얻게 된다)2 : NFS가 지원되지 않는 다중 사용자 모드 (네트워크를 사용하지 않는 텍스트 유저 모드)3 : 완전 다중 사용자 모드 (일반적인 로그인 시, CLI 환경)4 : 미지정 (사용안함, 임의로 정할 수 있음)5 : 3번과 같으나 GUI (X11) 환경6 : 재부팅모듈 설치시에는 on 또는 345 설정이 큰 차이가 없다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"}]},{"title":"CentOS 버전 및 Bit 확인","slug":"CentOS-버전-및-Bit-확인","date":"2017-01-12T15:33:12.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/12/CentOS-버전-및-Bit-확인/","link":"","permalink":"https://gracefullight.dev/2017/01/12/CentOS-%EB%B2%84%EC%A0%84-%EB%B0%8F-Bit-%ED%99%95%EC%9D%B8/","excerpt":"","text":"리눅스에 모듈을 설치할 때 항상 버전과 Bit확인이 필요하다. Version123$ cat /etc/*release*CentOS release 6.6 (Final) Bit123$ getconf LONG_BIT64","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"centos","slug":"centos","permalink":"https://gracefullight.dev/tags/centos/"}]},{"title":"캐시메모리가 꽉차서 메모리 용량이 부족한 경우","slug":"캐시메모리가-꽉차서-메모리-용량이-부족한-경우","date":"2017-01-12T12:36:22.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2017/01/12/캐시메모리가-꽉차서-메모리-용량이-부족한-경우/","link":"","permalink":"https://gracefullight.dev/2017/01/12/%EC%BA%90%EC%8B%9C%EB%A9%94%EB%AA%A8%EB%A6%AC%EA%B0%80-%EA%BD%89%EC%B0%A8%EC%84%9C-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%9A%A9%EB%9F%89%EC%9D%B4-%EB%B6%80%EC%A1%B1%ED%95%9C-%EA%B2%BD%EC%9A%B0/","excerpt":"","text":"파일에 접근이 빈번한 시스템에서 메모리 용량을 확인시12# 메모리 용량 확인$ free -m캐시메모리의 점유율이 꽉찰 정도로 높게 나타나 메모리 용량이 부족한 걸 확인할 수 있다. 원인리눅스는 물리적인 저장/통신 장치와 데이터를 주고 받을 때 메모리에 먼저 적재한 후에 데이터를 주고 받는다.이는 동일한 데이터에 대한 접근을 할 경우 메모리에서 바로 가져오도록 하여 I/O 성능을 높이기 위함이다. 해결 vfs_cache_pressure시스템 설정 파일을 열어 디렉토리와 inode 오브젝트에 대한 캐시로 사용된 메모리를 반환하는 정도를 지정하는 vfs_cache_pressure 파라미터를 수정해준다.123$ vi /etc/sysctl.conf# 기본값은 100vm.vfs_cache_pressure = 10000 cache memory drop캐시메모리를 주기적으로 비워주자123$ crontab -e# 매일 새벽 4시에 캐시메모리 강제비우기0 4 * * * sync &amp;&amp; echo 3 &gt; /proc/sys/vm/drop_cachessync 명령어로 캐시메모리에 담긴 데이터를 실제 저장장치에 반영해주고, drop_caches를 실행한다.커맨드로 실행시에 메모리를 반환하면서 서버가 잠시 멈출 수 있으니 새벽에 실행을 걸어놓자echo 1 : page cache 해제echo 2 : inode, dentry cache 해제echo 3 : 모두 해제","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"}]},{"title":"Linux 유저 비밀번호 변경","slug":"Linux-유저-비밀번호-변경","date":"2017-01-12T11:44:58.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/12/Linux-유저-비밀번호-변경/","link":"","permalink":"https://gracefullight.dev/2017/01/12/Linux-%EC%9C%A0%EC%A0%80-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8-%EB%B3%80%EA%B2%BD/","excerpt":"","text":"passwd리눅스 유저 비밀번호를 변경해보자.비밀번호를 변경하고 싶은 유저로 로그인을 한 뒤 아래 명령어를 날리면 된다.1$ passwdRoot 권한이라면 다른 아이디의 비밀번호도 변경이 가능하다.12# passwd 뒤에 유저아이디를 적는다$ passwd userid","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"}]},{"title":"cron 부팅시 프로그램 실행","slug":"cron-부팅시-프로그램-실행","date":"2017-01-11T06:11:08.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/11/cron-부팅시-프로그램-실행/","link":"","permalink":"https://gracefullight.dev/2017/01/11/cron-%EB%B6%80%ED%8C%85%EC%8B%9C-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%EC%8B%A4%ED%96%89/","excerpt":"","text":"리눅스에서 재부팅시 자동으로 프로그램을 실행해야하는 경우가 있다.init.d에 등록하는 방법이 있지만 스케쥴 작업인 경우 크론에서 관리하는게 깔끔한 것 같다. 예제123$ crontab -e@reboot /test/test.sh start@reboot를 쓴 뒤 부팅시 실행시킬 명령어를 적어주면 된다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"}]},{"title":"내부 아이피 사용 또는 수동 네트워크 설정시 오류","slug":"내부-아이피-사용-또는-수동-네트워크-설정시-오류","date":"2017-01-11T05:20:26.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/11/내부-아이피-사용-또는-수동-네트워크-설정시-오류/","link":"","permalink":"https://gracefullight.dev/2017/01/11/%EB%82%B4%EB%B6%80-%EC%95%84%EC%9D%B4%ED%94%BC-%EC%82%AC%EC%9A%A9-%EB%98%90%EB%8A%94-%EC%88%98%EB%8F%99-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%84%A4%EC%A0%95%EC%8B%9C-%EC%98%A4%EB%A5%98/","excerpt":"","text":"수동으로 내부 아이피 세팅 중 문제가 발생하는 경우 확인해봐야한다. NetworkManager네트워크 매니저가 돌아가고 있으면 충돌이 발생할 수 있다.12345678# 확인$ service NetworkManager status# 서비스 종료$ service NetworkManager stop# 부팅 서비스 삭제$ chkconfig NetworkManager off 내부 IP 확인1$ /sbin/ifconfig $1 | grep \"inet addr\" | awk -F: '&#123;print $2&#125;' | awk '&#123;print $1&#125;'정상적으로 할당될 것이다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"}]},{"title":"mysql, maria 등의 서비스 포트 변경이 안 될때","slug":"mysql-maria-등의-서비스-포트-변경이-안-될때","date":"2017-01-10T14:01:42.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/10/mysql-maria-등의-서비스-포트-변경이-안-될때/","link":"","permalink":"https://gracefullight.dev/2017/01/10/mysql-maria-%EB%93%B1%EC%9D%98-%EC%84%9C%EB%B9%84%EC%8A%A4-%ED%8F%AC%ED%8A%B8-%EB%B3%80%EA%B2%BD%EC%9D%B4-%EC%95%88-%EB%90%A0%EB%95%8C/","excerpt":"","text":"일반적인 포트 변경 포트 확인12# grep 뒤에 확인할 포트를 적으면 된다.$ netstat -lp | grep 3307 iptable 수정1234$ vi /etc/sysconfig/iptables# 해당 포트를 방화벽에서 열어준다.-A INPUT -p tcp -m state --state NEW -m tcp --dport 3307 -j ACCEPT database 포트 변경1234$ vi /etc/my.cnf# 포트가 설정되있는 부분을 찾아 변경한다.port = 3307 서비스 재시작1$ service mysql restart잘 했는데 서비스가 올라가지 않는다!!! 원인 로그 확인mysql 설치 경로로 이동하여 로그를 살펴보자.1234567$ cd /var/lib/mysql/ # basedir 설정이 되어있다면 해당경로를 덧붙힌다.$ cat &#123;hostname&#125;.err[ERROR] Cant start server: Bind on TCP/IP port. Got error: 13: Permission denied[ERROR] Do you already have another mysqld server running on port: 3307 ?[ERROR] Aborting해당 포트에 권한이 없다. 해당 포트를 다른 mysqld 서비스가 사용하는가? 라고 로그가 남겨져있다. SELinux 확인123$ sestatusSELinux status: enabled혹시나 역시나 SELinux가 활성화 되어있다.SELinux에서 포트가 서비스용으로 활성화가 되지 않았기 때문에 계속 거절당한 것이였다. 해결 SELinux 설정 확인semanage 명령어를 사용해서 확인하고 변경할 수 있다.명령어 실행이 안될 경우 policycoreutils-python 패키지를 설치해주면 된다.12345678910# semanage 설치$ yum install -y policycoreutils-python# 포트 확인# mysql$ semanage port -l | grep mysqld_port_t# http$ semanage port -l | grep http_port_tmysqld_port_t tcp 1186, 3306, 63132-63164변경하려는 3307 포트는 등록되어 있지 않다. SELinux에 포트 등록1$ semanage port -a -t mysqld_port_t -p tcp 3307명령어가 iptables에 등록하는 것과 유사하다. 확인123$ semanage port -l | grep mysqld_port_tmysqld_port_t tcp 3307, 1186, 3306, 63132-63164이제 mysql restart를 하면 정상적으로 구동된다. 여담리눅스에서 정상적으로 진행했는데 뭔가 안된다면 SELinux부터 의심해보자.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"selinux","slug":"server/selinux","permalink":"https://gracefullight.dev/categories/server/selinux/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"},{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"},{"name":"selinux","slug":"selinux","permalink":"https://gracefullight.dev/tags/selinux/"}]},{"title":"Temporary failure in name resolution, 일시적인 실패","slug":"Temporary-failure-in-name-resolution-일시적인-실패","date":"2017-01-10T13:58:08.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/10/Temporary-failure-in-name-resolution-일시적인-실패/","link":"","permalink":"https://gracefullight.dev/2017/01/10/Temporary-failure-in-name-resolution-%EC%9D%BC%EC%8B%9C%EC%A0%81%EC%9D%B8-%EC%8B%A4%ED%8C%A8/","excerpt":"","text":"모듈 설치시 domain을 사용하거나, telnet 도메인 포트를 호출해봤는데name resolution에서 일시적인실패 또는 Temporary failure 문구의 에러가 보이는 경우가 있다. 원인nameserver를 찾지 못해서 발생한다. 해결Root 계정으로 접속 후 nameserver 설정을 추가한다.12345$ vi /etc/resolv.conf# 아래 내용을 추가nameserver 58.227.193.227nameserver 221.143.20.131저장하면 서비스 재시작이 필요없이 바로 적용된다. 여담통신사별 DNS 정보 페이지를 첨부한다.아마존 DNS 오류로 이 페이지의 조회수가 급증했다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"}]},{"title":"selinux 설정시 ftp 접근이 안될 때","slug":"selinux-설정시-ftp-접근이-안될-때","date":"2017-01-10T13:54:09.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/10/selinux-설정시-ftp-접근이-안될-때/","link":"","permalink":"https://gracefullight.dev/2017/01/10/selinux-%EC%84%A4%EC%A0%95%EC%8B%9C-ftp-%EC%A0%91%EA%B7%BC%EC%9D%B4-%EC%95%88%EB%90%A0-%EB%95%8C/","excerpt":"","text":"selinux 를 끄는건 보안상 취약하다. 하지만 켜놓으면 ftp 가 접근이 안되거나, 접근이 되어도 패시브모드가 접근이 안 되는 경우가 있다. 해결아래 세가지 명령어를 실행해서 selinux 의 설정을 바꿔준다.123$ setsebool -P httpd_enable_homedirs 1$ setsebool -P httpd_can_network_connect 1$ setsebool -P allow_ftpd_full_acccess 1 여담옵션명이 곧 설명을 대신한다고 믿는다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"selinux","slug":"server/selinux","permalink":"https://gracefullight.dev/categories/server/selinux/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"selinux","slug":"selinux","permalink":"https://gracefullight.dev/tags/selinux/"}]},{"title":"lynx 리눅스 브라우저 사용법","slug":"lynx-리눅스-브라우저-사용법","date":"2017-01-10T13:50:44.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/10/lynx-리눅스-브라우저-사용법/","link":"","permalink":"https://gracefullight.dev/2017/01/10/lynx-%EB%A6%AC%EB%88%85%EC%8A%A4-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%EC%82%AC%EC%9A%A9%EB%B2%95/","excerpt":"","text":"lynx(링스) 브라우저를 설치하고 사용해보자 설치12345# 설치 확인$ yum list installed | grep lynx# lynx 설치$ yum install -y lynx 예제12345# lynx로 브라우저 호출$ lynx https://gracefullight.github.io# 브라우저 호출'만' 하고 싶을 때 (결과를 표시하지 않음)$ lynx -dump https://gracefullight.github.io 여담crontab과 병행해서 서버의 API를 주기적으로 동작시킬 수 있다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"lynx","slug":"lynx","permalink":"https://gracefullight.dev/tags/lynx/"}]},{"title":"CentOS Tomcat 및 Java(JDK) 설치","slug":"CentOS-Tomcat-및-Java-JDK-설치","date":"2017-01-10T13:32:28.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/10/CentOS-Tomcat-및-Java-JDK-설치/","link":"","permalink":"https://gracefullight.dev/2017/01/10/CentOS-Tomcat-%EB%B0%8F-Java-JDK-%EC%84%A4%EC%B9%98/","excerpt":"","text":"rpm이 설치되어있지 않은 환경에서의 compile 설치 방법을 다룬다. 운영체제 확인123$ cat /etc/issue# bit 확인$ getconf LONG_BIT JDK 설치 다운로드여기에서 다운로드하면 된다. 업로드 및 압축 해제1$ tar -zxvf jdk.tar.gz 경로 설정123456789$ vi .profile# 추가 내용export JAVA_HOME=/유저경로/javaexport CLASSPATH=$JAVA_HOME/lib:$JAVA_HOME/jre/lib/ext:$JAVA_HOME/lib/tools.jarexport PATH=/bin:/usr/bin:/usr/local/bin:$JAVA_HOME/bin# 저장$ :wq!bin 폴더 PATH들은 명령어를 위해 필요하고 $PATH &lt; 기존 PATH를 추가하지 않는 이유는 TOMCAT 실행시 기본 설치 PATH를 먼저 읽어오기 때문이다. 경로 갱신1$ source .profile 설치 확인1$ javac -version Tomcat 설치 다운로드여기에서 다운로드하면 된다. 업로드 및 압축 해제apache-tomcat-…의 이름이 길어 tomcat으로 변경 후 업로드하시면 편합니다.1$ tar -zxvf tomcat.tar.gz 경로 설정1234$ vi .profile# PATH 뒤에 tomcat/bin 경로를 추가export PATH=/bin:/usr/bin:/usr/local/bin:$JAVA_HOME/bin:/home/myuser/tomcat/bin 경로 확인1234$ $PATH/bin:/usr/bin:/usr/local/bin:$JAVA_HOME/bin:/home/myuser/tomcat/bin# 위에 설정한 PATH의 값이 보이면 정상 Tomcat 설정 추가tomcat\\bin\\catalina.sh를 열고 Tomcat과 Java의 경로를 추가해준다.1234CATALINA_HOME=\"/where/to/tomcat\"CATALINA_BASE=\"/where/to/tomcat\"JAVA_HOME=\"/where/to/java\" 주의catalina.sh의 주석 표시된 내용을 읽으면 변수를 추가하지 말고 setenv.sh를 만들어서 커스터마이징 옵션을 분리하라고 나온다.setenv.sh를 수정하고 싶으면 파일을 열고 아래와 같이 추가해준다.1234export CATALINA_HOME=\"/where/to/tomcat\"export CATALINA_BASE=\"/where/to/tomcat\"export JAVA_HOME=\"/where/to/java\" 서버 실행tomcat\\webapps에 war파일을 옮긴 후 서버를 실행한다.123$ startup.shTomcat started.","categories":[{"name":"java","slug":"java","permalink":"https://gracefullight.dev/categories/java/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"centos","slug":"centos","permalink":"https://gracefullight.dev/tags/centos/"}]},{"title":"Vi, Vim 단축키","slug":"Vi-Vim-단축키","date":"2017-01-10T13:29:29.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/10/Vi-Vim-단축키/","link":"","permalink":"https://gracefullight.dev/2017/01/10/Vi-Vim-%EB%8B%A8%EC%B6%95%ED%82%A4/","excerpt":"","text":"단축키를 그림으로 정리해놓은 자료가 있어 공유한다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/tags/server/"},{"name":"centos","slug":"centos","permalink":"https://gracefullight.dev/tags/centos/"}]},{"title":"org.apache.ibatis.exceptions.PersistenceException","slug":"org-apache-ibatis-exceptions-PersistenceException","date":"2017-01-10T13:21:04.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/10/org-apache-ibatis-exceptions-PersistenceException/","link":"","permalink":"https://gracefullight.dev/2017/01/10/org-apache-ibatis-exceptions-PersistenceException/","excerpt":"","text":"원인서버 Mysql이 예전 커넥션을 그대로 가지고 있어서 발생한다. 해결Mybatis Config에 아래처럼 커넥션과 관련된 옵션을 추가한다.1234567891011121314151617181920212223242526272829&lt;!-- @author http://linuxism.tistory.com/580 --&gt;&lt;environments default=\"default\"&gt; &lt;environment id=\"default\"&gt; &lt;transactionManager type=\"JDBC\"/&gt; &lt;dataSource type=\"POOLED\"&gt; &lt;property name=\"driver\" value=\"$&#123;jdbc.driverClassName&#125;\"/&gt; &lt;property name=\"url\" value=\"$&#123;jdbc.url&#125;\"/&gt; &lt;property name=\"username\" value=\"$&#123;jdbc.username&#125;\"/&gt; &lt;property name=\"password\" value=\"$&#123;jdbc.password&#125;\"/&gt; &lt;!-- 동시 커넥션 수 --&gt; &lt;property name=\"poolMaximumActiveConnections\" value=\"20\"/&gt; &lt;!-- 유휴상태의 커넥션 수 --&gt; &lt;property name=\"poolMaximumIdleConnections\" value=\"20\"/&gt; &lt;!-- 커넥션 요청 후 획득까지 기다리는 시간 --&gt; &lt;property name=\"poolMaximumCheckoutTime\" value=\"20000\"/&gt; &lt;!-- 커넥션 ping 테스트 --&gt; &lt;property name=\"poolPingEnabled\" value=\"true\"/&gt; &lt;!-- 커넥션 확인 쿼리 --&gt; &lt;property name=\"poolPingQuery\" value=\"select 1\"/&gt; &lt;!-- 커넥션이 얼마동안 사용하지 않으면 닫히는지 시간 설정 --&gt; &lt;property name=\"poolPingConnectionsNotUsedFor\" value=\"43200\"/&gt; &lt;!-- 사용불가능한 커넥션을 기다리는 시간 설정 --&gt; &lt;property name=\"poolTimeToWait\" value=\"30000\"/&gt; &lt;!-- 인코딩 --&gt; &lt;property name=\"driver.encoding\" value=\"UTF-8\"/&gt; &lt;/dataSource&gt; &lt;/environment&gt;&lt;/environments&gt;","categories":[{"name":"java","slug":"java","permalink":"https://gracefullight.dev/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://gracefullight.dev/tags/java/"},{"name":"mybatis","slug":"mybatis","permalink":"https://gracefullight.dev/tags/mybatis/"}]},{"title":"java localhost HTTPS Connection","slug":"java-localhost-HTTPS-Connection","date":"2017-01-10T13:17:49.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/10/java-localhost-HTTPS-Connection/","link":"","permalink":"https://gracefullight.dev/2017/01/10/java-localhost-HTTPS-Connection/","excerpt":"","text":"localhost 에서 Https 페이지로 httpcon 을 열면 오류가 발생한다.인증을 받아야하기 때문인데 함수하나만 호출하면 연결이 가능해진다. 소스12345678910111213141516171819202122232425262728private void setTrustAllCerts() throws Exception&#123; TrustManager[] trustAllCerts = new TrustManager[]&#123; new X509TrustManager() &#123; public java.security.cert.X509Certificate[] getAcceptedIssuers() &#123; return null; &#125; public void checkClientTrusted( java.security.cert.X509Certificate[] certs, String authType ) &#123;&#125; public void checkServerTrusted( java.security.cert.X509Certificate[] certs, String authType ) &#123;&#125; &#125; &#125;; // Install the all-trusting trust manager try &#123; SSLContext sc = SSLContext.getInstance( \"SSL\" ); sc.init( null, trustAllCerts, new java.security.SecureRandom() ); HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory()); HttpsURLConnection.setDefaultHostnameVerifier( new HostnameVerifier() &#123; public boolean verify(String urlHostName, SSLSession session) &#123; return true; &#125; &#125;); &#125; catch (Exception e) &#123; //We can not recover from this exception. e.printStackTrace(); &#125;&#125;원본에서 가져왔다. 예제HTTPCON 전에 호출하면 인증서 없이 HTTPS 연결이 가능하다.","categories":[{"name":"java","slug":"java","permalink":"https://gracefullight.dev/categories/java/"}],"tags":[{"name":"java","slug":"java","permalink":"https://gracefullight.dev/tags/java/"}]},{"title":"ASP UTF8 세팅","slug":"ASP-UTF8-세팅","date":"2017-01-10T13:13:35.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/10/ASP-UTF8-세팅/","link":"","permalink":"https://gracefullight.dev/2017/01/10/ASP-UTF8-%EC%84%B8%ED%8C%85/","excerpt":"","text":"해결IIS &gt; ASP 로 이동 후 코드 페이지의 값을 65001 로 주면 된다.","categories":[{"name":"asp","slug":"asp","permalink":"https://gracefullight.dev/categories/asp/"}],"tags":[{"name":"asp","slug":"asp","permalink":"https://gracefullight.dev/tags/asp/"}]},{"title":"Google Cloud Instance 무료 사용","slug":"Google-Cloud-Instance-무료-사용","date":"2017-01-10T08:02:17.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/10/Google-Cloud-Instance-무료-사용/","link":"","permalink":"https://gracefullight.dev/2017/01/10/Google-Cloud-Instance-%EB%AC%B4%EB%A3%8C-%EC%82%AC%EC%9A%A9/","excerpt":"","text":"구글 클라우드 인스턴스를 생성해 무료 서버를 만들어보자. 프로젝트 생성구글 클라우드 플랫폼에 로그인해 프로젝트 만들기 버튼을 클릭해 프로젝트를 생성한다. 클라우드 서버 생성좌측 메뉴 &gt; Compute Engine &gt; VM 인스턴스 메뉴에서 인스턴스 만들기 버튼을 클릭해 인스턴스를 생성한다. 인스턴스 생성이름은 하고싶은 이름으로 영역은 한국이니 아시아 데이터센터로 설정하고머신 유형은 테스트용이니 초소형 공유 CPU를 사용하면 된다.US 데이터 센터, 공유 CPU, HDD 30GB↓를 선택한다면 평생 무료로 바뀌었다.Free Tier 페이지에서 정책을 확인할 수 있다.이미지에 원하는 OS 를 선택하면 되는데, CentOS 가 막강하니 선택해주자.액세스 범위 영역에서 모든 Cloud API 액세스 허용을 해줘야 구글 내부 API 를 사용할 수 있다.돈이 나간다고 하는데 이미 무료 $300 이 있고, 6 개월간은 무료다.기본 상품을 업그레이드 하지 않으면 과금이 발생하지 않는다. SSH KEY 생성 직접 생성ssh 접근을 위해 Git-bash 창을 열어 구글 계정으로 키를 생성한다.1$ ssh-keygen -t rsa -C \"your google id@gmail.com\" Putty 로 생성PuTTY Key Generator를 여기서 다운로드 받고 키를 생성한다.Key Comment에 구글 계정을 넣어주고 Generate한 뒤 Key 를 추출하자 SSH Public KEY 등록 키 복사유저 디렉토리의 .ssh 폴더로 이동해 공개 키 파일(.pub) 데이터를 복사하고 등록한다. 등록메타데이터 메뉴에서 등록할 수 있다. SSH Private KEY 등록각자 사용하는 쉘 프로그램에 Private Key 를 저장하는 기능이 있을 것이다.Token2Shell 을 이용해 등록 후 접속한 화면 서버 세팅yum 등의 root 명령어를 사용할 때는 sudo 를 붙혀주고 명령어를 입력하면 된다.yum update 를 먼저 실행해보자1$ sudo yum update","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"google","slug":"server/google","permalink":"https://gracefullight.dev/categories/server/google/"}],"tags":[{"name":"google","slug":"google","permalink":"https://gracefullight.dev/tags/google/"},{"name":"cloud","slug":"cloud","permalink":"https://gracefullight.dev/tags/cloud/"}]},{"title":".NET에서 MySQL 사용자 변수 사용","slug":"NET에서-MySQL-사용자-변수-사용","date":"2017-01-10T07:51:23.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/10/NET에서-MySQL-사용자-변수-사용/","link":"","permalink":"https://gracefullight.dev/2017/01/10/NET%EC%97%90%EC%84%9C-MySQL-%EC%82%AC%EC%9A%A9%EC%9E%90-%EB%B3%80%EC%88%98-%EC%82%AC%EC%9A%A9/","excerpt":"","text":"@value, @reg 같은 사용자 변수가 들어간 쿼리에서 오류가 발생한다. 해결Connection을 맺을 때 Allow User Variables=True 옵션을 추가해줘야한다.1string conf = \"Server=$Server;Port=$port;Database=$DataBase;Uid=$User;Pwd=$Password;Allow User Variables=True\";","categories":[{"name":"c#","slug":"c","permalink":"https://gracefullight.dev/categories/c/"}],"tags":[{"name":"c#","slug":"c","permalink":"https://gracefullight.dev/tags/c/"},{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"}]},{"title":"C# String Split","slug":"C-String-Split","date":"2017-01-10T07:48:41.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/10/C-String-Split/","link":"","permalink":"https://gracefullight.dev/2017/01/10/C-String-Split/","excerpt":"","text":"javascript 의 split 을 생각하고 split 을 사용했다간 예상치 못한 오류를 맞게된다. 원인일반 Split 함수는 Char 로만(한 글자로만) 자를 수 있다. 해결12string str = \"cat__dog__animal__person\";string[] animals = Regex.Split(str, \"__\");Regex.Split 을 사용하면 된다.","categories":[{"name":"c#","slug":"c","permalink":"https://gracefullight.dev/categories/c/"}],"tags":[{"name":"c#","slug":"c","permalink":"https://gracefullight.dev/tags/c/"}]},{"title":"C# MySQL Singleton DB Connection","slug":"C-MySQL-Singleton-DB-Connection","date":"2017-01-10T07:39:13.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/10/C-MySQL-Singleton-DB-Connection/","link":"","permalink":"https://gracefullight.dev/2017/01/10/C-MySQL-Singleton-DB-Connection/","excerpt":"","text":"소스12345678910111213141516171819202122232425262728293031323334353637383940414243444546using MySql.Data.MySqlClient;using System;using System.Collections.Generic;using System.Linq;using System.Threading;using System.Web;namespace WebApplication.ClassFolder&#123; public class DBConfig&#123; private static string Server = \"\"; private static string Database = \"\"; private static string ID = \"\"; private static string PASS = \"\"; static string conf = \"Server=\" + Server + \";Database=\" + Database + \";Uid=\" + ID + \";Pwd=\" + PASS; static MySqlConnection db; public static MySqlConnection Connection&#123; get&#123; if (db == null)&#123; LazyInitializer.EnsureInitialized(ref db, CreateConnection); &#125; return db; &#125; &#125; static MySqlConnection CreateConnection()&#123; var db = new MySqlConnection(conf); db.Open(); return db; &#125; // 강제로 커넥션을 끊어야될 경우가 있을 때 static void CloseConnection()&#123; if(db != null) &#123; db.Close(); db.Dispose(); db = null; &#125; &#125; &#125;&#125; 예제12// get Connectionvar db = DBConfig.Connection;","categories":[{"name":"c#","slug":"c","permalink":"https://gracefullight.dev/categories/c/"}],"tags":[{"name":"c#","slug":"c","permalink":"https://gracefullight.dev/tags/c/"},{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"}]},{"title":".NET targetFramework 오류","slug":"NET-targetFramework-오류","date":"2017-01-10T07:34:43.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/10/NET-targetFramework-오류/","link":"","permalink":"https://gracefullight.dev/2017/01/10/NET-targetFramework-%EC%98%A4%EB%A5%98/","excerpt":"","text":"targetFramework가 인식할 수 없다고 페이지가 안 띄워지는 경우가 있다. 원인IIS의 .NET버전과 프로젝트의 .NET버전이 달라 발생한다. 해결IIS &gt; 응용프로그램 풀 &gt; 내 프로젝트 클릭 &gt; 기본설정 메뉴에서 .NET Framework 버전 속성을 변경해준다.","categories":[{"name":"c#","slug":"c","permalink":"https://gracefullight.dev/categories/c/"}],"tags":[{"name":"c#","slug":"c","permalink":"https://gracefullight.dev/tags/c/"}]},{"title":"D3 Word Cloud","slug":"D3-Word-Cloud","date":"2017-01-10T07:27:06.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/10/D3-Word-Cloud/","link":"","permalink":"https://gracefullight.dev/2017/01/10/D3-Word-Cloud/","excerpt":"","text":"d3 와 d3-cloud 를 사용해 R 의 Word Cloud 를 javascript 로 구현해보자. 설치123456# npm$ npm install d3$ npm install d3.layout.cloud# bower$ bower install d3$ bower install d3-cloud 예제 소스123456789101112131415161718192021222324252627282930313233343536373839&lt;script src=\"/bower_components/d3/d3.min.js\"&gt;&lt;/script&gt;&lt;script src=\"/bower_components/d3-cloud/build/d3.layout.cloud.js\"&gt;&lt;/script&gt;&lt;script&gt;var fill = function(i)&#123; return d3.schemeCategory20b[i];&#125;;var layout = d3.layout.cloud() .size([500, 500]) .words([ \"텍스트\", \"마이닝\", \"샘플\", \"좋아요\", \"R\", \"Word\", \"Cloud\", \"text\", \"mining\"].map(function(d) &#123; return &#123;text: d, size: 10 + Math.random() * 90, test: \"haha\"&#125;; &#125;)) .padding(5) .rotate(function() &#123; return ~~(Math.random() * 2) * 90; &#125;) .font(\"Impact\") .fontSize(function(d) &#123; return d.size; &#125;) .on(\"end\", draw);layout.start();function draw(words) &#123; d3.select(\"body\").append(\"svg\") .attr(\"width\", layout.size()[0]) .attr(\"height\", layout.size()[1]) .append(\"g\") .attr(\"transform\", \"translate(\" + layout.size()[0] / 2 + \",\" + layout.size()[1] / 2 + \")\") .selectAll(\"text\") .data(words) .enter().append(\"text\") .style(\"font-size\", function(d) &#123; return d.size + \"px\"; &#125;) .style(\"font-family\", \"Impact\") .style(\"fill\", function(d, i) &#123; return fill(i); &#125;) .attr(\"text-anchor\", \"middle\") .attr(\"transform\", function(d) &#123; return \"translate(\" + [d.x, d.y] + \")rotate(\" + d.rotate + \")\"; &#125;) .text(function(d) &#123; return d.text; &#125;);&#125;&lt;/script&gt;d3-cloud의 예제소스는 nodejs 환경에서만 돌릴 수 있어 모든 웹에서 예제를 사용할 수 있게 수정했다. 결과","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"d3","slug":"javascript/d3","permalink":"https://gracefullight.dev/categories/javascript/d3/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"d3","slug":"d3","permalink":"https://gracefullight.dev/tags/d3/"}]},{"title":"Facebook Graph API를 활용한 Page 글쓰기","slug":"Facebook-Graph-API를-활용한-Page-글쓰기","date":"2017-01-10T07:14:21.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/10/Facebook-Graph-API를-활용한-Page-글쓰기/","link":"","permalink":"https://gracefullight.dev/2017/01/10/Facebook-Graph-API%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-Page-%EA%B8%80%EC%93%B0%EA%B8%B0/","excerpt":"","text":"페이스북 모듈 연동12345678910111213141516171819window.fbAsyncInit = function() &#123; FB.init(&#123; appId: \"앱 키\", xfbml: true, version: \"v2.8\" &#125;)&#125;;(function(d, s, id) &#123; var js, fjs = d.getElementsByTagName(s)[0] if (d.getElementById(id)) &#123; return &#125; js = d.createElement(s) js.id = id js.src = \"//connect.facebook.net/en_US/sdk.js\" fjs.parentNode.insertBefore(js, fjs)&#125;)(document, \"script\", \"facebook-jssdk\") Page 권한 얻기 (선택)앱공개를 한 뒤 페이스북 개발자 &gt; 앱 검수 에서 publish_pages, manage_pages 권한을 부여해야한다.12345678910111213FB.login( function(login_result) &#123; if (login_result.status === \"connected\") &#123; // 여기에 3번 로직을 넣으면 된다. &#125; else if (login_result.status === \"not_authorized\") &#123; alert(\"페이스북 인증에 실패했습니다\") &#125; else &#123; alert(\"페이스북 API 호출에 실패했습니다\") &#125; &#125;, &#123; scope: \"publish_pages,manage_pages\" &#125;)// 이 두 권한이 꼭 필요하다 해당 Page 관리자 권한 얻기페이지 아이디가 필요한데, 내 페이지로 이동하면 뒤에보이는 주소 번호가 있다.또는 페이지 아이디를 여기서 주소로 검색해보자123456FB.api(\"/나의 페이지 아이디/\", \"GET\", &#123; fields: \"access_token\" &#125;, function( token_result) &#123; // token_result.access_token 이 페이지 관리자로 글을 쓰기 위해 필요하다 // 여기에 4번 로직을 넣으면 된다.&#125;) Page Feed 작성Graph API 를 사용해 피드를 작성한다.자세한 옵션 설정은 API 문서를 참조하자.123456789101112131415161718FB.api( \"/my page id/feed\", \"POST\", &#123; access_token: token_result.access_token, message: \"내용\", link: \"링크 걸 주소\", picture: \"링크 이미지\", name: \"링크 제목\", description: \"링크 설명\", caption: \"링크 하단 캡션\" &#125;, function(page_result) &#123; if (page_result &amp;&amp; !page_result.error) &#123; // 여기에 성공시 로직을 넣는다. &#125; &#125;) 소스1234567891011121314151617181920212223242526272829303132333435363738394041FB.login( function(login_result) &#123; if (login_result.status === \"connected\") &#123; getFbAccessToken() &#125; else if (login_result.status === \"not_authorized\") &#123; alert(\"페이스북 인증에 실패했습니다\") &#125; else &#123; alert(\"페이스북 API 호출에 실패했습니다\") &#125; &#125;, &#123; scope: \"publish_pages,manage_pages\" &#125;)function getFbAccessToken() &#123; FB.api(\"/나의 페이지 아이디/\", \"GET\", &#123; fields: \"access_token\" &#125;, function( token_result ) &#123; postFbPage(token_result) &#125;)&#125;function postFbPage(token_result) &#123; FB.api( \"/나의 페이지 아이디/feed\", \"POST\", &#123; access_token: token_result.access_token, message: \"내용\", link: \"링크 걸 주소\", picture: \"링크 이미지\", name: \"링크 제목\", description: \"링크 설명\", caption: \"링크 하단 캡션\" &#125;, function(page_result) &#123; if (page_result &amp;&amp; !page_result.error) &#123; alert(\"성공\") &#125; &#125; )&#125; 여담OAuth 및 RESTful 의 개념이 잡혔다면 쉽게 접근할 수 있을듯Graph API 로 모든 페이스북 API 이용이 가능한 것 같다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"facebook","slug":"javascript/facebook","permalink":"https://gracefullight.dev/categories/javascript/facebook/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"facebook","slug":"facebook","permalink":"https://gracefullight.dev/tags/facebook/"}]},{"title":"hexo jsfiddle tag를 호출하지 못하는 현상","slug":"hexo-jsfiddle-tag를-호출하지-못하는-현상","date":"2017-01-09T14:04:03.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/09/hexo-jsfiddle-tag를-호출하지-못하는-현상/","link":"","permalink":"https://gracefullight.dev/2017/01/09/hexo-jsfiddle-tag%EB%A5%BC-%ED%98%B8%EC%B6%9C%ED%95%98%EC%A7%80-%EB%AA%BB%ED%95%98%EB%8A%94-%ED%98%84%EC%83%81/","excerpt":"","text":"공식 문서에 따르면 jsFiddle tag의 사용법은 이렇다.1&#123;% jsfiddle shorttag [tabs] [skin] [width] [height] %&#125;대괄호로 둘러 쌓인 부분은 생략이 가능하다.shorttag는 URL 창에서 바로 보여질 수도 있지만 그렇지 않을경우Save 또는 Update 버튼을 누르면 나오는 Embed 메뉴에서 확인할 수 있다. 문제점https인 github.io에서 http로 jsfiddle을 호출해서 차단된다. 해결node_module\\hexo\\lib\\plugins\\tag\\jsfiddle.js 파일의 jsfiddle 치환 함수를 변경한다.12345678910function jsfiddleTag(args, content) &#123; var id = args[0]; var tabs = args[1] &amp;&amp; args[1] !== 'default' ? args[1] : 'js,resources,html,css,result'; var skin = args[2] &amp;&amp; args[2] !== 'default' ? args[2] : 'light'; var width = args[3] &amp;&amp; args[3] !== 'default' ? args[3] : '100%'; var height = args[4] &amp;&amp; args[4] !== 'default' ? args[4] : '300'; // http://jsfiddle.net &gt; //jsfiddle.net return '&lt;iframe scrolling=\"no\" width=\"' + width + '\" height=\"' + height + '\" src=\"//jsfiddle.net/' + id + '/embedded/' + tabs + '/' + skin + '\" frameborder=\"0\" allowfullscreen&gt;&lt;/iframe&gt;';&#125;","categories":[{"name":"hexo","slug":"hexo","permalink":"https://gracefullight.dev/categories/hexo/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"hexo","slug":"hexo","permalink":"https://gracefullight.dev/tags/hexo/"}]},{"title":"Highchart 기본 사용법","slug":"Highchart-기본-사용법","date":"2017-01-08T14:21:05.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/08/Highchart-기본-사용법/","link":"","permalink":"https://gracefullight.dev/2017/01/08/Highchart-%EA%B8%B0%EB%B3%B8-%EC%82%AC%EC%9A%A9%EB%B2%95/","excerpt":"","text":"D3.js 로 그래프를 만들 수 있지만 더 사용성이 좋은 highchart 로 데이터를 시각화해보자 설치1234# npm$ npm install highcharts --save# yarn$ yarn add highchartshighcharts.min.js와 modules/exporting.js, themes/grid-light.js 를 가져온다.아니면 CDN을 사용해도 된다.123&lt;script src=\"/bower_components/highcharts/highcharts.js\"&gt;&lt;/script&gt;&lt;script src=\"/bower_components/highcharts/modules/exporting.js\"&gt;&lt;/script&gt;&lt;script src=\"/bower_components/highcharts/themes/grid-light.js\"&gt;&lt;/script&gt; 기본 예제홈페이지에 나와있는 예제는 다음과 같다.title : 제목subtitle : 소제목xAxis : X 축YAxis : Y 축tooltip : Y 축의 제목legend : X 축의 범례series : 차트 데이터기본 예제로도 차트를 만들 수 있지만 업무에 사용하려면 비동기로 데이터가 갱신될 때마다 차트도 다시 그려져야한다.세부 옵션은 API 문서를 참조하자. Redraw 예제div#chart에 차트를 그린다고 가정한다. 소스123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081Highcharts.setOptions(&#123; lang: &#123; // 전체보기 버튼을 한글로 바꾼다 resetZoom: \"전체보기\" &#125;&#125;)var chartCallback = function(data) &#123; var chart = $(\"#chart\").highcharts() if (chart) &#123; // 차트가 있을경우 제거한다. chart.destroy() &#125; if (data) &#123; var categoriesData = [] // 여기에 x축 데이터를 넣는다. var seriesData = &#123;&#125; // 여기에 data를 파싱해 y축 구조를 만들어준다. var options = &#123; chart: &#123; renderTo: \"chart\", // 다시 그려질 영역 설정 zoomType: \"x\", // X축이 줌인이 가능하게 설정 panning: true, panKey: \"shift\" &#125;, title: &#123; text: null &#125;, xAxis: &#123; categories: categoriesData &#125;, yAxis: &#123; min: 0, // 0이상의 값만 표기 allowDecimals: false, // 정수로만 표기 title: &#123; text: null &#125;, labels: &#123;&#125; &#125;, credits: &#123; text: \"Graceful Light\", // 로고 표시 href: \"https://gracefullight.github.io\" // 로고 클릭시 URL &#125;, tooltip: &#123; // hover시 나오는 tooltip shared: true, // 하나의 영역을 공유 pointFormatter: function() &#123; if (this.y &gt;= 0) &#123; // 표시되는 tooltip을 마음대로 설정 return ( '&lt;span style=\"color:' + this.series.color + ';\"&gt;●&lt;/span&gt; ' + this.series.name + \": \" + \"&lt;b&gt;\" + Utils.comma(this.y) + \"&lt;/b&gt;&lt;br/&gt;\" ) &#125; &#125; &#125;, plotOptions: &#123; column: &#123; pointPadding: 0.2, borderWidth: 0 &#125; &#125;, legend: &#123; borderWidth: 0 &#125;, series: seriesData &#125; chart = new Highcharts.Chart(options) chart.redraw() &#125; else &#123; $(\"#chart\").html(\"no data\") &#125;&#125;redraw 를 이용할 때 new Highcharts.Chart를 사용해야한다.categories 와 series 의 모양을 만들어줄 때는 lodash 를 사용해야 편하다. 결과 대안Chart.jsE Chartstui ChartChartist.js","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"highchart","slug":"javascript/highchart","permalink":"https://gracefullight.dev/categories/javascript/highchart/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"highchart","slug":"highchart","permalink":"https://gracefullight.dev/tags/highchart/"}]},{"title":"Windows10 Onedrive 바로가기 해제","slug":"Windows10-Onedrive-바로가기-해제","date":"2017-01-08T14:02:39.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/08/Windows10-Onedrive-바로가기-해제/","link":"","permalink":"https://gracefullight.dev/2017/01/08/Windows10-Onedrive-%EB%B0%94%EB%A1%9C%EA%B0%80%EA%B8%B0-%ED%95%B4%EC%A0%9C/","excerpt":"","text":"Windows10 을 쓰다가 어느순간 보면 탐색기에서 Onedrive 메뉴가 생긴 것을 볼 수 있다.심지어 Windows10 Anniversary Update 가 되어있다면 모르는 사이에 동기화가 연결되어 있을 수도 있다.동기화는 리소스를 잡아먹고 개인컴퓨터가 아닌 곳에서는 접근하면 안되니 여간 거슬리는 게 아니다.설정에 들어가도 해제옵션이 없고, MS 도움말에는 기본기능이라 해제가 불가능하다고 나온다.없애보자. 해결삭제프로그램을 다운받는다.압축을 풀고 uninstaller.cmd를 관리자권한으로 실행한다. 여담오픈소스라 믿고 사용해도 된다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"windows","slug":"windows","permalink":"https://gracefullight.dev/tags/windows/"},{"name":"onedrive","slug":"onedrive","permalink":"https://gracefullight.dev/tags/onedrive/"}]},{"title":"sublime text Line Break (Word Wrap) 설정","slug":"sublime-text-Line-Break-Word-Wrap-설정","date":"2017-01-08T13:59:24.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/08/sublime-text-Line-Break-Word-Wrap-설정/","link":"","permalink":"https://gracefullight.dev/2017/01/08/sublime-text-Line-Break-Word-Wrap-%EC%84%A4%EC%A0%95/","excerpt":"","text":"해결Ctrl+Shift+P로 패키지 매니저를 띄운뒤 WW를 입력해 Word Wrap Toggle 기능을 활성/비활성화 한다. 적용전 적용후","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"sublimetext","slug":"sublimetext","permalink":"https://gracefullight.dev/tags/sublimetext/"}]},{"title":"Windows10 바탕화면 변경 및 사진적용이 안될 때","slug":"Windows10-바탕화면-변경-및-사진적용이-안될-때","date":"2017-01-08T13:10:36.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/08/Windows10-바탕화면-변경-및-사진적용이-안될-때/","link":"","permalink":"https://gracefullight.dev/2017/01/08/Windows10-%EB%B0%94%ED%83%95%ED%99%94%EB%A9%B4-%EB%B3%80%EA%B2%BD-%EB%B0%8F-%EC%82%AC%EC%A7%84%EC%A0%81%EC%9A%A9%EC%9D%B4-%EC%95%88%EB%90%A0-%EB%95%8C/","excerpt":"","text":"Windows10에서 사진파일로 바탕화면 변경을 해도 적용이 안될 때가 있다.오로지 단색으로만 화면을 변경할 수 있는데 해결해보자 해결 제어판 이동시작 &gt; 우클릭 &gt; 제어판 접근성 센터 이동보기 기준에서 작은 아이콘 보기로 변경하면 접근성 센터 메뉴가 보인다. 컴퓨터를 보기 쉽게 설정컴퓨터를 보기 쉽게 설정 메뉴로 들어간다. 배경 이미지 제거 옵션 해제화면의 항목을 읽기 쉽도록 표시 영역에서 **배경 이미지 제거(사용할 수 있을 경우)**의 옵션을 해제해준다. 바탕화면 이미지 변경바탕화면 &gt; 우클릭 &gt; 개인설정에서 바탕화면을 변경해준다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"windows","slug":"windows","permalink":"https://gracefullight.dev/tags/windows/"}]},{"title":"sublime text ConvertToUTF8 Package 단축키 변경","slug":"sublime-text-ConvertToUTF8-Package-단축키-변경","date":"2017-01-08T08:31:18.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/08/sublime-text-ConvertToUTF8-Package-단축키-변경/","link":"","permalink":"https://gracefullight.dev/2017/01/08/sublime-text-ConvertToUTF8-Package-%EB%8B%A8%EC%B6%95%ED%82%A4-%EB%B3%80%EA%B2%BD/","excerpt":"","text":"실수로라도 Ctrl+Shift+C 키를 누르면 소스가 GBK 중국어 인코딩으로 바뀌어 저장된다.이 단축키의 기본 설정을 UTF-8로 변경해보자. 해결 패키지 경로 이동C:\\Users\\사용자 폴더\\AppData\\Roaming\\Sublime Text3\\Packages\\ConvertToUTF8 기본 설정파일 변경Default (Windows).sublime-keymap 파일을 열고 아래와 같이 수정한다.1234567[ &#123; keys: [\"ctrl+shift+c\"], command: \"convert_to_uft8\", args: &#123; encoding: \"UTF-8\", stamp: 0 &#125; &#125;];또는 파일 내용을 날려버려도 된다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"sublimetext","slug":"sublimetext","permalink":"https://gracefullight.dev/tags/sublimetext/"}]},{"title":"Visual Studio 콘솔창 유지","slug":"Visual-Studio-콘솔창-유지","date":"2017-01-08T08:25:39.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/08/Visual-Studio-콘솔창-유지/","link":"","permalink":"https://gracefullight.dev/2017/01/08/Visual-Studio-%EC%BD%98%EC%86%94%EC%B0%BD-%EC%9C%A0%EC%A7%80/","excerpt":"","text":"VS에서 코딩 후 빌드를 하면 콘솔창이 결과를 보여주자마자 닫히는 경우가 있다.수동으로 닫을 때까지 콘솔창이 유지되게 해보자. 해결프로젝트 &gt; 속성 &gt; 구성 속성 &gt; 링커 &gt; 시스템 메뉴에 들어가 하위시스템 옵션을 콘솔로 변경한다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"visualstudio","slug":"visualstudio","permalink":"https://gracefullight.dev/tags/visualstudio/"}]},{"title":"Can't connect to localhost","slug":"Can-t-connect-to-localhost","date":"2017-01-08T08:09:23.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/08/Can-t-connect-to-localhost/","link":"","permalink":"https://gracefullight.dev/2017/01/08/Can-t-connect-to-localhost/","excerpt":"","text":"웹서버를 크롬에서 띄울시 localhost 가 요청되지 않는 경우가 있다.DNS 에 문제가 있어 연결할 수 없다는 에러가 나온다. 해결Chrome &gt; 설정 &gt; 개인정보 메뉴에서 네트워크 활동을 예측하여 페이지 로드 성능 개선 기능을 해제한다.","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"}],"tags":[{"name":"chrome","slug":"chrome","permalink":"https://gracefullight.dev/tags/chrome/"}]},{"title":"ASP woff 404 오류","slug":"ASP-woff-404-오류","date":"2017-01-07T16:46:27.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/07/ASP-woff-404-오류/","link":"","permalink":"https://gracefullight.dev/2017/01/07/ASP-woff-404-%EC%98%A4%EB%A5%98/","excerpt":"","text":"Classic asp 에서 .woff 확장자를 가진 글자 파일을 가져오지 못하는 경우가 있다.Console 확인시 404 오류가 난다. 해결IIS 에서 MIME 형식에 woff 확장자를 추가한다.","categories":[{"name":"asp","slug":"asp","permalink":"https://gracefullight.dev/categories/asp/"}],"tags":[{"name":"asp","slug":"asp","permalink":"https://gracefullight.dev/tags/asp/"}]},{"title":"ASP - Request와 Session을 Javascript에서 사용","slug":"ASP-Request와-Session을-Javascript에서-사용","date":"2017-01-07T16:40:10.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/07/ASP-Request와-Session을-Javascript에서-사용/","link":"","permalink":"https://gracefullight.dev/2017/01/07/ASP-Request%EC%99%80-Session%EC%9D%84-Javascript%EC%97%90%EC%84%9C-%EC%82%AC%EC%9A%A9/","excerpt":"","text":"선행classic asp 는 기본 json 모듈이 없기 때문에 여기에서 모듈을 다운로드 해야한다. 소스12345678910111213141516171819202122232425262728293031323334353637383940414243&lt;!--#include virtual &#x3D; &quot;&#x2F;JSON_2.0.4.asp&quot;--&gt;&lt;%&#39;request TO JSONDim req:Set req &#x3D; jsObject()FOR EACH i IN Request.QueryString IF Request.QueryString(i).count &gt; 1 THEN i &#x3D; Replace(i,&quot;&amp;&quot;, &quot;&quot;) Set req(i) &#x3D; jsArray() FOR EACH j IN Request.QueryString(i) req(i)(null) &#x3D; j NEXT ELSE req(i) &#x3D; Request.QueryString(i) END IFNEXTFOR EACH x IN Request.Form IF Request.Form(x).count &gt; 1 THEN Set req(x) &#x3D; jsArray() FOR EACH y IN Request.Form(x) req(x)(null) &#x3D; y NEXT ELSE req(x) &#x3D; Request.Form(y) END IFNEXT&#39;session TO JSONDim sess:Set sess &#x3D; jsObject()FOR EACH k IN Session.Contents sess(k) &#x3D; Session.Contents(k)NEXT%&gt;&lt;!DOCTYPE html&gt;&lt;meta charset&#x3D;&quot;utf-8&quot;&gt;&lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;edge,chrome&#x3D;1&quot;&gt;&lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, initial-scale&#x3D;1&quot;&gt;&lt;script type&#x3D;&quot;text&#x2F;javascript&quot;&gt; var request &#x3D; JSON.parse(&#39;&lt;%&#x3D;req.flush%&gt;&#39;); var session &#x3D; JSON.parse(&#39;&lt;%&#x3D;sess.flush%&gt;&#39;); Object.freeze(request); Object.freeze(session);&lt;&#x2F;script&gt; 설명1 줄에서 JSON 모듈을 include 시켜주고 6~27 줄에서 Get 방식과 Post 방식의 Request 를 모두 파싱한다. 30~33 줄에서 Session 을 파싱한다.40 줄에서 request 와 session 을 javascript 변수로 받고, 클라이언트가 변조하지 못하게 Object.freeze 로 얼려버린다.","categories":[{"name":"asp","slug":"asp","permalink":"https://gracefullight.dev/categories/asp/"}],"tags":[{"name":"asp","slug":"asp","permalink":"https://gracefullight.dev/tags/asp/"},{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"800a0e7a Provider cannot be found.","slug":"800a0e7a-Provider-cannot-be-found","date":"2017-01-07T16:31:20.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/07/800a0e7a-Provider-cannot-be-found/","link":"","permalink":"https://gracefullight.dev/2017/01/07/800a0e7a-Provider-cannot-be-found/","excerpt":"","text":"800a0e7a Provider cannot be foundADODB.Connection error ‘800a0e7a’ Provider cannot be found. It may not be properly installed.공급자를 찾을 수 없습니다. 올바르게 설치가 되지 않았을 수 있습니다. 원인64Bit Windows 에서 32Bit ASP 실행시 발생하는 오류이다. 해결IIS 관리자 &gt; 응용프로그래밍 풀 &gt; DefaultAppPool 우클릭 &gt; 고급설정 메뉴에서32bit 응용프로그래밍 사용 옵션을 TURE로 변경 후 ASP 재시작 여담구글링시 재설치, 패치 등을 하라고 나오는데 현혹되지 말자.","categories":[{"name":"asp","slug":"asp","permalink":"https://gracefullight.dev/categories/asp/"}],"tags":[{"name":"asp","slug":"asp","permalink":"https://gracefullight.dev/tags/asp/"}]},{"title":"Git .ssh key 적용 후에도 비밀번호를 물어볼 때","slug":"Git-ssh-key-적용-후에도-비밀번호를-물어볼-때","date":"2017-01-07T13:23:42.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/07/Git-ssh-key-적용-후에도-비밀번호를-물어볼-때/","link":"","permalink":"https://gracefullight.dev/2017/01/07/Git-ssh-key-%EC%A0%81%EC%9A%A9-%ED%9B%84%EC%97%90%EB%8F%84-%EB%B9%84%EB%B0%80%EB%B2%88%ED%98%B8%EB%A5%BC-%EB%AC%BC%EC%96%B4%EB%B3%BC-%EB%95%8C/","excerpt":"","text":"Git 사용을 위해 ssh key 생성해 서버에 추가했는데도 비밀번호를 물어보는 경우가 있다. 원인윈도우에서 ~/.ssh 경로를 인식하지 못해 발생한다. 해결시스템 &gt; 고급 시스템 설정 &gt; 환경변수 메뉴로 들어가HOME 변수로 %HOMEDRIVE%%HOMEPATH% 값을 추가 후 재부팅해주면 된다.","categories":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"},{"name":"ssh","slug":"ssh","permalink":"https://gracefullight.dev/tags/ssh/"}]},{"title":"sublime text에서 Git Bash 실행","slug":"sublime-text에서-Git-Bash-실행","date":"2017-01-07T12:43:23.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/07/sublime-text에서-Git-Bash-실행/","link":"","permalink":"https://gracefullight.dev/2017/01/07/sublime-text%EC%97%90%EC%84%9C-Git-Bash-%EC%8B%A4%ED%96%89/","excerpt":"","text":"설치 패키지 설치Package Control을 열어 Terminal 패키지를 설치한다. Git Bash 와의 연동Preferences &gt; Package Settings &gt; Terminal &gt; Settings - User 메뉴에서 터미널 경로를 수정한다.12345&#123; // git-bash가 설치된 경로 \"terminal\": \"C:\\\\Program Files\\\\Git\\\\git-bash.exe\", \"parameters\": []&#125; 단축키 추가기본 단축키는 ctrl+shift+alt+t 라 어려우니 변경해주자.Preferences &gt; Key Bindings 메뉴에서 단축키를 추가한다.1&#123; \"keys\": [\"ctrl+alt+t\"], \"command\": \"open_terminal_project_folder\" &#125;이제 ctrl+alt+t 키로 현재 프로젝트에서 깃 배쉬창을 바로 띄울 수 있다.","categories":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"},{"name":"bash","slug":"bash","permalink":"https://gracefullight.dev/tags/bash/"},{"name":"sublimetext","slug":"sublimetext","permalink":"https://gracefullight.dev/tags/sublimetext/"}]},{"title":"따라하면 되는 Git 사용 명령어","slug":"따라하면-되는-Git-사용-명령어","date":"2017-01-07T10:05:58.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/07/따라하면-되는-Git-사용-명령어/","link":"","permalink":"https://gracefullight.dev/2017/01/07/%EB%94%B0%EB%9D%BC%ED%95%98%EB%A9%B4-%EB%90%98%EB%8A%94-Git-%EC%82%AC%EC%9A%A9-%EB%AA%85%EB%A0%B9%EC%96%B4/","excerpt":"","text":"Git 은 설치되어 있고, 프로젝트를 clone 했다고 가정합니다. 작업흐름 프로젝트에서 git bash 실행 서버 repository 의 최종 버전을 다운로드1$ git pull origin master 오늘 작업 브랜치 설정 또는 선택1234# 작업 브랜치 설정$ git checkout -b 브랜치명# 작업 브랜치 선택$ git checkout 브랜치명 즐거운 코딩1console.log(\"코딩!!!\") 브랜치 작업내역 저장 및 커밋1234$ git add .$ git commit -m '커밋 메세지 (필수)'# 또는 한방에 커밋$ git commit -am '커밋 메세지' master 브랜치로 이동1$ git checkout master 작업한 브랜치 병합 후 테스트1$ git merge 브랜치명 서버 repository 변경점 다운로드1$ git pull origin master 서버 repository 변경점 업로드1$ git push origin master 작업 브랜치 제거1$ git branch -D 브랜치명 기타 자주쓰는 명령어12345678910# 모든 브랜치 확인$ git branch# 원격 브랜치 확인$ git branch -r# master 브랜치에서 변경된 파일만 보기$ git diff --name-status master# 현재 브랜치 변경된 파일 정보 보기$ git status# 커밋 로그 한줄 보기$ git log --pretty=oneline","categories":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"}]},{"title":"jshint 설정 (Sublime, VSCode)","slug":"sublime-text-jshint-setting","date":"2017-01-05T09:11:50.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2017/01/05/sublime-text-jshint-setting/","link":"","permalink":"https://gracefullight.dev/2017/01/05/sublime-text-jshint-setting/","excerpt":"","text":"javascript 에서 linter 의 역활은 중요하다.Sublime Text 나 VSCode 에서 jshint linter 를 설치하고, 기본 설정을 수정해보자. 설치 Sublime 모듈 설치Sublime Linter 패키지가 선행되어야한다.Package Control을 열어 Sublimt-Linter jshint를 설치한다.간단히 jshint 로 검색해도 된다. jshint 설치12# 전역으로 jshint를 설치한다.$ npm install -g jshint 설정 경로 변경Preferences &gt; Package Settings &gt; SublimeLinter &gt; Settings - user 메뉴로 들어가,&quot;users.linters.jshint.args&quot;에 경로를 수정한다.12345678910\"linters\": &#123; \"jshint\": &#123; \"@disable\": false, \"args\": [ // 여기에 경로를 적어준다. \"--config=C:\\\\Users\\\\사용자\\\\npm\\\\node_modules\\\\jshint\\\\jshint_config.json\" ], \"excludes\": [] &#125;&#125; VSCode내장되어있다.파일 &gt; 기본설정 &gt; 설정에서 아래 속성을 만져주면 된다.123\"jshint.options\": &#123;&#125;, 설정 파일 소스1234567891011121314151617181920212223242526272829303132&#123; \"esnext\": true, \"asi\": false, \"boss\": false, \"curly\": true, \"eqeqeq\": true, \"eqnull\": false, \"evil\": false, \"expr\": true, \"forin\": true, \"funcscope\": false, \"jquery\":true, \"latedef\": true, \"lastsemic\":false, \"loopfunc\": false, \"maxerr\": 10, \"nocomma\":true, \"nonbsp\":true, \"node\": true, \"nonew\": false, \"plusplus\": false, \"regexdash\": false, \"shadow\": false, \"strict\": false, \"supernew\": false, \"trailing\": false, \"undef\": false, \"unused\": false, \"white\": false, \"withstmt\":false, \"worker\":true&#125; 설명esnext : es6 의 구문을 사용할 수 있음asi : 세미콜론이 없을 수 있음boss : 비교문(lt, gt…)이 올 자리에 할당문(a = 1)이 올 수 있음curly : 중괄호 생략할 수 없음eqeqeq : ==를 사용할 수 없음 (===를 사용)eqnull : null 비교를 사용할 수 있음evil : eval 을 사용할 수 있음expr : 할당이나 함수호출이 아닌 표현식 사용할 수 있음 (예제 참조)forin : forin 반복문 사용시 if 으로 필터링을 해줘야함funcscope : 조건문 내의 선언된 변수를 조건문 바깥에서 참조 가능12345678function test() &#123; if (true) &#123; var x = 0 &#125; x += 1 // Default: 'x' used out of scope. // No warning when funcscope:true&#125;jquery : jQuery 의 전역변수를 미리 정의latedef : 호출보다 늦게 정의된 변수를 금지 (호이스팅 방지)lastsemic : 한 줄짜리 블록 코드에서 마지막 세미콜론이 없을 경우만 오류loopfunc : 반복문 안에서 함수 정의 가능maxerr : 총 보여줄 오류의 갯수nocomma : comma 연산자 사용 금지nonbsp : non-breaking whitespace 금지node : 노드 환경 사용 가능nonew : new 생성자 사용 불가plusplus : 단항 증감연산자 사용 불가regexdash : 정규식에서 대괄호 안에 escape 처리 되지 않은 대쉬(-) 가능shadow : 변수 재선언 가능 (inner 또는 false, outer, true 로 설정)strict : “use-strict” 선언이 없을시 오류supernew : 잘못 작성한 생성자의 오류 표시 안함trailing : 라인 끝의 불필요한 공백이 있으면 오류undef : 선언되지 않은 변수 사용시 오류unused : 선언이 되었으나 사용되지 않는 변수에 대해 오류white : jshint 가 더글락스 크락포드의 코딩 스타일 가이드에 따라 코드를 검사withstmt : with 구문 사용 가능worker : Web Worker 사용 가능","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"sublimetext","slug":"sublimetext","permalink":"https://gracefullight.dev/tags/sublimetext/"},{"name":"jshint","slug":"jshint","permalink":"https://gracefullight.dev/tags/jshint/"},{"name":"jslint","slug":"jslint","permalink":"https://gracefullight.dev/tags/jslint/"}]},{"title":"Windows10에서 Telnet 사용","slug":"Windows10에서-Telnet-사용","date":"2017-01-05T08:18:35.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/05/Windows10에서-Telnet-사용/","link":"","permalink":"https://gracefullight.dev/2017/01/05/Windows10%EC%97%90%EC%84%9C-Telnet-%EC%82%AC%EC%9A%A9/","excerpt":"","text":"특정 포트가 열려있는지 확인하기 위해서 텔넷을 사용해야할 때가 있다. 설치제어판 &gt; 프로그램 추가/제거에 들어간다.Windows 기능 켜기/끄기 버튼 클릭 후 아래로 끝까지 내리면 텔넷 클라이언트가 보이는데, 체크한 후 확인 버튼을 눌러 설치한다. 사용법cmd 창을 연 뒤12# telnet 아이피(호스트) 포트$ telnet 111.222.333.444 3306","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"windows","slug":"windows","permalink":"https://gracefullight.dev/tags/windows/"},{"name":"telnet","slug":"telnet","permalink":"https://gracefullight.dev/tags/telnet/"}]},{"title":"Openshift를 이용한 무료 서버 구축","slug":"Openshift를-이용한-무료-서버-구축","date":"2017-01-04T04:26:48.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/04/Openshift를-이용한-무료-서버-구축/","link":"","permalink":"https://gracefullight.dev/2017/01/04/Openshift%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EB%AC%B4%EB%A3%8C-%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95/","excerpt":"","text":"개요구글링을 통해 얻은 Openshift 자료들은 최신 버전이 아니라 사용할 수 없다.Google Cloud나 Heroku, AWS를 사용하여 테스트용 서버를 만들 수 있지만무료 기간이 모두 정해져 있다. RedHat에서 운영하는 100% 무료 클라우드인 오픈시프트의 최신 버전을 사용해보자. 가입 Github로 로그인openshift의 새로운 버전은 Github 아이디로만 가입이 가능하다.Github 아이디를 먼저 생성한 후 Login With GitHub 버튼을 클릭한다. 신청서 작성신청서 작성 후 입력한 Email 주소로 오는 승인 메일을 기다려야한다. 승인 및 로그인The OpenShift Team에게 Welcome to the OpenShift Online (Next Gen) Developer Preview 란 제목으로 메일을 받으면 openshift를 이용할 수 있다.상단 메뉴의 My Account를 클릭 후 (NEXT GEN) WEB CONSOLE 버튼을 클릭한다.다음 단계부터는 OpenShift의 승인이 나야지만 진행할 수 있다.하루정도 안에 승인 메일이 오니 기다려보자. 프로젝트 생성프로젝트는 하나의 클라우드를 신청한다고 보면 된다.로그인 후 New Project 버튼을 클릭한다.고민하지 말고 적어도 된다. 웹서버 생성프로젝트 생성이 끝나면 이미지를 선택하는 창이 나온다.검색창에 원하는 이미지를 검색 후 선택한다. 서버 이미지 추가mongodb를 사용시 nodejs-mongo-persistent 이미지를 사용하고, nodejs만 필요할 경우 nodejs:4 이미지를 사용하면 된다.일단 nodejs 웹서버만 필요하기에 해당 이미지를 선택했다.Git Repository를 입력해야하는데, Github에 가지고 있는 자신의 nodejs application이 있다면 그 주소를 등록하면되고 그렇지 않은 경우 Try It버튼을 클릭해 Sample Repo를 추가하자.샘플 소스는 express와 ejs를 사용하고 있다.Show advenced routing… 버튼을 클릭하면 도메인 세팅, Webhook 등 고급 설정을 할 수 있는데 Resource Limit에서 메모리를 늘릴 수 있다. (기본 512MB)추후 메모리 용량 확인은 가능하나, 확장하는 부분은 아직 못 찾았다. (없을지도)미리 메모리를 1GB로 늘려주고 시작하자 Fork Sample Repository이제 node 서버를 수정할 수 있게 나의 Github로 옮기는 작업이 필요하다.Sample Repo에 접속해 프로젝트를 Fork한다. Change Source RepositoryBuilds &gt; Builds 메뉴로 들어가 내 application을 선택한 뒤 우측 Actions에서 Edit 버튼을 클릭한다.Source Repository URL에 위에서 Fork한 Git Repository를 등록한다.그리고 우측 GitHub Webhooks URL을 복사한 뒤 저장한다. Webhooks URL 등록fork된 내 Repository로 와서 Settings &gt; Webhooks 메뉴로 들어가 Add webhook 버튼을 클릭한다. RebuildBuilds &gt; Builds 메뉴로 돌아가 Start Build 버튼을 클릭한다.빌드가 완료되면 버전이 #2로 보이고, 내 Git Repo와 연결된 버전이 생성된다. 확인Overview 메뉴에서 내 링크를 클릭해보자이 화면이 보인다면 성공이다. 소스 수정Git Repository를 Clone한 뒤 기존 Github 이용하듯 수정하면 된다.123456$ git clone &lt;git_url&gt; &lt;directory_to_create&gt;# Within your project directory# Commit your changes and push to OpenShift$ git commit -a -m 'Some commit message'$ git push 여담잘가 Google Cloud Platform!","categories":[{"name":"server","slug":"server","permalink":"https://gracefullight.dev/categories/server/"},{"name":"openshift","slug":"server/openshift","permalink":"https://gracefullight.dev/categories/server/openshift/"}],"tags":[{"name":"cloud","slug":"cloud","permalink":"https://gracefullight.dev/tags/cloud/"},{"name":"openshift","slug":"openshift","permalink":"https://gracefullight.dev/tags/openshift/"}]},{"title":"Git 원격 저장소 생성 및 SSH 인증 - Github 포함","slug":"Git-원격-저장소-생성-및-SSH-인증-Github-포함","date":"2017-01-03T04:46:23.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2017/01/03/Git-원격-저장소-생성-및-SSH-인증-Github-포함/","link":"","permalink":"https://gracefullight.dev/2017/01/03/Git-%EC%9B%90%EA%B2%A9-%EC%A0%80%EC%9E%A5%EC%86%8C-%EC%83%9D%EC%84%B1-%EB%B0%8F-SSH-%EC%9D%B8%EC%A6%9D-Github-%ED%8F%AC%ED%95%A8/","excerpt":"","text":"Git 원격 저장소 생성서버에서 실행12345678# 서버에 로그인 후 원하는 위치에서 폴더를 만든다.$ mkdir [이름].git# 해당 폴더로 이동한다.$ cd [이름].git# Git 원격 저장소를 초기화한다.$ git init --bare SSH 생성클라이언트에서 실행 Email 인증 방식Github 인증을 하려면 이 방식을 이용해야한다.123456# 키 발급$ ssh-keygen -t rsa -C \"your@email.com\"# 클라이언트에 이메일 키 추가$ eval \"$(ssh-agent -s)\"$ ssh-add ~/.ssh/id_rsa 사용자 인증 방식12# 키 발급$ ssh-keygen -t rsa SSH 폴더로 이동해 인증키 복사클라이언트에서 실행1234$ cd ~/.ssh$ vi id_rsa.pub# id_rsa.pub의 내용을 복사한다. 인증키 등록 일반 서버서버에서 실행1234567# ssh 폴더로 이동$ cd ~/.ssh# 인증키 파일을 연다.$ vi authorized_keys# id_rsa.pub에서 복사된 인증키를 하단에 추가한다. GithubGithub에서 실행이메일 인증 방식으로 인증키를 생성해야하고 이메일은 github 에 로그인하는 이메일과 같아야한다. 키 등록github 에 로그인 후 설정에 가서 복사한 키를 등록한다. 인증여부 확인클라이언트에서 실행1234# 등록 후 에 클라이언트에서 인증여부를 확인한다.$ ssh -T git@github.com# You've successfully authenticated 가 보이면 인증완료 Git Repositiory 초기화클라이언트에서 실행12$ git clone 서버유저명@서버아이피:[이름].git# ex ) git clone git@1.22.333.444:test.git","categories":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"},{"name":"ssh","slug":"ssh","permalink":"https://gracefullight.dev/tags/ssh/"},{"name":"bash","slug":"bash","permalink":"https://gracefullight.dev/tags/bash/"}]},{"title":"hexo image tag의 alt 속성 사용","slug":"hexo-image-tag의-alt-속성-사용","date":"2017-01-03T04:30:42.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/03/hexo-image-tag의-alt-속성-사용/","link":"","permalink":"https://gracefullight.dev/2017/01/03/hexo-image-tag%EC%9D%98-alt-%EC%86%8D%EC%84%B1-%EC%82%AC%EC%9A%A9/","excerpt":"","text":"공식 문서에 따르면 image tag 의 사용법은 이렇다.1&#123;% img [class names] /path/to/image [width] [height] [title text [alt text]] %&#125;대괄호로 둘러 쌓인 부분은 생략이 가능하다. 문제점 Inputtest.png 에 test_title, test_alt 속성을 추가하고 싶은 경우 아래처럼 사용하면 되어야한다.1&#123;% img /test.png test_title test_alt %&#125; Output하지만 결과는 참담하다.1&lt;img src=\"/test.png\" title=\"test_title test_alt\" /&gt; 해결 Input속성을 quotes 와 double quotes 로 두번 감싸줘야한다.1&#123;% img /test.png \"'test_title'\" \"'test_alt'\" %&#125; Output1&lt;img src=\"/test.png\" title=\"test_title\" alt=\"test_alt\" /&gt; 여담공식 문서에 설명이 업데이트되면 좋겠다. 이미지에 캡션다는 법을 찾다가 결국 내 블로그에는 안 달기로 마음먹었다.","categories":[{"name":"hexo","slug":"hexo","permalink":"https://gracefullight.dev/categories/hexo/"}],"tags":[{"name":"hexo","slug":"hexo","permalink":"https://gracefullight.dev/tags/hexo/"}]},{"title":"Web Server for Chrome - 가장 빨리 웹서버 구동하기","slug":"Web-Server-for-Chrome-가장-빨리-웹서버-구동하기","date":"2017-01-03T03:25:23.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2017/01/03/Web-Server-for-Chrome-가장-빨리-웹서버-구동하기/","link":"","permalink":"https://gracefullight.dev/2017/01/03/Web-Server-for-Chrome-%EA%B0%80%EC%9E%A5-%EB%B9%A8%EB%A6%AC-%EC%9B%B9%EC%84%9C%EB%B2%84-%EA%B5%AC%EB%8F%99%ED%95%98%EA%B8%B0/","excerpt":"","text":"github의 예제 프로젝트나 라이브러리를 받을 때, 데모를 실행시키고 싶을 때가 있다.그럴려면 node나 apache, nginx, iis 등의 웹서버에서 해당 폴더를 설정하고, hosts파일에서 열어줘야하는 번거로움이 있다.Web Server for Chrome을 사용하면 몇 초 안으로 데모를 띄울 수 있다. 설치크롬 설치 후 웹스토어 접속검색란에서 Web Server for Chrome 검색설치 사용법 Web Server 실행chrome://apps/에 접속 후 Web Server 아이콘을 클릭한다. 설정 및 구동Automatically show index.html 설정을 체크한 후 CHOOSE FOLDER로 웹서버를 돌릴 폴더를 선택해주자.그리고 127.0.0.1:8887 (또는 localhost:8887)로 접속하면 끝! 여담Html과 Javascript로 나만의 UI를 만들고 빠르게 확인하는데 좋을 것 같다.Service Worker 같은 Https가 필요한 기술도 실행이 가능하다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"chrome","slug":"chrome","permalink":"https://gracefullight.dev/tags/chrome/"},{"name":"util","slug":"util","permalink":"https://gracefullight.dev/tags/util/"}]},{"title":"Detecting AdBlock","slug":"Detecting-AdBlock","date":"2016-12-29T08:15:58.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/29/Detecting-AdBlock/","link":"","permalink":"https://gracefullight.dev/2016/12/29/Detecting-AdBlock/","excerpt":"","text":"Google Analytics, Facebook Pixel, Naver Analytics 등의 분석 스크립트 및 Google Adsence 를 차단하는 AdBlock 을 감지해보자 소스1234567891011121314151617181920212223/**@author https://www.christianheilmann.com/2015/12/25/detecting-adblock-without-an-extra-http-overhead/*/;(function (adBlockEnabled) &#123; \"use strict\" var testAd = document.createElement(\"div\") testAd.innerHTML = \"&amp;nbsp;\" testAd.className = \"adsbox\" document.body.appendChild(testAd) setTimeout(function () &#123; if (testAd.offsetHeight === 0) &#123; adBlockEnabled = true &#125; testAd.remove() if (adBlockEnabled) &#123; alert( \"This Blog is made possible by displaying online advertisements\\nPlease consider by disabling your ad blocker\" ) &#125; &#125;, 100)&#125;)((window.adBlockEnabled = window.adBlockEnabled || false))출처의 소스를 즉시실행함수로 변경하고, 문구를 추가했다. 설명AdBlock 에 의해 차단되는 영역인 .adsbox div 의 생성유무를 확인해 AdBlock 의 adBlockEnabled 변수의 값을 정한다.uBlock 도 잘 찾아낸다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"etc","slug":"etc","permalink":"https://gracefullight.dev/tags/etc/"}]},{"title":"jQuery Change Class","slug":"jQuery-Change-Class","date":"2016-12-28T06:49:31.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/28/jQuery-Change-Class/","link":"","permalink":"https://gracefullight.dev/2016/12/28/jQuery-Change-Class/","excerpt":"","text":"Toggle Event 사용시 AAA 로 명명된 클래스를 BBB 로 바꾸고 싶을 때가 있다.1$(\"#id\").removeClass(\"AAA\").addClass(\"BBB\")보통 이런 방식으로 사용하는데, alterClass 함수를 곁들이면 더 나이스하게 바꿀 수 있다. 소스1234567891011121314151617181920212223242526272829303132/**@author https://gist.github.com/peteboere/1517285*/$.fn.alterClass = function(removals, additions) &#123; var self = this if (removals.indexOf(\"*\") === -1) &#123; // Use native jQuery methods if there is no wildcard matching self.removeClass(removals) return !additions ? self : self.addClass(additions) &#125; var patt = new RegExp( \"\\\\s\" + removals .replace(/\\*/g, \"[A-Za-z0-9-_]+\") .split(\" \") .join(\"\\\\s|\\\\s\") + \"\\\\s\", \"g\" ) self.each(function(i, it) &#123; var cn = \" \" + it.className + \" \" while (patt.test(cn)) &#123; cn = cn.replace(patt, \" \") &#125; it.className = $.trim(cn) &#125;) return !additions ? self : self.addClass(additions)&#125; 예제1234// AAA to BBB$(\"#id\").alterClass(\"AAA\", \"BBB\")// AAA-12, BBB-13 to AAABBB$(\"#id\").alterClass(\"AAA-* BBB-*\", \"AAABBB\")**asterisk(*)**를 이용해 여러 개의 클래스를 한꺼번에 원하는 클래스로 변경할 수 있다. 여담jQuery UI 를 사용 중이라면, .switchClass를 사용하면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"jquery","slug":"javascript/jquery","permalink":"https://gracefullight.dev/categories/javascript/jquery/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"jquery","slug":"jquery","permalink":"https://gracefullight.dev/tags/jquery/"}]},{"title":"jQuery serializeObject - form을 json으로 변환","slug":"jQuery-serializeObject-form을-json으로-변환","date":"2016-12-28T03:38:00.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/28/jQuery-serializeObject-form을-json으로-변환/","link":"","permalink":"https://gracefullight.dev/2016/12/28/jQuery-serializeObject-form%EC%9D%84-json%EC%9C%BC%EB%A1%9C-%EB%B3%80%ED%99%98/","excerpt":"","text":"비동기 submit 을 진행시에 form 값을 확인해보고 json object 로 받아 한 번에 request 를 날리고 싶을 때 유용하다. 소스12345678910111213141516171819202122/*@author https://github.com/macek/jquery-serialize-object*/$.fn.serializeObject = function() &#123; \"use strict\" var result = &#123;&#125; var extend = function(i, element) &#123; var node = result[element.name] if (\"undefined\" !== typeof node &amp;&amp; node !== null) &#123; if ($.isArray(node)) &#123; node.push(element.value) &#125; else &#123; result[element.name] = [node, element.value] &#125; &#125; else &#123; result[element.name] = element.value &#125; &#125; $.each(this.serializeArray(), extend) return result&#125; 예제1var formData = $(\"#form\").serializeObject() 여담checkbox 같은 경우 여러 개 선택시 하나의 key 에 배열로 반환된다.123456789&lt;form&gt;&lt;input type=\"checkbox\" name=\"arr\" value=\"1\" checked/&gt;&lt;input type=\"checkbox\" name=\"arr\" value=\"2\" checked/&gt;&lt;/form&gt;&lt;script&gt;var formData = $('form').serializeObject();// =&gt; formData = &#123; arr : [1,2] &#125;;&lt;/script&gt;사실 이 기능이 제일 매력적이다.현재 serializeObject library는 더 높은 버전이 있다.최신 버전에선 form 의 name 속성에 object 를 직접 관리할 수 있다.최신 버전을 써도 괜찮고, 가볍게 추가해서 쓰고 싶으면 위 버전을 이용하자.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"jquery","slug":"javascript/jquery","permalink":"https://gracefullight.dev/categories/javascript/jquery/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"jquery","slug":"jquery","permalink":"https://gracefullight.dev/tags/jquery/"}]},{"title":"jQuery Enter Event","slug":"jQuery-Enter-Event","date":"2016-12-28T03:24:35.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/28/jQuery-Enter-Event/","link":"","permalink":"https://gracefullight.dev/2016/12/28/jQuery-Enter-Event/","excerpt":"","text":"로그인 폼을 만들 때 tab 과 enter 를 이용해 로그인 할 수 있게 해줘야한다. 소스12345$(\"#id\").keypress(function(e) &#123; if (e.which === 13) &#123; // do something &#125;&#125;) 여담로그인 폼을 매번 만들지 않기 때문에, e.which 는 매번 헷갈린다…","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"jquery","slug":"javascript/jquery","permalink":"https://gracefullight.dev/categories/javascript/jquery/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"jquery","slug":"jquery","permalink":"https://gracefullight.dev/tags/jquery/"}]},{"title":"git add 안 되는 경우 확인해야될 것","slug":"git-add-안-되는-경우-확인해야될-것","date":"2016-12-27T17:24:18.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/27/git-add-안-되는-경우-확인해야될-것/","link":"","permalink":"https://gracefullight.dev/2016/12/27/git-add-%EC%95%88-%EB%90%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-%ED%99%95%EC%9D%B8%ED%95%B4%EC%95%BC%EB%90%A0-%EA%B2%83/","excerpt":"","text":"git add . 명령어 실행 후에 commit -m 명령어 실행 시,또는 git commit -am 명령어로 바로 커밋시 add 가 되지 않은 것처럼 빨간 파일이 보일 경우 add 확인12$ git add .$ git add path_to_submodule두 명령어를 다시 실행해본다. diff 확인그래도 add 가 안 되는 경우 diff 를 먼저 실행해본다.12$ git diff$ git diff path_to_submodule dirty diff 가 있을 경우 submodule 종속 제거내 프로젝트 안에 git clone 으로 가져온 library 가 있는지 확인해보자.1$ git submodule foreach --recursive git checkout .모듈이 없다는 결과가 나올 경우git 에서 가져온 library 를 모두 확인하고.git 폴더가 생성되어있으면 삭제모듈 결과가 있는 경우.gitmodule 파일의 해당 모듈 부분 삭제git add .gitmodules.git/config 파일의 해당 모듈 부분 삭제git rm --cached path_to_submodule 캐시 삭제rm -rf .git/modules/path_to_submodule 모듈 폴더 삭제git commit -m “Removed submodule {name}” 모듈 종속 삭제를 커밋하고rm -rf path_to_submodule 모듈 파일 모두 삭제 없는 경우 cached 파일 제거12$ git rm -r --cached .$ git rm -r --cached path_to_submodule untracked 파일 제거1$ git clean -d -x -f-d 는 디렉토리 포함, -x 는 ignored 파일 포함, -f === force commit 으로 초기화1$ git reset --hard이 명령어는 마지막 방법이 되어야한다. 작업량을 다 날릴 수 있다. 여담git 버전이 높아지면서 프로젝트 내에 git 에 종속적인 모듈이 있으면 add 자체가 안 된다.path_to_submodule 은 submodule 의 상대경로, 즉 add 가 안 되는 파일의 경로를 적으면 된다.","categories":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/categories/git/"}],"tags":[{"name":"git","slug":"git","permalink":"https://gracefullight.dev/tags/git/"}]},{"title":"jQuery Opener Document 제어","slug":"jQuery-Opener-Document-제어","date":"2016-12-27T14:58:18.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/27/jQuery-Opener-Document-제어/","link":"","permalink":"https://gracefullight.dev/2016/12/27/jQuery-Opener-Document-%EC%A0%9C%EC%96%B4/","excerpt":"","text":"pure javascript부모창을 제어하는 구문은 아래처럼 사용한다.12document.parent.getElementById('id')...window.opener.document.getElementById('id')... jQueryjQuery를 사용하고 있다면 생각보다 쉽게 요소 선택을 할 수 있다.12var $id = $(\"#id\", opener.document) // parent.document도 가능$id.val(\"value\")2열처럼 바로 값 변경도 가능하다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"jquery","slug":"javascript/jquery","permalink":"https://gracefullight.dev/categories/javascript/jquery/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"jquery","slug":"jquery","permalink":"https://gracefullight.dev/tags/jquery/"}]},{"title":"form.reset()의 input hidden 초기화 문제","slug":"form-reset-의-input-hidden-초기화-문제","date":"2016-12-26T05:41:00.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/26/form-reset-의-input-hidden-초기화-문제/","link":"","permalink":"https://gracefullight.dev/2016/12/26/form-reset-%EC%9D%98-input-hidden-%EC%B4%88%EA%B8%B0%ED%99%94-%EB%AC%B8%EC%A0%9C/","excerpt":"","text":"Javascript 의 form 의 reset() 메소드는 hidden field 와 check, radio button 에 대해 초기화를 시켜주지 않는다.따라서 form 의 모든 field 를 초기화 시키려면 아래의 메소드가 필요하다. 소스123456789101112131415161718192021$.fn.clearForm = function() &#123; return this.each(function() &#123; var type = this.type, tag = this.tagName.toLowerCase() if (tag === \"form\") &#123; return $(\":input\", this).clearForm() &#125; if ( type === \"text\" || type === \"password\" || type === \"hidden\" || tag === \"textarea\" ) &#123; this.value = \"\" &#125; else if (type === \"checkbox\" || type === \"radio\") &#123; this.checked = false &#125; else if (tag === \"select\") &#123; this.selectedIndex = -1 &#125; &#125;)&#125; 예제1$(\"#form\").clearForm() 설명여기의 clearForm 메소드를 hidden 도 초기화할 수 있게 커스터마이징 했다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"jquery","slug":"javascript/jquery","permalink":"https://gracefullight.dev/categories/javascript/jquery/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"etc","slug":"etc","permalink":"https://gracefullight.dev/tags/etc/"},{"name":"jquery","slug":"jquery","permalink":"https://gracefullight.dev/tags/jquery/"}]},{"title":"jQuery3의 큰 변경점","slug":"jQuery3의-큰-변경점","date":"2016-12-26T04:57:15.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/26/jQuery3의-큰-변경점/","link":"","permalink":"https://gracefullight.dev/2016/12/26/jQuery3%EC%9D%98-%ED%81%B0-%EB%B3%80%EA%B2%BD%EC%A0%90/","excerpt":"","text":"jQuery3이 기존 버전에서 어떻게 달라졌는지 알아보자. load(), unload(), error() 삭제이 함수들은 이제 ajax 기능으로만 사용할 수 있다.다음처럼 url 을 로드하는 데에만 사용할 수 있다.12// 사용 가능$(div).load(url);기존에 사용하던 엘레먼트 로드 시 callback 함수를 받는 구문은 더이상 사용할 수 없지만 on('load') 로 충돌을 피할 수 있다.123456789// 사용 불가능$(img).load(function () &#123; console.log('이미지 로드 완료');&#125;);// 사용 가능$(img).on('load', function () &#123; console.log('이미지 로드 완료');&#125;); document on Ready 삭제document 로드시에 호출되는 함수들을 정의하기 위한 위의 형태는 더 이상 사용할 수 없다.$(document).ready(function(){ }); 으로 변경해도 되나=&gt; $(function(){ }); 로 사용하자, 권장하는 방법이다. deferred의 Promise 스펙Promise/A+ 스펙을 지키지 않은 2버전까지는 오류가 있었다고 하는데, then, when 등의 메소드를 사용 중엔 별다른 문제가 없어서체감상 크게 느껴지지 않았다.=&gt; then().then().then().then().catch() 와 같은 구문이 가능하다. bind(), unbind(), delegate() undelegate() 삭제위 구문 사용시 console.warning이 떴기에 바꿔왔더라면 큰 문제는 없다.=&gt; on(), off() 로 대체하면 된다. andSelf() 삭제이 메소드가 삭제되어 sementic UI 사용시 오류가 발생한다.=&gt; addBack() 으로 대체하면 된다. param() 이 %20 을 + 기호로 바꾸지 않음$.ajax로 return 받을 때 가끔씩 빈칸이 더하기로 반환되는 문제가 드디어 해결되었다. event.props, event.fixHooks 삭제jquery.onoff 라이브러리 사용시 오류가 난다.=&gt; fixHooks는 fix로 대체 가능하고, props는 빈 배열로 초기화시키면 된다. data attribute 정의시 kebab-case를 사용가능이 부분은 jQuery 문서의 예제를 참조했다.1234567891011121314var $div = $(\"&lt;div /&gt;\");$div.data(\"clickCount\", 2);$div.data(\"clickCount\"); // 2$div.data(\"click-count\", 3);$div.data(\"clickCount\"); // 3$div.data(\"click-count\"); // 3var allData = $div.data();allData.clickCount; // 3allData[\"click-count\"]; // undefinedallData[\"click-count\"] = 14;$div.data(\"click-count\"); // 3, NOT 14 as it would be in jQuery 2.xallData.clickCount; // 3allData[\"click-count\"]; // 14하지만 헷갈리니 camelCase 로.기타 변경점은 링크 참조","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"jquery","slug":"javascript/jquery","permalink":"https://gracefullight.dev/categories/javascript/jquery/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"jquery","slug":"jquery","permalink":"https://gracefullight.dev/tags/jquery/"}]},{"title":"유튜브 국가 차단 우회법","slug":"유튜브-국가-차단-우회법","date":"2016-12-26T03:57:12.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2016/12/26/유튜브-국가-차단-우회법/","link":"","permalink":"https://gracefullight.dev/2016/12/26/%EC%9C%A0%ED%8A%9C%EB%B8%8C-%EA%B5%AD%EA%B0%80-%EC%B0%A8%EB%8B%A8-%EC%9A%B0%ED%9A%8C%EB%B2%95/","excerpt":"","text":"크롬 설치Chrome을 설치한다. 웹스토어 이동Chrome 브라우저를 켜서 웹스토어로 접속한다. Browsec 설치검색 후 설치하기 버튼을 클릭한다. Browsec 활성화주소표시줄 우측의 방패모양 아이콘을 클릭해 기능을 켠다. 감상새로고침(F5 키)을 한 후 감상한다. 여담페이지 로딩시에만 국가 체크가 들어가므로 재생을 한 후 속도가 느리다면, Browsec을 꺼주면 된다.","categories":[{"name":"util","slug":"util","permalink":"https://gracefullight.dev/categories/util/"}],"tags":[{"name":"chrome","slug":"chrome","permalink":"https://gracefullight.dev/tags/chrome/"},{"name":"youtube","slug":"youtube","permalink":"https://gracefullight.dev/tags/youtube/"}]},{"title":"Lodash 활용법","slug":"Lodash-활용법","date":"2016-12-25T12:21:05.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/25/Lodash-활용법/","link":"","permalink":"https://gracefullight.dev/2016/12/25/Lodash-%ED%99%9C%EC%9A%A9%EB%B2%95/","excerpt":"","text":"Lodash는 underscore에서 성능을 개선한 라이브러리며IE의 하위 브라우저에서 es5, es6의 메소드를 사용할 수 있게 해줄 뿐만 아니라 통계 사용시에는 필수로 사용할 수 밖에 없다.공식 문서를 봐도 되지만 구체적인 예시가 있어야 이해하기가 편하다 시작해보자. Collection배열과 객체 모두 사용가능한 메소드 filter_.filter( 콜렉션, 검색할 데이터 또는 콜백함수 )콜렉션에서 해당 데이터 또는 콜백 조건에 맞는 데이터를 포함한 콜렉션을 반환한다.리스트 검색 조건에 유용하다.1234567891011121314151617181920var users = [ &#123; user: \"barney\", age: 36, active: true &#125;, &#123; user: \"fred\", age: 40, active: false &#125;]_.filter(users, o =&gt; !o.active)// =&gt; [ &#123; 'user': 'fred', 'age': 40, 'active': false &#125; ]// _.matches 메소드가 생략된 형태_.filter(users, &#123; age: 36, active: true &#125;)// === _.filter(users, _.matches(&#123; 'age': 36, 'active': true &#125;))// =&gt; [ &#123; 'user': 'barney', 'age': 36, 'active': true &#125; ]// _.matchesProperty 메소드가 생략된 형태_.filter(users, [\"active\", false])// =&gt; [ &#123; 'user': 'fred', 'age': 40, 'active': false &#125; ]// _.property 메소드가 생략된 형태_.filter(users, \"active\")// =&gt; [ &#123; 'user': 'barney', 'age': 36, 'active': true &#125; ] reject_.reject( 콜렉션, 제외시킬 데이터 또는 콜백함수 )콜렉션에서 해당 데이터 또는 콜백 조건에 맞는 데이터를 제외한 콜렉션을 반환한다.Delete API를 호출 한 뒤 삭제된 결과값을 제외해서 리스트를 갱신하고 싶을 때 유용하다.AngularJS와의 예시를 보자1234567891011$scope.remove = function(data) &#123; ApiService.delete( &#123; id: data.id &#125;, function(data) &#123; // 삭제 성공시 해당 데이터를 제외한 리스트로 변경 $scope.list = _.reject($scope.list, data) &#125; )&#125; size_.size( 콜렉션 )콜렉션의 사이즈를 반환한다. length와 같다고 생각하면 된다.12345678_.size([1, 2, 3])// =&gt; 3_.size(&#123; 'a': 1, 'b': 2 &#125;)// =&gt; 2_.size('apple'// =&gt; 5 sampleSize_.sampleSize( 콜렉션, [추출 갯수=1])콜렉션에서 추출 갯수만큼 랜덤 값을 배열로 반환한다.12_.sampleSize(_.range(1, 45), 7)// =&gt; 로또 번호 추출 Array배열에 사용 가능한 메소드 compact_.compact( 배열 )배열에서 false, null, 0, “”(빈값), undefined, NaN의 값을 제외시킨 배열을 반환한다.12_.compact([0, 1, false, 2, \"\", 3])// =&gt; [1, 2, 3] take_.take( 배열, [가져올 요소 수=1])배열에서 앞에서부터 n개의 요소를 반환한다.12_.take([3, 5, 4, 7, 9], 3)// =&gt; [3, 5, 4] uniq_.uniq( 배열 )배열의 중복 값을 제거한다.12_.uniq([1, 1, 3])// =&gt; [1, 3] zip_.zip( 배열, 배열… )배열의 인덱스에 따라 배열을 다시 만든다.예제를 보는게 이해가 빠르다.12_.zip([\"a\", \"b\"], [1, 2], [true, false])// =&gt; [['a', 1, true], ['b', 2, false]] Object객체에 사용 가능한 메소드 get_.get( 객체, 가져올 키, 기본값 )객체에서 해당 키 값만을 가져온다.12345678910111213var object = &#123; a: 1, b: 2, c: 3, e: &#123; f: 5 &#125; &#125;_.get(object, \"a\")// =&gt; 1_.get(object, \"d\")// undefined_.get(object, \"d\", 4)// 4_.get(object, \"e.f\")// 5 omit_.omit( 객체, 제외할 키 배열 )객체에서 해당 키를 제외한 객체를 반환한다.1234567var object = &#123; a: 1, b: \"2\", c: 3 &#125;_.omit(object, [\"a\", \"c\"])// =&gt; &#123; 'b': '2' &#125;_.omit(object, \"a\")// =&gt; &#123; 'b': '2', 'c': 3 &#125; values_.values( 객체 )객체에서 값만을 추출한 배열을 반환한다.12345_.values(&#123; a: 1, b: 2, c: [3, 4] &#125;)// =&gt; [ 1, 2, [3, 4] ]_.values(\"hi\")// =&gt; ['h', 'i'] Util유틸성이 있는 메소드 constant_.constant( 반환 값 )반환 값을 반환해주는 함수이다.단독으로는 거의 사용하지 않고, 다른 Lodash 함수들과 같이 사용한다.12345_.constant(0)// =&gt; 0_.constant(&#123; a: 1 &#125;)// =&gt; &#123; a: 1 &#125; times_.times( 반복횟수, 콜백함수 )콜백함수 조건에 맞게 반복횟수만큼의 데이터를 배열로 반환한다.초기화를 시킬 때 유용하다.12_.times(3, _.constant(0))// =&gt; [0, 0, 0] range_.range( [시작인덱스], 종료인덱스, [증가 폭=1])배열을 초기화 시킬 때 유용하다. 단지 배열을 숫자로 초기화해야된다면 _.range가 속도면에서 _.times(n, constant)보다 월등히 빠르다.12345_.range(0, 6, 0)// =&gt; [0, 0, 0, 0, 0, 0]_.range(4)// =&gt; [0, 1, 2, 3] Why이런 편리함이 있는데도 왜 안 쓰는지 모르겠지만, 몇 가지 이유가 더 있다 Lazy Evaluation링크를 참조하자코드로 요약하자면12345678910111213141516171819202122232425// 이런 구문을var result = [], temp1 = [], temp2 = [], temp3 = []for (var i = 0; i &lt; source.length; i++) &#123; temp1[i] = func1(source[i])&#125;for (i = 0; i &lt; source.length; i++) &#123; temp2[i] = func2(temp1[i])&#125;for (i = 0; i &lt; source.length; i++) &#123; temp3[i] = func3(temp2[i])&#125;result = temp3// 아래처럼 바꿔 엄청난 속도 향상을 가져올 수 있다var result = []for (var i = 0; i &lt; source.length; i++) &#123; result[i] = func3(func2(func1(source[i])))&#125; chaining또 다른 큰 이유는 chain을 활용해 functional programming이 가능하단 것이다.예를 들어 다음과 같은 데이터가 있다고 보자data1234567891011121314151617181920212223242526272829303132333435363738394041424344;[ &#123; tag: &#123; name: \"tag1\", media: &#123; nodes: [ &#123; id: \"uid1\", user: \"gracefullight\", caption: \"caption1\", likes: 10 &#125;, &#123; id: \"uid2\", user: \"gracefullight\", caption: \"caption2\", likes: 20 &#125; ] &#125; &#125; &#125;, &#123; tag: &#123; name: \"tag2\", media: &#123; nodes: [ &#123; id: \"uid3\", user: \"gracefullight\", caption: \"caption3\", likes: 30 &#125;, &#123; id: \"uid4\", user: \"gracefullight\", caption: \"caption4\", likes: 40 &#125; ] &#125; &#125; &#125;] js이 데이터의 nodes 데이터만 가져와서 새로운 data 배열을 만들고 싶다면 어떻게 할까?lodash를 모르는 상태라면 대충 이런식의 로직이 나온다.12345678910111213141516171819202122// for문 애호가const data = [\"위에 데이터 배열\"]let result = []for (let i = 0, len = data.length; i &lt; len; i++) &#123; let nodes = data[i].tag.media.nodes for (let j = 0, len2 = nodes.length; j &lt; len2; j++) &#123; // 머리가 슬슬 아파진다. &#125;&#125;// 더 나은 방법result = data .map(item =&gt; &#123; // 여기까지의 결과는 [[&#123;&#125;, &#123;&#125;], [&#123;&#125;, &#123;&#125;]] 모양이 될 것이다 return item.tag.media.nodes &#125;) .reduce((prev, item) =&gt; &#123; // 아 여기서 난관이다. 배열을 벗기면서 내부의 오브젝트만 prev array에 push 또는 concat해줘야한다. return prev &#125;, []) With lodashlodash를 사용하면 다음과 같이 직관적으로 구현이 가능하다.123456789101112result = _.chain(data) .map('tag.media.nodes') .flatten() .values()// 결과는 다음과 같다[ &#123; id: 'uid1'... &#125;, &#123; id: 'uid2'... &#125;, &#123; id: 'uid3'... &#125;, &#123; id: 'uid4'...&#125;] 여담Lodash는 jQuery와 중복되는 이름을 가진 메소드가 몇 가지 있는데,차이점은 콜백함수에서 value를 첫번째 인자로 받는다는 것이고 브라우저에서 native method를 사용할 수 있으면 그걸 사용한다는 것이다. (each를 예를들면 array.forEach)12345// lodash_.each([\"a\", \"b\", \"c\"], (value, index, list) =&gt; &#123;&#125;)// jQuery$.each([\"a\", \"b\", \"c\"], (index, value) =&gt; &#123;&#125;)따라서 lodash를 사용하는 것을 권한다. (속도도 더 빠르다)","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"lodash","slug":"javascript/lodash","permalink":"https://gracefullight.dev/categories/javascript/lodash/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"lodash","slug":"lodash","permalink":"https://gracefullight.dev/tags/lodash/"},{"name":"underscore","slug":"underscore","permalink":"https://gracefullight.dev/tags/underscore/"}]},{"title":"MomentJS 활용법","slug":"MomentJS-활용법","date":"2016-12-23T06:57:14.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/23/MomentJS-활용법/","link":"","permalink":"https://gracefullight.dev/2016/12/23/MomentJS-%ED%99%9C%EC%9A%A9%EB%B2%95/","excerpt":"","text":"java에 joda-time이 있듯 javascript에는 moment가 있다.기초적인 moment 사용법은 알고 있다고 가정한다. calandar현재시각과 비교해 날짜를 어제 오후 12:31처럼 표시하고 싶은 경우 사용한다. 소스1moment(date).calendar(today, &#123; sameElse: \"YYYY-MM-DD HH:mm:ss\" &#125;);date는 비교할 날짜, today는 현재시각 값이다.일주일 이하일 경우 어제… 그저께… 등으로 반환되고, 이상일 경우 sameElse에 등록된 포맷으로 반환된다.global locale 설정을 지정하지 않았을 경우 sameElse가 들어가는 option object 안에 locale을 커스터마이징 할 수 있다.기타 옵션은 API 참조 diffA에서 B의 차이를 구할 때 쓰는 diff method를 쓰다가, 월 또는 년도의 차이를 계산하는 경우가 생긴다. 소스 worst case1moment(\"2016-06\").diff(\"2015-01\", \"month\");이렇게 처리하면 되지 않을까? 동작은 하지만 오류가 날 수 있다고 console.warning 이 찍힌다. good case1moment([2016, 06]).diff([2015, 01], \"month\");실행이 잘되지만, YYYY-MM을 split해서 넣어줘야하는 번거로움이 있다. best case1moment(\"2016-06\", \"YYYY-MM\").diff(\"2015-01\", \"month\");moment 형식으로 변환시 두번째 파라미터에 포맷을 지정하면 console.warning도 없고 번거로움도 사라진다!","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"moment","slug":"javascript/moment","permalink":"https://gracefullight.dev/categories/javascript/moment/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"moment","slug":"moment","permalink":"https://gracefullight.dev/tags/moment/"}]},{"title":"Materialize pickadate 설정","slug":"Materialize-pickadate-설정","date":"2016-12-23T06:51:23.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/23/Materialize-pickadate-설정/","link":"","permalink":"https://gracefullight.dev/2016/12/23/Materialize-pickadate-%EC%84%A4%EC%A0%95/","excerpt":"","text":"기본예제는 type=“date” 로만 설정이 되있어서 type=&quot;text&quot;에도 적용 가능하게 onSet callback 을 설정했고,한글로 보이게 수정했다. 소스1234567891011121314151617181920212223242526272829303132&lt;input type=\"text\" name=\"date\" class=\"date\"/&gt;&lt;script&gt;$(function () &#123; // pickadate 옵션 전역설정 $.extend($.fn.pickadate.defaults, &#123; monthsFull:['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'], monthsShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'], weekdaysFull: ['일', '월', '화', '수', '목', '금', '토'], weekdaysShort:['일', '월', '화', '수', '목', '금', '토'], selectMonths: true, selectYears: 140, showMonthsShort: false, showWeekdaysFull: false, close:'닫기', clear:false, today:'오늘', format:'yyyy-mm-dd', formatSubmit: 'yyyy-mm-dd', max:true, // 이 옵션이 ture면 오늘까지밖에 날짜 선택을 못한다 closeOnSelect:true, onSet: function(e) &#123; if (e.select) &#123; this.close(); &#125; &#125; &#125;); // 활성화 $('.date').pickadate();&#125;);&lt;/script&gt; 결과","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"materialize","slug":"javascript/materialize","permalink":"https://gracefullight.dev/categories/javascript/materialize/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"materialize","slug":"materialize","permalink":"https://gracefullight.dev/tags/materialize/"},{"name":"pickadate","slug":"pickadate","permalink":"https://gracefullight.dev/tags/pickadate/"}]},{"title":"Express 환경에서 node_modules 안의 script 사용","slug":"Express-환경에서-node-modules-안의-script-사용","date":"2016-12-23T06:47:28.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/23/Express-환경에서-node-modules-안의-script-사용/","link":"","permalink":"https://gracefullight.dev/2016/12/23/Express-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-node-modules-%EC%95%88%EC%9D%98-script-%EC%82%AC%EC%9A%A9/","excerpt":"","text":"앵귤러 또는 다른 브라우저에 필요한 스크립트를 npm 으로 설치하고node_modules 안에 있는 스크립트로 참조하고 싶을 때 다음과 같이 라우팅을 추가한다. 소스12// scripts 경로로 접근시 node_modules을 사용할 수 있게 설정app.use(\"/scripts\", express.static(path.join(__dirname, \"node_modules\")))12&lt;!-- 결과 --&gt;&lt;script src=\"/scripts/angular/angular.min.js\"&gt;&lt;/script&gt;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"},{"name":"express","slug":"javascript/nodejs/express","permalink":"https://gracefullight.dev/categories/javascript/nodejs/express/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"express","slug":"express","permalink":"https://gracefullight.dev/tags/express/"}]},{"title":"Windows10에서 NodeJS MariaSQL 모듈 설치","slug":"Windows10에서-NodeJS-MariaSQL-모듈-설치","date":"2016-12-23T06:34:12.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/23/Windows10에서-NodeJS-MariaSQL-모듈-설치/","link":"","permalink":"https://gracefullight.dev/2016/12/23/Windows10%EC%97%90%EC%84%9C-NodeJS-MariaSQL-%EB%AA%A8%EB%93%88-%EC%84%A4%EC%B9%98/","excerpt":"","text":"오류mariasql package 설치 명령어 실행시오류를 내뿜으며 node-debug.log 를 확인하라고 명령어가 나올 경우 아래와 같이 하면 된다.debug log 에는 node-gyp rebuild 를 하라고 나오는데, 이 오류메세지와는 아무 관련이 없다. 해결 Python 2.7 설치윈도우에 Python 2.7 버전이 설치되어있지 않으면 설치해야한다.파이썬 2 이상 3 미만 버전을 쓰면 되는데, 2.7 을 강조하니 쓰자.여기서 다운로드 한다.설치시 Window PATH 등록 옵션을 꼭 선택해야한다. Python 경로를 npm 에 등록1$ npm config set python \"/the/python/path\" --globalthe/python/path 에 자신의 python 설치 경로를 넣어주자. Microsoft Visual Studio Community 2015 설치왜 VS 2015 를 설치해야하지? 라고 생각이 들텐데, **Visual C++**을 사용하기 때문이다.여기서 다운로드한다.설치시 프로그래밍언어 탭에서 Visual C++을 꼭 선택해서 설치해야한다.기존에 VS2015 가 설치되어있는 경우, 프로그램 추가/삭제에서 선택 후 수정 메뉴를 눌러Visual C++ 옵션을 추가한 뒤 업데이트해준다.2017 년 기준 위 링크가 만료되어 cpp-build-tools를 설치해야한다 Visual Studio 버전을 npm 에 등록1$ npm config set msvs_version \"2015\" --global MariaSQL Package 설치1$ npm install mariasql --save 여담Windows10 에서 mariasql package 설치시 C++ 컴파일이 필요하니,VS2015 로 C++ 컴파일러를 설치해야된다라는 걸 msdn 이나 npm 에 친절히 남겨줬으면 이렇게까지 시간을 날리지 않았을텐데… 최근 해결방법빠르고 위의 오류가 절대 발생하지 않는 mysql2 패키지를 사용하면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"},{"name":"windows","slug":"windows","permalink":"https://gracefullight.dev/tags/windows/"}]},{"title":"Cannot find module '../build/Relase/bson'","slug":"Cannot-find-module-build-Relase-bson","date":"2016-12-23T06:19:05.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/23/Cannot-find-module-build-Relase-bson/","link":"","permalink":"https://gracefullight.dev/2016/12/23/Cannot-find-module-build-Relase-bson/","excerpt":"","text":"mongoose-post-find 모듈 사용시 bson 라이브러리를 찾지 못해 설치가 안되는 경우가 있다. 오류12345678910111213141516171819&#123; Error: Cannot find module '../build/Release/bson' at Function.Module._resolveFilename (module.js:440:15) at Function.Module._load (module.js:388:25) at Module.require (module.js:468:17) at require (internal/module.js:20:19) // 여기서 오류가 발생한다 at Object.&lt;anonymous&gt; (your project\\mongoose-post-find\\node_modules\\bson\\ext\\index.js:15:10) at Module._compile (module.js:541:32) at Object.Module._extensions..js (module.js:550:10) at Module.load (module.js:458:32) at tryModuleLoad (module.js:417:12) at Function.Module._load (module.js:409:3) at Module.require (module.js:468:17) at require (internal/module.js:20:19) at Object.&lt;anonymous&gt; (your project\\mongoose-post-find\\node_modules\\bson\\lib\\bson\\index.js:3:24) at Module._compile (module.js:541:32) at Object.Module._extensions..js (module.js:550:10) at Module.load (module.js:458:32) code: 'MODULE_NOT_FOUND' &#125;js-bson: Failed to load c++ bson extension, using pure JS version 해결해당 패키지 경로의 15번째 줄을 따라가보면 bson 패키지의 경로를 지정해주는 부분이 있는데,이 부분을 같은 패키지 내의 bson 경로로 일치시켜주면 된다.bson/index.js123456789101112131415161718192021222324var bson = null;try &#123; // Load the precompiled win32 binary if (process.platform == \"win32\" &amp;&amp; process.arch == \"x64\") &#123; bson = require(\"./win32/x64/bson\"); &#125; else if (process.platform == \"win32\" &amp;&amp; process.arch == \"ia32\") &#123; bson = require(\"./win32/ia32/bson\"); &#125; else &#123; bson = require(\"../build/Release/bson\"); &#125;&#125; catch (err) &#123; // Attempt to load the release bson version try &#123; // 여기의 상대경로를 같은 패키지의 bson의 경로로 일치시켜주면 된다. bson = require(\"../browser_build/bson\"); &#125; catch (err) &#123; console.dir(err); console.error( \"js-bson: Failed to load c++ bson extension, using pure JS version\" ); bson = require(\"../lib/bson/bson\"); &#125;&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"nodejs","slug":"javascript/nodejs","permalink":"https://gracefullight.dev/categories/javascript/nodejs/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"nodejs","slug":"nodejs","permalink":"https://gracefullight.dev/tags/nodejs/"},{"name":"mongoose","slug":"mongoose","permalink":"https://gracefullight.dev/tags/mongoose/"}]},{"title":"React 시작하기","slug":"React-시작하기","date":"2016-12-23T05:38:04.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/23/React-시작하기/","link":"","permalink":"https://gracefullight.dev/2016/12/23/React-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0/","excerpt":"","text":"ES6 과 this binding 에 대한 이해ES5 스타일로 React 를 사용할 수 있지만 JSX 를 사용하기에 한 번은 컴파일이 필요하다.따라서 ES6 의 문법을 사용하는게 낫다. (직관적이기도 하고)그래서 ES6 의 문법이 익숙해져야하고, javascript 에서 this 를 왜 바인딩 하는지에 대한 이해가 필요하다. JSX 이란React 를 제대로 사용하기 위해서는 JSX 라는 새로운 구문(확장자)로 javascript 를 짜야하는데,JSX 는 XML 스타일의 자바스크립트 표현식이라고 생각하면 된다.브라우저에서 돌아가게 하려면 순수한 자바스크립트 형태가 되어야 하기 때문에 컴파일이 필요하다.React 구버전은 JSXTransfiler 를 통해 변환을 했는데, 지금은 지원하지 않고Babel을 사용해 컴파일 해야한다. Babel 이란Babel 은 ES6 의 구문을 구버전의 브라우저에서 사용할 수 있게 컴파일해주는 자바스크립트 컴파일러라고 생각하면 된다. 추가적으로 JSX 도 컴파일해준다.NodeJS 환경에서는 Gulp 를 이용해 자동으로 컴파일이 되게 설정할 수 있지만,브라우저에서 단독으로 사용할 수 있게 해보는 방법을 알아보자. 설치1234# bower$ bower install babel-standalone --save# npm$ npm install babel-standalone --save또는 여기서 직접 받는다. React 설치1234# bower$ bower install react --save# npm$ npm install react --save또는 여기서 직접 받는다. 실행12345&lt;script src=\"/bower_components/babel-standalone/babel.min.js\"&gt;&lt;/script&gt;&lt;script src=\"/bower_components/react/react.min.js\"&gt;&lt;/script&gt;&lt;script src=\"/bower_components/react/react-dom.min.js\"&gt;&lt;/script&gt;&lt;script type=\"text/babel\" src=\"/react_login_form.jsx\"&gt;&lt;/script&gt;babel 과 react, 데이터 바인딩을 위한 react-dom 을 가져온다.그리고 react_login_form.jsx 를 text/babel 타입으로 가져오면 된다. 예제1234567891011121314151617181920212223242526272829303132333435363738394041424344// 리액트에 넣을 모듈을 선언한다.class LoginForm extends React.Component &#123; constructor(props) &#123; super(props) this.state = &#123; id: \"\", pw: \"\" &#125; &#125; // input의 데이터가 변할 때 state의 값이 변경할 수 있게한다 handleChange(key, event) &#123; this.state[key] = event.target.value this.setState(this.state) &#125; handleSubmit(event) &#123; console.log(this.state) // 여기에 ajax 호출을 구현하면 된다 // $.ajax().then(function()&#123; // this.setState와 같은 상태변경 처리 // &#125;.bind(this)); event.preventDefault() &#125; render() &#123; return ( &lt;form onSubmit=&#123;this.handleSubmit.bind(this)&#125;&gt; 아이디 : &lt;input type=\"text\" value=&#123;this.state.id&#125; onChange=&#123;this.handleChange.bind(this, \"id\")&#125; /&gt; 비밀번호 :&lt;input type=\"password\" value=&#123;this.state.pw&#125; onChange=&#123;this.handleChange.bind(this, \"pw\")&#125; /&gt; &lt;input type=\"submit\" value=\"Submit\" /&gt; &lt;/form&gt; ) &#125;&#125;// LoginForm class를 id=\"login\"에 renderReactDOM.render(&lt;LoginForm /&gt;, document.getElementById(\"login\")) 여담주관적으론 데이터 바인딩을 위해서만 사용하려면 Vue를 사용하는게,완벽한 SPA 를 만들고 싶다면 역시 Angular2가 답인듯 싶다.추가로 React 와 Angular2 의 비교를 보길 원한다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"react","slug":"javascript/react","permalink":"https://gracefullight.dev/categories/javascript/react/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"react","slug":"react","permalink":"https://gracefullight.dev/tags/react/"}]},{"title":"CentOS Maria DB 설치","slug":"CentOS-Maria-DB-설치","date":"2016-12-22T23:08:50.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/CentOS-Maria-DB-설치/","link":"","permalink":"https://gracefullight.dev/2016/12/22/CentOS-Maria-DB-%EC%84%A4%EC%B9%98/","excerpt":"","text":"Maria DB 를 써야하는 이유는MySQL 이 지원이 끝났기 때문이고, 오라클이 소유하고 있어 언제 유료화가 될지 모르고,Thread Pool, 강화된 스토리지 엔진 (InnoDB -&gt; XtraDB), 새로운 스토리지 엔진 (Aria, Cassandra)과 HandlerSocket, Virtual Column 등의 새로운 기능이 있기 때문이다.설치를 시작해보자! 버전 확인 후 yum repo 추가 버전 및 bit 확인1234# get version$ cat /etc/*release*# get bit$ getconf LONG_BIT yum repo 복사maria로 이동해 맞는 버전을 추가한다. yum repo 추가1$ vi /etc/yum.repos.d/MariaDB.repo명령어로 MariaDB repository 를 생성한 뒤 복사한 내용을 붙히고 저장한다. 설치1$ yum install -y MariaDB-server MariaDB-client혹여 설치가 안되면 maria 문서를 참고해서 따라해보자 (영어) 부팅 서비스 등록1234567$ chkconfig mysql on# 또는$ chkconfig --add mysql$ chkconfig --level 345 mysql on# 등록 확인$ chkconfig --list mysql※ maria에서는 345 레벨을 on 하라고 했는데, chkconfig mysql on 으로 실행시켜 2345 레벨을 모두 on 시켰다.2 레벨은 not networking 이라 DB 의 원격지 접속이 안될테니 off 시켜도 무관하다. 서비스 실행1$ service mysql startStarting MySQL… [ OK ]Maria 의 서비스명은 MySQL 로 뜬다. Config 파일 수정 및 통합처음 설치시 my.cnf 에서 my-server, my-client 등의 파일을 임포트해 분할 관리하게 되어있는데,하나로 합쳐보자.MariaDB 설치 폴더를 들어가면 My innoDB Huge 라는 config 파일이 존재한다.이걸 그대로 사용해도 되고, 사용자 환경에 맞게 커스터마이징해서 사용해도 된다.서버의 메모리가 8 GB 이상, innoDB 환경에서 사용가능한 config 파일을 첨부하니 이걸 써도 된다.Thread Pool 기능을 사용하기 위해 extra_port 를 3307 로 줬다. 소스my.cnf1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192[client]port = 3306socket = /var/lib/mysql/mysql.sock[mysqld]port = 3306socket = /var/lib/mysql/mysql.sockcharacter-set-server = utf8mb4collation_server = utf8mb4_general_ciback_log = 100max_connections = 100max_connect_errors = 10table_open_cache = 2048max_allowed_packet = 16Mbinlog_cache_size = 4Mbinlog_format = rowmax_heap_table_size = 16Mread_buffer_size = 2Mread_rnd_buffer_size = 16Msort_buffer_size = 8Mjoin_buffer_size = 8Mquery_cache_type = 0default-storage-engine = InnoDBthread_stack = 256Ktmp_table_size = 16Msecure_auth =1skip_external_lockingskip_symbolic_links# Replication related settingsserver-id = 1expire_logs_days = 3log_slave_updates# MyISAM Specific optionskey_buffer_size = 32Mbulk_insert_buffer_size = 64Mmyisam_sort_buffer_size = 8Mmyisam_max_sort_file_size = 16Mmyisam_repair_threads = 1myisam_recover = FORCE,BACKUP# INNODB Specific optionsinnodb_additional_mem_pool_size = 16Minnodb_buffer_pool_size = 2Ginnodb_data_file_path = ibdata1:10M:autoextend#innodb_data_home_dir = &lt;directory&gt;innodb_thread_concurrency = 16innodb_flush_log_at_trx_commit = 0innodb_log_buffer_size = 32Minnodb_log_file_size = 1024Minnodb_log_files_in_group = 2#innodb_log_group_home_dirinnodb_max_dirty_pages_pct = 75[mysqldump]quickmax_allowed_packet = 16Mdefault-character-set = utf8[mysql]no-auto-rehash[myisamchk]key_buffer_size = 512Msort_buffer_size = 512Mread_buffer = 8Mwrite_buffer = 8M[mysqlhotcopy]interactive-timeout[mysqld_safe]open-files-limit = 8192[mariadb]# thread poolthread_handling=pool-of-threadsthread_pool_idle_timeout = 3600thread_pool_stall_limit = 100extra_port = 3307extra_max_connections=10","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"},{"name":"maria","slug":"database/maria","permalink":"https://gracefullight.dev/categories/database/maria/"}],"tags":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/tags/database/"},{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"},{"name":"centos","slug":"centos","permalink":"https://gracefullight.dev/tags/centos/"}]},{"title":"MySQL Dump 명령어","slug":"MySQL-Dump-명령어","date":"2016-12-22T22:56:42.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/MySQL-Dump-명령어/","link":"","permalink":"https://gracefullight.dev/2016/12/22/MySQL-Dump-%EB%AA%85%EB%A0%B9%EC%96%B4/","excerpt":"","text":"MySQL Dump 명령어 사용법 스크립트 생성1$ vi dump.shdump.sh 파일을 만들고 아래 내용을 추가해 준다.1$ mysqldump -u 유저명 -p비밀번호 데이터베이스명&gt; 경로`date+%y%m%d%H`.sql스크립트를 원하는 시간대로 cron 에 등록한다. 예제ID : test, PW: test, DB : test 의 dump 를 생성하고 싶을 때1$ mysqldump -u test-ptest test&gt; /home/test/dump/`date+%y%m%d%H`.sql","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"},{"name":"mysql","slug":"database/mysql","permalink":"https://gracefullight.dev/categories/database/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"},{"name":"database","slug":"database","permalink":"https://gracefullight.dev/tags/database/"}]},{"title":"Database 유저 생성 및 권한 설정","slug":"Database-유저-생성-및-권한-설정","date":"2016-12-22T13:46:07.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/Database-유저-생성-및-권한-설정/","link":"","permalink":"https://gracefullight.dev/2016/12/22/Database-%EC%9C%A0%EC%A0%80-%EC%83%9D%EC%84%B1-%EB%B0%8F-%EA%B6%8C%ED%95%9C-%EC%84%A4%EC%A0%95/","excerpt":"","text":"유저 생성123CREATE USER '유저명'@'%' IDENTIFIED BY '비밀번호'; -- 모든 아이피 접근CREATE USER '유저명'@'localhost' IDENTIFIED BY '비밀번호'; -- 로컬호스트 접근CREATE USER '유저명'@'127.0.0.1' IDENTIFIED BY '비밀번호'; -- 로컬호스트 접근 데이터베이스에 모든 권한 부여12-- 해당 디비명의 유저의 모든권한 설정GRANT ALL PRIVILEGES ON 디비명.* TO '유저명'@'%' WITH GRANT OPTION; 권한 적용1FLUSH PRIVILEGES; 권한 확인1SHOW GRANTS FOR '유저명'@'%'; 여담권한 부여는 쉘상에서 접근해야지 오류가 없다.부분 권한 또는 부분 테이블로 권한을 제한하고 싶다면, MySQL Grant Syntax를 참조한다.","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"},{"name":"mysql","slug":"database/mysql","permalink":"https://gracefullight.dev/categories/database/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"},{"name":"database","slug":"database","permalink":"https://gracefullight.dev/tags/database/"},{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"}]},{"title":"MySQL에서 MariaDB 이관시 서브쿼리의 정렬이 바뀔 때","slug":"MySQL에서-MariaDB-이관시-서브쿼리의-정렬이-바뀔-때","date":"2016-12-22T13:35:17.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/MySQL에서-MariaDB-이관시-서브쿼리의-정렬이-바뀔-때/","link":"","permalink":"https://gracefullight.dev/2016/12/22/MySQL%EC%97%90%EC%84%9C-MariaDB-%EC%9D%B4%EA%B4%80%EC%8B%9C-%EC%84%9C%EB%B8%8C%EC%BF%BC%EB%A6%AC%EC%9D%98-%EC%A0%95%EB%A0%AC%EC%9D%B4-%EB%B0%94%EB%80%94-%EB%95%8C/","excerpt":"","text":"@Rownum 변수를 사용해 페이징 쿼리를 구현했는데, MySQL 에서는 정상적으로 정렬이 되다가 Maria 로 이관 후에 정렬이 반대로 나오는 경우가 있다. 오류 쿼리123456789SELECT SQL_CALC_FOUND_ROWS @RNUM:=@RNUM+1 AS ROWNUM, R.* FROM ( SELECT @RNUM:=0, Q.* FROM ( SELECT * FROM TABLE1 WHERE ID = '1' ORDER BY REG DESC ) Q) RLIMIT 0,10 설명Rownum 변수를 사용해 TABLE1 에서 최신 날짜 순으로 데이터를 가지고 온다. 해결LIMIT 2^64-1를 서브쿼리 내에 추가해준다.LIMIT 의 최댓값은 unsigned 64bit-1 이므로 해당 값을 날려준다. 쿼리1234567891011SELECT SQL_CALC_FOUND_ROWS @RNUM:=@RNUM+1 AS ROWNUM, R.* FROM ( SELECT @RNUM:=0, Q.* FROM ( SELECT * FROM TABLE1 WHERE ID = '1' ORDER BY REG DESC LIMIT 18446744073709551615 ) Q) RLIMIT 0,10 원인Optimizer 가 임시테이블을 만든 후 filesort 하기 때문에 발생한다.","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"},{"name":"mysql","slug":"database/mysql","permalink":"https://gracefullight.dev/categories/database/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"},{"name":"database","slug":"database","permalink":"https://gracefullight.dev/tags/database/"},{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"}]},{"title":"MySQL 버전 및 설정 확인","slug":"MySQL-버전-및-설정-확인","date":"2016-12-22T13:29:37.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/MySQL-버전-및-설정-확인/","link":"","permalink":"https://gracefullight.dev/2016/12/22/MySQL-%EB%B2%84%EC%A0%84-%EB%B0%8F-%EC%84%A4%EC%A0%95-%ED%99%95%EC%9D%B8/","excerpt":"","text":"Database Migration 또는 Module 설치시 MySQL 버전을 자주 물어본다. 쿼리123SELECT version();SHOW variables LIKE 'datadir'; 설명첫번째 쿼리 실행시 버전이 나오고, 두번째 쿼리 실행시 설치 경로가 나온다.","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"},{"name":"mysql","slug":"database/mysql","permalink":"https://gracefullight.dev/categories/database/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"},{"name":"database","slug":"database","permalink":"https://gracefullight.dev/tags/database/"}]},{"title":"MySQL Lock 해제","slug":"MySQL-Lock-해제","date":"2016-12-22T13:20:19.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/MySQL-Lock-해제/","link":"","permalink":"https://gracefullight.dev/2016/12/22/MySQL-Lock-%ED%95%B4%EC%A0%9C/","excerpt":"","text":"잘못된 업데이트 쿼리를 돌리다가 테이블이 잠길 경우 Lock을 해제해줘야 한다. 쿼리123show processlistkill $&#123;processid&#125; 설명show processlist 쿼리를 날리면 현재 database를 사용 중인 프로세스의 목록이 나온다.목록에서 해당 쿼리를 찾은 뒤 process id를 가지고 kill 쿼리를 실행하면 된다.","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"},{"name":"mysql","slug":"database/mysql","permalink":"https://gracefullight.dev/categories/database/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"},{"name":"database","slug":"database","permalink":"https://gracefullight.dev/tags/database/"},{"name":"maria","slug":"maria","permalink":"https://gracefullight.dev/tags/maria/"}]},{"title":"connection using old (pre-4.1.1) authentication protocol refused","slug":"connection-using-old-pre-4-1-1-authentication-protocol-refused","date":"2016-12-22T12:14:44.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/22/connection-using-old-pre-4-1-1-authentication-protocol-refused/","link":"","permalink":"https://gracefullight.dev/2016/12/22/connection-using-old-pre-4-1-1-authentication-protocol-refused/","excerpt":"","text":"MySQL Workbench에서 database 연결 도중 connection using old (pre-4.1.1) authentication protocol refused와 같은 오류가 발생시 다음과 같이 해결하자. 원인서버에 설치된 MySQL 버전이 5.1보다 낮아서이다. 해결방법연결시 Advanced 탭에서 Use the old authentification protocol을 체크해주자.","categories":[{"name":"database","slug":"database","permalink":"https://gracefullight.dev/categories/database/"},{"name":"mysql","slug":"database/mysql","permalink":"https://gracefullight.dev/categories/database/mysql/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://gracefullight.dev/tags/mysql/"},{"name":"database","slug":"database","permalink":"https://gracefullight.dev/tags/database/"}]},{"title":"HTML 태그 모두 제거","slug":"HTML-태그-모두-제거","date":"2016-12-22T12:08:10.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/HTML-태그-모두-제거/","link":"","permalink":"https://gracefullight.dev/2016/12/22/HTML-%ED%83%9C%EA%B7%B8-%EB%AA%A8%EB%91%90-%EC%A0%9C%EA%B1%B0/","excerpt":"","text":"스마트 에디터 같은 에디터를 쓸 대 내용을 텍스트로만 받아야할 경우가 있다. 예제1var data = data.replace(/[&lt;][^&gt;]*[&gt;]/g, \"\") 설명&lt; &gt; 안의 태그들을 모두 빈값으로 치환한다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"JSON.parse unexpected type Error","slug":"JSON-parse-unexpected-type-Error","date":"2016-12-22T11:47:37.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/JSON-parse-unexpected-type-Error/","link":"","permalink":"https://gracefullight.dev/2016/12/22/JSON-parse-unexpected-type-Error/","excerpt":"","text":"database 에 이미 json 으로 저장된 데이터를 가져와 JSON.parse 메소드로 JSON 데이터를 파싱하는 중에 값이 string 인데도 오류가 나는 경우가 있다.로그를 확인해보면1&#123;\"data\":\"[&#123;\"name\":\"gracefullight\"&#125;,&#123;\"name\",\"daniel\"&#125;]\"&#125;[] 배열 기호 앞뒤로 따움표가 들어가 있다.이중 object 가 있다면 선언문 {} 앞뒤로 따움표가 들어가 파싱 오류가 난다. 원인jQuery.ajax 의 dataType 을 json 으로 설정해 데이터를 받는데, 이미 json 형태의 string 이 넘어와 두번 치환이 된 것 같다.다시 json 을 인식할 수 있게 치환해보자 소스12345678910var jsonReplace = function(j) &#123; if (j) &#123; j = j .replace(/\\\"\\[/g, \"[\") .replace(/\\]\\\"/g, \"]\") .replace(/\\\"\\&#123;/g, \"&#123;\") .replace(/\\&#125;\\\"/g, \"&#125;\") &#125; return j&#125; 설명해당 함수로 오류가 나는 json string 을 치환 후에 다시 JSON.parse 를 실행하면 된다. 여담정규식을 활용해 replace 중첩을 피하게 짤 수 있을 것 같은데…","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"json","slug":"json","permalink":"https://gracefullight.dev/tags/json/"}]},{"title":"hasOwnProperty vs prototype.hasOwnProperty","slug":"hasOwnProperty-vs-prototype-hasOwnProperty","date":"2016-12-22T11:26:49.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/22/hasOwnProperty-vs-prototype-hasOwnProperty/","link":"","permalink":"https://gracefullight.dev/2016/12/22/hasOwnProperty-vs-prototype-hasOwnProperty/","excerpt":"","text":"hasOwnPropertyfor-in 구문을 쓸 때 상속된 프로퍼티나 this 구문을 방지하기 위하여 보통 hasOwnProperty 로 체크한다.12345for (prop in obj) &#123; if (obj.hasOwnProperty(prop)) &#123; // code... &#125;&#125; 문제점위와 같은 방식은 아래와 같이 hasOwnProperty 가 재정의 된 객체에서 오류를 발생할 수 있다. 소스12345678910111213var obj = &#123; hasOwnProperty: function() &#123; return false &#125;, data1: 1&#125;for (prop in obj) &#123; // obj.hasOwnproperty(prop) 의 결과는 항상 false if (obj.hasOwnproperty(prop)) &#123; // 이 구문은 실행되지 않는다. &#125;&#125; prototype.hasOwnProperty따라서 prototype 을 사용해 코딩해야한다. 소스123456789for (prop in obj) &#123; // 첫번째 방법 if (&#123;&#125;.hasOwnProperty.call(obj, prop)) &#123; &#125; // 두번째 방법 if (Object.prototype.hasOwnProperty.call(obj, prop)) &#123; &#125;&#125; 설명첫번째 방법은 익명 Object 를 생성한 후 obj 와 prop 을 밀어넣는 방식이고두번째 방법은 기본 Object 의 hasOwnProperty 를 가져와 obj 와 prop 을 밀어넣는 방식이다.두번째 방법이 새(익명) Object 를 생성하지 않기에 이 방법을 사용하면 된다.더 자세하게 알고 싶다면 mdn을 참조한다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"object","slug":"object","permalink":"https://gracefullight.dev/tags/object/"}]},{"title":"Throttle, Debounce Pattern","slug":"Throttle-Debounce-Pattern","date":"2016-12-22T11:16:37.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/22/Throttle-Debounce-Pattern/","link":"","permalink":"https://gracefullight.dev/2016/12/22/Throttle-Debounce-Pattern/","excerpt":"","text":"javascript throttle 패턴과 debounce 패턴에 대해 알아보자. Throttle매 ms 마다 한 번만 호출된다.mousemove, scroll 같은 이벤트로 호출되는 함수는 이벤트 발생시 무한정 호출되어 성능 저하를 가지고 오는데, 이를 방지할 수 있다.모바일에서 스크롤링 더보기에 사용할 수 있다. 소스1234567891011121314151617181920var throttleFunction = (function() &#123; \"use strict\" var timeWindow = 500 // 여기에 시간(ms)을 지정한다 var lastExecution = new Date(new Date().getTime() - timeWindow) // ES6 이하일 경우 ...args에 호출할 parameter 만큼 준다 function(arg1, arg2...) var throttleFunction = function(...args) &#123; // 여기에 로직을 구현한다 &#125; return function() &#123; if (lastExecution.getTime() + timeWindow &lt;= new Date().getTime()) &#123; lastExecution = new Date() return throttleFunction.apply(this, arguments) &#125; &#125;&#125;)()// 사용법throttleFunction(param1, param2) Debounce마지막 호출로부터 ms 후에 함수를 한번 호출한다.지연된 호출을 할 수 있게 해주는데, 호출이 반복되는 동안은 실행을 방지하고, 호출이 멈춘 뒤 지정한 ms 후에 함수를 실행해 성능 저하를 막을 수 있다.검색 자동완성 기능에 적합하다. 소스1234567891011121314151617181920212223var debounceFunction = (function() &#123; \"use strict\" var timeWindow = 500 // 여기에 시간(ms)을 지정한다 var timeout // ES6 이하일 경우 ...args에 호출할 parameter 만큼 준다 function(arg1, arg2...) var debounceFunction = function(...args) &#123; // 여기에 로직을 구현한다 &#125; return function() &#123; var context = this var args = arguments clearTimeout(timeout) timeout = setTimeout(function() &#123; debounceFunction.apply(context, args) &#125;, timeWindow) &#125;&#125;)()// 사용법debounceFunction(param1, param2) 여담즐겨 사용하는 sublime text package 인 javascript patterns에서 참조했다.lodash를 사용한다면 debounce, throttle로 더 쉽게 사용할 수 있다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"lodash","slug":"lodash","permalink":"https://gracefullight.dev/tags/lodash/"},{"name":"throttle","slug":"throttle","permalink":"https://gracefullight.dev/tags/throttle/"},{"name":"debounce","slug":"debounce","permalink":"https://gracefullight.dev/tags/debounce/"}]},{"title":"UMD Patterns","slug":"UMD-Patterns","date":"2016-12-22T09:57:00.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/22/UMD-Patterns/","link":"","permalink":"https://gracefullight.dev/2016/12/22/UMD-Patterns/","excerpt":"","text":"UMD (Universal Module Definition) Pattern 이란AMD (requireJS), CommonJS (node), 일반 browser 환경에서 통합해서 쓸 수 있는 javascript module pattern 이다.jQuery, moment, D3 등의 라이브러리에서도 해당 패턴을 사용한다. 예제 - jQeury 종속형새로 만들 예제의 모듈명은 module1 이고 jQuery 에 종속적이라고 가정한다.1234567891011121314151617181920;(function(global, factory) &#123; if (typeof define === \"function\" &amp;&amp; define.amd) &#123; // AMD 환경 define([\"exports\", \"jquery\"], factory) &#125; else if ( typeof exports === \"object\" &amp;&amp; typeof exports.nodeName !== \"string\" ) &#123; // CommonJS 환경 factory(exports, require(\"jquery\")) &#125; else &#123; // 일반 브라우저 factory((global.module1 = global.module1 || &#123;&#125;), global.$) &#125;&#125;)(this, function(exports, $) &#123; // module1의 private 기능 구현 // exports에 public function을 붙혀주면 된다. exports.action = function() &#123;&#125;&#125;)종속되는 모듈을 추가하려면, AMD 는 배열안에, commonJS 와 일반은 파라미터로 추가한 뒤 12 번째 줄의 콜백함수 안에 원하는 변수로 받으면 된다. 예제 - 기본형1234567891011121314;(function(global, factory) &#123; if (typeof define === \"function\" &amp;&amp; define.amd) &#123; define([\"exports\"], factory) &#125; else if ( typeof exports === \"object\" &amp;&amp; typeof exports.nodeName !== \"string\" ) &#123; factory(exports) &#125; else &#123; factory((global.module1 = global.module1 || &#123;&#125;)) &#125;&#125;)(this, function(exports) &#123; exports.action = function() &#123;&#125;&#125;)즉시실행 함수에 window 객체와 함수를 파라미터로 보내서 전역 객체를 생성하는 방식이다. 예제 - 3 항연산자 사용1234567(function (global, factory) &#123; typeof exports === 'object' &amp;&amp; typeof module !== 'undefined' ? factory(exports) : typeof define === 'function' &amp;&amp; define.amd ? define(['exports'], factory) : (factory((global.module1 = global.module1 || &#123;&#125;)));&#125;(this, (function (exports) &#123; exports.action = function () &#123;&#125;;&#125;)); 설명window 객체 안에 모듈이 선언되므로, module1.action(); 으로 바로 호출해 사용하면 된다.더 자세한 설명을 보고싶다면 umd를 참조하면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"umd","slug":"umd","permalink":"https://gracefullight.dev/tags/umd/"}]},{"title":"jsonp function","slug":"jsonp-function","date":"2016-12-22T09:04:28.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/22/jsonp-function/","link":"","permalink":"https://gracefullight.dev/2016/12/22/jsonp-function/","excerpt":"","text":"jsonp (json with padding)은 다른 서버의 데이터를 내 브라우저에서 호출하기 위해 사용한다.client 에서 callback 함수명과 전송할 값을 같이 보내어 server 에서 callback 함수 안에 data 를 담아 반환하는 방식이다.전송할 값을 보낼 때, script 태그를 사용한다. 소스123456789101112function jsonp(url, callback) &#123; var callbackName = \"jsonp_\" + Math.round(100000 * Math.random()) window[callbackName] = function(data) &#123; delete window[callbackName] document.body.removeChild(script) callback(data) &#125; var script = document.createElement(\"script\") script.src = url + (url.indexOf(\"?\") &gt;= 0 ? \"&amp;\" : \"?\") + \"callback=\" + callbackName document.body.appendChild(script)&#125;stackoverflow 에서 가져온 소스인데 현재 출처를 찾을 수 없다. 설명임의의 함수명으로 callback 함수를 생성한 뒤 script 태그를 생성해 server 와 통신한다. 예제123jsonp(\"http://aaa.com?data=\" + data, function(result) &#123; console.log(result)&#125;) 여담jQuery 가 있다면 jQuery ajax의 dataType 을 jsonp 로 설정해주면 되고,요새는 CORS 를 적용해 그냥 호출하는 방식으로 가는 추세다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"jsonp","slug":"jsonp","permalink":"https://gracefullight.dev/tags/jsonp/"}]},{"title":"Object freeze, seal, preventExtensions - 객체 수정 제어","slug":"Object-freeze-seal-preventExtensions-객체-수정-제어","date":"2016-12-22T07:44:30.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/Object-freeze-seal-preventExtensions-객체-수정-제어/","link":"","permalink":"https://gracefullight.dev/2016/12/22/Object-freeze-seal-preventExtensions-%EA%B0%9D%EC%B2%B4-%EC%88%98%EC%A0%95-%EC%A0%9C%EC%96%B4/","excerpt":"","text":"es5 부터 객체의 수정을 제어할 수 있다.ie9 부터 지원하고, ie8 은 es5-sham을 추가하면 된다. freeze method객체를 불변으로 만든다. 예제12345678910111213141516171819var frozenObject = &#123; value1: 1, value2: 2&#125;Object.freeze(frozenObject)console.log(Object.isFrozen(frozenObject)) // true// 삭제 불가delete frozenObject.value1console.log(frozenObject.value1) // 1// 변경 불가frozenObject.value2 = 3console.log(frozenObject.value2) // 2// 객체 추가 불가frozenObject.value3 = 3console.log(frozenObject.value3) // undefined seal method확장, 축소는 불가능하지만 writable 쓰기 가능하다. 예제12345678910111213141516171819var sealedObject = &#123; value1: 1, value2: 2&#125;Object.seal(sealedObject)console.log(Object.isSealed(sealedObject)) // true// 삭제 불가delete sealedObject.value1console.log(sealedObject.value1) // 1// 변경 가능sealedObject.value2 = 3console.log(sealedObject.value2) // 3// 객체 추가 불가sealedObject.value3 = 3console.log(sealedObject.value3) // undefined preventExtensions method확장만 불가능하다. 예제12345678910111213141516171819var preventExtensionObject = &#123; value1: 1, value2: 2&#125;Object.preventExtensions(preventExtensionObject)console.log(Object.isExtensible(preventExtensionObject)) // false// 삭제 가능delete preventExtensionObject.value1console.log(preventExtensionObject.value1) // undefined// 변경 가능preventExtensionObject.value2 = 3console.log(preventExtensionObject.value2) // 3// 객체 추가 불가preventExtensionObject.value3 = 3console.log(preventExtensionObject.value3) // undefined 설명불변하게 하려면 얼리고,수정이 가능하게 하려면 봉인하고추가만 불가능하게 하려면 확장방지하자client 에서 객체 변조를 못하게 전역변수를 얼려버리자 여담freeze 는 중첩된 object 에 적용이 안 되는데,이 때 deepFreeze 함수를 사용해 재귀적으로 객체를 얼려버리면 된다. deepFreeze methodmdn을 참조했다. 소스12345678910111213141516function deepFreeze(obj) &#123; if (!Object.isFrozen(obj)) &#123; Object.freeze(obj) &#125; for (var key in obj) &#123; if ( &#123;&#125;.hasOwnProperty.call(obj, key) || !(typeof obj[key] === \"function\" || (typeof obj[key] === \"object\" &amp;&amp; !!obj[key])) ) &#123; continue &#125; deepFreeze(obj[key]) &#125;&#125;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"es5","slug":"es5","permalink":"https://gracefullight.dev/tags/es5/"}]},{"title":"Javascript 기본값 연산자 (축약된 삼항연산자)","slug":"Javascript-기본값-연산자-축약된-삼항연산자","date":"2016-12-22T06:15:46.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/Javascript-기본값-연산자-축약된-삼항연산자/","link":"","permalink":"https://gracefullight.dev/2016/12/22/Javascript-%EA%B8%B0%EB%B3%B8%EA%B0%92-%EC%97%B0%EC%82%B0%EC%9E%90-%EC%B6%95%EC%95%BD%EB%90%9C-%EC%82%BC%ED%95%AD%EC%97%B0%EC%82%B0%EC%9E%90/","excerpt":"","text":"Javascript 기본값 연산자 (축약된 삼항연산자)한번 쓰면 헤어나올 수 없는 기본값 연산자에 대해 알아보자. 소스123// JavaScript syntax to set a default valuevar text = someString || \"default text\"var text2 = someString || someString2 || \"default text2\" 설명someString 이 있으면 someString 을 반환, 아니면 default text 를 반환한다.계속 붙혀나가면서 쓸 수 있다.php7 에서는 해당 기능이 추가되었다. || 대신에 ?? 를 사용하면 된다.lodash 에선 defaultTo를 사용하면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"링크 클릭시 return false가 페이지에 그대로 출력될 때","slug":"링크-클릭시-return-false가-페이지에-그대로-출력될-때","date":"2016-12-22T04:13:35.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2016/12/22/링크-클릭시-return-false가-페이지에-그대로-출력될-때/","link":"","permalink":"https://gracefullight.dev/2016/12/22/%EB%A7%81%ED%81%AC-%ED%81%B4%EB%A6%AD%EC%8B%9C-return-false%EA%B0%80-%ED%8E%98%EC%9D%B4%EC%A7%80%EC%97%90-%EA%B7%B8%EB%8C%80%EB%A1%9C-%EC%B6%9C%EB%A0%A5%EB%90%A0-%EB%95%8C/","excerpt":"","text":"링크를 클릭했는데, 페이지에 return false;가 찍혀나오는 경우가 있다. 소스12345678910111213&lt;script&gt;function test() &#123; if (true) &#123; return false; &#125;&#125;&lt;/script&gt;&lt;!-- 페이지에 return false;가 출력됨 --&gt;&lt;a href='javascript:test();'&gt;테스트&lt;/a&gt;&lt;!-- 대체 --&gt;&lt;a href='javascript://' onClick='test();'&gt;테스트&lt;/a&gt; 설명a href 속성 안에 javascript 를 사용시 발생한다.javascript 호출문인 onClick 을 이용하자.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"페이징시 Row의 순번(인덱스) 구하기","slug":"페이징시-Row의-순번-인덱스-구하기","date":"2016-12-22T03:58:57.000Z","updated":"2020-03-15T14:22:42.392Z","comments":true,"path":"2016/12/22/페이징시-Row의-순번-인덱스-구하기/","link":"","permalink":"https://gracefullight.dev/2016/12/22/%ED%8E%98%EC%9D%B4%EC%A7%95%EC%8B%9C-Row%EC%9D%98-%EC%88%9C%EB%B2%88-%EC%9D%B8%EB%8D%B1%EC%8A%A4-%EA%B5%AC%ED%95%98%EA%B8%B0/","excerpt":"","text":"전체 레코드 수와 현재 페이지 번호, 페이지에 표시되는 레코드의 수를 안다면 쉽게 구할 수 있다. 소스1234567var totalCountvar currentPageNumvar shownRowNumfor (var i = 0, len = data.length; i &lt; len; i++) &#123; var index = Number(totalCount) - (i + (currentPageNum - 1) * shownRowNum)&#125; 여담매번 공식을 알아내는게 귀찮아서 포스팅","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"Cross Domain Login 중 세션 생성시 IE 오류","slug":"Cross-Domain-Login-중-세션-생성시-IE-오류","date":"2016-12-22T03:46:21.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/Cross-Domain-Login-중-세션-생성시-IE-오류/","link":"","permalink":"https://gracefullight.dev/2016/12/22/Cross-Domain-Login-%EC%A4%91-%EC%84%B8%EC%85%98-%EC%83%9D%EC%84%B1%EC%8B%9C-IE-%EC%98%A4%EB%A5%98/","excerpt":"","text":"aaa.com 에서 bbb.com 의 세션을 jsonp 방식을 활용해서 생성하고 싶을 때,유독 IE 에서만 세션 생성이 안되는 경우가 있다.이는 P3P (Platform for Personal Preferences) 규약이 적용되어 세션을 가져오지 않는 것인데, 아래와 같은 방법으로 해결할 수 있다. 소스12345678910111213141516171819&lt;!-- 세션을 만들어줄 서버에서 P3P 헤더를 설정 --&gt;&lt;?phpheader('P3P: CP=\"CAO PSA OUR\"');?&gt;&lt;!-- 세션을 가지고 오는 클라이언트 요청--&gt;&lt;script&gt;$.ajax(&#123; url:'cross domain session create url', type:'post', data:&#123; token1 : 'token1', token2 : 'token2' &#125;, dataType:'jsonp'&#125;).then(function (result) &#123;&#125;);&lt;/script&gt;","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"php","slug":"php","permalink":"https://gracefullight.dev/tags/php/"},{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"session","slug":"session","permalink":"https://gracefullight.dev/tags/session/"}]},{"title":"가장 빠른 배열 중복 제거 알고리즘","slug":"가장-빠른-배열-중복-제거-알고리즘","date":"2016-12-22T03:37:11.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2016/12/22/가장-빠른-배열-중복-제거-알고리즘/","link":"","permalink":"https://gracefullight.dev/2016/12/22/%EA%B0%80%EC%9E%A5-%EB%B9%A0%EB%A5%B8-%EB%B0%B0%EC%97%B4-%EC%A4%91%EB%B3%B5-%EC%A0%9C%EA%B1%B0-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/","excerpt":"","text":"가장 빠른 배열 중복 제거 알고리즘통계 사용시에 중복을 제거해야하는 경우가 있다. 소스1234567891011121314151617181920212223242526272829303132333435/* @author http://www.shamasis.net/2009/09/fast-algorithm-to-find-unique-items-in-javascript-array/*/// prototypeArray.prototype.unique = function() &#123; var o = &#123;&#125;, i, r = []; var l = this.length; for (i = 0; i &lt; l; i++) &#123; o[this[i]] = this[i]; &#125; for (i in o) &#123; r.push(o[i]); &#125; return r;&#125;;// functionvar uniqueArray = function(arr)&#123; var o = &#123;&#125;, i, r=[]; var l = arr.length; for (i = 0; i &lt; l; i++) &#123; o[arr[i]] = arr[i]; &#125; for (i in o) &#123; r.push(o[i]); &#125; return r;&#125;; 예제123456var testArray = [1, 2, 1, 3]testArray = testArray.unique()testArray = uniqueArray(testArray)console.log(testArray) // [ 1, 2, 3 ]; 여담언더스코어를 알게된 후로는 lodash의 uniq나 uniqBy를 사용한다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"lodash","slug":"lodash","permalink":"https://gracefullight.dev/tags/lodash/"}]},{"title":"Javascript Unix Timestamp","slug":"Javascript-Unix-Timestamp","date":"2016-12-22T03:30:44.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/22/Javascript-Unix-Timestamp/","link":"","permalink":"https://gracefullight.dev/2016/12/22/Javascript-Unix-Timestamp/","excerpt":"","text":"API 통신시 Unix Timestamp가 필요한 경우가 있다. 소스1234// === PHP time();var timestamp = Math.round(new Date().getTime() / 1000)// 또는// new Date().getTime() 을 Date.now() 로 바꿀 수 있다. 여담lodash 라이브러리를 사용하면 _.now() 함수로 현재 타임스탬프를 가져올 수 있다.소스처럼 1,000으로 나눠줘야한다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"timestamp","slug":"timestamp","permalink":"https://gracefullight.dev/tags/timestamp/"}]},{"title":"숫자 3자리 단위로 comma 추가 - 정규식 활용","slug":"숫자-3자리-단위로-comma-추가-정규식-활용","date":"2016-12-21T14:48:07.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2016/12/21/숫자-3자리-단위로-comma-추가-정규식-활용/","link":"","permalink":"https://gracefullight.dev/2016/12/21/%EC%88%AB%EC%9E%90-3%EC%9E%90%EB%A6%AC-%EB%8B%A8%EC%9C%84%EB%A1%9C-comma-%EC%B6%94%EA%B0%80-%EC%A0%95%EA%B7%9C%EC%8B%9D-%ED%99%9C%EC%9A%A9/","excerpt":"","text":"소스123456789// functionfunction comma(num) &#123; return num.toString().replace(/\\B(?=(\\d&#123;3&#125;)+(?!\\d))/g, \",\")&#125;// prototypeNumber.prototype.format = function() &#123; return this.toString().replace(/\\B(?=(\\d&#123;3&#125;)+(?!\\d))/g, \",\")&#125; 설명첫번째는 함수 호출방식이고, 두번째는 NumberValue.format(); 으로 호출하면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"숫자를 한글 숫자로 변환","slug":"숫자를-한글-숫자로-변환","date":"2016-12-21T14:32:31.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2016/12/21/숫자를-한글-숫자로-변환/","link":"","permalink":"https://gracefullight.dev/2016/12/21/%EC%88%AB%EC%9E%90%EB%A5%BC-%ED%95%9C%EA%B8%80-%EC%88%AB%EC%9E%90%EB%A1%9C-%EB%B3%80%ED%99%98/","excerpt":"","text":"가끔 견적서에 한글 숫자를 써야할 때가 있다. 소스12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061/** * [num2han 숫자를 한글로 변환] * @param &#123;[integer]&#125; num [숫자] * @return &#123;[string]&#125; [한글 숫자] * @author http://www.phpschool.com/gnuboard4/bbs/board.php?bo_table=tipntech&amp;wr_id=14981 */var num2han = function (num) &#123; var i, j = 0, k = 0 var han1 = [\"\", \"일\", \"이\", \"삼\", \"사\", \"오\", \"육\", \"칠\", \"팔\", \"구\"] var han2 = [\"\", \"만\", \"억\", \"조\", \"경\", \"해\", \"시\", \"양\", \"구\", \"간\"] var han3 = [\"\", \"십\", \"백\", \"천\"] var result = \"\" var hangul = String(num) var pm = \"\" // 부호 var str = [], str2 = \"\" var strTmp = [] if (Number(num) === 0) &#123; return \"영\" &#125; if (hangul.substring(0, 1) === \"-\") &#123; pm = \"마이너스 \" hangul = hangul.substring(1, hangul.length) &#125; if (hangul.length &gt; han2.length * 4) &#123; return \"too much number\" &#125; for (i = hangul.length; i &gt; 0; i = i - 4) &#123; str[j] = hangul.substring(i - 4, i) for (k = str[j].length; k &gt; 0; k--) &#123; strTmp[k] = str[j].substring(k - 1, k) ? str[j].substring(k - 1, k) : \"\" strTmp[k] = han1[parseInt(strTmp[k])] if (strTmp[k]) &#123; strTmp[k] += han3[str[j].length - k] &#125; str2 = strTmp[k] + str2 &#125; str[j] = str2 if (str[j]) &#123; result = str[j] + han2[j] + result &#125; // 4자리마다 한칸씩 띄고 보여준다. //result = (str[j])? \" \"+str[j]+han2[j]+result : \" \" + result; j++ str2 = \"\" &#125; return pm + result&#125; 설명숫자를 파라미터로 보내 사용하면 변환된 한글 숫자가 리턴된다.출처는 소스상에 남겼다. 해당 스크립트를 문법에 맞게 조금 변경했다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]},{"title":"jQuery Validation Custom Methods","slug":"jQuery-Validation-Custom-Methods","date":"2016-12-21T14:31:13.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/21/jQuery-Validation-Custom-Methods/","link":"","permalink":"https://gracefullight.dev/2016/12/21/jQuery-Validation-Custom-Methods/","excerpt":"","text":"기본적으로 사용하는 기능 외에 custom method 를 추가해서 validation 을 해보자. 목차사업자등록번호법인등록번호바이트 제한아이디 체크 (alphanumeric, 숫자 첫글자 불가능)비밀번호 체크 (alpah &amp;&amp; (number || special char))datetime (YYYY-MM-DD HH:mm:ss)date (YYYY-MM-DD)Kakaotalk Yellow IDalphanumeric (hyphen, underscore, space 포함)phone (hyphen 포함)mobile (hyphen 포함) 소스123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167;(function($) &#123; $.validator.addMethod( \"biznum\", function(bizID, element) &#123; var checkID = [1, 3, 7, 1, 3, 7, 1, 3, 5, 1] var tmpBizID, i, chkSum = 0, c2, remander bizID = bizID.replace(/-/gi, \"\") for (i = 0; i &lt;= 7; i++) &#123; chkSum += checkID[i] * bizID.charAt(i) &#125; c2 = \"0\" + checkID[8] * bizID.charAt(8) c2 = c2.substring(c2.length - 2, c2.length) chkSum += Math.floor(c2.charAt(0)) + Math.floor(c2.charAt(1)) remander = (10 - (chkSum % 10)) % 10 return this.optional(element) || Math.floor(bizID.charAt(9)) === remander &#125;, \"사업자등록번호 형식에 맞지 않습니다\" ) $.validator.addMethod( \"corpnum\", function(corpID, element) &#123; var result = true if (corpID.length === 13) &#123; var arr_regno = corpID.split(\"\") var arr_wt = [1, 2, 1, 2, 1, 2, 1, 2, 1, 2, 1, 2] var iSum_regno = 0 var iCheck_digit = 0 for (i = 0; i &lt; 12; i++) &#123; iSum_regno += Number(arr_regno[i]) * Number(arr_wt[i]) &#125; iCheck_digit = 10 - (iSum_regno % 10) iCheck_digit = iCheck_digit % 10 if (iCheck_digit !== arr_regno[12]) &#123; result = false &#125; &#125; else &#123; result = false &#125; return this.optional(element) || result &#125;, \"법인등록번호 형식에 맞지 않습니다\" ) $.validator.addMethod( \"byte\", function(str, element, param) &#123; var byte = 0 var result = true for (var i = 0, len = text.length; i &lt; len; i++) &#123; if (escape(text.charAt(i)).length &gt; 4) &#123; byte = byte + 2 &#125; else &#123; byte = byte + 1 &#125; &#125; if (byte &gt; param) &#123; result = false &#125; return this.optional(element) || result &#125;, \"최대 Byte 값을 넘었습니다\" ) // id 체크 (alphanumeric, _- 가능, 숫자가 처음에 올수 없음) $.validator.addMethod( \"user\", function(id, element) &#123; return ( this.optional(element) || /^([a-zA-Z])[a-zA-Z_-]*[\\w_-]*[\\S]$|^([a-zA-Z])[0-9_-]*[\\S]$|^[a-zA-Z]*[\\S]$/.test( id ) ) &#125;, \"올바른 아이디 형식이 아닙니다\" ) // pw 영문 &amp;&amp; (숫자 || 특수문자) $.validator.addMethod( \"pass\", function(pass, element) &#123; return ( this.optional(element) || /^(?=.*[a-zA-Z])((?=.*\\d)|(?=.*\\W))./.test(pass) ) &#125;, \"올바른 비밀번호 형식이 아닙니다\" ) // datetime 형식 $.validator.addMethod( \"datetime\", function(datetime, element) &#123; return ( this.optional(element) || /^\\d&#123;4&#125;-(0[1-9]|1[0-2])-([0-2]\\d|3[01]) (0\\d|1\\d|2[0-3]):[0-5]\\d:[0-5]\\d$/.test( datetime ) ) &#125;, \"올바른 날짜, 시간형식이 아닙니다\" ) // date 형식 $.validator.addMethod( \"date\", function(dt, element) &#123; return ( this.optional(element) || /^\\d&#123;4&#125;-(0[1-9]|1[0-2])-([0-2]\\d|3[01])$/.test(dt) ) &#125;, \"올바른 날짜 형식이 아닙니다\" ) // 옐로아이디 형식 $.validator.addMethod( \"yellowid\", function(yid, element) &#123; return this.optional(element) || /^@[\\W|\\w]&#123;2,15&#125;/.test(yid) &#125;, \"올바른 옐로아이디가 아닙니다\" ) // alpahnumeric _ - space $.validator.addMethod( \"alphanumeric\", function(v, element) &#123; return this.optional(element) || /^[a-zA-Z\\d\\-_\\s]+$/.test(v) &#125;, \"올바른 형식이 아닙니다\" ) // 하이픈을 포함한 전화번호 $.validator.addMethod( \"phone\", function(p, element) &#123; return this.optional(element) || /^\\d&#123;2,3&#125;-\\d&#123;3,4&#125;-\\d&#123;4&#125;$/.test(p) &#125;, \"올바른 전화번호 형식이 아닙니다\" ) // 하이픈을 포함한 휴대폰 번호 $.validator.addMethod( \"mobile\", function(m, element) &#123; return ( this.optional(element) || /^01([0|1|6|7|8|9]?)-(\\d&#123;3,4&#125;)-(\\d&#123;4&#125;)$/.test(m) ) &#125;, \"올바른 휴대폰 번호 형식이 아닙니다\" )&#125;)(jQuery) 설명biznum, byte…와 같은 속성을 추가해 사용하면 된다.필요한 부분만 복사해 가져가도 되고. 예제12345678910$('form').validate(&#123; rules:&#123; text_field: &#123;byte:80&#125;, date_field: &#123;date:true&#125; &#125;, messages:&#123; text_field: &#123;byte:'80자 초과'&#125; date_field: &#123;date:'날짜 형식 아님'&#125; &#125;&#125;); 여담byte check 의 함수 로직이 많지만, 한글 및 특수문자를 2byte 로 정확히 체크해주는 것은 위의 함수 뿐이였다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"validation","slug":"javascript/validation","permalink":"https://gracefullight.dev/categories/javascript/validation/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"validation","slug":"validation","permalink":"https://gracefullight.dev/tags/validation/"}]},{"title":"jQuery Validation과 Materialize의 연동","slug":"jQuery-Validation과-Materialize의-연동","date":"2016-12-21T14:00:18.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/21/jQuery-Validation과-Materialize의-연동/","link":"","permalink":"https://gracefullight.dev/2016/12/21/jQuery-Validation%EA%B3%BC-Materialize%EC%9D%98-%EC%97%B0%EB%8F%99/","excerpt":"","text":"jQuery Validation with Materialize CSSMaterialize CSS 와 연동해 사용할 수 있다. 소스12345678910111213141516171819202122232425262728// p 태그를 이용하는 방법$.validator.setDefaults(&#123; errorClass: \"invalid form-error red-text\", errorElement: \"p\", errorPlacement: function (error, element) &#123; var e = element.get(0) if (e.type === \"radio\" || e.type === \"checkbox\") &#123; var $a = error.appendTo(element.parent()) $a.css(&#123; \"margin-top\": \"10px\" &#125;) &#125; else &#123; error.appendTo(element.parent()) &#125; &#125;&#125;)// 더 예쁜 방법$.validator.setDefaults(&#123; errorClass: \"invalid\", validClass: \"valid\", errorPlacement: function (error, element) &#123; var $label = $(element) .closest(\"form\") .find(\"label[for='\" + element.attr(\"id\") + \"']\") $label.attr(\"data-error\", error.text()) $label.addClass(\"active\") &#125;&#125;) 여담bootstrap tooltip 을 활용한 validation 처럼 toast 를 활용한 플러그인이 나오면 좋으련만…","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"validation","slug":"javascript/validation","permalink":"https://gracefullight.dev/categories/javascript/validation/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"materialize","slug":"materialize","permalink":"https://gracefullight.dev/tags/materialize/"},{"name":"validation","slug":"validation","permalink":"https://gracefullight.dev/tags/validation/"}]},{"title":"jQuery Validation Error Handling 및 focus, target 설정","slug":"jQuery-Validation-Error-Handling-및-focus-target-설정","date":"2016-12-21T11:38:08.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/21/jQuery-Validation-Error-Handling-및-focus-target-설정/","link":"","permalink":"https://gracefullight.dev/2016/12/21/jQuery-Validation-Error-Handling-%EB%B0%8F-focus-target-%EC%84%A4%EC%A0%95/","excerpt":"","text":"기본 기능만으론 checkbox 나 radio 사용시에 첫번째 element 뒤에 글자가 삽입이 되서 위치를 지정해주어야한다. 소스123456789101112131415161718192021222324&lt;script&gt;$.validator.setDefaults(&#123; onfocusout: false, invalidHandler: function (form, validator) &#123; // 커스텀 포커스 핸들링 if (validator.numberOfInvalids()) &#123; validator.errorList[0].element.focus(); //alert(validator.errorList[0].message); // 경고창 &#125; &#125;, errorClass:'text-danger', // 에러 스타일을 입힐 클래스 지정 errorPlacement : function (error, element)&#123; // data-error 속성으로 해당 위치 삽입 var placement = $(element).data('error'); if (placement) &#123; $(placement).append(error); &#125; else &#123; // 없을경우 마지막노드 뒤에 삽입 element.parent().children().last().after(error); &#125; &#125;&#125;);&lt;/script&gt;&lt;!-- data-error 속성 사용 예시 --&gt;&lt;input type=\"text\" name=\"id\" data-error=\"#id_error\"/&gt;&lt;p id=\"id_error\"&gt;&lt;/p&gt; 설명data-error attribute 를 통해 원하는 위치에 에러를 띄울 수 있고,그렇지 않을 경우 마지막 노드 뒤에 에러를 출력한다.7 줄에 주석을 지우면 첫번째 오류를 alert 으로 띄울 수 있다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"validation","slug":"javascript/validation","permalink":"https://gracefullight.dev/categories/javascript/validation/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"validation","slug":"validation","permalink":"https://gracefullight.dev/tags/validation/"}]},{"title":"비동기 이미지 업로드 - 리사이징 및 이미지 회전을 포함","slug":"비동기-이미지-업로드-리사이징-및-이미지-회전을-포함","date":"2016-12-21T10:28:12.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2016/12/21/비동기-이미지-업로드-리사이징-및-이미지-회전을-포함/","link":"","permalink":"https://gracefullight.dev/2016/12/21/%EB%B9%84%EB%8F%99%EA%B8%B0-%EC%9D%B4%EB%AF%B8%EC%A7%80-%EC%97%85%EB%A1%9C%EB%93%9C-%EB%A6%AC%EC%82%AC%EC%9D%B4%EC%A7%95-%EB%B0%8F-%EC%9D%B4%EB%AF%B8%EC%A7%80-%ED%9A%8C%EC%A0%84%EC%9D%84-%ED%8F%AC%ED%95%A8/","excerpt":"","text":"비동기 이미지 업로드비동기 업로드를 이용하면 멀티 이미지 업로드나 모바일 이미지 업로드를 쉽게 처리할 수 있다.모바일 이미지 업로드시에는 exif 속성에 따라 (카메라로 찍은 방향에 따라) 이미지가 회전되어서 올라가게 되고, 비율로 이미지를 표시해야 되기 때문에 리사이징이 필요하다.이 부분은 load-image 모듈을 사용하면 다 해결된다.아니라면… 사진 값을 바이너리로 읽어 처리해야한다. 설치12# bower install https://github.com/blueimp/JavaScript-Load-Image.git --save$ yarn add blueimp-load-image 소스123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178&lt;script type=\"text/javascript\"&gt; var imageModule = (function () &#123; 'use strict'; var possible = window.File &amp;&amp; window.FileReader &amp;&amp; window.FormData; // html5 업로드를 지원하는지의 여부 var apiPath = '/api/test.php'; // 업로드 서버 처리 경로 var folder = '/upload/review/'; // 기본 이미지 업로드 폴더 var $input; var maxWidth = 600; var maxHeight = 480; var imageArray = []; // callback에 사용할 이미지 파일명 배열 var callback; /** * [sendImageFile 이미지 비동기 업로드] * @scope &#123;[private]&#125; * @param &#123;[string]&#125; imageData [이미지 binary] * @return &#123;[function]&#125; callback [업로드 후처리] */ function sendImageFile(imageData) &#123; if (imageData) &#123; var formData = new FormData(); formData.append('type', 'upload'); formData.append('folder', folder); formData.append('imageData', imageData); $.ajax(&#123; type: 'post', url: apiPath, data: formData, dataType: 'json', contentType: false, // contentType header 제거 processData: false, // Dom 객체를 전송하려면 false 처리해야함 &#125;) .then(function (data) &#123; if (data.data) &#123; imageArray.push(data.data.file); // 이미지 배열에 저장 $input.val(''); if (callback) &#123; callback(imageArray); &#125; else &#123; console.log('callback function not initialized'); &#125; &#125; &#125;) .catch(function (error) &#123; console.log(\"upload fail: \", error); &#125;); &#125; else &#123; console.log('image data is null'); &#125; &#125; return &#123; /** * [init 이미지 모듈 초기화] * @param &#123;[string]&#125; fileId [변경할 input id] * @param &#123;[function]&#125; callbackFunc [후처리] * @param &#123;[object]&#125; settings [width, height, folder 설정가능] */ init: function (fileId, callbackFunc, settings) &#123; if (possible) &#123; if (typeof settings === 'object') &#123; if (settings.width) &#123; maxWidth = settings.width; &#125; if (settings.height) &#123; maxHeight = settings.height; &#125; if (settings.folder) &#123; folder = settings.folder; &#125; &#125; if ($.isFunction(callbackFunc)) &#123; callback = callbackFunc; &#125; else &#123; console.log('callback is not defined'); &#125; var options = &#123; maxWidth: maxWidth, // resize width 값 maxHeight: maxHeight, // resize height 값 canvas: true, // 사진을 돌리려면 canvas 객체로 받아야함 downsamplingRatio: 0.5 // 비율에 맞추어 크기 감소 &#125;; $input = $('#' + fileId); $input.on('change', function (e) &#123; e.preventDefault(); e = e.originalEvent; var target = e.dataTransfer || e.target; var file = target &amp;&amp; target.files &amp;&amp; target.files[0]; loadImage.parseMetaData(file, function (data) &#123; // exif js를 사용해 이미지의 tag를 가져옴 if (data.exif) &#123; options.orientation = data.exif.get('Orientation'); // 화면이 돌아간 비율을 지정 &#125; else &#123; if (options.orientation) &#123; options.orientation = null; &#125; &#125; // 캔버스 이미지 리사이징 처리 후 서버호출 loadImage(file, function (img) &#123; sendImageFile(img.toDataURL()); &#125;, options); &#125;); &#125;); &#125; else &#123; console.log('file upload is not supported'); &#125; &#125;, /** * [getFolder 업로드 경로 호출] * @return &#123;[string]&#125; [경로] */ getFolder: function () &#123; return folder; &#125;, /** * [delete 이미지 삭제] * @param &#123;[number]&#125; idx [이미지 배열의 인덱스] * @param &#123;[function]&#125; callbackFunc [delete 후처리] */ delete: function (idx, callbackFunc) &#123; if (imageArray[idx]) &#123; $.ajax(&#123; url: apiPath, type: 'post', data: &#123; type: 'delete', folder: folder, filename: imageArray[idx], &#125;, dataType: 'json' &#125;) .then(function (data) &#123; console.log('file delete success'); console.log(data); if ($.isFunction(callbackFunc)) &#123; callbackFunc(data); &#125; &#125;) .catch(function (error) &#123; console.log('server file delete failed'); console.log(error); &#125;) .done(function () &#123; imageArray.splice(idx, 1); $input.val(''); if (callback) &#123; callback(imageArray); &#125; else &#123; console.log('callback function not initialized'); &#125; &#125;); &#125; else &#123; console.log('delete index not defined'); &#125; &#125;, clear: function () &#123; console.log('clear array'); imageArray = []; &#125; &#125;; &#125;()); $(function () &#123; imageModule.init('fileInput', function (data) &#123; var folder = imageModule.getFolder(); var str = ''; for (var i = 0, len = data.length; i &lt; len; i++) &#123; str += '&lt;img src=\"' + folder + data[i] + '\" style=\"width:100%;height:100%;\"&gt;'; &#125; $('#area').html(str); $('#fileData').val(JSON.stringify(data)); &#125;, &#123;&#125;); // options, width height folder.. // &#123;width:500, height:300, folder:'/upload/board/'&#125; &#125;); // after insert into database $('#area').empty(); $('#fileData').val(''); imageModule.clear();&lt;/script&gt;&lt;input type=\"file\" name=\"imageFile\" id=\"fileInput\" /&gt; 설명코드양이 되게 긴데, 5-6 줄에서 업로드 서버 처리 경로 및 기본 업로드 폴더를 지정해준다.9-10 줄에서는 최대 가로 세로(px)을 지정해준다. 비율로 줄어들기 때문에 걱정하지말고 지정하자사용법은 169 줄 이후를 보면 된다.callback 함수를 통해 올라간 이미지를 바로 보여주게 처리할 수 있다.184 줄부터는 db 와의 통신이 끝난 후 화면을 초기화해주는 부분이다.127 줄의 imageModule.delete 함수를 사용해 업로드 된 사진을 삭제할 수 있다.현재는 api/test.php로 서버의 업로드 처리 로직을 구현해놨는데,type 을 받아 delete 일 경우 해당 이미지를 삭제,아닐 경우 binary 데이터를 이미지로 변환해주게 로직을 짜면 된다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"html5","slug":"html5","permalink":"https://gracefullight.dev/tags/html5/"},{"name":"loadimage","slug":"loadimage","permalink":"https://gracefullight.dev/tags/loadimage/"}]},{"title":"jQuery DateTimePicker와 Moment JS의 연동","slug":"jQuery-DateTimePicker와-Moment-JS의-연동","date":"2016-12-21T09:19:49.000Z","updated":"2020-03-15T14:22:42.384Z","comments":true,"path":"2016/12/21/jQuery-DateTimePicker와-Moment-JS의-연동/","link":"","permalink":"https://gracefullight.dev/2016/12/21/jQuery-DateTimePicker%EC%99%80-Moment-JS%EC%9D%98-%EC%97%B0%EB%8F%99/","excerpt":"","text":"Datetimepicker JS with Moment JS개발을 하다보면 datetime 이 같이 필요한 경우가 생긴다.pickadate 를 사용해 date 와 time picker 를 모두 사용해 만들 수도 있지만datetimepicker가 편하고 쉽다. 설치1234# datetimepicker$ bower install https://github.com/xdan/datetimepicker.git --save# moment$ bower install moment --save 예제12345678910111213141516171819202122232425262728293031&lt;link rel=\"stylesheet\" type=\"text/css\" href=\"/bower_components/datetimepicker/build/jquery.datetimepicker.min.css\"&gt;&lt;!-- php.date.formatter.js 와 jquery.mousewheeel.js 를 포함하는 full.js--&gt;&lt;!-- moment는 이미 선언되어있다고 가정합니다 --&gt;&lt;script src=\"/bower_components/datetimepicker/build/jquery.datetimepicker.full.min.js\"&gt;&lt;/script&gt;&lt;script&gt;// dateTimePicker localization$.datetimepicker.setLocale('ko');// dateTimePicker moment.js와 연동$.datetimepicker.setDateFormatter(&#123; parseDate: function (date, format) &#123; var d = moment(date, format); return d.isValid() ? d.toDate() : false; &#125;, formatDate: function (date, format) &#123; return moment(date).format(format); &#125;&#125;);$(function () &#123; // datetimepicker init $('.datetimepicker').datetimepicker(&#123; format:'YYYY-MM-DD HH:mm:ss', formatTime:'HH:mm', formatDate:'YYYY-MM-DD' &#125;);&#125;);&lt;/script&gt;&lt;input type=\"text\" name=\"startDate\" class=\"datetimepicker\"/&gt; ~ &lt;input type=\"text\" name=\"endDate\" class=\"datetimepicker\"/&gt; 여담pickadate 에서 datetime 을 같이 지원해주는 모듈도 만들어주면 얼마나 좋을까?","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"moment","slug":"moment","permalink":"https://gracefullight.dev/tags/moment/"},{"name":"datetimepicker","slug":"datetimepicker","permalink":"https://gracefullight.dev/tags/datetimepicker/"}]},{"title":"Clipboard JS 사용법 - 브라우저 텍스트 복사","slug":"Clipboard-JS-사용법-브라우저-텍스트-복사","date":"2016-12-21T08:57:06.000Z","updated":"2020-03-15T14:22:42.380Z","comments":true,"path":"2016/12/21/Clipboard-JS-사용법-브라우저-텍스트-복사/","link":"","permalink":"https://gracefullight.dev/2016/12/21/Clipboard-JS-%EC%82%AC%EC%9A%A9%EB%B2%95-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-%ED%85%8D%EC%8A%A4%ED%8A%B8-%EB%B3%B5%EC%82%AC/","excerpt":"","text":"Clipboard JS텍스트 복사는 zeroclipboard 를 사용하라고 많이 나오는데, flash 를 이용해 복사하는 방법이다.더 쉽고 간편하게 ClipboardJS 라이브러리를 사용해보자 설치1234# npm$ npm install clipboard --save$ yarn add clipboard 소스12345678910111213141516171819202122232425262728&lt;script src=\"/bower_components/clipboard/dist/clipboard.min.js\"&gt;&lt;/script&gt;&lt;!-- 1. URL copy --&gt;&lt;a href=\"#\" id=\"btnCopyUrl\" data-clipboard-action=\"copy\" &gt;url 복사&lt;/a&gt;&lt;script&gt;$(function (&#123; // 복사 버튼을 만들시 data-clipboard-text 안에 복사할 문구를 넣어준다 $('#btnCopyUrl').attr('data-clipboard-text', document.location.href); // callback 설정 var clipboard = new Clipboard('#btnCopyUrl'); clipboard.on('success', function(e) &#123; alert('복사되었습니다'); &#125;); clipboard.on('error', function(e) &#123; console.log(e); &#125;);&#125;);&lt;/script&gt;&lt;!-- 2. Text copy --&gt;&lt;textarea id=\"textBody\" cols=\"30\" rows=\"5\"&gt;&lt;/textarea&gt;&lt;button type=\"button\" id=\"btnCopyText\" data-clipboard-action=\"copy\" data-clipboard-target=\"#textBody\"&gt;텍스트복사&lt;/button&gt; 설명html5 attribute 를 사용해 쉽게 제어가 가능하다.신규 브라우저들은 다 지원하지만 (window.clipboard 객체가 있는 브라우저)iPhone 에선 clipboard 액세스가 모두 막혀있어서 복사를 할 수 없다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"},{"name":"clipboardjs","slug":"clipboardjs","permalink":"https://gracefullight.dev/tags/clipboardjs/"}]},{"title":"다음 주소 검색 API, 함수 하나로 설명 끝","slug":"다음-주소-검색-API-함수-하나로-설명-끝","date":"2016-12-21T06:33:00.000Z","updated":"2020-03-15T14:22:42.388Z","comments":true,"path":"2016/12/21/다음-주소-검색-API-함수-하나로-설명-끝/","link":"","permalink":"https://gracefullight.dev/2016/12/21/%EB%8B%A4%EC%9D%8C-%EC%A3%BC%EC%86%8C-%EA%B2%80%EC%83%89-API-%ED%95%A8%EC%88%98-%ED%95%98%EB%82%98%EB%A1%9C-%EC%84%A4%EB%AA%85-%EB%81%9D/","excerpt":"","text":"다음 주소검색 API 소스123456789101112131415161718192021222324252627282930313233343536373839404142434445/** * [searchAddr 다음주소검색 API] * @return &#123;[JsonArray]&#125; [주소데이터] * &lt;script src=\"https://ssl.daumcdn.net/dmaps/map_js_init/postcode.v2.js\"&gt; 선행되어야함 */var searchAddr = function () &#123; new daum.Postcode(&#123; oncomplete: function (data) &#123; var fullAddr = ''; // 최종 주소 변수 var extraAddr = ''; // 조합형 주소 변수 var engAddr = ''; var zipcode = ''; // 사용자가 선택한 주소 타입에 따라 해당 주소 값을 가져온다. if (data.userSelectedType === 'R') &#123; // 사용자가 도로명 주소를 선택했을 경우 fullAddr = data.roadAddress; zipcode = data.zonecode; engAddr = data.roadAddressEnglish; //법정동명이 있을 경우 추가한다. if (data.bname !== '') &#123; extraAddr += data.bname; &#125; // 건물명이 있을 경우 추가한다. if (data.buildingName !== '') &#123; extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName); &#125; // 조합형주소의 유무에 따라 양쪽에 괄호를 추가하여 최종 주소를 만든다. fullAddr += (extraAddr !== '' ? ' ('+ extraAddr +')' : ''); &#125; else &#123; // 사용자가 지번 주소를 선택했을 경우(J) fullAddr = data.jibunAddress; zipcode = data.postcode; engAddr = data.jibunAddressEnglish; &#125; // 구버전일 경우 getElementById 로 변경 document.querySelector('#zip').value = zipcode; document.querySelector('#address').value = fullAddr; document.querySelector('#address_eng').value = engAddr; document.querySelector('#address_detail').focus(); &#125; &#125;).open();&#125;; 설명다음 주소검색 API 를 입맛에 맞게 조금 변경했다.","categories":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/categories/javascript/"},{"name":"etc","slug":"javascript/etc","permalink":"https://gracefullight.dev/categories/javascript/etc/"}],"tags":[{"name":"javascript","slug":"javascript","permalink":"https://gracefullight.dev/tags/javascript/"}]}]}